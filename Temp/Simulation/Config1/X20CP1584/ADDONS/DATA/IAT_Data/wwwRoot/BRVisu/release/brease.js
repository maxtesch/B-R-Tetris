var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,s){return n&&B(n,function(n,r){!i&&t(e,r)||(!s||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[r]=n:(e[r]||(e[r]={}),U(e[r],n,i,s)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var i,s,r,o,a,l,d,c,t=t&&t.split("/"),u=_.map,h=u&&u["*"];if(e){for(e=e.split("/"),s=e.length-1,_.nodeIdCompat&&Q.test(e[s])&&(e[s]=e[s].replace(Q,"")),"."===e[0].charAt(0)&&t&&(s=t.slice(0,t.length-1),e=s.concat(e)),s=e,r=0;r<s.length;r++)o=s[r],"."===o?(s.splice(r,1),r-=1):".."===o&&0!==r&&(1!=r||".."!==s[2])&&".."!==s[r-1]&&0<r&&(s.splice(r-1,2),r-=2);e=e.join("/")}if(n&&u&&(t||h)){s=e.split("/"),r=s.length;e:for(;0<r;r-=1){if(a=s.slice(0,r).join("/"),t)for(o=t.length;0<o;o-=1)if((n=m(u,t.slice(0,o).join("/")))&&(n=m(n,a))){i=n,l=r;break e}!d&&h&&m(h,a)&&(d=m(h,a),c=r)}!i&&d&&(i=d,l=c),i&&(s.splice(0,l,i),e=s.join("/"))}return(i=m(_.pkgs,e))?i:e}function i(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName)return t.parentNode.removeChild(t),!0})}function s(e){var t=m(_.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0}function r(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,i,s){var o,a,l=null,d=t?t.name:null,c=e,u=!0,h="";return e||(u=!1,e="_@r"+(F+=1)),e=r(e),l=e[0],e=e[1],l&&(l=n(l,d,s),a=m(P,l)),e&&(l?h=a&&a.normalize?a.normalize(e,function(e){return n(e,d,s)}):-1===e.indexOf("!")?n(e,d,s):e:(h=n(e,d,s),e=r(h),l=e[0],h=e[1],i=!0,o=w.nameToUrl(h))),i=!l||a||i?"":"_unnormalized"+(j+=1),{prefix:l,name:h,parentMap:t,unnormalized:!!i,url:o,originalName:c,isDefine:u,id:(l?l+"!"+h:h)+i}}function a(e){var t=e.id,n=m(D,t);return n||(n=D[t]=new w.Module(e)),n}function l(e,n,i){var s=e.id,r=m(D,s);!t(P,s)||r&&!r.defineEmitComplete?(r=a(e),r.error&&"error"===n?i(r.error):r.on(n,i)):"defined"===n&&i(P[s])}function d(e,t){var n=e.requireModules,i=!1;t?t(e):(v(n,function(t){(t=m(D,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||g.onError(e))}function c(){R.length&&(ha.apply(k,[k.length,0].concat(R)),R=[])}function h(e){delete D[e],delete L[e]}function f(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,s){var r=i.id,o=m(D,r);o&&!e.depMatched[s]&&!n[r]&&(m(t,r)?(e.defineDep(s,P[r]),e.check()):f(o,t,n))}),n[i]=!0)}function p(){var e,t,n=(e=1e3*_.waitSeconds)&&w.startTime+e<(new Date).getTime(),r=[],o=[],a=!1,l=!0;if(!A){if(A=!0,B(L,function(e){var d=e.map,c=d.id;if(e.enabled&&(d.isDefine||o.push(e),!e.error))if(!e.inited&&n)s(c)?a=t=!0:(r.push(c),i(c));else if(!e.inited&&e.fetched&&d.isDefine&&(a=!0,!d.prefix))return l=!1}),n&&r.length)return e=C("timeout","Load timeout for modules: "+r,null,r),e.contextName=w.contextName,d(e);l&&v(o,function(e){f(e,{},{})}),n&&!t||!a||!z&&!ea||S||(S=setTimeout(function(){S=0,p()},50)),A=!1}}function b(e){t(P,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=w.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=w.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function E(){var e;for(c();k.length;){if(e=k.shift(),null===e[0])return d(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));b(e)}}var A,I,w,x,S,_={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},D={},L={},O={},k=[],P={},V={},W={},F=1,j=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(_.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},I=function(e){this.events=m(O,e.id)||{},this.map=e,this.shim=m(_.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},I.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;V[e]||(V[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(s)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{i=w.execCb(n,s,t,i)}catch(t){e=t}else i=w.execCb(n,s,t,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else i=s;this.exports=i,this.map.isDefine&&!this.ignore&&(P[n]=i,g.onResourceLoad)&&g.onResourceLoad(w,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,s=o(e.prefix);this.depMaps.push(s),l(s,"defined",u(this,function(s){var r,c;c=m(W,this.map.id);var f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,v=w.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(s.normalize&&(f=s.normalize(f,function(e){return n(e,p,!0)})||""),s=o(e.prefix+"!"+f,this.map.parentMap),l(s,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(c=m(D,s.id))&&(this.depMaps.push(s),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable())):c?(this.map.url=w.nameToUrl(c),this.load()):(r=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],B(D,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&h(e.map.id)}),d(e)}),r.fromText=u(this,function(n,s){var l=e.name,c=o(l),u=M;s&&(n=s),u&&(M=!1),a(c),t(_.config,i)&&(_.config[l]=_.config[i]);try{g.exec(n)}catch(e){return d(C("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}u&&(M=!0),this.depMaps.push(c),w.completeLoad(l),v([l],r)}),s.load(e.name,v,r,_))})),w.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){L[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var i,s;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=m(x,e.id))return this.depExports[n]=i(this),void 0;this.depCount+=1,l(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}i=e.id,s=D[i],!t(x,i)&&s&&!s.enabled&&w.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(D,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:_,contextName:e,registry:D,defined:P,urlFetched:V,defQueue:k,Module:I,makeModuleMap:o,nextTick:g.nextTick,onError:d,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=_.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(_[t]||(_[t]={}),U(_[t],e,!0,!0)):_[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(W[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[n]=e}),_.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(_.paths[t]=e.location),_.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(D,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(s,r){function l(n,i,c){var u,h;return r.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?d(C("requireargs","Invalid require call"),c):s&&t(x,n)?x[n](D[s.id]):g.get?g.get(w,n,s,l):(u=o(n,s,!1,!0),u=u.id,t(P,u)?P[u]:d(C("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(s?"":". Use require([])")))):(E(),w.nextTick(function(){E(),h=a(o(null,s)),h.skipMap=r.skipMap,h.init(n,i,c,{enabled:!0}),p()}),l)}return r=r||{},U(l,{isBrowser:z,toUrl:function(e){var t,i=e.lastIndexOf("."),r=e.split("/")[0];return-1!==i&&("."!==r&&".."!==r||1<i)&&(t=e.substring(i,e.length),e=e.substring(0,i)),w.nameToUrl(n(e,s&&s.id,!0),t,!0)},defined:function(e){return t(P,o(e,s,!1,!0).id)},specified:function(e){return e=o(e,s,!1,!0).id,t(P,e)||t(D,e)}}),s||(l.undef=function(e){c();var t=o(e,s,!0),n=m(D,e);i(e),delete P[e],delete V[t.url],delete O[e],T(k,function(t,n){t[0]===e&&k.splice(n,1)}),n&&(n.events.defined&&(O[e]=n.events),h(e))}),l},enable:function(e){m(D,e.id)&&a(e).enable()},completeLoad:function(e){var n,i,r=m(_.shim,e)||{},o=r.exports;for(c();k.length;){if(i=k.shift(),null===i[0]){if(i[0]=e,n)break;n=!0}else i[0]===e&&(n=!0);b(i)}if(i=m(D,e),!n&&!t(P,e)&&i&&!i.inited){if(_.enforceDefine&&(!o||!da(o)))return s(e)?void 0:d(C("nodefine","No define call for "+e,null,[e]));b([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,t,n){var i,s,r;if((i=m(_.pkgs,e))&&(e=i),i=m(W,e))return w.nameToUrl(i,t,n);if(g.jsExtRegExp.test(e))i=e+(t||"");else{for(i=_.paths,e=e.split("/"),s=e.length;0<s;s-=1)if(r=e.slice(0,s).join("/"),r=m(i,r)){H(r)&&(r=r[0]),e.splice(0,s,r);break}i=e.join("/"),i+=t||(/^data\:|\?/.test(i)||n?"":".js"),i=("/"===i.charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":_.baseUrl)+i}return _.urlArgs?i+(-1===i.indexOf("?")?"?":"&")+_.urlArgs:i},load:function(e,t){g.load(w,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=y(e),w.completeLoad(e.id))},onScriptError:function(e){var t=y(e);if(!s(t.id))return d(C("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if(void 0===define){if(void 0!==requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}void 0!==require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,i){var s,r="_";return!H(e)&&"string"!=typeof e&&(s=e,H(t)?(e=t,t=n,n=i):e=[]),s&&s.context&&(r=s.context),(i=m(F,r))||(i=F[r]=g.s.newContext(r)),s&&i.configure(s),i.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.15",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var i=e&&e.config||{};if(z)return i=g.createNode(i,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){if(y||(y=e.parentNode),I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var i,s;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((i=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),i=N),i&&(e||(e=i.getAttribute("data-requiremodule")),s=F[i.getAttribute("data-requirecontext")])),(s?s.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),define("requireLib",function(){}),define("brease/config",{font:"Arial, Helvetica, sans-serif",undefinedTextReturnValue:"undefined key",visu:{activityCount:!1},ContentCaching:{preserveOldValues:!0},themeFolder:"release/"}),define("brease/core/Utils",[],function(){"use strict";var Utils={};Utils.defineProperty=function(e,t,n,i,s,r){var o={enumerable:void 0===i||i,configurable:void 0!==s&&s,writable:void 0!==r&&r,value:n};Object.defineProperty(e,t,o)},Utils.deepCopy=function(e){return i(e)},Utils.extendDeepToNew=function(e,t){return s(i(e),t)},Utils.toArray=function(e,t){var n;if(e){var i=e.length;if(n=[],t=void 0!==t?t:0,i>t)for(var s=t;s<i;s+=1)n.push(e[s])}return n},Utils.prependChild=function(e,t){if(e instanceof Node==!1)throw new SyntaxError("first argument has to be of type Node");if(t instanceof Node==!1)throw new SyntaxError("second argument has to be of type Node");null!==e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},Utils.elemContains=function(e,t){return $.contains(e,t)},Utils.parseElementData=function(e,t){var n="data-"+t,i=e.getAttribute(n),s;try{s=null!==i&&""!==i?JSON.parse(i.replace(/'/g,'"')):{}}catch(t){console.iatWarn("Illegal data in attribute "+n+" for widget "+e.id+", widget will have default values!"),s={}}return s},Utils.setDate=function(e,t,n,i,s){return void 0!==e&&("function"!=typeof e.setHours||isNaN(t)||e.setHours(t),"function"!=typeof e.setMinutes||isNaN(n)||e.setMinutes(n),"function"!=typeof e.setSeconds||isNaN(i)||e.setSeconds(i),"function"!=typeof e.setMilliseconds||isNaN(s)||e.setMilliseconds(s)),e};var e=1;Utils.uniqueID=function(t){var n=t||"abcdefghijklmnopqrstuvwxyz"[Math.ceil(25*Math.random())];return e+=1,n+"_"+e},Utils.radToDeg=function(e){return 180/Math.PI*e},Utils.degToRad=function(e){return e/180*Math.PI},Utils.isString=function(e){return"string"==typeof e||e instanceof String},Utils.isBlank=function(e){return!e||/^\s*$/.test(e)},Utils.isWidget=function(e){return e&&"function"==typeof e._bind&&void 0!==e.settings&&void 0!==e.settings.className&&-1!==e.settings.className.indexOf("widgets")},Utils.isObject=function(e){return e instanceof Object},Utils.isFunction=function(e){return"function"==typeof e},Utils.isNumeric=function(e){return!isNaN(e)&&""!==e&&!0!==e&&!1!==e&&null!==e},Utils.getter=function(e){return n("get",e)},Utils.setter=function(e){return n("set",e)},Utils.permission=function(e,t){var n=!1,i;if(!Array.isArray(e)||0===e.length)return n;if(!Array.isArray(t)||0===t.length)return n;if(e.length<t.length){for(i=0;i<e.length;i+=1)if(-1!==t.indexOf(e[i])){n=!0;break}}else for(i=0;i<t.length;i+=1)if(-1!==e.indexOf(t[i])){n=!0;break}return n},Utils.getScaleFactor=function(e){var t=1;if(e instanceof Element&&"function"==typeof e.getBoundingClientRect){var n=$(e).outerWidth();n>0&&(t=e.getBoundingClientRect().width/n)}return t},Utils.closestWidgetElem=function(e){if(Utils.hasClass(e,"breaseWidget"))return e;for(var t=e,n;t!==document.body&&!Utils.hasClass(t,"breaseWidget")&&(n=t.parentNode,n);)t=n;return t},Utils.getChromeScale=function(e){var t=navigator.userAgent,n=navigator.userAgent.toLowerCase().indexOf("chrome"),i=-1!==n,s=0;return i&&(s=parseInt(t.substring(n+7),10)),i&&s>=58?1:Utils.getScaleFactor(e)},Utils.objToLogText=function(e){var t="";if(void 0===e)return"";if("object"==typeof e)for(var n in e)e[n]&&"[object Object]"===e[n].toString()?t+=(""!==t?",":"")+n+"={"+Utils.objToLogText(e[n])+"}":t+=(""!==t?",":"")+n+"="+e[n];else t=e.toString();return t},Utils.logError=function(e){e.stack?console.log("%c"+e.stack,"color:red;"):e.name&&e.message?console.log("%c"+e.name+": "+e.message,"color:red;"):e.message?console.log("%cError: "+e.message,"color:red;"):console.log("%cError in try/catch; log trace for more info","color:red;")},Utils.getStylesheetByHref=function(e){var t;if(""!==e)for(var n=0;n<document.styleSheets.length;n+=1)if(document.styleSheets[n].href&&-1!==document.styleSheets[n].href.indexOf(e)){t=document.styleSheets[n];break}return t};var t=/\(([\s\S]*?)\)/;Utils.getFunctionArguments=function e(n){if("function"!=typeof n)throw new SyntaxError("argument has to be of type function");var i=t.exec(n);return i&&""!==i[1]?i[1].replace(/ /g,"").split(","):[]},Utils.getOriginalEvent=function(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e},Utils.getPointerId=function(e){var t;if(e.detail&&void 0!==e.detail.pointerId)t=e.detail.pointerId;else{var n=Utils.getOriginalEvent(e);void 0!==n.pointerId?t=n.pointerId:n.changedTouches&&n.changedTouches.length>0&&(t=n.changedTouches[0].identifier)}return t},Utils.getOffsetOfEvent=function(e){var t=Utils.getOriginalEvent(e),n={x:0,y:0};if(void 0!==t.changedTouches&&t.changedTouches.length>0){var i=t.changedTouches[0];void 0!==i.pageX&&(n.x=i.pageX),void 0!==i.pageY&&(n.y=i.pageY)}else void 0!==t.pageX&&(n.x=t.pageX,n.y=t.pageY);return n},Utils.hasClass=function(e,t){return null!==e&&void 0!==e&&(void 0!==e.className&&"function"==typeof e.className.indexOf&&-1!==e.className.indexOf(t)||void 0!==e.classList&&void 0!==e.classList.value&&-1!==e.classList.value.indexOf(t))},Utils.addClass=function(e,t){var n="";if(e&&"function"==typeof e.getAttribute&&"function"==typeof e.setAttribute&&Utils.isString(t)){var i=e.getAttribute("class");i&&(n=""+i),""!==n?-1===n.split(" ").indexOf(t)&&e.setAttribute("class",n+" "+t):e.setAttribute("class",t)}},Utils.removeClass=function(e,t){var n="";if(e&&"function"==typeof e.getAttribute&&"function"==typeof e.setAttribute&&Utils.isString(t)){var i=e.getAttribute("class");if(i&&(n=""+i),""!==n)if(-1!==n.indexOf(" ")){for(var s=(""+n).split(" "),r=s.indexOf(t);-1!==r;)s.splice(r,1),r=s.indexOf(t);e.setAttribute("class",s.join(" "))}else n===t&&e.setAttribute("class","")}},Utils.arrayToObject=function(e,t){if(!Array.isArray(e))throw new SyntaxError("first argument has to be of type Array");if(void 0!==t&&!Utils.isString(t))throw new SyntaxError("second argument has to be of type String");for(var n={},i,s,r=0,o=e.length;r<o;r+=1)i=e[r],s=void 0!==t&&void 0!==i[t]?i[t]:""+r,n[s]=i;return n},Utils.transferProperties=function(e,t,n){if(!Utils.isObject(e))throw new SyntaxError("first argument has to be of type Object");if(!Utils.isObject(t))throw new SyntaxError("second argument has to be of type Object");if(!Array.isArray(n))throw new SyntaxError("third argument has to be of type Array");for(var i=0,s=n.length;i<s;i+=1)t[n[i]]=e[n[i]]},Utils.ensureVisuId=function(e){return Utils.isString(e)?e.toLowerCase():e},Utils.getHighestZindex=function(e){for(var t=0,n=0,i=e.length,s=i-1;s>=0;s-=1)n=parseFloat(Utils.getCSSValue(e[s],"z-index")),n>t&&(t=n);return t},Utils.getDimension=function(e){var t,n,i,s,r={width:0,height:0};return e&&"function"==typeof e.get&&(t=e.get(0)),t&&1===t.nodeType&&(n=window.getComputedStyle(t,null),i=parseFloat(n.getPropertyValue("width")),s=parseFloat(n.getPropertyValue("height")),r.width=isNaN(i)?e.innerWidth():i,r.height=isNaN(s)?e.innerHeight():s),r},Utils.getCSSValue=function(e,t){return window.getComputedStyle(e).getPropertyValue(t)},Utils.addTimestamp=function(e){return e+=(-1!==e.indexOf("?")?"&":"?")+"t="+Date.now(),e},Utils.requestAnimationFrame=function(e){return"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,0)},Utils.cancelAnimationFrame=function(e){return"function"==typeof window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.clearTimeout(e)};function n(e,t){return e+t.substring(0,1).toUpperCase()+t.substring(1)}function i(e){var t;if("object"!=typeof e)return e;if(!e)return e;if(Array.isArray(e)){t=[];for(var n=0,s=e.length;n<s;n+=1)t[n]=i(e[n]);return t}t={};for(var r in e)t[r]=i(e[r]);return t}function s(e,t){if(void 0!==e&&null!==e){var n,o;for(n in t)o=t[n],void 0!==o&&("object"!=typeof o||null===o?e[n]=o:Array.isArray(o)?Array.isArray(e[n])?r(e[n],o):e[n]=i(o):void 0===e[n]?e[n]=i(o):e[n]=s(e[n],o));return e}return void 0!==t?t:e}function r(e,t){for(var n=0,i=t.length;n<i;n+=1)void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:e[n]=s(e[n],t[n]))}return Utils}),define("brease/settings",["brease/core/Utils"],function(Utils){"use strict";var e={},t=window.devicePixelRatio>1?window.devicePixelRatio:1;return Utils.defineProperty(e,"noKeyValue",""),Utils.defineProperty(e,"noValueString","XX"),Utils.defineProperty(e,"globalContent","0global"),Utils.defineProperty(e,"swipe",{}),Utils.defineProperty(e,"cachingSlotsMax",200),Utils.defineProperty(e,"cachingSlotsDefault",25),e.swipe.maxFingerDistance=120*t,e.swipe.moveThreshold=150*t,e.swipe.velocity=1.3,e}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],i=e.document,s=n.slice,r=n.concat,o=n.push,a=n.indexOf,l={},d=l.toString,c=l.hasOwnProperty,u={},h="2.2.3",g=function(e,t){return new g.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,m=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};g.fn=g.prototype={jquery:"2.2.3",constructor:g,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=g.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return g.each(this,e)},map:function(e){return this.pushStack(g.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var e,t,n,i,s,r,o=arguments[0]||{},a=1,l=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[a]||{},a++),"object"==typeof o||g.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(d&&i&&(g.isPlainObject(i)||(s=g.isArray(i)))?(s?(s=!1,r=n&&g.isArray(n)?n:[]):r=n&&g.isPlainObject(n)?n:{},o[t]=g.extend(d,r,i)):void 0!==i&&(o[t]=i));return o},g.extend({expando:"jQuery"+("2.2.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===g.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!g.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==g.type(e)||e.nodeType||g.isWindow(e))return!1;if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||c.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[d.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=g.trim(e),e&&(1===e.indexOf("use strict")?(t=i.createElement("script"),t.text=e,i.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(p,"ms-").replace(m,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(b(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?g.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,s=e.length;i<n;i++)e[s++]=t[i];return e.length=s,e},grep:function(e,t,n){for(var i,s=[],r=0,o=e.length,a=!n;r<o;r++)i=!t(e[r],r),i!==a&&s.push(e[r]);return s},map:function(e,t,n){var i,s,o=0,a=[];if(b(e))for(i=e.length;o<i;o++)s=t(e[o],o,n),null!=s&&a.push(s);else for(o in e)s=t(e[o],o,n),null!=s&&a.push(s);return r.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),g.isFunction(e))return i=s.call(arguments,2),r=function(){return e.apply(t||this,i.concat(s.call(arguments)))},r.guid=e.guid=e.guid||g.guid++,r},now:Date.now,support:u}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function b(e){var t=!!e&&"length"in e&&e.length,n=g.type(e);return"function"!==n&&!g.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var y=function(e){var t,n,i,s,r,o,a,l,d,c,u,h,g,f,p,m,v,b,y,E="sizzle"+1*new Date,A=e.document,I=0,C=0,w=re(),T=re(),x=re(),S=function(e,t){return e===t&&(u=!0),0},_=1<<31,D={}.hasOwnProperty,L=[],N=L.pop,O=L.push,k=L.push,M=L.slice,P=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+R+"*("+H+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+R+"*\\]",V=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",W=new RegExp(R+"+","g"),G=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),F=new RegExp("^"+R+"*,"+R+"*"),j=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),z=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),q=new RegExp(V),K=new RegExp("^"+H+"$"),Y={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){h()};try{k.apply(L=M.call(A.childNodes),A.childNodes),L[A.childNodes.length].nodeType}catch(e){k={apply:L.length?function(e,t){O.apply(e,M.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,s){var r,a,d,c,u,f,v,b,I=t&&t.ownerDocument,C=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return i;if(!s&&((t?t.ownerDocument||t:A)!==g&&h(t),t=t||g,p)){if(11!==C&&(f=J.exec(e)))if(r=f[1]){if(9===C){if(!(d=t.getElementById(r)))return i;if(d.id===r)return i.push(d),i}else if(I&&(d=I.getElementById(r))&&y(t,d)&&d.id===r)return i.push(d),i}else{if(f[2])return k.apply(i,t.getElementsByTagName(e)),i;if((r=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return k.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!x[e+" "]&&(!m||!m.test(e))){if(1!==C)I=t,b=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(ee,"\\$&"):t.setAttribute("id",c=E),v=o(e),a=v.length,u=K.test(c)?"#"+c:"[id='"+c+"']";a--;)v[a]=u+" "+pe(v[a]);b=v.join(","),I=$.test(e)&&ge(t.parentNode)||t}if(b)try{return k.apply(i,I.querySelectorAll(b)),i}catch(e){}finally{c===E&&t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,i,s)}function re(){var e=[];function t(n,s){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=s}return t}function oe(e){return e[E]=!0,e}function ae(e){var t=g.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),s=n.length;s--;)i.attrHandle[n[s]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||_)-(~e.sourceIndex||_);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return oe(function(t){return t=+t,oe(function(n,i){for(var s,r=e([],n.length,t),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}n=se.support={},r=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=se.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:A;return o!==g&&9===o.nodeType&&o.documentElement?(g=o,f=g.documentElement,p=!r(g),(s=g.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ie,!1):s.attachEvent&&s.attachEvent("onunload",ie)),n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),
n.getElementsByTagName=ae(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(g.getElementsByClassName),n.getById=ae(function(e){return f.appendChild(e).id=E,!g.getElementsByName||!g.getElementsByName(E).length}),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n=t.getElementById(e);return n?[n]:[]}},i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&p)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=Z.test(g.querySelectorAll))&&(ae(function(e){f.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+E+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||m.push(".#.+[+~]")}),ae(function(e){var t=g.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ae(function(e){n.disconnectedMatch=b.call(e,"div"),b.call(e,"[s!='']:x"),v.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(f.compareDocumentPosition),y=t||Z.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===g||e.ownerDocument===A&&y(A,e)?-1:t===g||t.ownerDocument===A&&y(A,t)?1:c?P(c,e)-P(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,s=e.parentNode,r=t.parentNode,o=[e],a=[t];if(!s||!r)return e===g?-1:t===g?1:s?-1:r?1:c?P(c,e)-P(c,t):0;if(s===r)return de(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?de(o[i],a[i]):o[i]===A?-1:a[i]===A?1:0},g):g},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==g&&h(e),t=t.replace(z,"='$1']"),n.matchesSelector&&p&&!x[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=b.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return se(t,g,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==g&&h(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==g&&h(e);var s=i.attrHandle[t.toLowerCase()],r=s&&D.call(i.attrHandle,t.toLowerCase())?s(e,t,!p):void 0;return void 0!==r?r:n.attributes||!p?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],s=0,r=0;if(u=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(S),u){for(;t=e[r++];)t===e[r]&&(s=i.push(r));for(;s--;)e.splice(i[s],1)}return c=null,e},s=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=s(t);return n},i=se.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&w(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var s=se.attr(i,e);return null==s?"!="===t:!t||(s+="","="===t?s===n:"!="===t?s!==n:"^="===t?n&&0===s.indexOf(n):"*="===t?n&&s.indexOf(n)>-1:"$="===t?n&&s.slice(-n.length)===n:"~="===t?(" "+s.replace(W," ")+" ").indexOf(n)>-1:"|="===t&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,h,g,f,p=r!==o?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(m){if(r){for(;p;){for(h=t;h=h[p];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&b){for(h=m,u=h[E]||(h[E]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],g=d[0]===I&&d[1],y=g&&d[2],h=g&&m.childNodes[g];h=++g&&h&&h[p]||(y=g=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[I,g,y];break}}else if(b&&(h=t,u=h[E]||(h[E]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],g=d[0]===I&&d[1],y=g),!1===y)for(;(h=++g&&h&&h[p]||(y=g=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&(u=h[E]||(h[E]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[I,y]),h!==t)););return y-=s,y===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,s=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return s[E]?s(t):s.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,n){for(var i,r=s(e,t),o=r.length;o--;)i=P(e,r[o]),e[i]=!(n[i]=r[o])}):function(e){return s(e,0,n)}):s}},pseudos:{not:oe(function(e){var t=[],n=[],i=a(e.replace(G,"$1"));return i[E]?oe(function(e,t,n,s){for(var r,o=i(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,s,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}}),has:oe(function(e){return function(t){return se(e,t).length>0}}),contains:oe(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:oe(function(e){return K.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===g.activeElement&&(!g.hasFocus||g.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},i.pseudos.nth=i.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function fe(){}fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,o=se.tokenize=function(e,t){var n,s,r,o,a,l,d,c=T[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],d=i.preFilter;a;){n&&!(s=F.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),n=!1,(s=j.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(G," ")}),a=a.slice(n.length));for(o in i.filter)!(s=Y[o].exec(a))||d[o]&&!(s=d[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):T(e,l).slice(0)};function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function me(e,t,n){var i=t.dir,s=n&&"parentNode"===i,r=C++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,o){var a,l,d,c=[I,r];if(o){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||s){if(d=t[E]||(t[E]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),(a=l[i])&&a[0]===I&&a[1]===r)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,o))return!0}}}function ve(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function be(e,t,n){for(var i=0,s=t.length;i<s;i++)se(e,t[i],n);return n}function ye(e,t,n,i,s){for(var r,o=[],a=0,l=e.length,d=null!=t;a<l;a++)(r=e[a])&&(n&&!n(r,i,s)||(o.push(r),d&&t.push(a)));return o}function Ee(e,t,n,i,s,r){return i&&!i[E]&&(i=Ee(i)),s&&!s[E]&&(s=Ee(s,r)),oe(function(r,o,a,l){var d,c,u,h=[],g=[],f=o.length,p=r||be(t||"*",a.nodeType?[a]:a,[]),m=!e||!r&&t?p:ye(p,h,e,a,l),v=n?s||(r?e:f||i)?[]:o:m;if(n&&n(m,v,a,l),i)for(d=ye(v,g),i(d,[],a,l),c=d.length;c--;)(u=d[c])&&(v[g[c]]=!(m[g[c]]=u));if(r){if(s||e){if(s){for(d=[],c=v.length;c--;)(u=v[c])&&d.push(m[c]=u);s(null,v=[],d,l)}for(c=v.length;c--;)(u=v[c])&&(d=s?P(r,u):h[c])>-1&&(r[d]=!(o[d]=u))}}else v=ye(v===o?v.splice(f,v.length):v),s?s(null,o,v,l):k.apply(o,v)})}function Ae(e){for(var t,n,s,r=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],l=o?1:0,c=me(function(e){return e===t},a,!0),u=me(function(e){return P(t,e)>-1},a,!0),h=[function(e,n,i){var s=!o&&(i||n!==d)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,s}];l<r;l++)if(n=i.relative[e[l].type])h=[me(ve(h),n)];else{if(n=i.filter[e[l].type].apply(null,e[l].matches),n[E]){for(s=++l;s<r&&!i.relative[e[s].type];s++);return Ee(l>1&&ve(h),l>1&&pe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),n,l<s&&Ae(e.slice(l,s)),s<r&&Ae(e=e.slice(s)),s<r&&pe(e))}h.push(n)}return ve(h)}function Ie(e,t){var n=t.length>0,s=e.length>0,r=function(r,o,a,l,c){var u,f,m,v=0,b="0",y=r&&[],E=[],A=d,C=r||s&&i.find.TAG("*",c),w=I+=null==A?1:Math.random()||.1,T=C.length;for(c&&(d=o===g||o||c);b!==T&&null!=(u=C[b]);b++){if(s&&u){for(f=0,o||u.ownerDocument===g||(h(u),a=!p);m=e[f++];)if(m(u,o||g,a)){l.push(u);break}c&&(I=w)}n&&((u=!m&&u)&&v--,r&&y.push(u))}if(v+=b,n&&b!==v){for(f=0;m=t[f++];)m(y,E,o,a);if(r){if(v>0)for(;b--;)y[b]||E[b]||(E[b]=N.call(l));E=ye(E)}k.apply(l,E),c&&!r&&E.length>0&&v+t.length>1&&se.uniqueSort(l)}return c&&(I=w,d=A),y};return n?oe(r):r}return a=se.compile=function(e,t){var n,i=[],s=[],r=x[e+" "];if(!r){for(t||(t=o(e)),n=t.length;n--;)r=Ae(t[n]),r[E]?i.push(r):s.push(r);r=x(e,Ie(s,i)),r.selector=e}return r},l=se.select=function(e,t,s,r){var l,d,c,u,h,g="function"==typeof e&&e,f=!r&&o(e=g.selector||e);if(s=s||[],1===f.length){if(d=f[0]=f[0].slice(0),d.length>2&&"ID"===(c=d[0]).type&&n.getById&&9===t.nodeType&&p&&i.relative[d[1].type]){if(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0],!t)return s;g&&(t=t.parentNode),e=e.slice(d.shift().value.length)}for(l=Y.needsContext.test(e)?0:d.length;l--&&(c=d[l],!i.relative[u=c.type]);)if((h=i.find[u])&&(r=h(c.matches[0].replace(te,ne),$.test(d[0].type)&&ge(t.parentNode)||t))){if(d.splice(l,1),e=r.length&&pe(d),!e)return k.apply(s,r),s;break}}return(g||a(e,f))(r,t,!p,s,!t||$.test(e)&&ge(t.parentNode)||t),s},n.sortStable=E.split("").sort(S).join("")===E,n.detectDuplicates=!!u,h(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(g.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||le(B,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(e);g.find=y,g.expr=y.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=y.uniqueSort,g.text=y.getText,g.isXMLDoc=y.isXML,g.contains=y.contains;var E=function(e,t,n){for(var i=[],s=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&g(e).is(n))break;i.push(e)}return i},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=g.expr.match.needsContext,C=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function T(e,t,n){if(g.isFunction(t))return g.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return g.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(w.test(t))return g.filter(t,e,n);t=g.filter(t,e)}return g.grep(e,function(e){return a.call(t,e)>-1!==n})}g.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?g.find.matchesSelector(i,e)?[i]:[]:g.find.matches(e,g.grep(t,function(e){return 1===e.nodeType}))},g.fn.extend({find:function(e){var t,n=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(g(e).filter(function(){for(t=0;t<n;t++)if(g.contains(s[t],this))return!0}));for(t=0;t<n;t++)g.find(e,s[t],i);return i=this.pushStack(n>1?g.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&I.test(e)?g(e):e||[],!1).length}});var x,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(g.fn.init=function(e,t,n){var s,r;if(!e)return this;if(n=n||x,"string"==typeof e){if(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:S.exec(e),!s||!s[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof g?t[0]:t,g.merge(this,g.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),C.test(s[1])&&g.isPlainObject(t))for(s in t)g.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return r=i.getElementById(s[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=i,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):g.isFunction(e)?void 0!==n.ready?n.ready(e):e(g):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),g.makeArray(e,this))}).prototype=g.fn,x=g(i);var _=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(e){var t=g(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(g.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,s=this.length,r=[],o=I.test(e)||"string"!=typeof e?g(e,t||this.context):0;i<s;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&g.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?g.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?a.call(g(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}g.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return e.contentDocument||g.merge([],e.childNodes)}},function(e,t){g.fn[e]=function(n,i){var s=g.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=g.filter(i,s)),this.length>1&&(D[e]||g.uniqueSort(s),_.test(e)&&s.reverse()),this.pushStack(s)}});var N=/\S+/g;function O(e){var t={};return g.each(e.match(N)||[],function(e,n){t[n]=!0}),t}g.Callbacks=function(e){e="string"==typeof e?O(e):g.extend({},e);var t,n,i,s,r=[],o=[],a=-1,l=function(){for(s=e.once,i=t=!0;o.length;a=-1)for(n=o.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=r.length,n=!1);e.memory||(n=!1),t=!1,s&&(r=n?[]:"")},d={add:function(){return r&&(n&&!t&&(a=r.length-1,o.push(n)),function t(n){g.each(n,function(n,i){g.isFunction(i)?e.unique&&d.has(i)||r.push(i):i&&i.length&&"string"!==g.type(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return g.each(arguments,function(e,t){for(var n;(n=g.inArray(t,r,n))>-1;)r.splice(n,1),n<=a&&a--}),this},has:function(e){return e?g.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=n="",this},disabled:function(){return!r},lock:function(){return s=o=[],n||(r=n=""),this},locked:function(){return!!s},fireWith:function(e,n){return s||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},g.extend({Deferred:function(e){var t=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return g.Deferred(function(n){g.each(t,function(t,r){var o=g.isFunction(e[t])&&e[t];s[r[1]](function(){var e=o&&o.apply(this,arguments);e&&g.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?g.extend(e,i):i}},s={};return i.pipe=i.then,g.each(t,function(e,r){var o=r[2],a=r[3];i[r[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,n=s.call(arguments),i=n.length,r=1!==i||e&&g.isFunction(e.promise)?i:0,o=1===r?e:g.Deferred(),a=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?s.call(arguments):i,n===l?o.notifyWith(t,n):--r||o.resolveWith(t,n)}},l,d,c;if(i>1)for(l=new Array(i),d=new Array(i),c=new Array(i);t<i;t++)n[t]&&g.isFunction(n[t].promise)?n[t].promise().progress(a(t,d,l)).done(a(t,c,n)).fail(o.reject):--r;return r||o.resolveWith(c,n),o.promise()}});var k;g.fn.ready=function(e){return g.ready.promise().done(e),this},g.extend({isReady:!1,readyWait:1,holdReady:function(e){e?g.readyWait++:g.ready(!0)},ready:function(e){(!0===e?--g.readyWait:g.isReady)||(g.isReady=!0,!0!==e&&--g.readyWait>0||(k.resolveWith(i,[g]),g.fn.triggerHandler&&(g(i).triggerHandler("ready"),g(i).off("ready"))))}});function M(){i.removeEventListener("DOMContentLoaded",M),e.removeEventListener("load",M),g.ready()}g.ready.promise=function(t){return k||(k=g.Deferred(),"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?e.setTimeout(g.ready):(i.addEventListener("DOMContentLoaded",M),e.addEventListener("load",M))),k.promise(t)},g.ready.promise();var P=function(e,t,n,i,s,r,o){var a=0,l=e.length,d=null==n;if("object"===g.type(n)){s=!0;for(a in n)P(e,t,a,n[a],!0,r,o)}else if(void 0!==i&&(s=!0,g.isFunction(i)||(o=!0),d&&(o?(t.call(e,i),t=null):(d=t,t=function(e,t,n){return d.call(g(e),n)})),t))for(;a<l;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return s?e:d?t.call(e):l?t(e[0],n):r},B=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function R(){this.expando=g.expando+R.uid++}R.uid=1,R.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!B(e))return{};var t=e[this.expando];return t||(t={},B(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,s=this.cache(e);if("string"==typeof t)s[t]=n;else for(i in t)s[i]=t[i];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,g.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,s,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{g.isArray(t)?i=t.concat(t.map(g.camelCase)):(s=g.camelCase(t),t in r?i=[t,s]:(i=s,i=i in r?[i]:i.match(N)||[])),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||g.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!g.isEmptyObject(t)}};var H=new R,U=new R,V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function G(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(W,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:V.test(n)?g.parseJSON(n):n)}catch(e){}U.set(e,t,n)}else n=void 0;return n}g.extend({hasData:function(e){return U.hasData(e)||H.hasData(e)},data:function(e,t,n){return U.access(e,t,n)},removeData:function(e,t){U.remove(e,t)},_data:function(e,t,n){return H.access(e,t,n)},_removeData:function(e,t){H.remove(e,t)}}),g.fn.extend({data:function(e,t){var n,i,s,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(s=U.get(r),1===r.nodeType&&!H.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=g.camelCase(i.slice(5)),G(r,i,s[i])));H.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){U.set(this,e)}):P(this,function(t){var n,i;if(r&&void 0===t){if(n=U.get(r,e)||U.get(r,e.replace(W,"-$&").toLowerCase()),void 0!==n)return n;if(i=g.camelCase(e),n=U.get(r,i),void 0!==n)return n;if(n=G(r,i,void 0),void 0!==n)return n}else i=g.camelCase(e),this.each(function(){var n=U.get(this,i);U.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&U.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){U.remove(this,e)})}}),g.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=H.get(e,t),n&&(!i||g.isArray(n)?i=H.access(e,t,g.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=g.queue(e,t),i=n.length,s=n.shift(),r=g._queueHooks(e,t),o=function(){g.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===t&&n.unshift("inprogress"),delete r.stop,s.call(e,o,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return H.get(e,n)||H.access(e,n,{empty:g.Callbacks("once memory").add(function(){H.remove(e,[t+"queue",n])})})}}),g.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?g.queue(this[0],e):void 0===t?this:this.each(function(){var n=g.queue(this,e,t);g._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&g.dequeue(this,e)})},dequeue:function(e){return this.each(function(){g.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,s=g.Deferred(),r=this,o=this.length,a=function(){--i||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=H.get(r[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(t)}});var F=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=new RegExp("^(?:([+-])=|)("+F+")([a-z%]*)$","i"),z=["Top","Right","Bottom","Left"],q=function(e,t){return e=t||e,"none"===g.css(e,"display")||!g.contains(e.ownerDocument,e)};function K(e,t,n,i){var s,r=1,o=20,a=i?function(){return i.cur()}:function(){return g.css(e,t,"")},l=a(),d=n&&n[3]||(g.cssNumber[t]?"":"px"),c=(g.cssNumber[t]||"px"!==d&&+l)&&j.exec(g.css(e,t));if(c&&c[3]!==d){d=d||c[3],n=n||[],c=+l||1;do{r=r||".5",c/=r,g.style(e,t,c+d)}while(r!==(r=a()/l)&&1!==r&&--o)}return n&&(c=+c||+l||0,s=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=d,i.start=c,i.end=s)),s}var Y=/^(?:checkbox|radio)$/i,Q=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Z={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Z.optgroup=Z.option,Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td;function J(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&g.nodeName(e,t)?g.merge([e],n):n}function $(e,t){for(var n=0,i=e.length;n<i;n++)H.set(e[n],"globalEval",!t||H.get(t[n],"globalEval"))}var ee=/<|&#?\w+;/;function te(e,t,n,i,s){for(var r,o,a,l,d,c,u=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if(r=e[f],r||0===r)if("object"===g.type(r))g.merge(h,r.nodeType?[r]:r);else if(ee.test(r)){for(o=o||u.appendChild(t.createElement("div")),a=(Q.exec(r)||["",""])[1].toLowerCase(),l=Z[a]||Z._default,o.innerHTML=l[1]+g.htmlPrefilter(r)+l[2],c=l[0];c--;)o=o.lastChild;g.merge(h,o.childNodes),o=u.firstChild,o.textContent=""}else h.push(t.createTextNode(r));for(u.textContent="",f=0;r=h[f++];)if(i&&g.inArray(r,i)>-1)s&&s.push(r);else if(d=g.contains(r.ownerDocument,r),o=J(u.appendChild(r),"script"),d&&$(o),n)for(c=0;r=o[c++];)X.test(r.type||"")&&n.push(r);return u}!function(){var e=i.createDocumentFragment(),t=e.appendChild(i.createElement("div")),n=i.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),u.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ne=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,se=/^([^.]*)(?:\.(.+)|)/;function re(){return!0}function oe(){return!1}function ae(){try{return i.activeElement}catch(e){}}function le(e,t,n,i,s,r){var o,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)le(e,a,n,i,t[a],r);return e}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),!1===s)s=oe;else if(!s)return e;return 1===r&&(o=s,s=function(e){return g().off(e),o.apply(this,arguments)},s.guid=o.guid||(o.guid=g.guid++)),e.each(function(){g.event.add(this,t,s,i,n)})}g.event={global:{},add:function(e,t,n,i,s){var r,o,a,l,d,c,u,h,f,p,m,v=H.get(e);if(v)for(n.handler&&(r=n,n=r.handler,s=r.selector),n.guid||(n.guid=g.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==g&&g.event.triggered!==t.type?g.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(N)||[""],d=t.length;d--;)a=se.exec(t[d])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(u=g.event.special[f]||{},f=(s?u.delegateType:u.bindType)||f,u=g.event.special[f]||{},c=g.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&g.expr.match.needsContext.test(s),namespace:p.join(".")},r),(h=l[f])||(h=l[f]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(f,o)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),s?h.splice(h.delegateCount++,0,c):h.push(c),g.event.global[f]=!0)},remove:function(e,t,n,i,s){var r,o,a,l,d,c,u,h,f,p,m,v=H.hasData(e)&&H.get(e);if(v&&(l=v.events)){for(t=(t||"").match(N)||[""],d=t.length;d--;)if(a=se.exec(t[d])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(u=g.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,h=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)c=h[r],!s&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(r,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));o&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,p,v.handle)||g.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)g.event.remove(e,f+t[d],n,i,!0);g.isEmptyObject(l)&&H.remove(e,"handle events")}},dispatch:function(e){e=g.event.fix(e);var t,n,i,r,o,a=[],l=s.call(arguments),d=(H.get(this,"events")||{})[e.type]||[],c=g.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=g.event.handlers.call(this,e,d),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((g.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),void 0!==i&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,s,r,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<a;n++)r=t[n],s=r.selector+" ",void 0===i[s]&&(i[s]=r.needsContext?g(s,this).index(l)>-1:g.find(s,this,null,[l]).length),i[s]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,s,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||i,
s=n.documentElement,r=n.body,e.pageX=t.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[g.expando])return e;var t,n,s,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=ie.test(r)?this.mouseHooks:ne.test(r)?this.keyHooks:{}),s=a.props?this.props.concat(a.props):this.props,e=new g.Event(o),t=s.length;t--;)n=s[t],e[n]=o[n];return e.target||(e.target=i),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ae()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ae()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g.nodeName(this,"input"))return this.click(),!1},_default:function(e){return g.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},g.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},g.Event=function(e,t){if(!(this instanceof g.Event))return new g.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?re:oe):this.type=e,t&&g.extend(this,t),this.timeStamp=e&&e.timeStamp||g.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=re,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=re,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=re,e&&e.stopImmediatePropagation(),this.stopPropagation()}},g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){g.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,r=e.handleObj;return s&&(s===i||g.contains(i,s))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),g.fn.extend({on:function(e,t,n,i){return le(this,e,t,n,i)},one:function(e,t,n,i){return le(this,e,t,n,i,1)},off:function(e,t,n){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,g(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=oe),this.each(function(){g.event.remove(this,e,n,t)})}});var de=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ce=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^true\/(.*)/,ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function fe(e,t){return g.nodeName(e,"table")&&g.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ve(e,t){var n,i,s,r,o,a,l,d;if(1===t.nodeType){if(H.hasData(e)&&(r=H.access(e),o=H.set(t,r),d=r.events,d)){delete o.handle,o.events={};for(s in d)for(n=0,i=d[s].length;n<i;n++)g.event.add(t,s,d[s][n])}U.hasData(e)&&(a=U.access(e),l=g.extend({},a),U.set(t,l))}}function be(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Y.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function ye(e,t,n,i){t=r.apply([],t);var s,o,a,l,d,c,h=0,f=e.length,p=f-1,m=t[0],v=g.isFunction(m);if(v||f>1&&"string"==typeof m&&!u.checkClone&&ue.test(m))return e.each(function(s){var r=e.eq(s);v&&(t[0]=m.call(this,s,r.html())),ye(r,t,n,i)});if(f&&(s=te(t,e[0].ownerDocument,!1,e,i),o=s.firstChild,1===s.childNodes.length&&(s=o),o||i)){for(a=g.map(J(s,"script"),pe),l=a.length;h<f;h++)d=s,h!==p&&(d=g.clone(d,!0,!0),l&&g.merge(a,J(d,"script"))),n.call(e[h],d,h);if(l)for(c=a[a.length-1].ownerDocument,g.map(a,me),h=0;h<l;h++)d=a[h],X.test(d.type||"")&&!H.access(d,"globalEval")&&g.contains(c,d)&&(d.src?g._evalUrl&&g._evalUrl(d.src):g.globalEval(d.textContent.replace(ge,"")))}return e}function Ee(e,t,n){for(var i,s=t?g.filter(t,e):e,r=0;null!=(i=s[r]);r++)n||1!==i.nodeType||g.cleanData(J(i)),i.parentNode&&(n&&g.contains(i.ownerDocument,i)&&$(J(i,"script")),i.parentNode.removeChild(i));return e}g.extend({htmlPrefilter:function(e){return e.replace(de,"<$1></$2>")},clone:function(e,t,n){var i,s,r,o,a=e.cloneNode(!0),l=g.contains(e.ownerDocument,e);if(!(u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||g.isXMLDoc(e)))for(o=J(a),r=J(e),i=0,s=r.length;i<s;i++)be(r[i],o[i]);if(t)if(n)for(r=r||J(e),o=o||J(a),i=0,s=r.length;i<s;i++)ve(r[i],o[i]);else ve(e,a);return o=J(a,"script"),o.length>0&&$(o,!l&&J(e,"script")),a},cleanData:function(e){for(var t,n,i,s=g.event.special,r=0;void 0!==(n=e[r]);r++)if(B(n)){if(t=n[H.expando]){if(t.events)for(i in t.events)s[i]?g.event.remove(n,i):g.removeEvent(n,i,t.handle);n[H.expando]=void 0}n[U.expando]&&(n[U.expando]=void 0)}}}),g.fn.extend({domManip:ye,detach:function(e){return Ee(this,e,!0)},remove:function(e){return Ee(this,e)},text:function(e){return P(this,function(e){return void 0===e?g.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ye(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){fe(this,e).appendChild(e)}})},prepend:function(){return ye(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=fe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(g.cleanData(J(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return g.clone(this,e,t)})},html:function(e){return P(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ce.test(e)&&!Z[(Q.exec(e)||["",""])[1].toLowerCase()]){e=g.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(g.cleanData(J(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return ye(this,arguments,function(t){var n=this.parentNode;g.inArray(this,e)<0&&(g.cleanData(J(this)),n&&n.replaceChild(t,this))},e)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){g.fn[e]=function(e){for(var n,i=[],s=g(e),r=s.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),g(s[a])[t](n),o.apply(i,n.get());return this.pushStack(i)}});var Ae,Ie={HTML:"block",BODY:"block"};function Ce(e,t){var n=g(t.createElement(e)).appendTo(t.body),i=g.css(n[0],"display");return n.detach(),i}function we(e){var t=i,n=Ie[e];return n||(n=Ce(e,t),"none"!==n&&n||(Ae=(Ae||g("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ae[0].contentDocument,t.write(),t.close(),n=Ce(e,t),Ae.detach()),Ie[e]=n),n}var Te=/^margin/,xe=new RegExp("^("+F+")(?!px)[a-z%]+$","i"),Se=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},_e=function(e,t,n,i){var s,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];s=n.apply(e,i||[]);for(r in t)e.style[r]=o[r];return s},De=i.documentElement;!function(){var t,n,s,r,o=i.createElement("div"),a=i.createElement("div");function l(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",De.appendChild(o);var i=e.getComputedStyle(a);t="1%"!==i.top,r="2px"===i.marginLeft,n="4px"===i.width,a.style.marginRight="50%",s="4px"===i.marginRight,De.removeChild(o)}a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),g.extend(u,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==n&&l(),n},pixelMarginRight:function(){return null==n&&l(),s},reliableMarginLeft:function(){return null==n&&l(),r},reliableMarginRight:function(){var t,n=a.appendChild(i.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",De.appendChild(o),t=!parseFloat(e.getComputedStyle(n).marginRight),De.removeChild(o),a.removeChild(n),t}}))}();function Le(e,t,n){var i,s,r,o,a=e.style;return n=n||Se(e),o=n?n.getPropertyValue(t)||n[t]:void 0,""!==o&&void 0!==o||g.contains(e.ownerDocument,e)||(o=g.style(e,t)),n&&!u.pixelMarginRight()&&xe.test(o)&&Te.test(t)&&(i=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=s,a.maxWidth=r),void 0!==o?o+"":o}function Ne(e,t){return{get:function(){return e()?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}var Oe=/^(none|table(?!-c[ea]).+)/,ke={position:"absolute",visibility:"hidden",display:"block"},Me={letterSpacing:"0",fontWeight:"400"},Pe=["Webkit","O","Moz","ms"],Be=i.createElement("div").style;function Re(e){if(e in Be)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Pe.length;n--;)if(e=Pe[n]+t,e in Be)return e}function He(e,t,n){var i=j.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ue(e,t,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;r<4;r+=2)"margin"===n&&(o+=g.css(e,n+z[r],!0,s)),i?("content"===n&&(o-=g.css(e,"padding"+z[r],!0,s)),"margin"!==n&&(o-=g.css(e,"border"+z[r]+"Width",!0,s))):(o+=g.css(e,"padding"+z[r],!0,s),"padding"!==n&&(o+=g.css(e,"border"+z[r]+"Width",!0,s)));return o}function Ve(t,n,s){var r=!0,o="width"===n?t.offsetWidth:t.offsetHeight,a=Se(t),l="border-box"===g.css(t,"boxSizing",!1,a);if(i.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[n])),o<=0||null==o){if(o=Le(t,n,a),(o<0||null==o)&&(o=t.style[n]),xe.test(o))return o;r=l&&(u.boxSizingReliable()||o===t.style[n]),o=parseFloat(o)||0}return o+Ue(t,n,s||(l?"border":"content"),r,a)+"px"}function We(e,t){for(var n,i,s,r=[],o=0,a=e.length;o<a;o++)i=e[o],i.style&&(r[o]=H.get(i,"olddisplay"),n=i.style.display,t?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(r[o]=H.access(i,"olddisplay",we(i.nodeName)))):(s=q(i),"none"===n&&s||H.set(i,"olddisplay",s?n:g.css(i,"display"))));for(o=0;o<a;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[o]||"":"none"));return e}g.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Le(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,a=g.camelCase(t),l=e.style;if(t=g.cssProps[a]||(g.cssProps[a]=Re(a)||a),o=g.cssHooks[t]||g.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(s=o.get(e,!1,i))?s:l[t];r=typeof n,"string"===r&&(s=j.exec(n))&&s[1]&&(n=K(e,t,s),r="number"),null!=n&&n===n&&("number"===r&&(n+=s&&s[3]||(g.cssNumber[a]?"":"px")),u.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var s,r,o,a=g.camelCase(t);return t=g.cssProps[a]||(g.cssProps[a]=Re(a)||a),o=g.cssHooks[t]||g.cssHooks[a],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Le(e,t,i)),"normal"===s&&t in Me&&(s=Me[t]),""===n||n?(r=parseFloat(s),!0===n||isFinite(r)?r||0:s):s}}),g.each(["height","width"],function(e,t){g.cssHooks[t]={get:function(e,n,i){if(n)return Oe.test(g.css(e,"display"))&&0===e.offsetWidth?_e(e,ke,function(){return Ve(e,t,i)}):Ve(e,t,i)},set:function(e,n,i){var s,r=i&&Se(e),o=i&&Ue(e,t,i,"border-box"===g.css(e,"boxSizing",!1,r),r);return o&&(s=j.exec(n))&&"px"!==(s[3]||"px")&&(e.style[t]=n,n=g.css(e,t)),He(e,n,o)}}}),g.cssHooks.marginLeft=Ne(u.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Le(e,"marginLeft"))||e.getBoundingClientRect().left-_e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),g.cssHooks.marginRight=Ne(u.reliableMarginRight,function(e,t){if(t)return _e(e,{display:"inline-block"},Le,[e,"marginRight"])}),g.each({margin:"",padding:"",border:"Width"},function(e,t){g.cssHooks[e+t]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];i<4;i++)s[e+z[i]+t]=r[i]||r[i-2]||r[0];return s}},Te.test(e)||(g.cssHooks[e+t].set=He)}),g.fn.extend({css:function(e,t){return P(this,function(e,t,n){var i,s,r={},o=0;if(g.isArray(t)){for(i=Se(e),s=t.length;o<s;o++)r[t[o]]=g.css(e,t[o],!1,i);return r}return void 0!==n?g.style(e,t,n):g.css(e,t)},e,t,arguments.length>1)},show:function(){return We(this,!0)},hide:function(){return We(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){q(this)?g(this).show():g(this).hide()})}});function Ge(e,t,n,i,s){return new Ge.prototype.init(e,t,n,i,s)}g.Tween=Ge,Ge.prototype={constructor:Ge,init:function(e,t,n,i,s,r){this.elem=e,this.prop=n,this.easing=s||g.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(g.cssNumber[n]?"":"px")},cur:function(){var e=Ge.propHooks[this.prop];return e&&e.get?e.get(this):Ge.propHooks._default.get(this)},run:function(e){var t,n=Ge.propHooks[this.prop];return this.options.duration?this.pos=t=g.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=g.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){g.fx.step[e.prop]?g.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[g.cssProps[e.prop]]&&!g.cssHooks[e.prop]?e.elem[e.prop]=e.now:g.style(e.elem,e.prop,e.now+e.unit)}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},g.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},g.fx=Ge.prototype.init,g.fx.step={};var Fe,je,ze=/^(?:toggle|show|hide)$/,qe=/queueHooks$/;function Ke(){return e.setTimeout(function(){Fe=void 0}),Fe=g.now()}function Ye(e,t){var n,i=0,s={height:e};for(t=t?1:0;i<4;i+=2-t)n=z[i],s["margin"+n]=s["padding"+n]=e;return t&&(s.opacity=s.width=e),s}function Qe(e,t,n){for(var i,s=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),r=0,o=s.length;r<o;r++)if(i=s[r].call(n,t,e))return i}function Xe(e,t,n){var i,s,r,o,a,l,d,c,u=this,h={},f=e.style,p=e.nodeType&&q(e),m=H.get(e,"fxshow");n.queue||(a=g._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,g.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],d=g.css(e,"display"),c="none"===d?H.get(e,"olddisplay")||we(e.nodeName):d,"inline"===c&&"none"===g.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],ze.exec(s)){if(delete t[i],r=r||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||g.style(e,i)}else d=void 0;if(g.isEmptyObject(h))"inline"===("none"===d?we(e.nodeName):d)&&(f.display=d);else{m?"hidden"in m&&(p=m.hidden):m=H.access(e,"fxshow",{}),r&&(m.hidden=!p),p?g(e).show():u.done(function(){g(e).hide()}),u.done(function(){var t;H.remove(e,"fxshow");for(t in h)g.style(e,t,h[t])});for(i in h)o=Qe(p?m[i]:0,i,u),i in m||(m[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function Ze(e,t){var n,i,s,r,o;for(n in e)if(i=g.camelCase(n),s=t[i],r=e[n],g.isArray(r)&&(s=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),o=g.cssHooks[i],o&&"expand"in o){r=o.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=s)}else t[i]=s}function Je(e,t,n){var i,s,r=0,o=Je.prefilters.length,a=g.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Fe||Ke(),n=Math.max(0,d.startTime+d.duration-t),i=n/d.duration||0,r=1-i,o=0,l=d.tweens.length;o<l;o++)d.tweens[o].run(r);return a.notifyWith(e,[d,r,n]),r<1&&l?n:(a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:g.extend({},t),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},n),originalProperties:t,originalOptions:n,startTime:Fe||Ke(),duration:n.duration,tweens:[],createTween:function(t,n){var i=g.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)d.tweens[n].run(1);return t?(a.notifyWith(e,[d,1,0]),a.resolveWith(e,[d,t])):a.rejectWith(e,[d,t]),this}}),c=d.props;for(Ze(c,d.opts.specialEasing);r<o;r++)if(i=Je.prefilters[r].call(d,e,c,d.opts),i)return g.isFunction(i.stop)&&(g._queueHooks(d.elem,d.opts.queue).stop=g.proxy(i.stop,i)),i;return g.map(c,Qe,d),g.isFunction(d.opts.start)&&d.opts.start.call(e,d),g.fx.timer(g.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}g.Animation=g.extend(Je,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,j.exec(t),n),n}]},tweener:function(e,t){g.isFunction(e)?(t=e,e=["*"]):e=e.match(N);for(var n,i=0,s=e.length;i<s;i++)n=e[i],Je.tweeners[n]=Je.tweeners[n]||[],Je.tweeners[n].unshift(t)},prefilters:[Xe],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),g.speed=function(e,t,n){var i=e&&"object"==typeof e?g.extend({},e):{complete:n||!n&&t||g.isFunction(e)&&e,duration:e,easing:n&&t||t&&!g.isFunction(t)&&t};return i.duration=g.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in g.fx.speeds?g.fx.speeds[i.duration]:g.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g.isFunction(i.old)&&i.old.call(this),i.queue&&g.dequeue(this,i.queue)},i},g.fn.extend({fadeTo:function(e,t,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var s=g.isEmptyObject(e),r=g.speed(t,n,i),o=function(){var t=Je(this,g.extend({},e),r);(s||H.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",r=g.timers,o=H.get(this);if(s)o[s]&&o[s].stop&&i(o[s]);else for(s in o)o[s]&&o[s].stop&&qe.test(s)&&i(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(n),t=!1,r.splice(s,1));!t&&n||g.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=H.get(this),i=n[e+"queue"],s=n[e+"queueHooks"],r=g.timers,o=i?i.length:0;for(n.finish=!0,g.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),g.each(["toggle","show","hide"],function(e,t){var n=g.fn[t];g.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ye(t,!0),e,i,s)}}),g.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){g.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),g.timers=[],g.fx.tick=function(){var e,t=0,n=g.timers;for(Fe=g.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||g.fx.stop(),Fe=void 0},g.fx.timer=function(e){g.timers.push(e),e()?g.fx.start():g.timers.pop()},g.fx.interval=13,g.fx.start=function(){je||(je=e.setInterval(g.fx.tick,g.fx.interval))},g.fx.stop=function(){e.clearInterval(je),je=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(t,n){return t=g.fx?g.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var s=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(s)}})},function(){var e=i.createElement("input"),t=i.createElement("select"),n=t.appendChild(i.createElement("option"));e.type="checkbox",u.checkOn=""!==e.value,u.optSelected=n.selected,t.disabled=!0,u.optDisabled=!n.disabled,e=i.createElement("input"),e.value="t",e.type="radio",u.radioValue="t"===e.value}();var $e,et=g.expr.attrHandle;g.fn.extend({attr:function(e,t){return P(this,g.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){g.removeAttr(this,e)})}}),g.extend({attr:function(e,t,n){var i,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?g.prop(e,t,n):(1===r&&g.isXMLDoc(e)||(t=t.toLowerCase(),s=g.attrHooks[t]||(g.expr.match.bool.test(t)?$e:void 0)),void 0!==n?null===n?(g.removeAttr(e,t),void 0):s&&"set"in s&&void 0!==(i=s.set(e,n,t))?i:(e.setAttribute(t,n+""),n):s&&"get"in s&&null!==(i=s.get(e,t))?i:(i=g.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&g.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,s=0,r=t&&t.match(N);if(r&&1===e.nodeType)for(;n=r[s++];)i=g.propFix[n]||n,g.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),$e={set:function(e,t,n){return!1===t?g.removeAttr(e,n):e.setAttribute(n,n),n}},g.each(g.expr.match.bool.source.match(/\w+/g),function(e,t){var n=et[t]||g.find.attr;et[t]=function(e,t,i){var s,r;return i||(r=et[t],et[t]=s,s=null!=n(e,t,i)?t.toLowerCase():null,et[t]=r),s}});var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;g.fn.extend({prop:function(e,t){return P(this,g.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[g.propFix[e]||e]})}}),g.extend({prop:function(e,t,n){var i,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&g.isXMLDoc(e)||(t=g.propFix[t]||t,s=g.propHooks[t]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(e,n,t))?i:e[t]=n:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=g.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),u.optSelected||(g.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;function st(e){return e.getAttribute&&e.getAttribute("class")||""}g.fn.extend({addClass:function(e){var t,n,i,s,r,o,a,l=0;if(g.isFunction(e))return this.each(function(t){g(this).addClass(e.call(this,t,st(this)))});if("string"==typeof e&&e)for(t=e.match(N)||[];n=this[l++];)if(s=st(n),i=1===n.nodeType&&(" "+s+" ").replace(it," "),i){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=g.trim(i),s!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,s,r,o,a,l=0;if(g.isFunction(e))return this.each(function(t){g(this).removeClass(e.call(this,t,st(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(N)||[];n=this[l++];)if(s=st(n),i=1===n.nodeType&&(" "+s+" ").replace(it," "),i){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=g.trim(i),s!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):g.isFunction(e)?this.each(function(n){g(this).toggleClass(e.call(this,n,st(this),t),t)}):this.each(function(){var t,i,s,r;if("string"===n)for(i=0,s=g(this),r=e.match(N)||[];t=r[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||(t=st(this),t&&H.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":H.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+st(n)+" ").replace(it," ").indexOf(t)>-1)return!0;return!1}});var rt=/\r/g,ot=/[\x20\t\r\n\f]+/g;g.fn.extend({val:function(e){var t,n,i,s=this[0];{if(arguments.length)return i=g.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,g(this).val()):e,null==s?s="":"number"==typeof s?s+="":g.isArray(s)&&(s=g.map(s,function(e){return null==e?"":e+""})),t=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=g.valHooks[s.type]||g.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(s,"value"))?n:(n=s.value,"string"==typeof n?n.replace(rt,""):null==n?"":n)}}}),g.extend({valHooks:{option:{get:function(e){var t=g.find.attr(e,"value");return null!=t?t:g.trim(g.text(e)).replace(ot," ")}},select:{get:function(e){for(var t,n,i=e.options,s=e.selectedIndex,r="select-one"===e.type||s<0,o=r?null:[],a=r?s+1:i.length,l=s<0?a:r?s:0;l<a;l++)if(n=i[l],(n.selected||l===s)&&(u.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!g.nodeName(n.parentNode,"optgroup"))){if(t=g(n).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var n,i,s=e.options,r=g.makeArray(t),o=s.length;o--;)i=s[o],(i.selected=g.inArray(g.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(e,t){if(g.isArray(t))return e.checked=g.inArray(g(e).val(),t)>-1}},u.checkOn||(g.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var at=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(t,n,s,r){var o,a,l,d,u,h,f,p=[s||i],m=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];if(a=l=s=s||i,3!==s.nodeType&&8!==s.nodeType&&!at.test(m+g.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),u=m.indexOf(":")<0&&"on"+m,t=t[g.expando]?t:new g.Event(m,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),n=null==n?[t]:g.makeArray(n,[t]),f=g.event.special[m]||{},r||!f.trigger||!1!==f.trigger.apply(s,n))){if(!r&&!f.noBubble&&!g.isWindow(s)){for(d=f.delegateType||m,at.test(d+m)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(s.ownerDocument||i)&&p.push(l.defaultView||l.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?d:f.bindType||m,h=(H.get(a,"events")||{})[t.type]&&H.get(a,"handle"),h&&h.apply(a,n),h=u&&a[u],h&&h.apply&&B(a)&&(t.result=h.apply(a,n),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),n)||!B(s)||u&&g.isFunction(s[m])&&!g.isWindow(s)&&(l=s[u],l&&(s[u]=null),g.event.triggered=m,s[m](),g.event.triggered=void 0,l&&(s[u]=l)),t.result}},simulate:function(e,t,n){var i=g.extend(new g.Event,n,{type:e,isSimulated:!0});g.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}}),g.fn.extend({trigger:function(e,t){return this.each(function(){g.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return g.event.trigger(e,t,n,!0)}}),g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){g.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),g.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),u.focusin="onfocusin"in e,u.focusin||g.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){g.event.simulate(t,e.target,g.event.fix(e))};g.event.special[t]={setup:function(){var i=this.ownerDocument||this,s=H.access(i,t);s||i.addEventListener(e,n,!0),H.access(i,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=H.access(i,t)-1;s?H.access(i,t,s):(i.removeEventListener(e,n,!0),H.remove(i,t))}}});var lt=e.location,dt=g.now(),ct=/\?/;g.parseJSON=function(e){return JSON.parse(e+"")},g.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+t),n};var ut=/#.*$/,ht=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt={},bt={},yt="*/".concat("*"),Et=i.createElement("a");Et.href=lt.href;function At(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,r=t.toLowerCase().match(N)||[];if(g.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function It(e,t,n,i){var s={},r=e===bt;function o(a){var l;return s[a]=!0,g.each(e[a]||[],function(e,a){var d=a(t,n,i);return"string"!=typeof d||r||s[d]?r?!(l=d):void 0:(t.dataTypes.unshift(d),o(d),!1)}),l}return o(t.dataTypes[0])||!s["*"]&&o("*")}function Ct(e,t){var n,i,s=g.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((s[n]?e:i||(i={}))[n]=t[n]);return i&&g.extend(!0,e,i),e}function wt(e,t,n){for(var i,s,r,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}function Tt(e,t,n,i){var s,r,o,a,l,d={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=c.shift(),r)if("*"===r)r=l;else if("*"!==l&&l!==r){if(o=d[l+" "+r]||d["* "+r],!o)for(s in d)if(a=s.split(" "),a[1]===r&&(o=d[l+" "+a[0]]||d["* "+a[0]],o)){!0===o?o=d[s]:!0!==d[s]&&(r=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lt.href,type:"GET",isLocal:ft.test(lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yt,text:"text/plain",html:"text/html",
xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ct(Ct(e,g.ajaxSettings),t):Ct(g.ajaxSettings,e)},ajaxPrefilter:At(vt),ajaxTransport:At(bt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var s,r,o,a,l,d,c,u,h=g.ajaxSetup({},n),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?g(f):g.event,m=g.Deferred(),v=g.Callbacks("once memory"),b=h.statusCode||{},y={},E={},A=0,I="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===A){if(!a)for(a={};t=gt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===A?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return A||(e=E[n]=E[n]||e,y[e]=t),this},overrideMimeType:function(e){return A||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(A<2)for(t in e)b[t]=[b[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||I;return s&&s.abort(t),w(0,t),this}};if(m.promise(C).complete=v.add,C.success=C.done,C.error=C.fail,h.url=((t||h.url||lt.href)+"").replace(ut,"").replace(mt,lt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=g.trim(h.dataType||"*").toLowerCase().match(N)||[""],null==h.crossDomain){d=i.createElement("a");try{d.href=h.url,d.href=d.href,h.crossDomain=Et.protocol+"//"+Et.host!=d.protocol+"//"+d.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=g.param(h.data,h.traditional)),It(vt,h,n,C),2===A)return C;c=g.event&&h.global,c&&0==g.active++&&g.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!pt.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ct.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ht.test(r)?r.replace(ht,"$1_="+dt++):r+(ct.test(r)?"&":"?")+"_="+dt++)),h.ifModified&&(g.lastModified[r]&&C.setRequestHeader("If-Modified-Since",g.lastModified[r]),g.etag[r]&&C.setRequestHeader("If-None-Match",g.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+yt+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)C.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(f,C,h)||2===A))return C.abort();I="abort";for(u in{success:1,error:1,complete:1})C[u](h[u]);if(s=It(bt,h,n,C),s){if(C.readyState=1,c&&p.trigger("ajaxSend",[C,h]),2===A)return C;h.async&&h.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},h.timeout));try{A=1,s.send(y,w)}catch(e){if(!(A<2))throw e;w(-1,e)}}else w(-1,"No Transport");function w(t,n,i,a){var d,u,y,E,I,w=n;2!==A&&(A=2,l&&e.clearTimeout(l),s=void 0,o=a||"",C.readyState=t>0?4:0,d=t>=200&&t<300||304===t,i&&(E=wt(h,C,i)),E=Tt(h,E,C,d),d?(h.ifModified&&(I=C.getResponseHeader("Last-Modified"),I&&(g.lastModified[r]=I),I=C.getResponseHeader("etag"),I&&(g.etag[r]=I)),204===t||"HEAD"===h.type?w="nocontent":304===t?w="notmodified":(w=E.state,u=E.data,y=E.error,d=!y)):(y=w,!t&&w||(w="error",t<0&&(t=0))),C.status=t,C.statusText=(n||w)+"",d?m.resolveWith(f,[u,w,C]):m.rejectWith(f,[C,w,y]),C.statusCode(b),b=void 0,c&&p.trigger(d?"ajaxSuccess":"ajaxError",[C,h,d?u:y]),v.fireWith(f,[C,w]),c&&(p.trigger("ajaxComplete",[C,h]),--g.active||g.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return g.get(e,t,n,"json")},getScript:function(e,t){return g.get(e,void 0,t,"script")}}),g.each(["get","post"],function(e,t){g[t]=function(e,n,i,s){return g.isFunction(n)&&(s=s||i,i=n,n=void 0),g.ajax(g.extend({url:e,type:t,dataType:s,data:n,success:i},g.isPlainObject(e)&&e))}}),g._evalUrl=function(e){return g.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},g.fn.extend({wrapAll:function(e){var t;return g.isFunction(e)?this.each(function(t){g(this).wrapAll(e.call(this,t))}):(this[0]&&(t=g(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return g.isFunction(e)?this.each(function(t){g(this).wrapInner(e.call(this,t))}):this.each(function(){var t=g(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g.isFunction(e);return this.each(function(n){g(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()}}),g.expr.filters.hidden=function(e){return!g.expr.filters.visible(e)},g.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var xt=/%20/g,St=/\[\]$/,_t=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,n,i){var s;if(g.isArray(t))g.each(t,function(t,s){n||St.test(e)?i(e,s):Nt(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,n,i)});else if(n||"object"!==g.type(t))i(e,t);else for(s in t)Nt(e+"["+s+"]",t[s],n,i)}g.param=function(e,t){var n,i=[],s=function(e,t){t=g.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=g.ajaxSettings&&g.ajaxSettings.traditional),g.isArray(e)||e.jquery&&!g.isPlainObject(e))g.each(e,function(){s(this.name,this.value)});else for(n in e)Nt(n,e[n],t,s);return i.join("&").replace(xt,"+")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=g.prop(this,"elements");return e?g.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!g(this).is(":disabled")&&Lt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Y.test(e))}).map(function(e,t){var n=g(this).val();return null==n?null:g.isArray(n)?g.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}}),g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ot={0:200,1223:204},kt=g.ajaxSettings.xhr();u.cors=!!kt&&"withCredentials"in kt,u.ajax=kt=!!kt,g.ajaxTransport(function(t){var n,i;if(u.cors||kt&&!t.crossDomain)return{send:function(s,r){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(o in s)a.setRequestHeader(o,s[o]);n=function(e){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ot[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return g.globalEval(e),e}}}),g.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),g.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(s,r){t=g("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Mt=[],Pt=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mt.pop()||g.expando+"_"+dt++;return this[e]=!0,e}}),g.ajaxPrefilter("json jsonp",function(t,n,i){var s,r,o,a=!1!==t.jsonp&&(Pt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=g.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Pt,"$1"+s):!1!==t.jsonp&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return o||g.error(s+" was not called"),o[0]},t.dataTypes[0]="json",r=e[s],e[s]=function(){o=arguments},i.always(function(){void 0===r?g(e).removeProp(s):e[s]=r,t[s]&&(t.jsonpCallback=n.jsonpCallback,Mt.push(s)),o&&g.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),g.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||i;var s=C.exec(e),r=!n&&[];return s?[t.createElement(s[1])]:(s=te([e],t,r),r&&r.length&&g(r).remove(),g.merge([],s.childNodes))};var Bt=g.fn.load;g.fn.load=function(e,t,n){if("string"!=typeof e&&Bt)return Bt.apply(this,arguments);var i,s,r,o=this,a=e.indexOf(" ");return a>-1&&(i=g.trim(e.slice(a)),e=e.slice(0,a)),g.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&g.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done(function(e){r=arguments,o.html(i?g("<div>").append(g.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){g.fn[t]=function(e){return this.on(t,e)}}),g.expr.filters.animated=function(e){return g.grep(g.timers,function(t){return e===t.elem}).length};function Rt(e){return g.isWindow(e)?e:9===e.nodeType&&e.defaultView}g.offset={setOffset:function(e,t,n){var i,s,r,o,a,l,d,c=g.css(e,"position"),u=g(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),r=g.css(e,"top"),l=g.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,d?(i=u.position(),o=i.top,s=i.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),g.isFunction(t)&&(t=t.call(e,n,g.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+s),"using"in t?t.using.call(e,h):u.css(h)}},g.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){g.offset.setOffset(this,e,t)});var t,n,i=this[0],s={top:0,left:0},r=i&&i.ownerDocument;if(r)return t=r.documentElement,g.contains(t,i)?(s=i.getBoundingClientRect(),n=Rt(r),{top:s.top+n.pageYOffset-t.clientTop,left:s.left+n.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===g.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),g.nodeName(e[0],"html")||(i=e.offset()),i.top+=g.css(e[0],"borderTopWidth",!0),i.left+=g.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-g.css(n,"marginTop",!0),left:t.left-i.left-g.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===g.css(e,"position");)e=e.offsetParent;return e||De})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;g.fn[e]=function(i){return P(this,function(e,i,s){var r=Rt(e);if(void 0===s)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:s,n?s:r.pageYOffset):e[i]=s},e,i,arguments.length)}}),g.each(["top","left"],function(e,t){g.cssHooks[t]=Ne(u.pixelPosition,function(e,n){if(n)return n=Le(e,t),xe.test(n)?g(e).position()[t]+"px":n})}),g.each({Height:"height",Width:"width"},function(e,t){g.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){g.fn[i]=function(i,s){var r=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===s?"margin":"border");return P(this,function(t,n,i){var s;return g.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?g.css(t,n,o):g.style(t,n,i,o)},t,r?i:void 0,r,null)}})}),g.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),g.fn.andSelf=g.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return g});var Ht=e.jQuery,Ut=e.$;return g.noConflict=function(t){return e.$===g&&(e.$=Ut),t&&e.jQuery===g&&(e.jQuery=Ht),g},t||(e.jQuery=e.$=g),g}),define("brease/events/DummyEvent",[],function(){"use strict";var DummyEvent=function(e,t){this.type=e,this.target=t,this.defaultPrevented=!1};return DummyEvent.prototype.preventDefault=function(){this.originalEvent&&!0!==this.defaultPrevented&&"function"==typeof this.originalEvent.preventDefault&&(this.defaultPrevented=!0,this.originalEvent.preventDefault())},DummyEvent.prototype.stopPropagation=function(){},DummyEvent.prototype.stopImmediatePropagation=function(){},DummyEvent.prototype.isDefaultPrevented=function(){return this.defaultPrevented},DummyEvent.prototype.isImmediatePropagationStopped=function(){return!1},DummyEvent.prototype.isPropagationStopped=function(){return!1},DummyEvent}),define("brease/events/VirtualEvents",["brease/core/Utils","brease/events/DummyEvent","jquery"],function(Utils,DummyEvent){"use strict";var VirtualEvents={init:function(){for(var n in e)document.addEventListener(n,h,!0);u.on("click mousedown mouseup",function(e){void 0!==e.isTrigger&&S(e.target,"v"+e.type,e,{pointerId:0})});for(var s=0;s<i.length;s+=1)$.event.special[i[s]]=E(i[s]);return t.init(),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},delete VirtualEvents.init,this},reset:function(){t.reset(),c=!0},getPointerId:function(e){return A(e)},triggerVirtualEvent:function(e,t,n,i){S(e,t,n,i)},isVirtualEvent:function(e){return!0===e.virtual}},e={mousedown:{vtype:"vmousedown",device:"mouse",phase:"start"},touchstart:{vtype:"vmousedown",device:"touch",phase:"start"},mouseup:{vtype:"vmouseup",device:"mouse",phase:"end"},touchend:{vtype:"vmouseup",device:"touch",phase:"end"},mousemove:{vtype:"vmousemove",device:"mouse",phase:"move"},touchmove:{vtype:"vmousemove",device:"touch",phase:"move"}},t={blocked:"",block:function(e){this.blocked=e},isBlocked:function(e){return this.blocked===e},startReset:function(){this.stopReset(),this.timer=window.setTimeout(this.boundReset,1e3)},stopReset:function(){window.clearTimeout(this.timer)},reset:function(){this.stopReset(),this.blocked=""},init:function(){this.boundReset=this.reset.bind(this)}},n=["clientX","clientY","pageX","pageY","screenX","screenY"],i=["vmousedown","vmousemove","vmouseup","vclick"],s=window.devicePixelRatio>1?window.devicePixelRatio:1,r=20*s,o=2,a={},l={},d={},c=!0,u=$(document);Utils.defineProperty(VirtualEvents,"SCROLL_THRESHOLD",o),Utils.defineProperty(VirtualEvents,"MOVE_THRESHOLD",r);function h(t){var n=t.type,i=t.target,s=e[n],r=A(t),o=_(t);VirtualEvents.touchLength=o,!0===g(s,t,i,r,o)&&!0===d[r]&&("vmouseup"===s.vtype&&(l.el=x(i),l.ev=Utils.getOffsetOfEvent(t)),S(i,s.vtype,t,{pointerId:r}),f(s,t,i,r))}function g(e,n,i,s,r){var o=!1;switch(e.phase){case"start":"touch"===e.device?(t.stopReset(),t.block("mouse"),o=!0):o=!t.isBlocked("mouse"),d[s]=!(r>1)||T(i),c=!1;break;case"move":o="touch"===e.device?!c:!t.isBlocked("mouse")&&!c;break;case"end":o="touch"===e.device||!t.isBlocked("mouse"),0===r&&(c=!0),0===r&&"touch"===e.device&&t.startReset();break}return o}function f(e,t,n,i){"vmouseup"===e.vtype&&m(t,n,i),"end"===e.phase&&b(i),"start"===e.phase&&p(t,n,i)}function p(e,t,n){a[n]={el:x(t),ev:Utils.getOffsetOfEvent(e),target:t}}function m(t,n,i){if(void 0!==a[i]){var s=Math.abs(l.el.x-a[i].el.x),d=Math.abs(l.el.y-a[i].el.y),c=Math.abs(l.ev.x-a[i].ev.x),u=Math.abs(l.ev.y-a[i].ev.y);if(s<=o&&d<=o&&c<r&&u<r)v(t,i);else if(c<3&&u<3&&a[i].target!==n)v(t,i);else if("mouse"===e[t.type].device&&Utils.closestWidgetElem(a[i].target)===Utils.closestWidgetElem(n)){var h=x(a[i].target);Math.abs(h.x-a[i].el.x)<o&&Math.abs(h.y-a[i].el.y)<o&&v(t,i)}}}function v(e,t){S(e.target,"vclick",e,{pointerId:t})}function b(e){a[e]=void 0}function y(){}function E(e){var t=e.substr(1);return{setup:function(){$(this).on(t,y)},teardown:function(){$(this).off(t,y)}}}function A(e){return void 0!==e.pointerId?e.pointerId:e.changedTouches?e.changedTouches[0].identifier:0}function I(e,t,i){var s;return VirtualEvents.isVirtualEvent(e)?(s=$.Event(t,{detail:i,originalEvent:e.originalEvent}),Utils.transferProperties(e,s,n)):(s=$.event.fix(e),s=C(s,e,i.pointerId),s.type=t,s.detail=i),s.virtual=!0,void 0===s.which&&(s.which=1),"vclick"===t&&(s.originalEvent=new DummyEvent("click",e.target),Utils.transferProperties(e,s.originalEvent,n),s.originalEvent.originalEvent=e),s}function C(e,t,i){if(-1!==t.type.indexOf("touch")){var s=w(t,i);s&&Utils.transferProperties(s,e,n)}return e}function w(e,t){var n,i,s=e.touches,r=e.changedTouches;if(r&&r.length>0){for(i=0;i<r.length;i+=1)if(r[i].identifier===t){n=r[i];break}}else if(s&&s.length>0)for(i=0;i<s.length;i+=1)if(s[i].identifier===t){n=s[i];break}return n}function T(e){return null!==e.getAttribute("data-multitouch")||$(e).parents("[data-multitouch]").length>0}function x(e){if(e&&"function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();return{x:void 0!==t.left?t.left:0,y:void 0!==t.top?t.top:0}}return{x:0,y:0}}function S(e,t,n,i){var s=I(n,t,i);$(e).trigger(s)}function _(e){var t=0;return e&&e.touches&&(t=e.touches.length),t}return VirtualEvents.init()}),define("brease/events/jqueryEvents",["jquery","brease/events/VirtualEvents"],function(e,VirtualEvents){"use strict";return e.event.special.dblclick={name:"dblclick",namespace:".dblclick",setup:function(){e(this).on("vmouseup"+e.event.special.dblclick.namespace,e.event.special.dblclick.handler)},handler:function(t){var n=t.target,i=e(n),s=i.data("lastTouch")||0,r=(new Date).getTime(),o=r-s;o>20&&o<500?(i.data("lastTouch",0),VirtualEvents.triggerVirtualEvent(n,e.event.special.dblclick.name,t,{pointerId:VirtualEvents.getPointerId(t)})):i.data("lastTouch",r)},teardown:function(){e(this).off("vmouseup"+e.event.special.dblclick.namespace)}},e.event.special.taphold={threshold:750,name:"taphold",namespace:".taphold",setup:function(){e(this).on("vmousedown"+e.event.special.taphold.namespace,e.event.special.taphold.handler)},handler:function(t){if(t.which&&1!==t.which)return!1;var n,i=t.target,s=e(i);function r(){window.clearTimeout(n)}function o(){r(),s.off("vmouseup"+e.event.special.taphold.namespace,r),s.off("vclick"+e.event.special.taphold.namespace,o)}s.on("vmouseup"+e.event.special.taphold.namespace,r),s.on("vclick"+e.event.special.taphold.namespace,o),n=window.setTimeout(function(){VirtualEvents.triggerVirtualEvent(i,e.event.special.taphold.name,t,{pointerId:VirtualEvents.getPointerId(t)})},e.event.special.taphold.threshold)},teardown:function(){e(this).off("vmousedown"+e.event.special.taphold.namespace).off("vclick"+e.event.special.taphold.namespace).off("vmouseup"+e.event.special.taphold.namespace)}},null}),define("libs/polyfill",[],function(){"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}window.CustomEvent&&(e.prototype=window.CustomEvent.prototype),window.CustomEvent=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},s=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,s.prototype=new i,s}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),!console||!console.log||"debug"in console||(console.debug=function(){console.log.apply(console,arguments)}),!console||!console.log||"warn"in console||(console.warn=function(){console.log.apply(console,arguments)}),!console||!console.log||"info"in console||(console.info=function(){console.log.apply(console,arguments)}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/,t=e.exec(this.toString());return t&&t.length>1?t[1].trim():""},set:function(){}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null===this||void 0===this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var s=0|t,r=Math.max(s>=0?s:i-Math.abs(s),0);function o(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;r<i;){if(o(n[r],e))return!0;r+=1}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){for(var t,n=0;n<this.length;n+=1)if(!0===e(this[n])){t=this[n];break}return t}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),document.baseURI||Object.defineProperty(document,"baseURI",{get:function(){var e=document.getElementsByTagName("base");return e.length>0?e[0].href:document.URL}}),window.Map||(window.Map=function(){this.items={},this.orderedItems=[];var e=this;Object.defineProperty(e,"size",{get:function(){return Object.keys(e.items).length}})},Map.prototype.set=function(e,t){return this.items[e]=t,this.orderedItems.push({key:e,value:t}),this},Map.prototype.get=function(e){return this.items[e]},Map.prototype.delete=function(e){var t=!1;return this.items[e]&&(delete this.items[e],t=!0),t},Map.prototype.forEach=function(e){for(var t in this.items)e(this.items[t],t)},Map.prototype.clear=function(){this.orderedItems=[];for(var e in this.items)delete this.items[e]},Map.prototype.has=function(e){return void 0!==this.items[e]},Map.prototype.entries=function(){var e=[];e=this.orderedItems.map(function(e){return[e.key,e.value]});function t(e){var t=0;return{next:function(){return t<e.length?{value:e[t++]}:{value:void 0}}}}return t(e)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function e(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var r=arguments[s];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0}),"function"!=typeof Math.log10&&(Math.log10=function(e){return Math.log(e)/Math.LN10})}),define("brease/services/Preloader",["libs/polyfill"],function(){"use strict";var e={get:function(e){var n=t.get(e);return void 0!==n&&t.delete(e),n}},t=new Map;return!function e(){if(window.brease&&window.brease.preloader)for(var n in window.brease.preloader)t.set(n,window.brease.preloader[n])}(),e}),define("brease/application",["brease/config","brease/settings","brease/core/Utils","jquery","brease/events/VirtualEvents","brease/events/jqueryEvents","libs/lodash","libs/polyfill","brease/services/Preloader"],function(e,t,Utils){"use strict";function n(n,i,s){var r=document.getElementById("appContainer").getAttribute("data-mocked"),o=null!==r,a=o?"brease/helper/stubs/ServiceBridge":"brease/services/ServiceBridge",l=o?"brease/helper/stubs/WebSocket":"brease/services/WebSocket";void 0!==s&&$.extend(!0,e,s),e.detection||(e.detection={mobile:!1,ios:!1}),Utils.defineProperty(e,"debug",0===$('script[src="release/brease.js"]').length),Utils.defineProperty(e,"mocked",o),Utils.defineProperty(e,"mockType",r);var d=document.getElementById("appContainer");window.brease={config:e,settings:t,appElem:d,appView:$(d)},require([a,l,"brease/services/RuntimeService","brease/core/libs/Extensions","brease/events/BreaseEvent"],function(t,s,r,Extensions,BreaseEvent){if(BreaseEvent.init(brease.config.editMode),Extensions.console.init(e),r.init(t,s),!0===brease.config.debug){var a=new Date;console.iatInfo("application start: "+a.toLocaleDateString()+", "+a.toLocaleTimeString()),o&&console.iatInfo("server communication mocked: true")}var l=["brease/core/BaseWidget"];!0===brease.config.editMode&&l.push("brease/core/designer/BaseWidget/ClassExtension"),require(l,function(BaseWidget,e){e&&e.extend(BaseWidget),require(["brease/controller/BindingController","brease/controller/ConnectionController","brease/controller/InfoController","brease/controller/ActionController","brease/controller/PageController","brease/controller/OverlayController","brease/controller/UIController","brease/helper/NumberFormatter","brease/controller/EventController","brease/controller/WidgetController","brease/model/VisuModel"],function(e,t,s,o,a,d,c,NumberFormatter,u,h,g){require(["brease/services/MeasurementSystem","brease/services/Language","brease/services/Culture","brease/services/User","brease/services/TextFormatter","brease/services/Logger","brease/services/Configuration","brease/services/Opcua"],function(f,p,m,v,b,y,E,A){l=["brease/brease"],!0===brease.config.editMode&&l.push("brease/core/designer/Brease/ClassExtension"),require(l,function(brease,l){l&&l.extend(brease),brease.init(r,{measurementSystem:f,language:p,culture:m,user:v,textFormatter:b,loggerService:y,configuration:E,opcua:A},{bindingController:e,connectionController:t,infoController:s,action:o,visuData:g,pageController:a,overlayController:d,uiController:c,widgetsController:h,formatter:new NumberFormatter,eventController:u}),brease[n](i)})})})})})}return{start:function(e,t){n("startContent",e,t)},startVisu:function(e,t){n("startVisu",e,t)}}}),define("brease/controller/objects/Client",[],function(){"use strict";var Client={init:function(n){n&&"function"==typeof n.setClientInformation&&(t=n),e=void 0},setValid:function(n){!0!==e&&!0===n&&void 0!==t&&t.setClientInformation('{"isValid": true}'),e=n},setId:function(e){n=e}},e,t,n;return Object.defineProperty(Client,"isValid",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(Client,"id",{get:function(){return n},enumerable:!0,configurable:!0}),Client}),define("brease/events/BreaseEvent",[],function(){"use strict";var e={enumerable:!0,configurable:!1,writable:!1},t=function(t,n,i){e.value=i,Object.defineProperty(t,n,e)},n={};t(n,"CLICK","vclick"),t(n,"MOUSE_DOWN","vmousedown"),t(n,"MOUSE_UP","vmouseup"),t(n,"MOUSE_MOVE","vmousemove"),t(n,"DBL_CLICK","dblclick");var BreaseEvent=function(){this.EDIT={}},i=BreaseEvent.prototype;t(i,"eventNames",n),t(i,"support",{}),i.init=function(e){this.setEditMode(e);try{document.createElement("div").addEventListener("test",function(){},{get capture(){return s.support.options=!0,!1}})}catch(e){s.support.options=!1}delete i.init},i.setEditMode=function(e){for(var t in this.eventNames)this.EDIT[t]=!0===e?this.eventNames[t]:"notAvailable",this[t]=!0===e?"notAvailable":this.eventNames[t]};var s=new BreaseEvent;return t(s,"APP_READY","app_ready"),t(s,"APP_RESIZE","app_resize"),t(s,"UI_READY","ui_ready"),t(s,"BINDING_LOADED","binding_loaded"),t(s,"EVENTBINDING_LOADED","eventbinding_loaded"),t(s,"CONTENT_ACTIVATED","ContentActivated"),t(s,"CONTENT_DEACTIVATED","ContentDeactivated"),t(s,"VISU_ACTIVATED","VisuActivated"),t(s,"VISU_DEACTIVATED","VisuDeactivated"),t(s,"CONNECTION_STATE_CHANGED","ConnectionStateChanged"),t(s,"DISABLED_CLICK","disabled_click"),t(s,"RESOURCES_LOADED","resources_loaded"),t(s,"LANGUAGE_LOADED","language_loaded"),t(s,"LANGUAGE_CHANGED","language_changed"),t(s,"CULTURE_LOADED","culture_loaded"),t(s,"CULTURE_CHANGED","culture_changed"),t(s,"MEASUREMENT_SYSTEM_LOADED","measurementSystem_loaded"),t(s,"MEASUREMENT_SYSTEM_CHANGED","measurementSystem_changed"),t(s,"USER_CHANGED","user_changed"),t(s,"USER_LOADED","user_loaded"),t(s,"ROLES_CHANGED","roles_changed"),t(s,"SCROLL_START","scrollStart"),t(s,"SCROLL_END","scrollEnd"),t(s,"VISIBILITY_CHANGED","visibility_changed"),t(s,"LOG_MESSAGE","log_message"),t(s,"CONTENT_PARSED","content_parsed"),t(s,"CONTENT_READY","content_ready"),t(s,"PROPERTY_CHANGED","property_changed"),t(s,"INITIAL_VALUE_CHANGE_FINISHED","PropertyValueChangedFinished"),t(s,"WIDGET_READY","widget_ready"),t(s,"WIDGET_INITIALIZED","widget_initialized"),t(s,"WIDGET_DISPOSE","widget_dispose"),t(s,"WIDGET_UPDATED","widget_updated"),t(s,"WIDGET_ADDED","widget_added"),t(s,"WIDGET_REMOVED","widget_removed"),t(s,"PLUGIN_LOADED","plugin_loaded"),t(s,"CLOSED","window_closed"),t(s,"WINDOW_SHOW","window_show"),t(s,"DIALOG_OPEN","dialog_open"),t(s,"DIALOG_CLOSED","dialog_closed"),t(s,"TOOLTIPMODE_ACTIVE","tooltipMode_activate"),t(s,"TOOLTIPMODE_INACTIVE","tooltipMode_inactive"),t(s,"SORT_COMPLETED","sort_completed"),t(s,"ROW_SELECTED","row_selected"),t(s,"FRAGMENT_LOADED","fragment_loaded"),t(s,"FRAGMENT_SHOW","fragment_show"),t(s,"FRAGMENT_HIDE","fragment_hide"),t(s,"BEFORE_HIDE","fragment_before_hide"),t(s,"BEFORE_UNLOAD","fragment_before_unload"),t(s,"PAGE_CHANGE","pageChange"),t(s,"PAGE_LOADED","pageLoaded"),t(s,"THEME_CHANGED","theme_changed"),t(s,"NAVIGATION_DISPOSE","navDispose"),t(s,"LOAD_ERROR","load_error"),t(s,"UPDATE_CURSOR_INTERSECTION","update_cursor_intersection"),t(s,"UPDATE_CURSOR","update_ursor"),t(s,"REMOVE_CURSOR","remove_cursor"),t(s,"VIEWPORT_CHANGE","viewport_changed"),t(s,"CURVE_CHANGE","curve_changed"),t(s,"SUBMIT","value_submit"),t(s,"CHANGE","change"),t(s,"ATTRIBUTE_CHANGE","attribute_change"),t(s,"NODE_ATTRIBUTE_CHANGE","node_attribute_change"),t(s,"NUMBERFORMAT_CHANGE","numberFormat_change"),t(s,"GROUP_CHANGE","group_change"),t(s,"TICK","tick"),t(s,"ALERT","alert"),t(s,"TAP_HOLD","taphold"),s}),define("brease/events/ServerEvent",["brease/core/Utils"],function(Utils){"use strict";var ServerEvent={};return Utils.defineProperty(ServerEvent,"CONTENT_ACTIVATED","ContentActivated"),Utils.defineProperty(ServerEvent,"CONTENT_DEACTIVATED","ContentDeactivated"),Utils.defineProperty(ServerEvent,"SESSION_ACTIVATED","SessionActivated"),Utils.defineProperty(ServerEvent,"VISU_ACTIVATED","VisuActivated"),Utils.defineProperty(ServerEvent,"PROPERTY_VALUE_CHANGED","PropertyValueChanged"),Utils.defineProperty(ServerEvent,"USER_CHANGED","UserChanged"),Utils.defineProperty(ServerEvent,"TRANSFER_START","TransferStart"),Utils.defineProperty(ServerEvent,"TRANSFER_FINISH","TransferFinish"),Utils.defineProperty(ServerEvent,"LANGUAGE_CHANGED","LanguageChanged"),ServerEvent}),define("brease/events/SystemGestures",["brease/core/Utils","brease/config","hammer"],function(Utils,e,t){"use strict";var n=2,i=5,s=1,r={SystemGesture1:{Type:"SystemGesture1",touchPoints:2},SystemGesture2:{Type:"SystemGesture2",touchPoints:2},SystemGesture3:{Type:"SystemGesture3",touchPoints:2}},SystemGestures={GESTURES:r,maxTouchPoints:5,minTouchPoints:1,activeGestures:[],lockTimeout:300,init:function(n){for(var i=1;i<=3;i+=1)brease.config.gestures&&brease.config.gestures["SystemGesture"+i]?r["SystemGesture"+i].touchPoints=Math.min(5,Math.max(1,brease.config.gestures["SystemGesture"+i].touchPoints)):r["SystemGesture"+i].touchPoints=2;var s={};!0===e.visu.browserZoom&&!0===e.detection.ios&&(s.touchAction="pinch-zoom");var o=n||t.Manager;return this.gestureManager=new o(document.body,s),this.gestureManager},on:function(e,t){if(void 0===r[e])return console.warn("unknown gesture type:"+e),void 0;void 0===o[e]&&u.call(SystemGestures,e),
a[e]||(a[e]=[]),-1===a[e].indexOf(t)&&a[e].push(t)},off:function(e,t){if(a[e]){var n=a[e].indexOf(t);-1!==n&&a[e].splice(n,1)}},hasEventListener:function(e){return Array.isArray(a[e])&&a[e].length>0}},o={},a={},l=!1,d,c=["clientX","clientY","pageX","pageY","screenX","screenY"];function u(e){o[e]={manager:this.gestureManager,recognizer:new t.Swipe({event:e,direction:t.DIRECTION_ALL,pointers:r[e].touchPoints,threshold:brease.settings.swipe.moveThreshold,velocity:brease.settings.swipe.velocity})},o[e].manager.add([o[e].recognizer]),o[e].manager.on(e,h)}function h(e){var t="";switch(e.direction){case 2:t="fromRight";break;case 4:t="fromLeft";break;case 8:t="fromBottom";break;case 16:t="fromTop";break}var n=0,i=[],s=[];if(Array.isArray(e.pointers))for(var r=0;r<e.pointers.length;r+=1)i.push(e.pointers[r].pageX),s.push(e.pointers[r].pageY);if(i.length>1){var o=i.length>1?Math.abs(i[0]-i[1]):0,a=s.length>1?Math.abs(s[0]-s[1]):0;n=2===e.direction||4===e.direction?parseInt(a,10):parseInt(o,10)}if(""!==t&&!1===l&&(0===n||n<=brease.settings.swipe.maxFingerDistance)){l=!0;var d={type:e.type,target:e.target,detail:{direction:t}};Array.isArray(e.changedPointers)&&Utils.transferProperties(e.changedPointers[0],d,c),p(d),g()}}function g(){d&&clearTimeout(d),SystemGestures.lockTimeout>0?d=window.setTimeout(f,SystemGestures.lockTimeout):f()}function f(){l=!1}function p(e){for(var t=0;t<a[e.type].length;t+=1)a[e.type][t].call(null,e)}return SystemGestures}),define("brease/enum/IAT_Enum",[],function(){"use strict";var IAT_Enum=function IAT_Enum(e){for(var t in e){if(IAT_Enum.prototype[t])throw new SyntaxError("reserved key '"+t+"'");Object.defineProperty(this,t,{enumerable:!0,configurable:!1,writable:!1,value:e[t]})}};return Object.defineProperty(IAT_Enum.prototype,"hasMember",{value:function(e){return-1!==this.getMembers().indexOf(e)},enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(IAT_Enum.prototype,"getMembers",{value:function(){var e=[];for(var t in this)this.propertyIsEnumerable(t)&&"function"!=typeof this[t]&&e.push(this[t]);return e},enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(IAT_Enum.prototype,"getKeyForValue",{value:function(e){var t;for(var n in this)if(this[n]===e){t=n;break}return t},enumerable:!1,configurable:!1,writable:!1}),IAT_Enum}),define("brease/enum/Enum",["brease/enum/IAT_Enum"],function(e){"use strict";var Enum={};function t(t,n){Object.defineProperty(Enum,t,{enumerable:!0,configurable:!1,writable:!1,value:new e(n)})}return t("TextAlign",{center:"center",left:"left",right:"right"}),t("Floating",{left:"left",right:"right"}),t("Orientation",{RTL:"RightToLeft",LTR:"LeftToRight",BTT:"BottomToTop",TTB:"TopToBottom"}),t("XAxisOrientation",{RTL:"RightToLeft",LTR:"LeftToRight"}),t("YAxisOrientation",{BTT:"BottomToTop",TTB:"TopToBottom"}),t("Direction",{horizontal:"horizontal",vertical:"vertical"}),t("LabelPosition",{inside:"inside",outside:"outside"}),t("WidgetState",{ABORTED:-3,FAILED:-2,NON_EXISTENT:-1,IN_QUEUE:0,IN_PARSE_QUEUE:.5,INITIALIZED:1,READY:2,SUSPENDED:3}),t("Dependency",{INACTIVE:-1,SUSPENDED:0,ACTIVE:1}),t("MessageBoxIcon",{ASTERISK:"Asterisk",ERROR:"Error",EXCLAMATION:"Exclamation",HAND:"Hand",INFORMATION:"Information",NONE:"None",QUESTION:"Question",STOP:"Stop",WARNING:"Warning"}),t("MessageBoxState",{YES:1,NO:2,OK:4,CANCEL:8,ABORT:16,RETRY:32,IGNORE:64}),t("MessageBoxType",{AbortRetryIgnore:"AbortRetryIgnore",OK:"OK",OKCancel:"OKCancel",RetryCancel:"RetryCancel",YesNo:"YesNo",YesNoCancel:"YesNoCancel"}),t("DialogMode",{MODAL:"modal",MODELESS:"modeless"}),t("NoSelectionPolicy",{selectFirst:"selectFirst",showPrompt:"showPrompt"}),t("LimitViolationPolicy",{NO_SUBMIT:"noSubmit",NO_SUBMIT_AND_CLOSE:"noSubmitAndClose",SUBMIT_ALL:"submitAll",SET_TO_LIMIT:"setToLimit",SET_TO_LIMIT_AND_SUBMIT:"setToLimitAndSubmit"}),t("SortDirection",{ASC:"ascending",DESC:"descending"}),t("SortFunction",{STRING:"string",STRING_INS:"string-ins",NUMBER:"number",INT:"int",DATE:"date"}),t("ImageAlign",{left:"left",right:"right",top:"top",bottom:"bottom"}),t("TabPosition",{left:"left",right:"right",top:"top",bottom:"bottom"}),t("ImagePosition",{left:"left",right:"right"}),t("BackgroundPosition",{left_top:"left top",left_center:"left center",left_bottom:"left bottom",center_top:"center top",center_center:"center center",center_bottom:"center bottom",right_top:"right top",right_center:"right center",right_bottom:"right bottom"}),t("TextAlignmentAll",{left_top:"left top",left_center:"left",left_bottom:"left bottom",center_top:"center top",center_center:"center",center_bottom:"center bottom",right_top:"right top",right_center:"right",right_bottom:"right bottom"}),t("InterpolationType",{NONE:"none",STEP:"step",LINEAR:"linear"}),t("Position",{left:"left",center:"center",right:"right",top:"top",middle:"middle",bottom:"bottom"}),t("PointOfOrigin",{APP:"application",CONTAINER:"container",ELEMENT:"element"}),t("PromptType",{image:"image",text:"text",all:"all"}),t("ChildPositioning",{absolute:"absolute",relative:"relative"}),t("LoadPolicy",{ONDEMAND:"onDemand",IMMEDIATE:"immediate"}),t("InputType",{text:"text",password:"password"}),t("CachePolicy",{CACHE:"cache",NO_CACHE:"noCache"}),t("SelectMode",{STANDARD:"standard",ADVANCED:"advanced",QUICK:"quick"}),t("SizeMode",{COVER:"cover",CONTAIN:"contain",FILL:"fill"}),Object.defineProperty(Enum.SizeMode,"convertToCSS",{value:function(e){var t="contain";return e===Enum.SizeMode.CONTAIN?t="contain":e===Enum.SizeMode.COVER?t="cover":e===Enum.SizeMode.FILL&&(t="100% 100%"),t},enumerable:!1,configurable:!1,writable:!1}),t("TickStyle",{NONE:"none",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOPBOTTOM:"topbottom"}),t("ChartType",{LINE_CHART:"linechart",BAR_CHART:"barchart",PIE_CHART:"piechart"}),t("VerticalAlign",{top:"top",bottom:"bottom"}),t("HorizontalAlign",{left:"left",right:"right"}),t("MeasurementSystem",{METRIC:"metric",IMPERIAL:"imperial",IMPERIAL_US:"imperial-us"}),t("HorizontalPosition",{left:"left",center:"center",right:"right"}),t("VerticalPosition",{top:"top",middle:"middle",bottom:"bottom"}),t("ShowData",{percentage:"percentage",value:"value",none:"none"}),t("AlarmListItemType",{ad1:"additionalInfo1",ad2:"additionalInfo2",cod:"code",ins:"instanceId",mes:"message",nam:"name",sco:"scope",sev:"severity",sta:"state",tim:"timestamp",cat:"category"}),t("AlarmHistoryItemType",{ad1:"additionalInfo1",ad2:"additionalInfo2",cat:"category",cod:"code",ins:"instanceId",mes:"message",nam:"name",sco:"scope",sev:"severity",stn:"new state",sto:"old state",tim:"timestamp"}),t("CropToParent",{none:"none",height:"height",width:"width",both:"both"}),t("VideoPlayerPreload",{auto:"auto",metadata:"metadata",none:"none"}),t("DropDownDisplaySettings",{default:"default",image:"image",text:"text",imageAndText:"imageAndText"}),t("AuditListItemType",{idx:"id",opn:"operator name",tex:"text",tim:"timestamp",typ:"type"}),t("ChartZoomType",{none:"none",x:"x",y:"y",xy:"xy"}),t("ChartInterpolationType",{linear:"linear",stepBefore:"step-before",stepAfter:"step-after",cardinal:"cardinal",monotone:"monotone"}),t("EventLoggerFacility",{IAT:193}),t("EventLoggerId",{CLIENT_START_OK:32e3,CLIENT_START_FAIL:32001,NO_FURTHER_SESSION:32003,MAX_CLIENTS:32004,NOT_ENOUGH_LICENSES:32005,NO_LICENSE:32006,CLIENT_SCRIPT_FAIL:32010,CLIENT_MODULELOADER_FAIL:32011,CLIENT_PARSE_ERROR:32012,CLIENT_BINDING_ATTACH_OK:32020,CLIENT_BINDING_ATTACH_FAIL:32021,CLIENT_BINDING_ID_NOTFOUND:32022,CLIENT_BINDING_DETACH_OK:32030,CLIENT_BINDING_DETACH_FAIL:32031,CLIENT_USER_AUTHENTICATE_OK:32040,CLIENT_USER_AUTHENTICATE_FAIL:32041,CLIENT_USER_SETUSER_OK:32050,CLIENT_USER_SETUSER_FAIL:32051,CLIENT_USER_USERCHANGE:32052,CLIENT_VISU_NOT_FOUND:32060,CLIENT_INCORRECT_VISU:32061,CLIENT_NO_PAGES_FOUND:32062,CLIENT_NO_LAYOUTS_FOUND:32063,CLIENT_PAGE_NOT_FOUND:32064,CLIENT_CONTENT_NOT_FOUND:32065,CLIENT_LAYOUT_NOT_FOUND:32066,CLIENT_DIALOG_NOT_FOUND:32067,CLIENT_AREA_NOT_FOUND:32068,CLIENT_THEME_NOT_FOUND:32069,CLIENT_PAGE_NOT_CURRENT:32070,CLIENT_CONTENT_IS_ACTIVE:32071,CLIENT_CONTENT_NOT_ASSIGNED:32072,CLIENT_PRECACHING_CONTENT_SLOTS_EXCEEDED:32082}),t("EventLoggerVerboseLevel",{OFF:0,LOW:1,HIGH:2,ALL:255}),t("EventLoggerSeverity",{SUCCESS:0,INFORMATIONAL:1,WARNING:2,ERROR:3}),t("EventLoggerCustomer",{CUSTOMER:1,BUR:0}),t("ScrollPosition",{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}),Enum}),define("brease/controller/libs/LogCode",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";var LogCode=function(){};LogCode.prototype.getConfig=function(e){return t[e]};var e=new LogCode;Utils.defineProperty(e,"PAGE_NOT_FOUND","PAGE_NOT_FOUND"),Utils.defineProperty(e,"PAGE_IS_CURRENT","PAGE_IS_CURRENT"),Utils.defineProperty(e,"PAGE_NOT_CURRENT","PAGE_NOT_CURRENT"),Utils.defineProperty(e,"CONTAINER_NOT_FOUND","CONTAINER_NOT_FOUND"),Utils.defineProperty(e,"DIALOG_NOT_FOUND","DIALOG_NOT_FOUND"),Utils.defineProperty(e,"NO_PAGES_FOUND","NO_PAGES_FOUND"),Utils.defineProperty(e,"NO_LAYOUTS_FOUND","NO_LAYOUTS_FOUND"),Utils.defineProperty(e,"LAYOUT_NOT_FOUND","LAYOUT_NOT_FOUND"),Utils.defineProperty(e,"CONTENT_NOT_FOUND","CONTENT_NOT_FOUND"),Utils.defineProperty(e,"CONTENT_NOT_ASSIGNED","CONTENT_NOT_ASSIGNED"),Utils.defineProperty(e,"CONTENT_IS_ACTIVE","CONTENT_IS_ACTIVE"),Utils.defineProperty(e,"AREA_NOT_FOUND","AREA_NOT_FOUND"),Utils.defineProperty(e,"NO_VISUDATA_FOUND","NO_VISUDATA_FOUND"),Utils.defineProperty(e,"THEME_NOT_FOUND","THEME_NOT_FOUND"),Utils.defineProperty(e,"VISU_MALFORMED","VISU_MALFORMED"),Utils.defineProperty(e,"VISU_NOT_FOUND","VISU_NOT_FOUND"),Utils.defineProperty(e,"VISU_ACTIVATE_FAILED","VISU_ACTIVATE_FAILED");var t={PAGE_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_FOUND,messageKey:"brease.error.STARTPAGE_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},CONTAINER_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_FOUND,messageKey:"brease.error.STARTPAGE_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},DIALOG_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_DIALOG_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},NO_PAGES_FOUND:{code:Enum.EventLoggerId.CLIENT_NO_PAGES_FOUND,messageKey:"brease.error.NO_PAGES_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},NO_LAYOUTS_FOUND:{code:Enum.EventLoggerId.CLIENT_NO_LAYOUTS_FOUND,messageKey:"brease.error.NO_LAYOUTS_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_MALFORMED:{code:Enum.EventLoggerId.CLIENT_INCORRECT_VISU,messageKey:"brease.error.INCORRECT_VISU",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_VISU_NOT_FOUND,messageKey:"brease.error.VISU_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},LAYOUT_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_LAYOUT_NOT_FOUND,messageKey:"brease.error.LAYOUT_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},CONTENT_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_CONTENT_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},CONTENT_NOT_ASSIGNED:{code:Enum.EventLoggerId.CLIENT_CONTENT_NOT_ASSIGNED,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},CONTENT_IS_ACTIVE:{code:Enum.EventLoggerId.CLIENT_CONTENT_IS_ACTIVE,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},AREA_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_AREA_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},PAGE_NOT_CURRENT:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_CURRENT,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},THEME_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_THEME_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_ACTIVATE_FAILED:{messageKey:"brease.error.ACTIVATE_VISU_FAILED"}};return e}),define("brease/helper/Scroller",["libs/iscroll-probe","brease/core/Utils","brease/events/BreaseEvent"],function(e,Utils,BreaseEvent){"use strict";var Scroller={init:function(t){void 0!==t&&"function"==typeof t.update&&(n=t),e.prototype.breaseUpdateZoomFactor=function(){this.zoomFactor=Utils.getScaleFactor(this.wrapper)},e.prototype.subsequentlyDisableMouse=function(){this.wrapper.removeEventListener("mousedown",this),this.wrapper.removeEventListener("mousemove",this),this.wrapper.removeEventListener("mousecancel",this),this.wrapper.removeEventListener("mouseup",this)},e.prototype.subsequentlyEnableMouse=function(){this.wrapper.addEventListener("mousedown",this),this.wrapper.addEventListener("mousemove",this),this.wrapper.addEventListener("mousecancel",this),this.wrapper.addEventListener("mouseup",this)},e.prototype.subsequentlyDisableTouch=function(){this.wrapper.removeEventListener("touchstart",this),this.wrapper.removeEventListener("touchmove",this),this.wrapper.removeEventListener("touchcancel",this),this.wrapper.removeEventListener("touchend",this)},e.prototype.subsequentlyEnableTouch=function(){this.wrapper.addEventListener("touchstart",this),this.wrapper.addEventListener("touchmove",this),this.wrapper.addEventListener("touchcancel",this),this.wrapper.addEventListener("touchend",this)}},addScrollbars:function(t,i,l){var d="string"==typeof t?document.querySelector(t):t,u;return null!==d?(u=new e(d,s(i)),u.zoomFactor=Utils.getScaleFactor(d),u.on("beforeScrollStart",function(){this.stopped=!1,r(this)}),u.on("scrollStart",function(){this.options.preventDefault=!0,this.wrapper.dispatchEvent(new CustomEvent(BreaseEvent.SCROLL_START,{bubbles:!0}))}),u.on("scrollEnd",function(){this.options.preventDefault=!1,this.stopped||(o(),this.stopped=!0)}),u.on("scrollCancel",function(){this.options.preventDefault=!1,this.stopped||(o(),this.stopped=!0)}),u.on("destroy",function(){document.body.removeEventListener(BreaseEvent.APP_RESIZE,this.boundUpdateZoomFactor)}),u.boundUpdateZoomFactor=u.breaseUpdateZoomFactor.bind(u),document.body.addEventListener(BreaseEvent.APP_RESIZE,u.boundUpdateZoomFactor),n.update(),!0!==l&&a(d,u)):u={on:function(){c(t)},off:function(){},refresh:function(){},scrollToElement:function(){},scrollTo:function(){},scrollBy:function(){},destroy:function(){},enable:function(){},disable:function(){},wrapper:{}},u},disableAllStartedScrollers:function(){for(var e in t.scroller)t.scroller[e].disable()}},t={scroller:{}},n={update:function(){}},i={};Utils.defineProperty(i,"bounce",!1),Utils.defineProperty(i,"fadeScrollbars",!1),Utils.defineProperty(i,"momentum",!0),Utils.defineProperty(i,"mouseWheel",!1),Utils.defineProperty(i,"resizeScrollbars",!0),Utils.defineProperty(i,"scrollbars","custom"),Utils.defineProperty(i,"preventDefault",!1),Utils.defineProperty(i,"disableTouch",!1),Utils.defineProperty(i,"disableMouse",!1),Utils.defineProperty(i,"disablePointer",!0),Utils.defineProperty(i,"HWCompositing",!1),Utils.defineProperty(Scroller,"defaults",i);function s(e){var t=$.extend({},Scroller.defaults,e);return t.disableTouch=!1,t.disableMouse=!1,t.disablePointer=!0,t.HWCompositing=!1,t}function r(e){if(e.hasHorizontalScroll||e.hasVerticalScroll){var n=$(e.wrapper).closest("[id]")[0].id;t.scroller[n]=e;for(var i in t.scroller)if(t.scroller[i]!==e&&$.contains(e.wrapper,t.scroller[i].wrapper)){e.disable();break}}}function o(){!0!==t.stopped&&(t.stopped=!0,window.setTimeout(function(){for(var e in t.scroller){var n=t.scroller[e];n.enabled||(n.initiated=0,n.enable())}t.scroller={},t.stopped=!1},0))}function a(e,t){if("function"==typeof MutationObserver){var n=new MutationObserver(d);n.debouncedRefresh=_.debounce(l.bind(null,t,n),300),n.observe(e,{childList:!0,subtree:!0})}}function l(e,t){e.wrapper&&e.wrapper.ownerDocument===document&&e.refresh(),t.disconnect(),t.debouncedRefresh=null}function d(e,t){var n=!1;e.forEach(function(e){e.addedNodes.length>0&&(n=!0)}),n&&t.debouncedRefresh()}function c(e){console.iatWarn("trying to add a scroller to a null object:"+e)}return Scroller}),define("brease/controller/PopUpManager",["brease/core/Utils","brease/events/BreaseEvent"],function(Utils,BreaseEvent){"use strict";var PopUpManager={init:function(){s(),document.body.addEventListener(BreaseEvent.APP_RESIZE,_.debounce(s,200)),$(window).on("resize",_.debounce(s,200))},addWindow:function(e,i){t[e]||(t[e]={id:e,type:i,index:n+=1})},updateIndex:function(e,n){t[e]&&(t[e].index=n)},getNumberOfWindowsOfType:function(e){var n=0;for(var i in t)t[i]&&t[i].type===e&&(n+=1);return n},removeWindow:function(e){delete t[e]},overlays:function(e){var n=[],i=0;if(t[e]){i=t[e].index;for(var s in t)t[s]&&t[s].index>i&&n.push(t[s].id)}return n},getHighestZindex:function(){return r(),e+=1,e},update:function(){s()},getDimensions:function(){return{winWidth:i.winWidth,winHeight:i.winHeight,appWidth:i.appWidth,appHeight:i.appHeight}}},e=-1,t={},n=0,i={};function s(){i={winWidth:window.innerWidth,winHeight:window.innerHeight,appWidth:brease.appView.innerWidth(),appHeight:brease.appView.innerHeight()}}function r(){e=Utils.getHighestZindex(document.querySelectorAll("body > [class],body > [style],body > [id]"))}return PopUpManager.init(),PopUpManager}),define("brease/controller/ZoomManager",[],function(){"use strict";var ZoomManager={setBrowserZoom:function(e){!0===e?brease.bodyEl.css({"touch-action":"pinch-zoom","-ms-touch-action":"pinch-zoom"}):(brease.bodyEl.css({"touch-action":"none","-ms-touch-action":"pinch-zoom"}),!0===brease.config.detection.ios&&(brease.bodyEl.css({"touch-action":"manipulation"}),$(document.head).find('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"),"Safari"===brease.config.detection.browser&&document.addEventListener("gesturestart",function(e){e.preventDefault()})))},iosBodyFix:function(){!0===brease.config.detection.ios&&(brease.appView.height()<=window.innerHeight?brease.bodyEl.css({position:"fixed"}):brease.bodyEl.css({position:"static"}))},setAppZoom:function(t,n,i,s){!0===t?(document.body.style.overflow="hidden",e.init(n,s)):(document.body.style.overflow="auto",s.css({width:i.width+"px",height:i.height+"px"})),brease.dispatchResize()},getAppZoom:function(){return e.scale}},e={scale:1,listening:!1,init:function e(t,n){this.$layoutDiv=$(t),this.$rootContainer=n,this.scale=1,this.listening||($(window).on("resize",_.debounce(this.zoom.bind(this),150)),this.listening=!0),this.zoom()},zoom:function e(){"iOS"===brease.config.detection.os&&$("body").css("width","100%");var t=this.$layoutDiv[0].getBoundingClientRect(),n=document.body.getBoundingClientRect(),i=Math.floor(n.width)/(t.width/this.scale),s=Math.floor(n.height)/(t.height/this.scale);if(this.scale=Math.min(i,s),this.scale===i){var r=Math.floor(this.$layoutDiv.outerWidth()*this.scale);this.scale=r/this.$layoutDiv.outerWidth()}else{var o=Math.floor(this.$layoutDiv.outerHeight()*this.scale);this.scale=o/this.$layoutDiv.outerHeight()}this.$layoutDiv.css({transform:"scale("+this.scale+","+this.scale+")","transform-origin":"0 0"}),t=this.$layoutDiv[0].getBoundingClientRect(),this.$rootContainer.css({width:t.width,height:t.height})}};return ZoomManager}),define("brease/controller/libs/ErrorCode",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";var ErrorCode={};Utils.defineProperty(ErrorCode,"getMessageByCode",function(t,n){if(t=""+t,void 0!==e[t]){var i=e[t].message;if(Array.isArray(n))for(var s=0;s<n.length;s+=1)i=i.replace(new RegExp("\\{"+s+"\\}","g"),n[s]);return i}return e.GENERIC_CONNECTION_FAILED.message},!1,!1,!1),Utils.defineProperty(ErrorCode,"getLogIdByCode",function(t){return t=""+t,void 0!==e[t]?e[t].logId:e.GENERIC_CONNECTION_FAILED.logId},!1,!1,!1),Utils.defineProperty(ErrorCode,"NO_FURTHER_SESSION","2148073484"),Utils.defineProperty(ErrorCode,"MAX_CLIENTS","2148139020"),Utils.defineProperty(ErrorCode,"NOT_ENOUGH_LICENSES","2148204556"),Utils.defineProperty(ErrorCode,"NO_LICENSE","2148270092"),Utils.defineProperty(ErrorCode,"GENERIC_CONNECTION_FAILED","GENERIC_CONNECTION_FAILED");var e={2148073484:{message:"Visualization already open on this client, no further sessions allowed",logId:Enum.EventLoggerId.NO_FURTHER_SESSION},2148139020:{message:"Maximum number of clients reached!",logId:Enum.EventLoggerId.MAX_CLIENTS},2148204556:{message:"No more clients allowed, no client license available",logId:Enum.EventLoggerId.NOT_ENOUGH_LICENSES},2148270092:{message:'Not allowed, license not available for visualization (id="{0}")!',logId:Enum.EventLoggerId.NO_LICENSE},GENERIC_CONNECTION_FAILED:{message:"server connection (register client) error",logId:Enum.EventLoggerId.CLIENT_START_FAIL}};return ErrorCode}),define("brease/helper/Messenger",["brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/ErrorCode"],function(BreaseEvent,Enum,ErrorCode){"use strict";var Messenger=function(e){this.systemMessage=e};return Messenger.prototype.announce=function(e,t){switch(e){case"START_CONTENT":console.log("start with content:"+t.contentId);break;case"START_VISU":console.log("start with visualization:"+t.visuId);break;case"VISU_NOT_FOUND":console.log("visualization (visuId="+t.visuId+") not found");break;case"VISU_NOT_ACTIVATED":console.log("visualization (visuId="+t.visuId+") not activated"),this.systemMessage.showMessage("visualization (visuId="+t.visuId+") not activated");break;case"CONFIGURATION_LOAD_ERROR":console.iatWarn("configuration not found; take default values");break;case"START_SERVICES_SUCCESS":brease.loggerService.log(Enum.EventLoggerId.CLIENT_START_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS,[t.clientId]);break;case"START_SERVICES_FAILED":console.log("XHR error:"+t.message),this.systemMessage.showMessage("server connection (services) error"),brease.loggerService.log(Enum.EventLoggerId.CLIENT_START_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[],"XHR error:"+t.message);break;case"REGISTER_CLIENT_SUCCESS":console.log("registered client with id = "+t.response.ClientId);break;case"REGISTER_CLIENT_FAILED":var n=ErrorCode.getMessageByCode(ErrorCode.GENERIC_CONNECTION_FAILED),i=ErrorCode.getLogIdByCode(ErrorCode.GENERIC_CONNECTION_FAILED);void 0!==t.response.status&&void 0!==t.response.status.code&&(n=ErrorCode.getMessageByCode(t.response.status.code,[t.visuId]),i=ErrorCode.getLogIdByCode(t.response.status.code)),brease.loggerService.log(i,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[],n),this.systemMessage.showMessage(n),console.log(n);break;case"SERVER_CONNECTION_START":this.systemMessage.deferMessage("try to establish server connection...",2e3),console.log("try to establish server connection..");break;case"SERVER_CONNECTION_SUCCESS":this.systemMessage.clear();break;case"SERVER_CONNECTION_ERROR":this.systemMessage.showMessage("server connection error");break;case"TEXT_LOAD_START":this.systemMessage.deferMessage("loading texts...",2e3),console.log("loading texts...");break;case"TEXT_LOAD_SUCCESS":this.systemMessage.clear();break;case"TEXT_LOAD_ERROR":this.systemMessage.showMessage("error on loading texts");break;case"WIDGET_LOAD_ERROR":this.systemMessage.showMessage("error on loading system widgets");break}},Messenger}),define("brease/helper/SystemMessage",["brease/controller/PopUpManager"],function(e){"use strict";var SystemMessage={deferMessage:function(e,n){t=window.setTimeout(function(){SystemMessage.showMessage(e)},n)},showMessage:function(e){t&&window.clearTimeout(t),r(e)},clear:function(){t&&window.clearTimeout(t),s()}},t,n,i;function s(){n&&n.length>0&&n.hide().off()}function r(t){n=n||$("#systemMessageBox"),0===n.length&&(n=$('<div id="systemMessageBox" style="z-index:1;position:fixed; padding:0px;margin:0px; background-color:rgba(0,0,0,0.18); top:0; left:0;width:100%;height:100%;"><div style="position:absolute; padding:20px; width:400px; margin-left:-220px;color:red; background-color:white;font-size:20px;left:50%;top:50%;text-align:center;"></div></div>').appendTo(document.body),i=n.find("div")),i.text(t),n.css("z-index",e.getHighestZindex()+1).show().on("click vclick mousedown mouseup pointerup pointerdown",function(e){e.stopImmediatePropagation(),e.preventDefault()})}return SystemMessage}),define("brease/brease",["brease/controller/objects/Client","brease/core/Utils","brease/events/BreaseEvent","brease/events/ServerEvent","brease/events/SystemGestures","brease/controller/libs/LogCode","brease/helper/Scroller","brease/controller/PopUpManager","brease/controller/ZoomManager","brease/helper/Messenger","brease/helper/SystemMessage","brease/config","brease/settings"],function(Client,Utils,BreaseEvent,ServerEvent,SystemGestures,LogCode,Scroller,e,t,Messenger,n,i,s){"use strict";var r,o={},a={},Brease=function Brease(){Utils.defineProperty(this,"config",i),Utils.defineProperty(this,"services",{}),this.messenger=new Messenger(n),c.call(this),h.call(this),u.call(this)},l=Brease.prototype;Utils.defineProperty(l,"callWidget",function e(){return brease.uiController.callWidget.apply(brease.uiController,arguments)}),Utils.defineProperty(l,"setOptions",function e(t,n){return brease.uiController.setOptions(t,n)}),l.init=function(e,t,i){r=e,Client.init(e),p.call(this,t),g.call(this,i),v.call(this,e),m.call(this,e,this.settings,n)},l.startVisu=function(e){this.messenger.announce("START_VISU",{visuId:e}),i.visuId=e,i.contentId=void 0,this.appView.html(""),d.call(this)},l.startContent=function(e){this.messenger.announce("START_CONTENT",{contentId:e}),i.contentId=e,i.visuId=void 0,d.call(this)},l.getClientId=function(){return Client.id},l.dispatchResize=function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.APP_RESIZE))};function d(){Scroller.init(e),window.performanceMonitor.profile("registerClient",0),r.registerClient(i.visuId,b)}function c(){Utils.defineProperty(this,"appElem",document.getElementById("appContainer")),Utils.defineProperty(this,"appView",$(this.appElem)),Utils.defineProperty(this,"bodyEl",$(document.body)),Utils.defineProperty(this,"docEl",$(document))}function u(){this.bodyEl.hasClass("system_brease_Scrollbar_style_default")||this.bodyEl.addClass("system_brease_Scrollbar_style_default"),this.bodyEl.hasClass("system_brease_Body_style_default")||this.bodyEl.addClass("system_brease_Body_style_default"),this.bodyEl.hasClass("system_brease_ModalDimmer_style_default")||this.bodyEl.addClass("system_brease_ModalDimmer_style_default")}function h(){Utils.defineProperty(this,"settings",s)}function g(e){for(var t in e)a[t]=e[t];f(this,"formatter",a),f(this,"action",a),f(this,"dialogController",a,"overlayController"),f(this,"overlayController",a),f(this,"pageController",a),f(this,"uiController",a)}function f(e,t,n,i){Object.defineProperty(e,t,{get:function(){return n[i||t]},set:function(){},enumerable:!0,configurable:!0})}function p(e){for(var t in e)o[t]=e[t];f(this,"measurementSystem",o),f(this.services,"measurementSystem",o),f(this,"language",o),f(this.services,"language",o),f(this,"user",o),f(this.services,"user",o),f(this,"culture",o),f(this.services,"culture",o),f(this,"textFormatter",o),f(this,"loggerService",o),f(this.services,"opcua",o)}function m(e,t,n){a.bindingController.init(e),a.connectionController.init(e,n),a.infoController.init(e),this.action.init(e),this.pageController.init(e),this.uiController.init(a.bindingController,a.widgetsController)}function v(e){this.measurementSystem.init(e),this.language.init(e),this.culture.init(),this.user.init(e),this.textFormatter.init(e),this.loggerService.init(e),o.configuration.init(e)}function b(e){window.performanceMonitor.profile("registerClient",1),void 0!==e&&void 0!==e.status&&0===e.status.code?(brease.messenger.announce("REGISTER_CLIENT_SUCCESS",{response:e,clientId:e.ClientId}),Client.setId(e.ClientId),y()):(void 0===Client.isValid&&(Client.setValid(!1),brease.messenger.announce("REGISTER_CLIENT_FAILED",{response:e,visuId:i.visuId})),window.setTimeout(function(){r.registerClient(i.visuId,b)},1e3))}function y(){$.when(brease.language.isReady(),brease.measurementSystem.isReady(),brease.user.isReady(),brease.textFormatter.isReady()).then(function(){E()},function(e){brease.messenger.announce("START_SERVICES_FAILED",{message:e})})}function E(){brease.culture.isReady().then(function(){brease.messenger.announce("START_SERVICES_SUCCESS",{clientId:Client.id}),A()},function(e){brease.messenger.announce("START_SERVICES_FAILED",{message:e})})}function A(){i.visuId?a.visuData.loadVisuData(brease.config.visuId,brease.appElem.id).then(function(e){I(e)},function(e){brease.messenger.announce(LogCode.VISU_NOT_FOUND,{visuId:e}),I()}):I()}function I(e){o.configuration.loadConfigurations(e).then(C,function(){brease.messenger.announce("CONFIGURATION_LOAD_ERROR"),C()})}function C(){SystemGestures.init(),a.eventController.init(r,a.bindingController);var e=void 0!==i.visu&&!0===i.visu.browserZoom;t.setBrowserZoom(e),w()}function w(){window.performanceMonitor.profile("socketConnection",0),brease.messenger.announce("SERVER_CONNECTION_START"),r.addEventListener(ServerEvent.SESSION_ACTIVATED,T),$.when(r.socketIsReady()).then(function(){window.performanceMonitor.profile("socketConnection",1)},function(){brease.messenger.announce("SERVER_CONNECTION_ERROR")})}function T(){brease.messenger.announce("SERVER_CONNECTION_SUCCESS"),a.bindingController.startListen(),x()}function x(){brease.messenger.announce("TEXT_LOAD_START"),window.performanceMonitor.profile("textLoad",0),$.when(brease.language.loadAllTexts()).then(function(){window.performanceMonitor.profile("textLoad",1),brease.messenger.announce("TEXT_LOAD_SUCCESS"),S()},function(){brease.messenger.announce("TEXT_LOAD_ERROR")})}function S(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.RESOURCES_LOADED)),$.when(_(),brease.overlayController.init()).then(function(){void 0!==i.contentId?(brease.appElem.addEventListener(BreaseEvent.CONTENT_PARSED,D),brease.uiController.parse(brease.appElem,!1)):L()})}function _(){if(void 0!==i.contentId)return Client.setValid(!0),a.bindingController.activateContent(i.contentId);var e=$.Deferred();return e.resolve(),e.promise()}function D(){brease.appElem.removeEventListener(BreaseEvent.CONTENT_PARSED,D),a.bindingController.sendInitialValues(i.contentId,L)}function L(){a.infoController.start(i.visu.activityCount),void 0!==i.visuId&&brease.pageController.start(i.visuId,brease.appElem,i.ContentCaching),brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.APP_READY,{bubbles:!0})),window.performanceMonitor.profile(BreaseEvent.APP_READY),r.startHeartbeat(),$("#splashscreen").remove(),console.log("app ready")}var brease=new Brease;return Utils.defineProperty(window,"brease",brease),brease}),define("brease/config/NumberFormat",["require"],function(e){"use strict";var NumberFormat=function(e,i,s){e=isNaN(e)?1:e,i=isNaN(i)?1:i,this.decimalPlaces=Math.min(n.decimalPlaces,Math.max(t.decimalPlaces,e)),this.minimumIntegerDigits=Math.max(t.minimumIntegerDigits,i),s>=t.maximumIntegerDigits&&(this.maximumIntegerDigits=parseInt(s,10))},t={decimalPlaces:0,minimumIntegerDigits:1,maximumIntegerDigits:1},n={decimalPlaces:20};return NumberFormat.getFormat=function(e,i){var s=e.default||NumberFormat.defaults,r=e[i]||s,o,a;void 0!==r.decimalPlaces?(r.decimalPlaces<t.decimalPlaces&&console.iatWarn("decimalPlaces has to be >= "+t.decimalPlaces),r.decimalPlaces>n.decimalPlaces&&console.iatWarn("decimalPlaces has to be <= "+n.decimalPlaces),o=Math.min(n.decimalPlaces,Math.max(t.decimalPlaces,r.decimalPlaces))):o=s.decimalPlaces,void 0!==r.minimumIntegerDigits?(r.minimumIntegerDigits<t.minimumIntegerDigits&&console.iatWarn("minimumIntegerDigits has to be >= "+t.minimumIntegerDigits),
a=Math.max(t.minimumIntegerDigits,r.minimumIntegerDigits)):a=s.minimumIntegerDigits;var l={decimalPlaces:o,minimumIntegerDigits:a};return r.maximumIntegerDigits>=t.maximumIntegerDigits&&(l.maximumIntegerDigits=parseInt(r.maximumIntegerDigits,10)),l},NumberFormat.defaults={decimalPlaces:1,minimumIntegerDigits:1},NumberFormat.minima={decimalPlaces:t.decimalPlaces,minimumIntegerDigits:t.minimumIntegerDigits,maximumIntegerDigits:t.maximumIntegerDigits},NumberFormat.maxima={decimalPlaces:n.decimalPlaces},NumberFormat}),define("brease/config/SortFunctions",["require"],function(e){"use strict";return{int:function(e,t){return parseInt(e,10)-parseInt(t,10)},number:function(e,t){return parseFloat(e)-parseFloat(t)},date:function(e,t){return Date.parse(e)-Date.parse(t)},string:function(e,t){return e<t?-1:e>t?1:0},"string-ins":function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0}}}),define("brease/core/Types",[],function(){"use strict";var Types={parseValue:function(s,a,l){var d=s;switch(a){case"Enum":d=e(s,l);break;case"Integer":d=t(s,l);break;case"Number":d=n(s,l);break;case"Boolean":d=i(s,l);break;case"Color":d=r(s);break;case"String":d=o(s);break;default:break}return d},objectTypes:["Object","Array","ItemCollection","ContentCollection","GraphicCollection","RoleCollection","brease.config.MeasurementSystemUnit","brease.config.MeasurementSystemFormat","brease.datatype.Notification","brease.datatype.Node","brease.datatype.ArrayNode"]};function e(e,t){var n=e;return!0!==t.IAT_Enum.hasMember(e)&&(n=t.default),n}function t(e,t){var n=parseInt(e,10);return isNaN(n)&&(n=void 0===t||isNaN(t.default)?0:parseInt(t.default,10)),void 0!==t&&void 0!==t.min&&(n=Math.max(n,t.min)),void 0!==t&&void 0!==t.max&&(n=Math.min(n,t.max)),n}function n(e,t){var n=parseFloat(e);return isNaN(n)&&(n=void 0===t||isNaN(t.default)?0:parseFloat(t.default)),void 0!==t&&void 0!==t.min&&(n=Math.max(n,t.min)),void 0!==t&&void 0!==t.max&&(n=Math.min(n,t.max)),n}function i(e,t){var n=e;return!0===e||!1===e||!t||!0!==t.default&&!1!==t.default||(n=t.default),n=!(!0!==n&&1!==n),n}var s=/(^#[0-9A-Fa-f]{6}$)|(^#[0-9A-Fa-f]{3}$)|(transparent)|(^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$)|(^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$)/;function r(e){var t=""+e;return s.test(t)||(t="#000000"),t}function o(e){return""+e}return Types}),define("brease/controller/ActionController",["brease/controller/objects/Client","brease/events/BreaseEvent","brease/core/Utils","brease/core/Types","brease/enum/Enum"],function(Client,BreaseEvent,Utils,Types,Enum){"use strict";var ActionController=function ActionController(){},e=ActionController.prototype,t;e.init=function(e){void 0!==t&&t.removeEventListener("action",n),t=e,t.addEventListener("action",n)};function n(e){var t=e.detail,n=i(t);try{switch(n){case"widget":o(t);break;case"clientSystem":s(t);break;default:x({},t.actionId,!1);break}}catch(e){S(e,t),x(null,t.actionId,!1)}}function i(e){return-1!==e.action.indexOf("widgets.")?"widget":0===e.action.indexOf("clientSystem.")?"clientSystem":(console.warn("Target:",e.action,"notAvailable"),void 0)}function s(e){switch(e.action){case"clientSystem.Action.ShowMessageBox":u(e);break;case"clientSystem.Action.OpenDialog":!0===Client.isValid?h(e):(x({},e.actionId,!1),console.warn('client not valid -> action "OpenDialog" rejected'));break;case"clientSystem.Action.OpenDialogAtTarget":!0===Client.isValid?g(e):(x({},e.actionId,!1),console.warn('client not valid -> action "OpenDialogAtTarget" rejected'));break;case"clientSystem.Action.CloseDialog":!0===Client.isValid?f(e):(x({},e.actionId,!1),console.warn('client not valid -> action "CloseDialog" rejected'));break;case"clientSystem.Action.Navigate":!0===Client.isValid?(v(e),T()):(x({},e.actionId,!1),console.warn('client not valid -> action "Navigate" rejected'));break;case"clientSystem.Action.LoadContentInArea":!0===Client.isValid?p(e):(x({},e.actionId,!1),console.warn('client not valid -> action "LoadContentInArea" rejected'));break;case"clientSystem.Action.LoadContentInDialogArea":!0===Client.isValid?m(e):(x({},e.actionId,!1),console.warn('client not valid -> action "LoadContentInDialogArea" rejected'));break;case"clientSystem.Action.Logout":y(e);break;case"clientSystem.Action.Login":b(e);break;case"clientSystem.Action.ChangeTheme":!0===Client.isValid?E(e):(x({},e.actionId,!1),console.warn('client not valid -> action "ChangeTheme" rejected'));break;case"clientSystem.Action.SetLanguage":A(e);break;case"clientSystem.Action.SetMeasurementSystem":I(e);break;case"clientSystem.Action.ScrollContent":!0===Client.isValid?C(e):(x({},e.actionId,!1),console.iatWarn('client not valid -> action "ScrollContent" rejected'));break;case"clientSystem.Action.ShowTooltips":w(e);break;default:console.warn("Action:",e.action,"notAvailable"),x({},e.actionId,!1);break}}function r(e,t,n){if(e.meta&&e.meta.actions){var i=[];for(var s in e.meta.actions[t].parameter)i[e.meta.actions[t].parameter[s].index]=s;return i}return Utils.getFunctionArguments(n)}function o(e){var t=e.target.refId,n=brease.callWidget(t,"widget"),i=e.action.split(".").pop();if(null===n)x(null,e.actionId,!1);else if(n.state<Enum.WidgetState.INITIALIZED)console.iatWarn('widget action "'+i+'" for '+e.target.refId+": widget in unavailable state:"+n.state),x(null,e.actionId,!1);else{var s=n.constructor,r=s.meta&&s.meta.actions?s.meta.actions[i]:void 0,o=r?r.method:i.substring(0,1).toLowerCase()+i.substring(1),c=n[o];if(void 0===c)console.iatWarn('Action "'+i+'" not available on type '+s.defaults.className),x(null,e.actionId,!1);else{var u=d(c,i,e.actionArgs,s),h=c.apply(n,u);if(h&&"function"==typeof h.done?h.done(function(t){x(t,e.actionId,null!==t)}):$.when(h).then(function(t){x(t,e.actionId,null!==t)}),a(o,r)){var g,f=brease.uiController.getSubscriptionsForElement(t);if(g=r&&r.setterFor?r.setterFor:o.substring(3).replace(/^[A-Z]/,function(e){return e.toLowerCase()}),f&&f[g]&&l(g,t,u[0]),s.meta&&s.meta.properties&&s.meta.properties[g]){var p=s.meta.properties[g].nodeRefId;p&&f&&f[p]&&l(p,t,brease.callWidget(t,Utils.getter(p)))}}}}}function a(e,t){return 0===e.indexOf("set")||t&&void 0!==t.setterFor}function l(e,t,n){var i={};i[e]=n,brease.uiController.bindingController.attributeChangeForwarder({target:{id:t},detail:i})}function d(e,t,n,i){var s=[],o=Object.keys(n);if(o.length>1){var a=r(i,t,e);a&&(o=a)}for(var l=0;l<o.length;l+=1)s.push(c(n[o[l]],o[l],i,t));return s}function c(e,t,n,i){if(!Utils.isString(e))return e;if(void 0===n.meta||void 0===n.meta.actions||void 0===n.meta.actions[i])return e;var s=n.meta.actions[i].parameter[t];if(!s||-1===Types.objectTypes.indexOf(s.type))return e;try{e=JSON.parse(e.replace(/'/g,'"'))}catch(e){console.iatWarn("illegal data in attribute "+t+" for action "+i)}return e}function u(e){var t=e.actionArgs;$.when(brease.overlayController.showMessageBox(t.type,t.header,t.message,t.icon,t.buttonText,t.style)).then(function(t){x(t,e.actionId,!0)})}function h(e){var t=e.actionArgs;$.when(brease.overlayController.openDialog(t.dialogId,t.mode,t.horizontalPos,t.verticalPos,t.target,t.headerText,t.autoClose)).then(function(t,n){x(t,e.actionId,n)})}function g(e){var n=e.actionArgs,i=[n.horizontalPos,n.verticalPos,n.horizontalDialogAlignment,n.verticalDialogAlignment],s=document.getElementById(n.target);Enum.HorizontalPosition.hasMember(n.horizontalDialogAlignment)&&Enum.VerticalPosition.hasMember(n.verticalDialogAlignment)&&Enum.HorizontalPosition.hasMember(n.horizontalPos)&&Enum.VerticalPosition.hasMember(n.verticalPos)||t.logEvents(-2134803119,0,"",[i]),s=document.getElementById(n.target),n.horizontalDialogAlignment=Types.parseValue(n.horizontalDialogAlignment,"Enum",{IAT_Enum:Enum.HorizontalPosition,default:"left"}),n.verticalDialogAlignment=Types.parseValue(n.verticalDialogAlignment,"Enum",{IAT_Enum:Enum.VerticalPosition,default:"top"}),n.horizontalPos=Types.parseValue(n.horizontalPos,"Enum",{IAT_Enum:Enum.HorizontalPosition,default:"right"}),n.verticalPos=Types.parseValue(n.verticalPos,"Enum",{IAT_Enum:Enum.VerticalPosition,default:"top"}),null!==s?$.when(brease.overlayController.openDialogAtTarget(n.dialogId,n.mode,n.horizontalPos,n.verticalPos,s,n.headerText,n.autoClose,n.horizontalDialogAlignment,n.verticalDialogAlignment)).then(function(t,n){x(t,e.actionId,n)}):x({},e.actionId,!1)}function f(e){var t=e.actionArgs;$.when(brease.overlayController.closeDialog(t.dialogId)).then(function(t){x(t,e.actionId,!0)})}function p(e){var t=e.actionArgs;brease.pageController.loadContentInArea(t.contentId,t.areaId,t.pageId).done(function(t){x(t,e.actionId,!0)})}function m(e){var t=e.actionArgs;brease.pageController.loadContentInDialogArea(t.contentId,t.areaId,t.dialogId).done(function(t){x(t,e.actionId,!0)})}function v(e){var t=e.actionArgs,n,i;n=brease.pageController.getVisuById(brease.pageController.getVisu4Page(t.pageId)),void 0!==n?(i=document.getElementById(n.containerId),$.when(brease.pageController.loadPage(t.pageId,i)).then(function(){x({},e.actionId,!0)})):x({},e.actionId,!1)}function b(e){var t=e.actionArgs;$.when(brease.user.loginAction(t.userName,t.password)).then(function(t){x(t.success,e.actionId,!0)})}function y(e){$.when(brease.user.setDefaultUser()).then(function(){x({},e.actionId,!0)})}function E(e){var t=e.actionArgs;$.when(brease.pageController.setTheme(t.theme)).then(function(){x({},e.actionId,!0)})}function A(e){var t=e.actionArgs;$.when(brease.language.switchLanguage(t.value)).then(function(t){x({},e.actionId,t.success)})}function I(e){var t=e.actionArgs;$.when(brease.measurementSystem.switchMeasurementSystem(t.value)).then(function(){x({},e.actionId,!0)})}function C(e){var t=e.actionArgs;"ontouchstart"in window||navigator.msMaxTouchPoints?setTimeout(function(){$.when(brease.pageController.scrollContent(t.contentId,t.position,t.duration)).then(function(t){x(t,e.actionId,!0)})},0):$.when(brease.pageController.scrollContent(t.contentId,t.position,t.duration)).then(function(t){x(t,e.actionId,!0)})}function w(e){var t=e.actionArgs;"true"===t.value||!0===t.value?$("[data-brease-widget]").each(function(){brease.callWidget(this.id,"activateTooltipMode")}):"false"!==t.value&&!1!==t.value||T(),x({},e.actionId,!0)}function T(){$("[data-brease-widget]").each(function(){brease.callWidget(this.id,"deactivateTooltipMode")})}function x(e,n,i){var s={actionId:n,actionResult:{result:e,success:i}};t.actionResponse(s)}function S(e,t){var n='Error in action "'+t.action+'" for widget "'+t.target.refId+'"';console.log(n+":"),console.log(e)}return new ActionController}),define("brease/objects/Subscription",[],function(){"use strict";var e=function(e,t,n){this.elemId=e,this.attribute=t,this.contentId=n};return e.fromServerData=function(t,n){var i=new e(t.refId,t.attribute,n);return void 0!==t.dynamic&&(i.dynamic=!!t.dynamic),void 0!==t.active&&(i.active=!!t.active),void 0!==t.count&&(i.count=parseInt(t.count,10)),i},e.toServerData=function(e,t){return{refId:e.elemId,data:[{attribute:e.attribute,value:t}]}},e}),define("brease/model/BindingModel",["brease/objects/Subscription"],function(e){"use strict";var t={session:{_client:[]},contents:new Map,elements:new Map},n={contents:new Map,elements:new Map},i={contents:new Map,elements:new Map},s={addSubscription:function(e){var t=e.elemId,i=e.contentId;void 0===n.elements.get(t)&&n.elements.set(t,{}),void 0===n.elements.get(t)[e.attribute]?n.elements.get(t)[e.attribute]=e:!0===n.elements.get(t)[e.attribute].dynamic&&(n.elements.get(t)[e.attribute].count+=1),void 0===n.contents.get(i)&&n.contents.set(i,new Map),n.contents.get(i).set(t,n.elements.get(t))},deleteSubscription:function(e,t){var i=n.elements.get(e);void 0!==i&&delete i[t]},addDynamicBinding:function(e,t){var n=o(e.target);e.contentId=t,i.elements.set(n,e),void 0===i.contents.get(t)&&i.contents.set(t,new Map),i.contents.get(t).set(n,e)},getDynamicBinding:function(e){return i.elements.get(o(e))},removeDynamicBinding:function(e){var t=o(e),n=i.elements.get(t);n&&(r(e.refId,e.attribute),"brease"===n.source.type&&r(n.source.refId,n.source.attribute),i.elements.delete(t),i.contents.get(n.contentId).delete(t))},addDynamicSubscription:function(t,n,i){var r=e.fromServerData({attribute:n,refId:t,dynamic:!0,count:1,active:!0},i);return s.addSubscription(r),r},removeDynamicBindings:function(e){var t=i.contents.get(e);if(t&&t.size>0){var n=[];t.forEach(function(t,i){t.contentId===e&&(n.push(i),r(t.target.refId,t.target.attribute),"brease"===t.source.type&&r(t.source.refId,t.source.attribute))});for(var s=0;s<n.length;s+=1)i.elements.delete(n[s]),i.contents.get(e).delete(n[s])}},getSubscriptionsForElement:function(e,t){var i=n.elements.get(e);if(void 0!==i)return void 0!==t?i[t]:i},getSubscriptionsForContent:function(e){return n.contents.get(e)},contentHasSubscriptions:function(e){var t=n.contents.get(e);return void 0!==t&&t.size>0},deactivateSubscriptions:function(e){var t=n.contents.get(e);t&&t.forEach(function(e){for(var t in e)e[t].active=!1})},addEventSubscription:function(e){var n=e.elemId,i=e.event,s=t.elements.get(n);void 0===s&&(t.elements.set(n,{}),s=t.elements.get(n)),void 0===s[i]&&(s[i]={}),s[i]=e,t.contents.set(e.scopeId,!0)},getEventsForElement:function(e,n){var i=t.elements.get(e);if(void 0!==i)return void 0!==n?i[n]:i},addSessionEventSubscription:function(e,n){void 0===t.session[n]&&(t.session[n]=[]),-1===t.session[n].indexOf(e.event)&&t.session[n].push(e.event)},getSessionEvents:function(){return t.session}};function r(e,t){var n=s.getSubscriptionsForElement(e,t);n&&(!0===n.dynamic&&(n.count-=1),0===n.count&&s.deleteSubscription(e,t))}function o(e){return e.type+"||"+e.refId+"||"+e.attribute}return s}),define("brease/controller/objects/ContentStatus",["brease/enum/IAT_Enum"],function(IAT_Enum){"use strict";return new IAT_Enum({notExistent:-2,deactivated:-1,initialized:0,activatePending:1,active:2,preCached:3})}),define("brease/controller/BindingLoader",["brease/events/BreaseEvent","brease/enum/Enum","brease/objects/Subscription","brease/controller/objects/ContentStatus"],function(BreaseEvent,Enum,e,ContentStatus){"use strict";var BindingLoader={init:function(e,s,r){t=e,n=s,i=r},startListen:function(){document.body.addEventListener(BreaseEvent.VISU_ACTIVATED,c),document.body.addEventListener(BreaseEvent.VISU_DEACTIVATED,c)},loadSubscriptions:function(e,t){var n=i.setLatestRequest(e,"loadSubscriptions");return n?!0!==i.isBindingLoaded(e)?$.when(s(e,n.latestRequest),r(e,n.latestRequest)).then(function(){i.getActiveState(e)>ContentStatus.initialized&&(i.setBindingLoadState(e,!0),window.performanceMonitor.profile("activateContent - "+e,1),t.resolve(e))}):(window.performanceMonitor.profile("activateContent - "+e,1),t.resolve(e)):t.resolve(e),t.promise()}},t,n,i;function s(e,n){var s=$.Deferred(),r=i.getContent(e);return r?(window.performanceMonitor.profile("loadBindingSubscriptions - "+e,0),t.getSubscription(r.serverId,r.visuId,o,{requestId:n,contentId:e,deferred:s})):s.resolve(e),s.promise()}function r(e,n){var s=$.Deferred(),r=i.getContent(e);return r?(window.performanceMonitor.profile("loadEventBindingSubscriptions - "+e,0),t.getEventSubscription(r.serverId,r.visuId,a,{requestId:n,contentId:e,deferred:s})):s.resolve(e),s.promise()}function o(t,s){if(s.requestId===i.getLatestRequest(s.contentId)){if(!0===t.success&&Array.isArray(t.subscriptions))for(var r=0,o=t.subscriptions.length;r<o;r+=1)n.addSubscription(e.fromServerData(t.subscriptions[r],s.contentId));else console.iatInfo('no subscription for content "'+s.contentId+'" available!'),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ID_NOTFOUND,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[s.contentId]);document.body.dispatchEvent(new CustomEvent(BreaseEvent.BINDING_LOADED,{detail:{contentId:s.contentId}})),window.performanceMonitor.profile("loadSubscriptions - "+s.contentId,1),s.deferred.resolve()}else console.iatWarn('loadSubscriptions for content "'+s.contentId+'" aborted!')}function a(e,t){t.requestId===i.getLatestRequest(t.contentId)?(!0===e.success&&Array.isArray(e.eventSubscriptions)?l(t.contentId,e.eventSubscriptions):console.iatInfo('no event subscription for content "'+t.contentId+'" available!'),document.body.dispatchEvent(new CustomEvent(BreaseEvent.EVENTBINDING_LOADED,{detail:{contentId:t.contentId}})),window.performanceMonitor.profile("loadEventBindingSubscriptions - "+t.contentId,1),t.deferred.resolve()):console.iatWarn('loadEventSubscription for content "'+t.contentId+'" aborted!')}function l(e,t){var i=t.length,s;if(i>0)for(var r=0;r<i;r+=1)s=t[r],void 0!==s.refId?n.addEventSubscription({scopeId:e,elemId:s.refId,eventId:s.refId,event:s.event}):n.addSessionEventSubscription({scopeId:e,event:s.event},e)}function d(e){if(!0===e.success&&Array.isArray(e.eventSubscriptions))for(var t=0;t<e.eventSubscriptions.length;t+=1)n.addSessionEventSubscription(e.eventSubscriptions[t],"_client");else console.iatInfo("no event subscription for session available!")}function c(){t.getSessionEventSubscription(d)}return BindingLoader}),define("brease/datatype/Notification",["require"],function(e){"use strict";var Notification=function(e,t){this.action=e,this.row=t},t=Notification.prototype;return t.setAction=function(e){this.action=e},t.getAction=function(){return this.action},t.setRow=function(e){this.row=e},t.getRow=function(){return this.row},Notification}),define("brease/controller/objects/PageTypes",["brease/core/Utils"],function(Utils){"use strict";var Types={};return Utils.defineProperty(Types,"PAGE","Page"),Utils.defineProperty(Types,"DIALOG","Dialog"),Types}),define("brease/controller/objects/AssignTypes",["brease/core/Utils"],function(Utils){"use strict";var Types={};return Utils.defineProperty(Types,"CONTENT","Content"),Utils.defineProperty(Types,"PAGE","Page"),Utils.defineProperty(Types,"VISU","Visu"),Types}),define("brease/controller/objects/VisuStatus",["brease/core/Utils"],function(Utils){"use strict";var VisuStatus={};return Utils.defineProperty(VisuStatus,"LOADED","LOADED"),Utils.defineProperty(VisuStatus,"MALFORMED","MALFORMED"),Utils.defineProperty(VisuStatus,"NOT_FOUND","NOT_FOUND"),Utils.defineProperty(VisuStatus,"ACTIVATE_FAILED","ACTIVATE_FAILED"),VisuStatus}),define("brease/objects/Content",[],function(){"use strict";var e=function(e,n,i){this.id=e,this.visuId=n,i&&void 0!==i.path&&(this.path=i.path),i&&void 0!==i.virtual&&(this.virtual=i.virtual),this.width=i&&void 0!==i.width?parseInt(i.width,10):t.width,this.height=i&&void 0!==i.height?parseInt(i.height,10):t.height,this.configurations=i.configurations},t={width:800,height:600};return Object.defineProperty(e.prototype,"serverId",{get:function(){return this.id},enumerable:!1,configurable:!1}),e}),define("brease/objects/Page",["brease/core/Utils"],function(Utils){"use strict";return function(e,t,n,i){for(var s in i)"assignments"!==s&&(this[s]=i[s]);this.id=e,this.visuId=n,this.type=t,this.assignments=Utils.arrayToObject(i.assignments,"areaId")}}),define("brease/objects/AreaInfo",["brease/core/Utils"],function(Utils){"use strict";var e=function(e,i){t.call(this,"id",e),t.call(this,"width",i.width),t.call(this,"height",i.height),t.call(this,"top",i.top),t.call(this,"left",i.left),n.call(this,"zIndex",i.zIndex),n.call(this,"cssWidth",i.cssWidth),n.call(this,"cssHeight",i.cssHeight)};e.prototype.hasPercentageWidth=function(){return void 0!==this.cssWidth&&-1!==this.cssWidth.indexOf("%")},e.prototype.hasPercentageHeight=function(){return void 0!==this.cssHeight&&-1!==this.cssHeight.indexOf("%")},Object.defineProperty(e.prototype,"styleWidth",{get:function(){return Utils.isString(this.cssWidth)&&-1!==this.cssWidth.indexOf("%")?this.cssWidth:this.width+"px"}}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){return Utils.isString(this.cssHeight)&&-1!==this.cssHeight.indexOf("%")?this.cssHeight:this.height+"px"}});function t(e,t){if(void 0===t)throw new SyntaxError(e+" is required");this[e]=t}function n(e,t){void 0!==t&&(this[e]=t)}return e}),define("brease/model/VisuModel",["brease/events/BreaseEvent","brease/events/ServerEvent","brease/core/Utils","brease/controller/objects/PageTypes","brease/controller/objects/AssignTypes","brease/controller/objects/VisuStatus","brease/controller/libs/LogCode","brease/objects/Content","brease/objects/Page","brease/objects/AreaInfo","brease/services/Preloader"],function(BreaseEvent,ServerEvent,Utils,PageTypes,AssignTypes,VisuStatus,LogCode,e,t,n,i){"use strict";var s={init:function(e,t){return t&&(r=t),e&&(o=e,o.addEventListener(ServerEvent.VISU_ACTIVATED,m)),d(),l.reset(),this},activateVisu:function(e,t){e=Utils.ensureVisuId(e),t.visuId&&(t.visuId=Utils.ensureVisuId(t.visuId));var n=a.visus[e],i=$.Deferred();return void 0===n||n.status!==VisuStatus.LOADED?i.reject(void 0!==n?n.status:VisuStatus.NOT_FOUND,void 0,t):!0!==n.active?(n.activateDeferred=i,n.callbackInfo=t,o.activateVisu(e,v,t),l.push(e)):i.resolve(t),i.promise()},deactivateVisu:function(e){e=Utils.ensureVisuId(e),a.visus[e]&&(o.deactivateVisu(e),a.visus[e].active=!1,document.body.dispatchEvent(new CustomEvent(BreaseEvent.VISU_DEACTIVATED,{detail:{visuId:e}})))},loadVisuData:function(e,t){var n=$.Deferred();if(e=Utils.ensureVisuId(e),void 0===e)r.log(LogCode.VISU_NOT_FOUND,{visuId:e,container:brease.appElem}),n.reject(e);else{var s=i.get("visu"),a={visuId:e,deferred:n,isRoot:!0,rootContainerId:t};s&&s.id===e?h({success:!0,visuData:s},a):o.loadVisuData(e,h,a)}return n.promise()},getPageById:function(e){return a.pages[e]},getNavById:function(e){return a.navigations[e]},getVisuById:function(e){return a.visus[Utils.ensureVisuId(e)]},getVisuByStartpage:function(e){var t;for(var n in a.visus)if(a.visus[n].startPage===e){t=a.visus[n];break}return t},getDialogById:function(e){return a.dialogs[e]},getContentById:function(e){return a.contents[e]},isValidContent:function(e){return void 0!==a.contents[e]},getLayoutById:function(e){return a.layouts[e]},getThemes:function(){return a.themes},pageHasArea:function(e,t){var n=!1,i=this.getLayoutById(t.layout);return i&&i.areas&&(n=void 0!==i.areas[e]),n},findAssignment:function(e,t){return e.assignments[t]},findNav4page:function(e){var t;for(var n in a.navigations)if(void 0!==a.navigations[n].pages[e]){t=a.navigations[n];break}return t},parseVisuData:function(e,t){return p(e,t)},allActivated:function(){for(var e=!1,t,n=0;n<l.length();n+=1)if(t=a.visus[l.get(n)],e=void 0!==t&&void 0!==t.active,!1===e)return!1;return l.reset(),!0},addContent:function(e,t){void 0===a.contents[e]&&(t.id||(t.id=e),a.contents[e]=t)},addPage:function(e,t){void 0===a.pages[e]&&(a.pages[e]=t)},removePage:function(e){void 0!==a.pages[e]&&(a.pages[e]=void 0)},addLayout:function(e,t){void 0===a.layouts[e]&&(a.layouts[e]=t)},removeLayout:function(e){void 0!==a.layouts[e]&&(a.layouts[e]=void 0)},addArea:function(e,t){var i=a.layouts[e];void 0===i.areas[t.id]&&(i.areas[t.id]=new n(t.id,t))},addAssignment:function(e,t,n){var i=a.pages[t];void 0===i.assignments[e]&&(i.assignments[e]=n)},getVisuData:function(){return a}};Object.defineProperty(s,"startPageId",{get:function(){return a.startPageId},enumerable:!0,configurable:!1}),Object.defineProperty(s,"startThemeId",{get:function(){return a.startThemeId},enumerable:!0,configurable:!1}),Object.defineProperty(s,"startVisuId",{get:function(){return a.startVisuId},enumerable:!0,configurable:!1});var r,o,a,l={stack:[],reset:function(){this.stack.length=0},length:function(){return this.stack.length},get:function(e){return this.stack[e]},push:function(e){this.stack.push(e)}};function d(e,t){a={pages:{},dialogs:{},layouts:{},contents:{},navigations:{},visus:{},themes:[]},e&&(a.startPageId=e.startPage,a.startVisuId=t,a.startThemeId=e.startTheme,a.configurations=e.configurations)}function c(e){var t;for(var n in e.assignments){var i=e.assignments[n];if(i.type===AssignTypes.VISU&&void 0===a.visus[i.contentId]){t=i.contentId=Utils.ensureVisuId(i.contentId);break}}return t}function u(){var e;for(var t in a.pages)if(e=c(a.pages[t]),e)break;if(void 0===e)for(var n in a.dialogs)if(e=c(a.dialogs[n]),e)break;return e}function h(e,t){!0===e.success&&e.visuData?(Utils.isObject(e.visuData.layouts)&&0!==Object.keys(e.visuData.layouts).length||r.log(LogCode.NO_LAYOUTS_FOUND,{visuId:t.visuId}),Utils.isObject(e.visuData.pages)&&0!==Object.keys(e.visuData.pages).length||r.log(LogCode.NO_PAGES_FOUND,{visuId:t.visuId}),!0===t.isRoot?(d(e.visuData,t.visuId),a.visus[t.visuId]=new y(t.visuId,e.visuData.startPage,t.rootContainerId),g(e.visuData,t.visuId,!0)):(a.visus[t.visuId]=new y(t.visuId,e.visuData.startPage),g(e.visuData,t.visuId))):a.visus[t.visuId]={status:"parsererror"===e.status?VisuStatus.MALFORMED:VisuStatus.NOT_FOUND};var n=u();void 0!==n?o.loadVisuData(n,h,{visuId:n,deferred:t.deferred,isRoot:!1}):t.deferred.resolve(a.configurations)}function g(e,t){f(e.themes),e=p(e,t),$.extend(!0,a,e)}function f(e){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)-1===a.themes.indexOf(e[t])&&a.themes.push(e[t])}function p(i,s){var r={pages:{},dialogs:{},layouts:{},contents:{},navigations:{}};for(var o in i.pages){var a=i.pages[o];r.pages[o]=new t(o,PageTypes.PAGE,s,a)}for(var l in i.dialogs){var d=i.dialogs[l];r.dialogs[l]=new t(l,PageTypes.DIALOG,s,d)}for(var c in i.layouts){var u=i.layouts[c];u.id=c;for(var h in u.areas)u.areas[h]=new n(h,u.areas[h]);r.layouts[u.id]=u}for(var g in i.contents){var f=i.contents[g];r.contents[g]=new e(g,s,{path:f.path,width:f.width,height:f.height,configurations:f.configurations})}for(var p in i.navigations)r.navigations[p]=b(p,i);return r}function m(e){var t=e.detail.visuId,n=a.visus[t];if(n){var i=n.activateDeferred,s=n.callbackInfo;n.active=!0,window.clearTimeout(n.timeout),delete n.callbackInfo,delete n.timeout,document.body.dispatchEvent(new CustomEvent(BreaseEvent.VISU_ACTIVATED,{detail:{visuId:t,active:n.active}})),i&&i.resolve(s)}}function v(e,t){var n=a.visus[t.visuId];if(n){var i=n.activateDeferred,s=void 0!==e&&void 0!==e.status?e.status.code:void 0;0!==s?i.reject(VisuStatus.ACTIVATE_FAILED,s,t):!0!==n.active&&(n.timeout=window.setTimeout(function(){brease.messenger.announce("VISU_NOT_ACTIVATED",{visuId:t.visuId})},3e4))}}function b(e,t){var n=t.navigations[e],i=new E(e);for(var s in n.pages){if(t.pages&&void 0!==t.pages[s]?i.addPage(n.pages[s],t.pages?t.pages[s]:{id:s},s):r.log(LogCode.PAGE_NOT_FOUND,{pageId:s,isStartPage:t&&t.startPage===s}),n.pages[s].targets)for(var o=0;o<n.pages[s].targets.length;o+=1){var a=n.pages[s].targets[o];t.pages&&void 0!==t.pages[a]?(void 0===i.pages[a]&&i.addPage(n.pages[a],t.pages?t.pages[a]:{id:a},a),i.pages[a].addSource(s)):r.log("PAGE_NOT_FOUND",{pageId:a,isStartPage:t&&t.startPage===a})}i.swipes[s]=n.pages[s].swipe}return i}function y(e,t,n){this.id=e,this.startPage=t,this.status=VisuStatus.LOADED,this.containerId=n}function E(e){this.id=e,this.pages={},this.swipes={}}E.prototype.addPage=function(e,t,n){void 0===this.pages[n]&&(this.pages[n]=new A(n,e?e.targets:void 0,t.displayName,t.image))};function A(e,t,n,i){this.id=e,void 0!==i&&(this.image=i),void 0!==n&&(this.displayName=n),this.targets=t||[],this.reachableFrom=[]}return A.prototype.addSource=function(e){this.reachableFrom.push(e)},s.init()}),define("brease/controller/ContentManager",["brease/events/BreaseEvent","brease/events/ServerEvent","brease/core/Utils","brease/model/VisuModel","brease/objects/Content","brease/controller/objects/ContentStatus"],function(BreaseEvent,ServerEvent,Utils,e,t,ContentStatus){"use strict";var n={init:function(e){e.addEventListener(ServerEvent.CONTENT_ACTIVATED,i),e.addEventListener(ServerEvent.CONTENT_DEACTIVATED,s)},getContent:function(e){return r(e)},setBindingLoadState:function(e,t){r(e).bindingsLoaded=t},isBindingLoaded:function(e){var t=r(e);return void 0!==t&&!0===t.bindingsLoaded},setActiveState:function(e,t){var n=r(e);n&&(n.state=t)},getActiveState:function(e){return r(e)?r(e).state:ContentStatus.notExistent},isContentActive:function(e){var t=r(e);return void 0!==t&&t.state===ContentStatus.active},allActive:function(e){for(var t=!0,n=0;n<e.length;n+=1)t=t&&this.isContentActive(e[n]);return t},setLatestRequest:function(e,t){var n=r(e);return n&&("activate"===t&&(n.count+=1),n.latestRequest=e+"["+n.count+"]"+t),n},getLatestRequest:function(e){return r(e)?r(e).latestRequest:void 0},setActivateDeferred:function(e,t){r(e).activateDeferred=t},setDeactivateDeferred:function(e,t){r(e).deactivateDeferred=t},addVirtualContent:function(n,i){if(void 0===r(n)){var s=new t(n,i,{virtual:!0});a(s),e.addContent(n,s)}}};function i(e){var t=o(e.detail.contentId,e.detail.visuId);t&&t.state>ContentStatus.initialized&&(n.setActiveState(e.detail.contentId,ContentStatus.active),void 0!==t.activateDeferred&&(t.activateDeferred.resolve(t.id),t.activateDeferred=void 0),document.body.dispatchEvent(new CustomEvent(BreaseEvent.INITIAL_VALUE_CHANGE_FINISHED,{detail:{contentId:t.id}})),document.body.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_ACTIVATED,{detail:{contentId:t.id}})))}function s(e){var t=o(e.detail.contentId,e.detail.visuId);t&&t.state<ContentStatus.initialized&&(void 0!==t.deactivateDeferred&&(t.deactivateDeferred.resolve(t.id),t.deactivateDeferred=void 0),document.body.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_DEACTIVATED,{detail:{contentId:t.id}})))}function r(t){var n=e.getContentById(t);return void 0!==n&&void 0===n.state&&a(n),n}function o(t,n){var i=e.getContentById(t);return void 0!==i&&void 0===i.state&&a(i),i}function a(e){e.state=ContentStatus.initialized,e.count=0}return n}),define("brease/controller/BindingController",["brease/model/BindingModel","brease/controller/BindingLoader","brease/config","brease/events/BreaseEvent","brease/events/ServerEvent","brease/enum/Enum","brease/core/Utils","brease/datatype/Notification","brease/objects/Subscription","brease/controller/ContentManager","brease/core/Types","brease/controller/objects/ContentStatus"],function(e,t,n,BreaseEvent,ServerEvent,Enum,Utils,i,s,r,Types,ContentStatus){"use strict";var o={init:function(n){a=n,n.addEventListener(ServerEvent.PROPERTY_VALUE_CHANGED,p),r.init(n),t.init(n,e,r)},startListen:function(){t.startListen()},activateVirtualContent:function(e,t){return r.addVirtualContent(e,t),o.activateContent(e)},activateContent:function(e){var t=$.Deferred(),n=r.setLatestRequest(e,"activate");return n?(r.setActiveState(e,ContentStatus.activatePending),window.performanceMonitor.profile("activateContent - "+e,0),a.activateContent(n.serverId,n.visuId,c,{requestId:n.latestRequest,contentId:e,deferred:t})):t.resolve(e),t.promise()},isBindingLoaded:function(e){return r.isBindingLoaded(e)},isContentActive:function(e){return r.isContentActive(e)},getContentState:function(e){return r.getActiveState(e)},sendInitialValues:function(t,n){var i=[],s=$.Deferred();r.setLatestRequest(t,"attach")?(e.contentHasSubscriptions(t)?(e.getSubscriptionsForContent(t).forEach(function(e,t){for(var n in e){var s=e[n];void 0!==s&&i.push(g(s,t,n))}}),r.setActivateDeferred(t,s),C(i)):s.resolve(t),s.done(function(e){"function"==typeof n&&n(e)})):"function"==typeof n&&n(t)},deactivateContent:function(t,n){var i=$.Deferred(),s=r.setLatestRequest(t,"detach");s?(r.setActiveState(t,ContentStatus.deactivated),window.performanceMonitor.profile("deactivateContent - "+t,0),r.setDeactivateDeferred(t,i),a.deactivateContent(s.serverId,s.visuId,u,{requestId:s.latestRequest,contentId:t}),e.removeDynamicBindings(t),e.deactivateSubscriptions(t),i.done(function(e){"function"==typeof n&&n(e)})):"function"==typeof n&&n(t)},getSubscriptionsForElement:function(t,n){return e.getSubscriptionsForElement(t,n)},getEventsForElement:function(t,n){return e.getEventsForElement(t,n)},isActiveSessionEvent:function(t){var n=e.getSessionEvents(),i=!1;for(var s in n)if(("_client"===s||r.isContentActive(s))&&-1!==n[s].indexOf(t)){i=!0;break}return i},allActive:function(e){return r.allActive(e)},createBindings:function(e,t,n){var i=$.Deferred();return a.createBindings(e,t,n,d,{contentId:e,bindings:n,deferred:i}),i.promise()},
deleteBindings:function(e,t,n){var i=$.Deferred();return a.deleteBindings(e,t,n,l,{contentId:e,targets:n,deferred:i}),i.promise()},attributeChangeForwarder:function(e){y(e)},nodeAttributeChangeForwarder:function(e){E(e)}},a;function l(t,n){if(0===t.status.code){for(var i=0;i<n.targets.length;i+=1)0===t.bindingsStatus[i].code&&e.removeDynamicBinding(n.targets[i]);n.deferred.resolve(t.bindingsStatus)}else n.deferred.reject(t.status)}function d(t,n){var i,s,r=[];if(0===t.status.code){for(var o=0;o<n.bindings.length;o+=1)i=n.bindings[o],0===t.bindingsStatus[o].code&&(e.addDynamicBinding(i,n.contentId),s=e.addDynamicSubscription(i.target.refId,i.target.attribute,n.contentId),r.push(g(s,i.target.refId,i.target.attribute)),"brease"===i.source.type&&(s=e.addDynamicSubscription(i.source.refId,i.source.attribute,n.contentId),r.push(g(s,i.source.refId,i.source.attribute))));n.deferred.resolve(t.bindingsStatus),r.length>0&&C(r)}else n.deferred.reject(t.status)}function c(e,n){n.requestId===r.getLatestRequest(n.contentId)&&r.getActiveState(n.contentId)>ContentStatus.initialized?!0===e.success?(t.loadSubscriptions(n.contentId,n.deferred),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ATTACH_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.SUCCESS,[n.contentId])):(console.iatWarn('activateContent for content "'+n.contentId+'" failed, possibly no binding defined!'),n.deferred.resolve(n.contentId),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ATTACH_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[n.contentId])):console.iatWarn('activateContent for content "'+n.contentId+'" aborted!')}function u(e,t){window.performanceMonitor.profile("deactivateContent - "+t.contentId,1),!0===e.success?brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_DETACH_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.SUCCESS,[t.contentId]):brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_DETACH_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[t.contentId])}function h(e,t){var n=brease.uiController.callWidget(t,"widget"),i=n.constructor,s=i.meta&&i.meta.properties?i.meta.properties[e]:void 0;return s&&s.getter?s.getter:Utils.getter(e)}function g(e,t,n){if(brease.uiController.getWidgetState(t)<=Enum.WidgetState.NON_EXISTENT)return f(e,'subscription: widget does not exist (widgetId:"'+t+'", attribute:"'+n+'")');var s=-1!==n.indexOf("::")?n.split("::")[0]:n,r=brease.uiController.callWidget(t,h(s,t),s);return void 0===r?f(e,'subscription: undefined value (widgetId:"'+t+'", attribute:"'+n+'")'):null===r?f(e,'subscription: getter returns null (widgetId:"'+t+'", attribute:"'+n+'")'):i.prototype.isPrototypeOf(r)?{subscription:e,data:[],type:"notification"}:{subscription:e,data:r}}function f(e,t){return console.iatWarn(t),{subscription:e,data:null}}function p(t){var n=t.detail,i=n.length;if(i>0)for(var s=0;s<i;s+=1)for(var r=n[s].refId,o=n[s].data,a=0,l=o.length;a<l;a+=1)try{var d=e.getSubscriptionsForElement(r,o[a].attribute);d?v(r,o[a].attribute,o[a].value,d):console.iatWarn('no subscription for attribute "'+o[a].attribute+", widgetId="+r)}catch(e){console.warn("error processing property",e)}}function m(e,t){var n=t.constructor,i=n.meta&&n.meta.properties?n.meta.properties[e]:void 0;return i&&i.setter?i.setter:Utils.setter(e)}function v(e,t,n,i){if(void 0===t)console.iatWarn("binding for widget["+e+"]: no binding attribute given");else{var s=brease.callWidget(e,"widget");if(null!==s&&(s.state===Enum.WidgetState.INITIALIZED||s.state===Enum.WidgetState.READY)){var r={origin:"server"};if(-1!==t.indexOf("::")){var o=t.split("::");r.attribute=o[0],r.refAttribute=o[1]}else r.attribute=t;var a=m(r.attribute,s);void 0!==s[a]?(r.value=b(n,s.constructor,a,r.attribute,e),i.active=!0,s[a](r.value,r),s.dispatchEvent(new CustomEvent(BreaseEvent.PROPERTY_CHANGED,{detail:{attribute:r.attribute,value:r.value}}))):console.iatWarn("binding for widget["+e+']: unknown binding method "'+a+'"')}}}function b(e,t,n,i,s){if(!Utils.isString(e))return e;var r=n.substring(0,1).toUpperCase()+n.substring(1);if(void 0===t.meta||void 0===t.meta.actions||void 0===t.meta.actions[r]&&void 0===t.meta.actions[n])return e;var o=t.meta.actions[r]?t.meta.actions[r]:t.meta.actions[n],a=o.parameter,l=a[Object.keys(a)[0]];if(!l||-1===Types.objectTypes.indexOf(l.type))return e;try{e=JSON.parse(e.replace(/'/g,'"'))}catch(e){console.iatWarn("illegal data in binding: attribute: "+i+", widgetId:"+s)}return e}function y(t){var n=t.target.id,i=t.detail;A(e.getSubscriptionsForElement(n),function(e){return i.hasOwnProperty(e)}).forEach(function(e){I(e.data)&&w(e.data,i[e.attribute])})}function E(t){var n=t.target.id,i=t.detail;A(e.getSubscriptionsForElement(n),function(e){return i.attribute===e}).forEach(function(e){I(e.data)&&T(e.data,i.nodeAttribute,i.value)})}function A(e,t){var n=[];if(!Utils.isObject(e)||"function"!=typeof t)return n;for(var i in e)!0===t(i,e[i])&&n.push({attribute:i,data:e[i]});return n}function I(e){return void 0!==e&&(r.isContentActive(e.contentId)||e.active)}function C(e){var t={event:ServerEvent.PROPERTY_VALUE_CHANGED,eventArgs:[]},n;for(t.eventArgs=e.map(function(e){return void 0!==e.type?{refId:e.subscription.elemId,data:[{attribute:e.subscription.attribute,value:e.data,type:e.type}]}:{refId:e.subscription.elemId,data:[{attribute:e.subscription.attribute,value:e.data}]}}),a.sendUpdate([t]),n=0;n<e.length;n+=1)e[n].subscription.active=!0}function w(e,t){a.sendUpdate([{event:ServerEvent.PROPERTY_VALUE_CHANGED,eventArgs:[s.toServerData(e,t)]}])}function T(e,t,n){var i={refId:e.elemId,data:[{attribute:e.attribute}]},s={eventArgs:[i]};"unit"===t&&(s.event="PropertyUnitChanged",i.data[0][t]=n,a.sendUpdate([s]))}return o}),define("brease/controller/ConnectionController",["brease/events/ServerEvent","brease/events/BreaseEvent"],function(ServerEvent,BreaseEvent){"use strict";var ConnectionController={init:function(e,o,a,l){void 0!==a&&(t=a),void 0!==l&&(n=l),e.addEventListener(BreaseEvent.CONNECTION_STATE_CHANGED,i.bind(this,o)),e.addEventListener(ServerEvent.TRANSFER_START,s.bind(this,o)),e.addEventListener(ServerEvent.TRANSFER_FINISH,r.bind(this,o))}},e=!1,t=function(){window.location.reload()},n=function(){window.location.reload()};function i(n,i){!0===i.detail.state?(n.clear(),t()):!0!==e&&(document.body.dispatchEvent(new CustomEvent(BreaseEvent.CONNECTION_STATE_CHANGED,{detail:{state:i.detail.state}})),n.showMessage(brease.language.getSystemTextByKey("BR/IAT/brease.common.connectionError.text")))}function s(t){e=!0,t.showMessage(brease.language.getSystemTextByKey("BR/IAT/brease.common.transferStart"))}function r(t){e=!1,t.clear(),n()}return ConnectionController}),define("brease/events/EventHandler",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var e,t,EventHandler=function(e,t,n,s,r){this.data={event:n,source:{type:e,refId:t},eventArgs:s||{}},this.elem=r,this.isSubscribed=i(t,e,n),this.boundRevalidate=this.reValidate.bind(this),document.body.addEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundRevalidate)},n=EventHandler.prototype;EventHandler.init=function(n,i){e=n,t=i},n.dispose=function(){this.elem=void 0,this.data=void 0,document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundRevalidate)},n.setEventArgs=function(e){this.data.eventArgs=e||{}},n.getEventArgs=function(){return this.data.eventArgs},n.dispatch=function(t){this.isSubscribed&&("ContentLoaded"===this.data.event&&!0===brease.config.preLoadingState||e.sendEvent(this.data)),!1!==t&&void 0!==this.elem&&this.elem.dispatchEvent(new CustomEvent(this.data.event,{detail:this.data.eventArgs,bubbles:!0}))},n.reValidate=function(){this.isSubscribed=i(this.data.source.refId,this.data.source.type,this.data.event)};function i(e,n,i){var s,r=!1;return 0===n.indexOf("widgets.")?(s=t.getEventsForElement(e,i),s&&(r=!0)):0===n.indexOf("clientSystem.")&&(r=t.isActiveSessionEvent(i)),r}return EventHandler}),define("brease/events/ClientSystemEvent",["brease/core/Utils"],function(Utils){"use strict";var ClientSystemEvent={};return Utils.defineProperty(ClientSystemEvent,"KEY_DOWN","KeyDown"),Utils.defineProperty(ClientSystemEvent,"KEY_UP","KeyUp"),Utils.defineProperty(ClientSystemEvent,"KEY_PRESS","KeyPress"),Utils.defineProperty(ClientSystemEvent,"LOGIN_SUCCESS","LoginSuccess"),Utils.defineProperty(ClientSystemEvent,"LOGIN_FAILED","LoginFailed"),Utils.defineProperty(ClientSystemEvent,"SYSTEM_SWIPE","SystemSwipe"),Utils.defineProperty(ClientSystemEvent,"CONTENT_LOADED","ContentLoaded"),Utils.defineProperty(ClientSystemEvent,"DISABLED_CLICK","DisabledClick"),Utils.defineProperty(ClientSystemEvent,"DIALOG_OPENED","DialogOpened"),Utils.defineProperty(ClientSystemEvent,"DIALOG_CLOSED","DialogClosed"),Utils.defineProperty(ClientSystemEvent,"TOOLTIPMODE_ACTIVATED","TooltipModeActivated"),Utils.defineProperty(ClientSystemEvent,"TOOLTIPMODE_DEACTIVATED","TooltipModeDeactivated"),ClientSystemEvent}),define("brease/controller/EventController",["brease/events/EventHandler","brease/events/ClientSystemEvent","brease/events/BreaseEvent","brease/events/ServerEvent","brease/events/SystemGestures","brease/core/Utils","brease/events/VirtualEvents","brease/controller/objects/ContentStatus","brease/model/VisuModel"],function(EventHandler,ClientSystemEvent,BreaseEvent,ServerEvent,SystemGestures,Utils,VirtualEvents,ContentStatus,e){"use strict";var EventController={init:function(t,n,i){return i&&(e=i),r&&(o(!0),x={}),r=t,EventHandler.init(r,n),o(),this}},t=[],n=[],i=[],s={},r;function o(e){a(e),l(e),d(r,e),c(r,e),u(e)}function a(e){e?(document.removeEventListener("keypress",E),document.removeEventListener("keyup",A),document.removeEventListener("keydown",y)):(document.addEventListener("keypress",E),document.addEventListener("keyup",A),document.addEventListener("keydown",y))}function l(e){var t=SystemGestures.GESTURES.SystemGesture1,n=SystemGestures.GESTURES.SystemGesture3;e?(t.touchPoints!==n.touchPoints?(SystemGestures.off(t.Type,k),SystemGestures.off(n.Type,M)):SystemGestures.off(t.Type,O),brease.bodyEl.off(BreaseEvent.MOUSE_DOWN,f)):(t.touchPoints!==n.touchPoints?(SystemGestures.on(t.Type,k),SystemGestures.on(n.Type,M)):SystemGestures.on(t.Type,O),brease.bodyEl.on(BreaseEvent.MOUSE_DOWN,f))}function d(e,t){t?(document.body.removeEventListener(BreaseEvent.FRAGMENT_SHOW,m),e&&e.removeEventListener&&e.removeEventListener(ServerEvent.CONTENT_ACTIVATED,b),document.body.removeEventListener(BreaseEvent.EVENTBINDING_LOADED,_),document.body.removeEventListener(BreaseEvent.DISABLED_CLICK,I)):(document.body.addEventListener(BreaseEvent.FRAGMENT_SHOW,m),e&&e.addEventListener(ServerEvent.CONTENT_ACTIVATED,b),document.body.addEventListener(BreaseEvent.EVENTBINDING_LOADED,_),document.body.addEventListener(BreaseEvent.DISABLED_CLICK,I))}function c(e,t){t?(document.body.removeEventListener(BreaseEvent.DIALOG_OPEN,C),document.body.removeEventListener(BreaseEvent.DIALOG_CLOSED,w),document.body.removeEventListener(BreaseEvent.FRAGMENT_SHOW,T),e&&e.removeEventListener&&e.removeEventListener(ServerEvent.CONTENT_ACTIVATED,T)):(document.body.addEventListener(BreaseEvent.DIALOG_OPEN,C),document.body.addEventListener(BreaseEvent.DIALOG_CLOSED,w),document.body.addEventListener(BreaseEvent.FRAGMENT_SHOW,T),e&&e.addEventListener(ServerEvent.CONTENT_ACTIVATED,T))}function u(e){e?(document.body.removeEventListener(BreaseEvent.TOOLTIPMODE_ACTIVE,h),document.body.removeEventListener(BreaseEvent.TOOLTIPMODE_INACTIVE,g)):(document.body.addEventListener(BreaseEvent.TOOLTIPMODE_ACTIVE,h),document.body.addEventListener(BreaseEvent.TOOLTIPMODE_INACTIVE,g))}function h(){S(ClientSystemEvent.TOOLTIPMODE_ACTIVATED,{})}function g(){S(ClientSystemEvent.TOOLTIPMODE_DEACTIVATED,{})}function f(e){s.startPoint={left:e.clientX,top:e.clientY}}function p(e){var t=brease.pageController.getCurrentPage("appContainer"),n=brease.pageController.getPageById(t),i=brease.pageController.getLayoutById(n.layout),s=[];for(var r in n.assignments){var o=i.areas[r];o.left<=e.left&&e.left<=o.left+o.width&&o.top<=e.top&&e.top<=o.top+o.height&&s.push(o)}return s.length>1&&s.sort(function(e,t){return t.zIndex-e.zIndex}),s.length>0?s[0].id:void 0}function m(t){x[ClientSystemEvent.CONTENT_LOADED]&&x[ClientSystemEvent.CONTENT_LOADED].reValidate();var n=t.detail.contentId,i=e.getContentById(n);void 0!==i&&(i.state===ContentStatus.active?S(ClientSystemEvent.CONTENT_LOADED,{contentId:n,visuId:i.visuId}):v.add(n))}var v={queue:new Map,add:function(e){this.queue.set(e,e)},contains:function(e){return void 0!==this.queue.get(e)},remove:function(e){this.queue.delete(e)}};function b(t){x[ClientSystemEvent.CONTENT_LOADED]&&x[ClientSystemEvent.CONTENT_LOADED].reValidate();var n=t.detail.contentId;if(v.contains(n)){v.remove(n);var i=e.getContentById(n);void 0!==i&&S(ClientSystemEvent.CONTENT_LOADED,{contentId:n,visuId:i.visuId})}}function y(e){if(void 0!==e.key&&-1===t.indexOf(e.key)){var n=L(e);void 0!==n&&(t.push(e.key),S(ClientSystemEvent.KEY_DOWN,{key:e.key,keyASCII:n}))}}function E(e){if(void 0!==e.key&&-1===n.indexOf(e.key)){var t=L(e);void 0!==t&&(n.push(e.key),S(ClientSystemEvent.KEY_PRESS,{key:e.key,keyASCII:t}))}}function A(e){if(void 0!==e.key){D(t,e.key),D(n,e.key);var i=L(e);void 0!==i&&S(ClientSystemEvent.KEY_UP,{key:e.key,keyASCII:i})}}function I(e){var t=e.detail;if(void 0!==t&&t.widgetId===t.origin){var n=N(t.contentId,t.widgetId);S(ClientSystemEvent.DISABLED_CLICK,{contentId:t.contentId,widgetId:n,hasPermission:t.hasPermission})}}function C(e){var t=brease.pageController.getDialogById(e.detail.dialogId),n={id:e.detail.dialogId,contents:[]};if(t&&t.assignments){for(var s in t.assignments)n.contents.push({id:t.assignments[s].contentId,count:0});i.push(n)}}function w(e){var t=i.filter(function(t){return t.id!==e.detail.dialogId});i=t,S(ClientSystemEvent.DIALOG_CLOSED,{dialogId:e.detail.dialogId})}function T(e){if(0!==i.length){var t=e.detail.contentId,n=i.map(function(e){return{id:e.id,contents:e.contents.filter(function(e){return e.id===t&&(e.count+=1),e.id!==t||e.id===t&&e.count<2})}});i=n.filter(function(e){return 0!==e.contents.length||(S(ClientSystemEvent.DIALOG_OPENED,{dialogId:e.id}),!1)})}}var x={};function S(e,t){void 0!==x[e]?x[e].setEventArgs(t):x[e]=new EventHandler("clientSystem.Event",null,e,t,brease.appElem),x[e].dispatch()}function _(){for(var e in x)x[e].reValidate()}function D(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function L(e){return void 0!==e.key&&1===e.key.length?e.key.charCodeAt(0):void 0!==e.which?e.which:e.keyCode}function N(e,t){var n;return n=e?t.slice(e.length>0?1+e.length:0,t.length):t,n}function O(e){!1===Utils.hasClass(e.target,"breaseModalDimmer")&&(s.direction=e.detail.direction,s.startArea=p(s.startPoint),s.endArea=p({left:e.clientX,top:e.clientY}),brease.pageController.swipeNavigation(s.direction)||S(ClientSystemEvent.SYSTEM_SWIPE,{direction:s.direction,areaId:void 0!==s.startArea&&s.startArea===s.endArea?s.startArea:""}))}function k(e){!1===Utils.hasClass(e.target,"breaseModalDimmer")&&(s.direction=e.detail.direction,s.startArea=p(s.startPoint),s.endArea=p({left:e.clientX,top:e.clientY}),brease.pageController.swipeNavigation(s.direction))}function M(e){!1===Utils.hasClass(e.target,"breaseModalDimmer")&&(s.direction=e.detail.direction,s.startArea=p(s.startPoint),s.endArea=p({left:e.clientX,top:e.clientY}),S(ClientSystemEvent.SYSTEM_SWIPE,{direction:s.direction,areaId:void 0!==s.startArea&&s.startArea===s.endArea?s.startArea:""}))}return EventController}),define("brease/core/libs/Deferred",[],function(){"use strict";var Deferred=function(e,t){this.type=e,Array.isArray(t)&&(this.loopParams=t.slice(0)),this._done=[],this._fail=[]};return Deferred.TYPE_SINGLE="singleShot",Deferred.TYPE_MULTI="multiShot",Deferred.prototype={execute:function(e,t){for(var n=e.length-1;n>=0;)e[n].apply(null,t),n-=1;this.type===Deferred.TYPE_SINGLE&&e.length>0&&this.terminate(),this._done=null,this._fail=null},resolve:function(){if(void 0===this.state){this.state=1,Array.isArray(this.loopParams)?this.doneData=this.loopParams:this.doneData=[];for(var e=arguments.length-1;e>=0;e-=1)this.doneData.unshift(arguments[e]);this.loopParams=null,this.execute(this._done,this.doneData)}},reject:function(){if(void 0===this.state){this.state=-1,Array.isArray(this.loopParams)?this.failData=this.loopParams:this.failData=[];for(var e=arguments.length-1;e>=0;e-=1)this.failData.unshift(arguments[e]);this.loopParams=null,this.execute(this._fail,this.failData)}},done:function(e){return"function"==typeof e&&(this.doneData?(e.apply(null,this.doneData),this.type===Deferred.TYPE_SINGLE&&this.terminate()):this._done&&this._done.push(e)),this},fail:function(e){return"function"==typeof e&&(this.failData?(e.apply(null,this.failData),this.type===Deferred.TYPE_SINGLE&&this.terminate()):this._fail&&this._fail.push(e)),this},terminate:function(){this.doneData=null,this.failData=null,this.loopParams=null}},Deferred}),define("brease/controller/FileManager",["brease/core/Utils","brease/core/libs/Deferred"],function(Utils,Deferred){"use strict";var e={getPathByType:function(e,t){return b(e,t)},getPathByClass:function(e,t){if(t)return E(e,t);if(void 0!==f[e])return f[e];if(Utils.isString(e)){var n=A(e);return f[e]=f[n.class]=n,f[f[e].type]=n,f[e]}},loadJSFiles:function(e,s){if(e&&e.path&&e.class){var r=[e.path],o=e.class;return!0===s&&r.push(o+"/designer/ClassInfo"),void 0===i[o]&&(i[o]=new Deferred,require(r,t.bind(null,o),n.bind(null,o))),i[o]}var a=new Deferred;return a.reject("undefined widget path"),a},loadWidgetMeta:function(t){var n=t.class;if(void 0===i[n])return e.loadJSFiles(t,!0);var s=new Deferred;return require([n+"/designer/ClassInfo"],function(e){var t=e.meta.className,n=b(t,"class");i[n].doneData[0].meta=e.meta,s.resolve()},function(e){console.debug(e.message),s.reject()}),s},loadOverlays:function(e){var t=new Deferred("singleShot");return require(e,function e(){t.resolve.apply(t,arguments)},function e(){t.reject("script error")}),t},loadHTMLFiles:function(e,t,n){var i=new Deferred("singleShot",n),r=g.call(this,e);return r.length>0?s.call(this,r,t).done(function(){i.resolve()}):i.resolve(),i},getHTMLByType:function(e){return a[e]}};function t(e,t,n){t?(n&&void 0===t.meta&&(t.meta=n.meta),t.defaults.className=e,i[e].resolve(t)):i[e].reject("script error")}function n(e,t){i[e].reject(t.message)}var i={};function s(e,t){for(var n="",i=[],s=r(t),a=0;a<e.length;a+=1)n=e[a],s.types.push(n),-1===l.indexOf(n)&&(l.push(n),i.push(n));o();for(var d=0;d<i.length;d+=1)c(i[d]).done(function(){o()}).fail(function(){o()});return s.def}function r(e){for(var t,n=d.length-1;n>=0;n-=1)d[n].queueId===e&&(t=d[n]);return t||(t={def:new Deferred("singleShot"),types:[],queueId:e},d.push(t)),t}function o(){for(var e=d.length-1;e>=0;e-=1){var t=d[e];if(t){t.success=!0;for(var n=0;n<t.types.length;n+=1)if(void 0===a[t.types[n]]){t.success=!1;break}!0===t.success&&(d.splice(e,1),t.def.resolve())}}}var a={},l=[],d=[];function c(e){var t=new Deferred("singleShot",[e]);return u(t,b(e,"path"),e),t}function u(e,t,n){require(["text!"+t+".html"],function t(i){if(-1!==i.indexOf('data-instruction-inherit="true"')){var s=h(i);u(e,b(s,"path"),n)}else a[n]=i.trim(),e.resolve()},function t(i){a[n]=!1,e.reject(i.message)})}function h(e){var t='data-instruction-superClass="',n=e.substring(e.indexOf(t)+t.length);return n.substring(0,n.indexOf('"')).replace(/\//g,".")}function g(e){for(var t=[],n=0;n<e.length;n+=1)e[n].className&&(e[n].className=b(e[n].className,"type"),-1===t.indexOf(e[n].className)&&t.push(e[n].className));return t}var f={},p=new RegExp("[..]","g"),m=new RegExp("[/.]","g"),v=["class","style","type","path"];function b(e,t){if(Utils.isString(e)){if(-1!==e.indexOf("/"))throw new SyntaxError("wrong widgetType:"+e+"; use dot-notation instead!");if(void 0===f[e]){var n=y(e);f[e]=f[n.type]=n,f[f[e].class]=n}return-1===v.indexOf(t)&&(t=v[0]),f[e][t]}}function y(e){e=-1!==e.indexOf(".")?e:"widgets.brease."+e;var t={style:e.replace(p,"_"),type:e,class:e.replace(p,"/")};return t.path=t.class+t.class.substring(t.class.lastIndexOf("/")),t}function E(e,t){if(void 0!==f[e])return f[e][t];if(Utils.isString(e)){var n=A(e);return f[e]=f[n.class]=n,f[f[e].type]=n,f[e][t]}}function A(e){e=-1!==e.indexOf("/")?e:"widgets/brease/"+e;var t={style:e.replace(m,"_"),type:e.replace(m,"."),class:e};return t.path=t.class+t.class.substring(t.class.lastIndexOf("/")),t}return e}),define("brease/controller/InfoController",["brease/events/BreaseEvent","libs/platform"],function(BreaseEvent,e){"use strict";var InfoController={init:function(e){r=e},start:function(e,o){s=0,window.setTimeout(function(){r.setClientInformation(JSON.stringify(d()))},0),t&&window.clearInterval(t),i=isNaN(o)?n:o,!0===e?(t=window.setInterval(a,i),c()):u(),brease.appElem.addEventListener(BreaseEvent.PAGE_LOADED,l)}},t,n=1e3,i=1e3,s=0,r;function o(){s+=1}function a(){r.setClientInformation('{"activityCount":'+s+"}")}function l(e){e.detail.containerId===brease.appElem.id&&r.setClientInformation('{"currentPageId":"'+e.detail.pageId+'"}')}function d(){return{userAgent:navigator.userAgent,screenResolution:screen.width+"x"+screen.height,browserResolution:window.innerWidth+"x"+window.innerHeight,languages:(Array.isArray(navigator.languages)?navigator.languages.join(","):navigator.language)+"",activityCount:s,cookieEnabled:navigator.cookieEnabled,browser:e.name,operatingSystem:e.os.family,isMultiTouch:navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1}}function c(){document.body.addEventListener("click",o),document.body.addEventListener("mousedown",o),document.body.addEventListener("mouseup",o),document.body.addEventListener("touchstart",o),document.body.addEventListener("touchend",o),document.body.addEventListener("touchmove",o)}function u(){document.body.removeEventListener("click",o),document.body.removeEventListener("mousedown",o),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("touchstart",o),document.body.removeEventListener("touchend",o),document.body.removeEventListener("touchmove",o)}return InfoController}),define("brease/controller/libs/ScrollManager",["brease/helper/Scroller","libs/iscroll-probe"],function(Scroller,e){"use strict";var ScrollManager={ADD_TIMEOUT:50,REFRESH_TIMEOUT:50,FAIL_TIMEOUT:1e3,init:function(e,t,i,s){n=e,t>0&&(this.FAIL_TIMEOUT=t),i>0&&(this.ADD_TIMEOUT=i),s>0&&(this.REFRESH_TIMEOUT=s)},refresh:function(e){var t=l(e);if(t){t.refreshTimer&&window.clearTimeout(t.refreshTimer);var n=document.getElementById(e);n?n.firstChild&&c(n.firstChild)&&n.firstChild.scrollHeight>0?d(e,n.firstChild):t.refreshTimer=window.setTimeout(ScrollManager.refresh.bind(ScrollManager,e),this.REFRESH_TIMEOUT):o(e)}},remove:function(e){var t=l(e);t&&(t.addTimer&&window.clearTimeout(t.addTimer),t.refreshTimer&&window.clearTimeout(t.refreshTimer),void 0!==t.scroller&&(t.scroller.destroy(),t.scroller=void 0),o(e))},add:function(e){if(!1===ScrollManager.isSuitable(e))console.iatWarn("element not suitable for adding a Scroller!");else if(!0===this.hasScroller(e))console.iatWarn("element has already a Scroller!");else{var t=a(e.id);t.addTimer&&window.clearTimeout(t.addTimer),i(e)?s(e):Date.now()-t.startTime<this.FAIL_TIMEOUT?t.addTimer=window.setTimeout(this.add.bind(this,e),this.ADD_TIMEOUT):r(e)}},hasScroller:function(e){return void 0!==t[e.id]&&void 0!==t[e.id].scroller},scrollTo:function(e,n,i){t[e]&&t[e].scroller&&t[e].scroller.scrollTo(n,i)},scrollToContent:function(n,i,s,r){t[n]&&t[n].scroller&&t[n].scroller.scrollTo(i,s,r,e.utils.ease.quadratic)},getScrollPosition:function(e){return ScrollManager.hasScroller(e)?t[e.id].scroller.getComputedPosition():(console.iatWarn("getScrollPosition: area has no scroller"),void 0)},isSuitable:function(e){return e instanceof HTMLElement&&void 0!==e.id&&""!==e.id&&e.firstChild instanceof HTMLElement}},t={},n=Scroller;function i(e){return e.scrollHeight>0&&e.firstChild.scrollHeight>0}function s(e){t[e.id].scroller=n.addScrollbars(e,{mouseWheel:!0,tap:!0,scrollX:!0,scrollY:!0},!0),t[e.id].addTimer=void 0}function r(e){o(e.id),console.iatWarn("add scroller timed out: "+e.id)}function o(e){t[e]=void 0}function a(e){return t[e]||(t[e]={startTime:Date.now()}),t[e]}function l(e){return t[e]}function d(e,n){void 0!==t[e].scroller&&(t[e].scroller.scroller=n,t[e].scroller.scrollerStyle=n.style,t[e].scroller.refresh()),t[e].refreshTimer=void 0}function c(e){return-1!==e.className.indexOf("systemContentLoader")||-1!==e.className.indexOf("breaseLayout")||-1!==e.className.indexOf("ScrollBox")}return ScrollManager}),define("brease/controller/libs/Areas",["brease/enum/Enum","brease/controller/objects/PageTypes","brease/core/Utils","brease/controller/libs/ScrollManager"],function(Enum,PageTypes,Utils,ScrollManager){"use strict";var e=function(e,t){this.id=e,this.init(t)},t=new RegExp(".*_style_.*"),n=!0;e.prototype.init=function(e){this.div=s(this.id,e),n&&(this.innerBox=r(this.id,e),this.div.appendChild(this.innerBox),this.$innerBox=$(this.innerBox)),this.$div=$(this.div),this.info=e},Object.defineProperty(e.prototype,"contentContainer",{get:function(){return n?this.innerBox:this.div}}),Object.defineProperty(e.prototype,"$contentContainer",{get:function(){return n?this.$innerBox:this.$div}}),e.prototype.setStyle=function(e){var n="system_brease_Area_style_"+e,i=this.div.classList;if(!1===i.contains(n)){for(var s in i)t.test(i[s])&&this.$div.removeClass(i[s]);this.$div.addClass(n)}},e.prototype.show=function(){this.$div.css("display","block")},e.prototype.hide=function(){this.$div.css("display","none")},e.prototype.dispose=function(){a.scrollManager.remove(this.id),this.div=null,this.$div=null,n&&(this.innerBox=null,this.$innerBox=null),this.info=null},e.prototype.addScrollbars=function(e,t){var i=e&&e.width*t>this.info.width&&!this.info.hasPercentageWidth(),s=e&&e.height*t>this.info.height&&!this.info.hasPercentageHeight();n&&this.$innerBox.css({width:e.width*t,height:e.height*t}),(i||s)&&!1===a.scrollManager.hasScroller(this.div)?a.scrollManager.add(this.div):a.scrollManager.refresh(this.div.id)},e.prototype.setProperties=function(e,t,n,s){var r={};void 0!==t.areaId&&(r["background-color"]=t.backColor?t.backColor:"",r=i(r,t)),this.$div.css(r),this.addScrollbars(e,n),!1!==s&&a.scrollManager.hasScroller(this.div)&&(a.scrollManager.refresh(this.id),a.scrollManager.scrollTo(this.id,0,0))},e.prototype.refresh=function(){a.scrollManager.hasScroller(this.div)?(a.scrollManager.refresh(this.id),a.scrollManager.scrollTo(this.id,0,0)):a.scrollManager.add(this.div)};function i(e,t){return t.backGround||t.backGroundGradient?(e["background-image"]="",t.backGroundGradient&&(e["background-image"]+=t.backGroundGradient),t.backGround&&(e["background-image"]+=(""!==e["background-image"]?", ":"")+"url("+t.backGround+")",e["background-repeat"]="no-repeat")):e["background-image"]="",t.sizeMode&&(e["background-size"]=Enum.SizeMode.convertToCSS(t.sizeMode)),e}function s(e,t){var n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","position:absolute;"+(void 0!==t.zIndex?"z-index:"+t.zIndex+";":"")+"overflow:hidden; top:"+t.top+"px; left:"+t.left+"px; width:"+t.styleWidth+"; height:"+t.styleHeight+"; box-sizing: border-box;display:block;"),n.setAttribute("class","LayoutArea"),n.setAttribute("data-brease-areaId",t.id),n}function r(e,t){var n=document.createElement("div");return n.setAttribute("id",o(e)),n.setAttribute("class","ScrollBox"),n.setAttribute("style","position:absolute;top:0px; left:0px; width:"+t.width+"px; height:"+t.height+"px; box-sizing: border-box;display:block;"),n}function o(e){return e+(n?"_box":"")}var a={scrollManager:ScrollManager,injectDependencies:function(e,t){this.scrollManager=e,this.rootContainerId=t},add:function(t,n,i,s){var r=this.getAreaDivId(t,n,i.id,s),o=l[r];return void 0===o?l[r]=o=new e(r,i):o.init(i),o},remove:function(e){var t=l[e];t&&(t.dispose(),l[e]=void 0)},get:function(e){return l[e]},getArea:function(e,t,n,i){return l[this.getAreaDivId(e,t,n,i)]},getAreaDivId:function(e,t,n,i){return e=e===this.rootContainerId?"root":i===PageTypes.DIALOG?e:o(e),e+"_"+t+"_"+n}},l={};return a}),define("brease/controller/libs/Containers",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var e={getCurrentPage:function(e){return n(e).currentPage},setCurrentPage:function(e,t){n(e).currentPage=t},setLatestRequest:function(e,t){var i=n(e);i.latestRequest=t,i.status="active"},getLatestRequest:function(e){return n(e).latestRequest},dispose:function(e){void 0!==t[e]&&(t[e].status="disposed")},getContainerForPage:function(e){var n;for(var i in t)if(t[i]&&t[i].currentPage===e){n=i;break}return n},addContainer:function(e,n){void 0===t[e]&&(t[e]=n)},removeContainer:function(e){void 0!==t[e]&&(t[e]=void 0)},resetCurrentPage:function(e){void 0!==t[e]&&(t[e].currentPage=void 0)},resetCurrentPages:function(t){for(var n=$("#"+t).find(".LayoutArea"),i=0,s=n.length;i<s;i+=1)e.resetCurrentPage(n[i].id);$("#"+t).hasClass("LayoutArea")&&e.resetCurrentPage(t)},initPageLoadEvent:function(e,t,s,r){new i(n(e),t,s,r)}},t={};function n(e){return void 0===t[e]&&(t[e]={id:e,status:"active"}),t[e]}var i=function(e,t,n,i){this.container=e,this.pageId=t,this.contentsToLoad=s(n),this.embedded=i,this.boundListener=this.activatedListener.bind(this),document.body.addEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundListener),this.check()};i.prototype.activatedListener=function(e){var t=this.contentsToLoad.indexOf(e.detail.contentId);t>-1&&this.contentsToLoad.length>0&&this.contentsToLoad.splice(t,1),this.check()},i.prototype.check=function(){if(this.container&&"active"===this.container.status&&this.pageId===e.getLatestRequest(this.container.id)){if(0===this.contentsToLoad.length){if(r(this.pageId,this.container.id),Array.isArray(this.embedded))for(var t=0;t<this.embedded.length;t+=1)r(this.embedded[t].pageId,this.embedded[t].containerId);this.dispose()}}else this.dispose()},i.prototype.dispose=function(){this.container=null,this.contentsToLoad=null,this.embedded=null,document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundListener)};function s(e){for(var t=[],n=0;n<e.length;n+=1)!0!==brease.uiController.bindingController.isContentActive(e[n])&&t.push(e[n]);return t}function r(e,t){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.PAGE_LOADED,{bubbles:!0,cancelable:!0,detail:{pageId:e,containerId:t}}))}return e}),define("brease/controller/libs/FactoryUtils",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";return{wrapper:document.createElement("div"),createNode:function(e,t,n,i,s,r){var o=!1,a=-1!==e.indexOf(">CONTENT<");this.wrapper.innerHTML=e;var l=this.wrapper.firstChild;if(l.id=t,l.setAttribute("data-brease-widget",i),s)for(var d in s)l.setAttribute(d,s[d]);var c=l.getAttribute("data-instruction-addStyleClass"),u=l.getAttribute("data-instruction-useDOM");return"true"===c&&void 0!==n.style&&(Utils.addClass(l,i.replace(/\//g,"_")+"_style_"+n.style),n.styleClassAdded=!0),"true"===u||a||(l.innerHTML="",o=!0),null!==u&&l.removeAttribute("data-instruction-useDOM"),null!==c&&l.removeAttribute("data-instruction-addStyleClass"),Utils.addClass(l,"breaseWidget"),a&&this.setInitialContent(l,r,o),l},setInitialContent:function(e,t,n){void 0!==t?void 0!==t.text?e.textContent=t.text+"":void 0!==t.html?e.innerHTML=t.html+"":!0!==n&&(e.innerHTML=""):!0!==n&&(e.innerHTML="")},getElem:function(e){return void 0!==e&&null!==e?void 0!==e.jquery?e=e.length>0?e[0]:null:"function"!=typeof e.querySelectorAll&&(e=null):e=null,e},ensureContentId:function(e,t,n){if(Utils.isString(e)&&""!==e)return e;if(n>Enum.WidgetState.NON_EXISTENT){var i=brease.callWidget(t.id,"getSettings");if(i&&void 0!==i.parentContentId)return i.parentContentId}if(e=t.attributes["data-brease-contentid"],void 0!==e)return e.value;var s=$(t).closest("[data-brease-contentid]")
;return e=s.length>0?s.attr("data-brease-contentid"):brease.settings.globalContent,e},ensureElemId:function(e){return e||(e=Utils.uniqueID("generatedWidgetId")),e}}}),define("brease/events/EventDispatcher",["brease/core/Utils"],function(Utils){"use strict";var EventDispatcher=function EventDispatcher(){Utils.defineProperty(this,"_listeners",{},!1,!1,!0)},e=EventDispatcher.prototype;return e.addEventListener=function(e,t,n){var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&(!0===n?i[e].unshift(t):i[e].push(t))},e.hasEventListener=function(e,t){var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},e.hasListenersOfType=function(e){var t=this._listeners;return void 0!==t&&void 0!==t[e]&&t[e].length>0},e.removeEventListener=function(e,t){var n=this._listeners;if("function"==typeof t){if(n[e]){var i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}else n[e]=[]},e.dispatchEvent=function(e,t){var n=this._listeners[void 0!==t?t:e.type];if(void 0!==n)for(var i=0,s=n.length;i<s;i+=1)n[i].call(this,e)},EventDispatcher}),define("brease/controller/libs/LoadCycle",["brease/events/EventDispatcher"],function(EventDispatcher){"use strict";var LoadCycle=function(){this.inProgress=!1,this.stack=[]};LoadCycle.prototype=new EventDispatcher,LoadCycle.prototype.start=function(t,n,i){if(!1===this.inProgress){if(this.inProgress=!0,this.callback=t,this.callbackInfo=i,this.stack=[],Array.isArray(n))for(var s=0;s<n.length;s+=1)-1===this.stack.indexOf(n[s])&&this.stack.push(n[s]);0===this.stack.length&&e.call(this)}else void 0===this.callbackInfo.embedded&&(this.callbackInfo.embedded=[]),this.callbackInfo.embedded.push({containerId:i.containerId,pageId:i.pageId})},LoadCycle.prototype.remove=function(t,n){var i=this.stack.indexOf(t);-1!==i&&this.stack.splice(i,1),!0===n&&Array.isArray(this.callbackInfo.contentsToLoad)&&(i=this.callbackInfo.contentsToLoad.indexOf(t),-1!==i&&this.callbackInfo.contentsToLoad.splice(i,1)),0===this.stack.length&&!0===this.inProgress&&e.call(this)},Object.defineProperty(LoadCycle.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!0,configurable:!1}),Object.defineProperty(LoadCycle.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!1});function e(){this.inProgress=!1,"function"==typeof this.callback&&(this.callback(this.callbackInfo),this.callback=null,this.callbackInfo=null),this.dispatchEvent({type:"CycleFinished"}),this.removeEventListener("CycleFinished")}return LoadCycle}),define("brease/controller/libs/Queue",["brease/core/Utils","brease/core/libs/Deferred"],function(Utils,Deferred){"use strict";var Queue=function Queue(e,t){e.id||e.setAttribute("id",Utils.uniqueID(t+"_queue")),this.id=e.id,this.elem=e,this.queue=[],this.idQueue=[],this.runningQueue=[],this.processLength=0,this.task=t,this.isRunning=!1,void 0===r[this.task]&&(r[this.task]=new Map),r[this.task].set(this.id,this)},e=Queue.prototype;e.add=function(e){if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.call(this,e[n]);else t.call(this,e);!0===this.isRunning&&this.queue.length>0&&s.call(this)};function t(e){n(e)&&!i.call(this,e)&&(this.queue.push(e),this.idQueue.push(e.id),this.processLength+=1)}function n(e){return Utils.isString(e.id)&&""!==e.id}function i(e){return-1!==this.idQueue.indexOf(e.id)}e.start=function(e,t){return!0!==this.isRunning&&(this.isRunning=!0,this.runMethod=e,this.deferred=new Deferred(Deferred.TYPE_SINGLE,t),0===this.queue.length?(this.stop(),this.finish()):s.call(this)),this.deferred};function s(){var e=this.queue.slice(0),t=this;this.queue=[],e.forEach(function(e){t.runningQueue.push(e),t.runMethod(e,t)})}e.finish=function(){this.deferred&&(this.deferred.resolve(this.elem,this.runningQueue),this.queue=[],this.idQueue=[],this.runningQueue=[],this.processLength=0,this.runMethod=null,this.elem=null,r[this.task].delete(this.id))},e.finishItem=function(){!0===this.isRunning&&(this.processLength-=1,0===this.processLength&&(this.isRunning=!1,this.finish()))},e.stop=function(){this.processLength=0,this.isRunning=!1,this.pending=!1};var r={};return Queue.getQueue=function(e,t,n){var i;return void 0!==e.id&&void 0!==r[t]&&(i=r[t].get(e.id),void 0!==i&&(i.elem=e)),!0===n&&void 0===i&&(i=new Queue(e,t)),i},Queue}),define("brease/objects/WidgetObject",[],function(){"use strict";var e=function(e){var t=this;["id","contentId","state","suspendedState","options","widget"].forEach(function(n){void 0!==e[n]&&(t[n]=e[n])})};return e.prototype.toJSON=function(){var e={},t=this;return["id","contentId","state","suspendedState","options"].forEach(function(n){void 0!==t[n]&&(e[n]=t[n])}),e.widget=this.widget?"[object widget]":null===this.widget?"null":"undefined",e},e}),define("brease/model/WidgetModel",["brease/objects/WidgetObject","brease/core/Utils","brease/enum/Enum"],function(e,Utils,Enum){"use strict";function t(){this.initialState=Enum.WidgetState.IN_QUEUE,this.items=new Map,this.contents={},window.widgetModel={items:this.items,contents:this.contents}}return t.prototype.add=function(t){if(!t||!1===Utils.isString(t))throw new SyntaxError("cannot create widget without id");return this.items.set(t,new e({id:t,state:this.initialState})),this.items.get(t)},t.prototype.getWidget=function(e){return e&&!1!==Utils.isString(e)?this.items.get(e):void 0},t.prototype.getOrCreate=function(e){if(e&&!1!==Utils.isString(e))return void 0===this.items.get(e)&&this.add(e),this.items.get(e);throw new SyntaxError("cannot create widget without id")},t.prototype.deleteWidget=function(e){var t=this.items.get(e);if(t){var n=this.contents[t.contentId];n&&n.delete(e),this.items.delete(e)}},t.prototype.addToContent=function(e,t){var n=this.items.get(e);n&&(n.contentId=t,void 0===this.contents[t]&&(this.contents[t]=new Map),this.contents[t].set(e,n))},t.prototype.getWidgetsOfContent=function(e){return this.contents[e]},t}),define("brease/controller/WidgetController",["brease/core/Utils","brease/controller/libs/FactoryUtils","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/libs/Queue","brease/model/WidgetModel"],function(Utils,e,Enum,BreaseEvent,Queue,t){"use strict";var n=new t,i={init:function(){document.body.addEventListener(BreaseEvent.WIDGET_READY,d),document.body.addEventListener(BreaseEvent.WIDGET_DISPOSE,c)},getOptions:function(e,t){var i=n.getWidget(e);if(void 0!==i){var s=i.options;return t&&(i.options=void 0),s}},setOptions:function(e,t,i,s){var r=n.getOrCreate(e);r.options?r.options=!0===i?!0===s?Utils.deepCopy(t):t:Utils.extendDeepToNew(r.options,t):r.options=!0===s?Utils.deepCopy(t):t,t&&void 0!==t.parentContentId&&n.addToContent(e,t.parentContentId)},optionsExist:function(e){var t=n.getWidget(e);return void 0!==t&&void 0!==t.options},addOption:function(e,t,i){var s=n.getOrCreate(e);void 0===s.options&&(s.options={}),s.options[t]=i},addWithState:function(e,t){n.add(e).state=t},setState:function(e,t){var i=n.getWidget(e);i&&(i.state=t,void 0!==i.widget&&(i.widget.state=t))},getState:function(e){if(!e)return Enum.WidgetState.NON_EXISTENT;var t=n.getWidget(e);return void 0!==t?t.state:Enum.WidgetState.NON_EXISTENT},setSuspendedState:function(e,t){var i=n.getWidget(e);i&&(i.suspendedState=t)},getSuspendedState:function(e){var t=n.getWidget(e);return void 0!==t?t.suspendedState:Enum.WidgetState.NON_EXISTENT},allPreviouslyReady:function(e){var t=!0,n,s=l(e);if(0===s.length)return!1;for(var r=0;r<s.length;r+=1)if(n=i.getSuspendedState(s[r]),n!==Enum.WidgetState.READY){t=!1;break}return t},addWidget:function(e){var t=n.getOrCreate(e.elem.id);t.widget=e,(void 0===t.state||t.state<Enum.WidgetState.INITIALIZED)&&(t.state=Enum.WidgetState.INITIALIZED),e.settings&&e.settings.parentContentId&&n.addToContent(e.elem.id,e.settings.parentContentId)},getWidget:function(e){return n.getWidget(e)},deleteWidget:function(e){n.deleteWidget(e)},getWidgetsOfContent:function(e,t){return l(e,t)},dispose:function t(n,r,o,l){n=e.getElem(n),null!==n?(s(n),i.walkWidgets(n,r,"dispose",[l]),"function"==typeof o&&o()):a("dispose")},disposeInContent:function t(n,r,o){if(n=e.getElem(n),null!==n){s(n);for(var l=i.getWidgetsOfContent(r,Enum.WidgetState.FAILED),d,c,u=0,h=l.length;u<h;u+=1)d=i.getState(l[u]),c=i.getSuspendedState(l[u]),d>Enum.WidgetState.IN_QUEUE&&(d<Enum.WidgetState.SUSPENDED||c>Enum.WidgetState.IN_QUEUE)&&i.callWidget(l[u],"dispose"),i.deleteWidget(l[u]);"function"==typeof o&&o()}else a("dispose")},suspend:function t(n,r,o,l){n=e.getElem(n),null!==n?(s(n),i.walkWidgets(n,r,"suspend",l),"function"==typeof o&&o()):a("suspend")},suspendInContent:function t(n,r,o){n=e.getElem(n),null!==n&&s(n);var a=i.getWidgetsOfContent(r,Enum.WidgetState.IN_QUEUE),l=a.length,d=0;for(d=0;d<l;d+=1)i.callWidget(a[d],"suspend");for(d=0;d<l;d+=1)i.setSuspendedState(a[d],i.getState(a[d])),i.setState(a[d],Enum.WidgetState.SUSPENDED);"function"==typeof o&&o()},wake:function t(n,s,r){if(n=e.getElem(n),null!==n){var o=new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:brease.language.getCurrentLanguage()}}),l=new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:brease.measurementSystem.getCurrentMeasurementSystem()}}),d=new CustomEvent(BreaseEvent.USER_CHANGED,{detail:brease.user.getCurrentUser()}),c=new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:brease.culture.getCurrentCulture().key});i.walkWidgets(n,s,"wake",[{language:o,mms:l,user:d,culture:c}]),"function"==typeof r&&r()}else a("wake")},wakeWidget:function e(t,n){if(i.getState(t)>=Enum.WidgetState.INITIALIZED){var s=new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:brease.language.getCurrentLanguage()}}),r=new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:brease.measurementSystem.getCurrentMeasurementSystem()}}),o=new CustomEvent(BreaseEvent.USER_CHANGED,{detail:brease.user.getCurrentUser()}),a=new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:brease.culture.getCurrentCulture().key});i.callWidget(t,"wake",[{language:s,mms:r,user:o,culture:a}]),"function"==typeof n&&n()}},wakeInContent:function e(t,n){var s=new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:brease.language.getCurrentLanguage()}}),r=new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:brease.measurementSystem.getCurrentMeasurementSystem()}}),o=new CustomEvent(BreaseEvent.USER_CHANGED,{detail:brease.user.getCurrentUser()}),a=new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:brease.culture.getCurrentCulture().key}),l=i.getWidgetsOfContent(t,Enum.WidgetState.IN_QUEUE),d=0,c=l.length,u=["","wake",{language:s,mms:r,user:o,culture:a},brease.config.ContentCaching.preserveOldValues],h;for(d=0;d<c;d+=1)i.setState(l[d],Enum.WidgetState.READY);for(d=0;d<c;d+=1)h=brease.uiController.bindingController.getSubscriptionsForElement(l[d]),u[0]=l[d],h?u[4]=h:u.length=4,i.callWidget.apply(null,u);u.length=0,"function"==typeof n&&n()},walkWidgets:function e(t,n,s,r){var o=i.findWidgets(t,n);if(o.length>0)for(var a=0,l=o.length;a<l;a+=1)if("suspend"===s&&(i.setSuspendedState(o[a],i.getState(o[a])),i.setState(o[a],Enum.WidgetState.SUSPENDED)),"wake"===s){i.setState(o[a],Enum.WidgetState.READY);var d=brease.uiController.bindingController.getSubscriptionsForElement(o[a]);i.callWidget.apply(null,r?[o[a],s].concat(r,d?[brease.config.ContentCaching.preserveOldValues,d]:[brease.config.ContentCaching.preserveOldValues]):[o[a],s])}else i.callWidget.apply(null,r?[o[a],s].concat(r):[o[a],s])},callWidget:function e(t,n){var s=i.getWidget(t);if(void 0!==s&&void 0!==s.widget){var r=s.widget;if(void 0!==r[n]){if(s.state===Enum.WidgetState.READY||s.state===Enum.WidgetState.INITIALIZED||s.state===Enum.WidgetState.SUSPENDED&&("dispose"===n||"getSettings"===n)){var o=[],a=arguments.length,l=2;if(a>2)for(var d=2;d<a;d+=1)o.push(arguments[d]);return r[n].apply(r,o)}return console.iatInfo("[callWidget:"+n+"] widget "+r.el.attr("data-brease-widget")+" with id '"+t+"' in unavailable state:"+s.state),null}return"widget"===n?r:(console.iatWarn("[callWidget] no method '"+n+"' for widget "+r.el.attr("data-brease-widget")+" with id '"+t+"'"),null)}return console.iatWarn('[callWidget] no widget with id "'+t+'" (method call "'+n+'")'),null},findWidgets:function t(n,s,r){var o=[],l,d;if(r=void 0!==r?r:Enum.WidgetState.INITIALIZED,n=e.getElem(n),null!==n){if(l=n.querySelectorAll("[data-brease-widget]"),!0===s&&null!==n.getAttribute("data-brease-widget")&&i.getState(n.id)>=r&&o.push(n.id),l.length>0)for(var c=l.length-1;c>=0;c-=1)d=l[c],i.getState(d.id)>=r&&o.push(l[c].id)}else a("findWidgets");return o}};function s(e){var t=Queue.getQueue(e,"parse"),n=Queue.getQueue(e,"create"),i=0;if(void 0!==n&&(!0===n.isRunning||!0===n.pending)){for(n.stop(),i=0;i<n.runningQueue.length;i+=1)r(n.runningQueue[i]);n.finish()}if(void 0!==t&&!0===t.isRunning){for(t.stop(),i=0;i<t.runningQueue.length;i+=1)r(t.runningQueue[i]);for(i=0;i<t.runningQueue.length;i+=1)o(e,t.runningQueue[i]);t.finish()}}function r(e){e.state<Enum.WidgetState.INITIALIZED&&(e.state=Enum.WidgetState.ABORTED)}function o(e,t){try{t.state!==Enum.WidgetState.ABORTED&&t.state!==Enum.WidgetState.FAILED||void 0!==e.children[t.elem.id]&&e.removeChild(t.elem)}catch(e){console.log("%c"+e.message,"color:red;")}}function a(e,t){var n=t||"["+e+"] target of wrong type";console.iatWarn(n),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],n)}function l(e,t){var i=[],s=n.getWidgetsOfContent(e);return t=void 0!==t?t:Enum.WidgetState.INITIALIZED,void 0!==s&&s.forEach(function(n,s){void 0!==n&&n.contentId===e&&n.state>=t&&i.push(s)}),i}function d(e){i.setState(e.target.id,Enum.WidgetState.READY)}function c(e){i.deleteWidget(e.detail.id)}return i}),define("brease/controller/libs/Utils",["brease/controller/objects/PageTypes"],function(PageTypes){"use strict";var stylePattern=new RegExp(".*_style_.*");return{findLoaders:function(e){var t=document.querySelectorAll("#"+e.id+" .systemContentLoader"),n=t.length;if(n>0){for(var i=new Array(n),s=0;s<n;s+=1)i[n-(s+1)]=t[s];return i}return[]},resetContentControls:function(e){for(var t=document.querySelectorAll("#"+e.id+" .breaseContentControl"),n=0;n<t.length;n+=1)brease.callWidget(t[n].id,"reset")},setPageStyle:function(e,t,n){var i=$(t),s="system_brease_"+n+"_style_"+e;n===PageTypes.DIALOG&&(i=i.closest('[data-brease-widget="widgets/brease/DialogWindow"]'));var r=i[0].classList;if(!1===r.contains(s)){for(var o in r)stylePattern.test(r[o])&&i.removeClass(r[o]);i.addClass(s)}},appendHTML:function(elem,html){if(elem){elem.innerHTML=html;for(var scripts=elem.querySelectorAll("script"),i=0;i<scripts.length;i+=1)eval(scripts[i].textContent),scripts[i].parentNode.removeChild(scripts[i])}},injectCSS:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.textContent=e,t.appendChild(n)}}}),define("brease/controller/objects/LoaderItem",[],function(){"use strict";return function(e,t){this.id=e,this.contentId=t}}),define("brease/controller/libs/LoaderPool",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/libs/Deferred","brease/core/Utils","brease/controller/WidgetController","brease/controller/libs/Utils","brease/controller/objects/LoaderItem","brease/settings"],function(BreaseEvent,Enum,Deferred,e,t,Utils,LoaderItem,n){"use strict";var LoaderPool=function(e){this.slots=0,void 0!==e?this.setSlots(e):this.maxSlots=n.cachingSlotsDefault,this.locker=document.createDocumentFragment(),this.pool={},this.createPool=new Map,this.contentCount={}},i=0;LoaderPool.prototype.dispose=function(){for(var e in this.pool)brease.callWidget(e,"dispose"),this.pool={},this.slots=0,this.contentsToLoad=[],this.contentCount={}},LoaderPool.prototype.setSlots=function(e){this.maxSlots=void 0!==e?Math.max(0,parseInt(e,10)):n.cachingSlotsDefault,this.maxSlots=Math.min(this.maxSlots,n.cachingSlotsMax),console.iatDebugLog("LoaderPool.maxSlots="+this.maxSlots)},LoaderPool.prototype.loadContent=function(e,n,i){var r=n.find(".systemContentLoader"),o=r.length,a;if(e&&void 0!==e.path){l.call(this,e);var c=!1;if(o>0){var u=r[0],h=u.id;if(t.callWidget(h,"getUrl")===e.path)i.resolve(h,!1),window.performanceMonitor.profile("loadContent - "+e.id,1),c=!0;else if(o>1){Utils.resetContentControls(n[0]);for(var g=Utils.findLoaders(n[0]),f=0,p=g.length;f<p;f+=1)s.call(this,g[f])}else s.call(this,u)}else a=this.createPool.get(n[0].id),a&&s.call(this,{id:a.loaderId});c||d.call(this,e,n[0],i)}else o>0?s.call(this,r[0]):(a=this.createPool.get(n[0].id),a&&s.call(this,{id:a.loaderId})),i.reject("CONTENT_NOT_FOUND",n[0])};function s(e){if(t.getState(e.id)<Enum.WidgetState.INITIALIZED){t.setOptions(e.id,{url:"",contentId:""});var n=this.createPool.get(e.id);n&&(n.contentId="")}else this.suspendLoader(e)}LoaderPool.prototype.isContentLoaded=function(e){for(var n in this.pool)if(!0===this.pool[n].inUse&&e===t.callWidget(n,"getContentId"))return!0;return!1},LoaderPool.prototype.suspendLoader=function(e){if(!0===this.tagMode){var n=t.callWidget(e.id,"getContentId"),i=r.call(this,n),s=this.pool[e.id];s&&(s.tag=i?"parked":"suspend",this.locker.appendChild(e))}else o.call(this,e)},LoaderPool.prototype.flushLoader=function(e){if(!0===this.tagMode){var n=t.callWidget(e.id,"getContentId"),i=r.call(this,n),s=this.pool[e.id];s&&(s.tag=i?"parked":"flush",this.locker.appendChild(e))}else a.call(this,e)},LoaderPool.prototype.removeLoader=function(e){this.slots<=this.maxSlots?this.suspendLoader(e):this.flushLoader(e)};function r(e){return-1!==this.contentsToLoad.indexOf(e)}LoaderPool.prototype.startTagMode=function(e){if(!0!==this.tagMode){for(var t in this.pool)this.pool[t].tag="";this.tagMode=!0,this.contentsToLoad=void 0!==e?e:[]}},LoaderPool.prototype.endTagMode=function(){this.tagMode=!1;for(var e in this.pool)"suspend"===this.pool[e].tag&&(0===this.maxSlots?a.call(this,this.locker.querySelector("#"+e)):o.call(this,this.locker.querySelector("#"+e))),"flush"===this.pool[e].tag&&a.call(this,this.locker.querySelector("#"+e))},LoaderPool.prototype.createNew=function(e,t,n,i){f.call(this,e,t,n,i)},LoaderPool.prototype.getCounter=function(){return i},LoaderPool.prototype.setCounter=function(e){return i=e,!0};function o(n){var i=this.pool[n.id];if(void 0!==i)try{t.callWidget(n.id,"suspend")}catch(t){e.logError(t)}finally{i.tag="",i.inUse=!1,this.locker.appendChild(n)}else console.iatWarn("no loader with id="+n.id+" found!")}function a(n){var i=this.pool[n.id];if(void 0!==i)try{t.callWidget(n.id,"flush")}catch(t){e.logError(t)}finally{i.tag="",i.inUse=!1,i.contentId="",this.locker.appendChild(n)}else console.iatWarn("no loader with id="+n.id+" found!")}function l(e){void 0===this.contentCount[e.id]&&(this.contentCount[e.id]=0),this.contentCount[e.id]+=1}function d(n,i,s){var r=h.call(this,n.path);if(r){e.prependChild(i,this.locker.querySelector("#"+r.id));try{"parked"!==r.tag?t.allPreviouslyReady(n.id)?t.callWidget(r.id,"wake"):t.callWidget(r.id,"load",n.path,n.id,!0):t.callWidget(r.id,"widget").suspended&&t.callWidget(r.id,"wake")}catch(t){e.logError(t)}finally{r.tag="",r.inUse=!0,r.contentId=n.id,s.resolve(r.id,!0)}}else c.call(this,i,n,s)}function c(e,t,n){if(this.slots<this.maxSlots)f.call(this,e,t,n);else{var i=u.call(this,t.id);void 0!==i?g.call(this,i,e,t,n):f.call(this,e,t,n)}}function u(e){var n,i,s,r=Number.POSITIVE_INFINITY,o=this.pool;for(var a in o)if(!0!==o[a].inUse||"suspend"===o[a].tag||"flush"===o[a].tag){if(s=this.contentCount[o[a].contentId],e===t.callWidget(a,"getContentId")){i=a;break}s<r&&(r=s,i=a)}return i&&(n=o[i]),n}function h(e){var n,i=this.pool;for(var s in i)if(t.callWidget(s,"getUrl")===e&&(!0!==i[s].inUse||"suspend"===i[s].tag||"flush"===i[s].tag||"parked"===i[s].tag)){n=i[s];break}return n}function g(n,i,s,r){n.tag="",n.inUse=!0,brease.pageController.emptyContainer(i),e.prependChild(i,this.locker.querySelector("#"+n.id)),n.contentId=s.id,t.callWidget(n.id,"load",s.path,s.id),r.resolve(n.id,!0)}function f(e,t,s,r){var o="SystemLoader"+(i+=1),a=this,l={contentReadyHandler:p.bind(a,e.id),initializedHandler:m.bind(a,e.id),deferred:s,containerId:e.id,contentId:t.id,loaderId:o};this.slots+=1,this.createPool.set(e.id,l),e.addEventListener(BreaseEvent.CONTENT_READY,l.contentReadyHandler),brease.uiController.createWidgets(e,[{className:"system.widgets.ContentLoader",id:o,options:{url:t.path,contentId:t.id,preCache:r||!1},HTMLAttributes:{style:"box-sizing: border-box; position:relative; overflow:hidden;visibility:hidden;",class:"systemContentLoader"}}],!0,n.globalContent,"#"+e.id+" > :first-child")}function p(e,t){var n=this.createPool.get(e);if(t.target.id===e){t.target.removeEventListener(BreaseEvent.CONTENT_READY,n.contentReadyHandler);var i=document.getElementById(n.loaderId);i?i.addEventListener(BreaseEvent.WIDGET_INITIALIZED,n.initializedHandler):this.createPool.delete(e)}}function m(e,t){var n=this.createPool.get(e);if(n){var i=n.loaderId;t.target.id===i&&(t.target.removeEventListener(BreaseEvent.WIDGET_INITIALIZED,n.initializedHandler),this.pool[i]=new LoaderItem(i,n.contentId),this.pool[i].inUse=!0,n.deferred.resolve(i,!0),this.createPool.delete(e))}}return LoaderPool}),define("brease/controller/libs/PageLogger",["brease/enum/Enum","brease/config","brease/controller/libs/LogCode"],function(Enum,e,LogCode){"use strict";var PageLogger=function(e,t){this.controller=e,this.settings={clientMessage:void 0!==t&&void 0!==t.clientMessage?t.clientMessage:n.clientMessage}},t=PageLogger.prototype,n={clientMessage:!0};t.log=function(e,t){switch(e){case LogCode.PAGE_NOT_FOUND:console.iatWarn("referenced page ("+t.pageId+") does not exist!"),i(e,[t.pageId]),!0===t.isStartPage&&s.call(this,e,[t.pageId||"undefined"]);break;case LogCode.CONTAINER_NOT_FOUND:console.iatWarn("referenced page ("+t.pageId+") does not exist!"),i(e,[t.pageId]),!0===t.isStartPage&&s.call(this,e,[t.pageId||"undefined"]);break;case LogCode.DIALOG_NOT_FOUND:console.iatWarn("referenced dialog ("+t.dialogId+") does not exist!"),i(e,[t.dialogId]);break;case LogCode.NO_PAGES_FOUND:console.iatWarn('no pages in in visualisation (id="'+t.visuId+'") referenced!'),s.call(this,e,[t.visuId]),i(e,[t.visuId]);break;case LogCode.NO_LAYOUTS_FOUND:console.iatWarn('no layouts in in visualisation (id="'+t.visuId+'") referenced!'),s.call(this,e,[t.visuId],t.container),i(e,[t.visuId]);break;case LogCode.VISU_MALFORMED:s.call(this,e,[t.visuId],t.container),console.log("%cVisu file ("+t.visuId+".json) ist kein gueltiges JSON!","color:red;"),i(e,[t.visuId]);break;case LogCode.VISU_NOT_FOUND:s.call(this,e,[t.visuId],t.container),console.log("%cVisu file ("+t.visuId+".json) nicht gefunden","color:red;"),i(e,[t.visuId]);break;case LogCode.LAYOUT_NOT_FOUND:console.iatWarn('layout (id="'+t.layoutId+'") does not exist!'),i(e,[t.layoutId,t.pageId]),!0===t.isStartPage&&s.call(this,e,[t.layoutId,t.pageId]);break;case LogCode.CONTENT_NOT_FOUND:console.iatWarn("content (id="+t.contentId+") not found!"),i(e,[t.contentId]);break;case LogCode.CONTENT_IS_ACTIVE:console.iatWarn("content (id="+t.contentId+") already loaded!"),i(e,[t.contentId]);break;case LogCode.AREA_NOT_FOUND:console.iatWarn('area (id="'+t.areaId+'") not found! (pageId:"'+t.pageId+'", layoutId:"'+t.layoutId+")"),i(e,[t.areaId,t.layoutId,t.pageId]);break;case LogCode.PAGE_IS_CURRENT:console.iatWarn('page (id="'+t.pageId+'") is current! no need to load');break;case LogCode.PAGE_NOT_CURRENT:console.iatWarn('page (id="'+t.pageId+'") is currently not loaded'),i(e,[t.pageId]);break;case LogCode.NO_VISUDATA_FOUND:console.log("%cPageController.start, no visuData found","color:red;");break;case LogCode.THEME_NOT_FOUND:console.iatWarn("Theme (id="+t.themeId+") not found!"),i(e,[t.themeId],"themeId:"+t.themeId);break;case LogCode.VISU_ACTIVATE_FAILED:console.iatWarn("activate visu (id="+t.visuId+") denied,code="+t.code),s.call(this,e,[t.visuId,t.code],t.container);break}},t.message=function(){r.apply(this,arguments)};function i(e,t,n){var i=LogCode.getConfig(e);brease.loggerService.log(i.code,Enum.EventLoggerCustomer.BUR,i.verboseLevel,i.severity,t,n)}function s(e,t,n){var i=LogCode.getConfig(e).messageKey,s=this.controller.rootContainer;!0===this.settings.clientMessage&&r(i,t,function(e){n?($(n).html("<label>"+e+"</label>"),"appContainer"===n.id&&$("#splashscreen").remove()):($(s).html("<label>"+e+"</label>"),$("#splashscreen").remove())})}function r(t,n,i){var s=brease.language.getSystemTextByKey("BR/IAT/"+t);s===e.undefinedTextReturnValue&&(s=o[t]),void 0!==s&&brease.textFormatter.format(s,n).then(i)}var o={"brease.error.STARTPAGE_NOT_FOUND":'startpage (id="{1}") not found!',"brease.error.NO_PAGES_FOUND":'no pages in visualization (id="{1}")!',"brease.error.NO_LAYOUTS_FOUND":'no layouts in visualization (id="{1}")!',"brease.error.INCORRECT_VISU":'Visualization (id="{1}") cannot be displayed!',"brease.error.VISU_NOT_FOUND":'Visualization (id="{1}") not found!',"brease.error.LAYOUT_NOT_FOUND":'Layout (id="{1}") for Page (id="{2}") not found!',"brease.error.CONTENT_NOT_FOUND":'content (id="{1}") not found!',"brease.error.ACTIVATE_VISU_FAILED":'Not allowed! License not available for visualization "{1}"!'};return PageLogger}),define("brease/controller/libs/Themes",["brease/events/BreaseEvent","brease/core/Utils"],function(BreaseEvent,Utils){"use strict";var Themes={setTheme:function(e){var i=t?o(t):"",s=o(e),a=Utils.getStylesheetByHref(i),l=Utils.getStylesheetByHref(s);e!==t&&(t=e,void 0!==l?(void 0!==a&&(a.disabled=!0),l.disabled=!1,r(e)):n(s,e,a))},themeId2Url:function(e){return o(e)},getCurrentTheme:function(){return t}},e={},t;function n(t,n,r){window.clearTimeout(e.timeout),e.themeId=n,e.themeURL=t,e.time=Date.now(),e.timeout=window.setTimeout(i,100),e.oldTheme=r;var o=$('<link id="theme_'+n+'" href="'+t+'" rel="stylesheet" ></link');o[0].addEventListener("load",s,!1),o.appendTo($("head"))}function i(){var t=Utils.getStylesheetByHref(e.themeURL);t&&t.rules&&t.rules.length>0?s():Date.now()-e.time<5e3&&(e.timeout=window.setTimeout(i,100))}function s(){window.clearTimeout(e.timeout),void 0!==e.oldTheme&&(e.oldTheme.disabled=!0),r(e.themeId)}function r(e){document.body.dispatchEvent(new CustomEvent(BreaseEvent.THEME_CHANGED,{detail:{themeId:t}}))}function o(e){return brease.config.themeFolder+e+".min.css"}return Themes}),define("brease/controller/objects/WidgetItem",[],function(){"use strict";return function(e,t,n){this.id=e.id,this.elem=e,this.state=t,this.parentContentId=n}}),define("brease/controller/OverlayController",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/FileManager"],function(BreaseEvent,Enum,Utils,e){"use strict";var DialogWindow,MessageBox,OverlayController={init:function(){this.ready=$.Deferred();var n=["widgets/brease/DialogWindow/DialogWindow","widgets/brease/MessageBox/MessageBox","widgets/brease/NumPad/NumPad","widgets/brease/KeyBoard/KeyBoard","widgets/brease/DateTimePicker/DateTimePicker","system/widgets/ContentLoader/ContentLoader"];return e.loadOverlays(n).done(function(e,n){DialogWindow=e,MessageBox=n,t.push({widget:new MessageBox,used:!1,type:"MessageBox"}),t.push({widget:new DialogWindow,used:!1,type:"DialogWindow"}),OverlayController.ready.resolve()}).fail(i),this.ready.promise()},showMessageBox:function(e,t,n,i,s,r){var o=$.Deferred();return $.when(this.getWindow("MessageBox")).then(function(a){var l={};l.header={text:t||""},l.content={text:n||""},i&&(l.icon=i),s&&(l.buttonText=s),e&&(l.type=e),a.widget.resetStyles(),r&&(l.style=r),a.widget.show(l).then(function(e){o.resolve(e),a.used=!1})}),o.promise()},getWindow:function(e){var n,i=this,s;for(var r in t)if(!1===t[r].used&&t[r].type===e)return t[r].used=!0,t[r];switch(n=$.Deferred(),e){case"MessageBox":s=MessageBox;break;case"DialogWindow":s=DialogWindow;break}return(new s).isReady().then(function(s){t.push({widget:s,used:!1,type:e}),n.resolve(i.getWindow(e))}),n.promise()},openDialog:function(e,t,i,r,o,a,l){var d=$.Deferred(),c={};return void 0!==n[e]?(d.resolve(),d.promise()):(c.forceInteraction=!0!==l,t===Enum.DialogMode.MODELESS?c.modal=!1:c.modal=!0,c.position=c.position||{},void 0!==i&&(c.position.horizontal=s(i)),void 0!==r&&(c.position.vertical=s(r)),void 0!==a&&(c.headerText=a),$.when(this.getWindow("DialogWindow")).then(function(t){c.id=e,n[e]=t,document.body.dispatchEvent(new CustomEvent(BreaseEvent.DIALOG_OPEN,{bubbles:!0,cancelable:!0,detail:{dialogId:e}}));var i=t.widget.show(c,o);$.when(t.widget.onClose()).then(function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.DIALOG_CLOSED,{bubbles:!0,cancelable:!0,detail:{dialogId:e}})),n[e]=void 0,t.used=!1}),d.resolve(void 0,i)}),d.promise())},openDialogAtTarget:function(e,t,i,s,r,o,a,l,d){var c=$.Deferred(),u={};return void 0!==n[e]?(c.resolve(),c.promise()):(!0!==a&&(u.forceInteraction=!0),t!==Enum.DialogMode.MODAL&&(u.modal=!1),u.position={},void 0!==i&&(u.position.horizontal=i),void 0!==s&&(u.position.vertical=s),void 0!==l&&(u.position.horizontalDialog=l),void 0!==d&&(u.position.verticalDialog=d),void 0!==o&&(u.headerText=o),$.when(this.getWindow("DialogWindow")).then(function(t){u.id=e,n[e]=t,document.body.dispatchEvent(new CustomEvent(BreaseEvent.DIALOG_OPEN,{bubbles:!0,cancelable:!0,detail:{dialogId:e}}));var i=t.widget.show(u,r);$.when(t.widget.onClose()).then(function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.DIALOG_CLOSED,{bubbles:!0,cancelable:!0,detail:{dialogId:e}})),n[e]=void 0,t.used=!1}),c.resolve(void 0,i)}),c.promise())},closeDialog:function(e){var t=n[e];t&&(t.widget.hide(),n[e]=void 0)}},t=[],n=[];function i(){brease.messenger.announce("WIDGET_LOAD_ERROR")}function s(e){return/\d+px/g.test(e)?parseInt(e,10):e}return OverlayController}),define("brease/datatype/ZoomType",["brease/core/Utils"],function(Utils){"use strict";var ZoomType={};return Utils.defineProperty(ZoomType,"original","original"),Utils.defineProperty(ZoomType,"contain","contain"),Utils.defineProperty(ZoomType,"cover","cover"),ZoomType}),define("brease/controller/Preloader",["brease/enum/Enum","brease/settings","brease/core/Utils","brease/events/BreaseEvent","brease/model/VisuModel","brease/core/Utils","brease/controller/WidgetController","brease/controller/ContentManager","brease/controller/objects/ContentStatus","brease/controller/objects/AssignTypes"],function(Enum,e,t,BreaseEvent,n,Utils,i,s,ContentStatus,AssignTypes){"use strict";var Preloader=function(PageController,e,t,i){this.pageController=PageController,this.rootContainer=PageController.rootContainer,this._visuModel=n,this._loaderPool=e,this.splashScreenEl=t||$("#splashscreen"),this.embeddedVisus=[],this.visuData=void 0!==this._visuModel&&"function"==typeof this._visuModel.getVisuData?this._visuModel.getVisuData():void 0,this.contentsToPreload=void 0!==this.visuData&&this.getContentsToPreload($.extend({},this.visuData.contents)),this.contentsToPreloadLength=0,this.rejectedContents=[],this.bootProgressBar=i,this.readyDef=$.Deferred()},r={maxAllowedLoadingTime:1e4,showContentLoadedMessage:2e3,preloadingContainerId:"preloadingContainer",progressBarInitialWidth:100,progressbarSteps:0,progressBarWrapperClass:"system_brease_StartupProgressBar_style_default startupProgressBarWrapper",progressBarClass:"startupProgressBar",progressBarEl:void 0,preloadingInfoWrapperClass:"preLoadingInfoWrapper",preloadingInfoClass:"preLoadingInfo",preloadingInfo:void 0,preloadingInfoSpan:void 0,preloadingInfoInner:void 0,attemptsToTryMakingANewContentLoader:5},o=[],a={WORK_IN_PROGRESS:.5,CONTENTLOADER_INITIALIZED:1,FINISHED:2},l=Preloader.prototype;l.init=function(){var e=new $.Deferred,t=this;this._loaderPool.contentsToLoad=[],this.contentsToPreloadLength=Object.keys(this.contentsToPreload).length,r.progressbarSteps=100/(this.contentsToPreloadLength-1),g.call(this),this.preloadingContainer=$('<div id="'+r.preloadingContainerId+'"></div>'),this.preloadingContainer.appendTo("body"),h.call(this);var n=[];return this.embeddedVisus.map(function(e){
var i=E.call(t,e.id);i.promise(),n.push(i)}),$.when.apply($,n).then(function(){e.resolve()}),e},l.startProcessingContentsToPreloadFromStack=function(){var e=$.Deferred(),n=this,s=o.shift();return s&&(this.contentsToPreload[s.id].preLoadingState=a.WORK_IN_PROGRESS,this._loaderPool.createNew(this.preloadingContainer.get(0),s,e,!1),$.when(e).done(function(e,r){if(r){var l;try{l=i.callWidget(e,"widget")}catch(e){t.logError(e)}var h=function(e){l.settings.preCache=!1;var t=i.getWidgetsOfContent(l.settings.contentId,0).filter(function(e){return 2!==i.getState(e)}),s=function(){u.call(n,l)},r=function(e){n.rejectedContents.push(e),s()};0===t.length?s():c.call(n,t,l).done(function(){s()}).fail(function(e,t){r(e,t)})};l&&(d.call(n,l.settings.contentId).done(function(){h()}),n.contentsToPreload[l.settings.contentId].preLoadingState=a.CONTENTLOADER_INITIALIZED)}else o.push(s)})),this.readyDef.promise()};function d(e){var t=new $.Deferred,n=function(s){s.detail.contentId===e&&(document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,n),clearTimeout(i),t.resolve())},i=setTimeout(function(){document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,n),t.resolve()},r.maxAllowedLoadingTime);return document.body.addEventListener(BreaseEvent.CONTENT_ACTIVATED,n),t}l.getContentsToPreload=function(e){var t=this._visuModel.getPageById(this.visuData.startPageId),n=this.pageController.getContentsOfPage(t.id,t.type),i=[],r={},o=this;this.embeddedVisus=y(this._visuModel,this.visuData);for(var a in e)void 0!==e[a]&&(void 0!==e[a].configurations&&!1!==e[a].configurations.hasOwnProperty("preCache")&&!1!==e[a].configurations.preCache||delete e[a]);if(n.map(function(t){var n=e[t];void 0!==n&&i.unshift(n)}),this.embeddedVisus.length>0){var l=[];this.embeddedVisus.map(function(e){if(!0===e.embeddedOnStartPage){var t=[],n=o._visuModel.getVisuData().contents;for(a in n){var i=n[a];i.configurations&&!0===i.configurations.hasOwnProperty("preCache")&&i.visuId===e.id&&!0===i.configurations.preCache&&t.push(i)}l=l.concat(t)}}),i=i.concat(l)}return Object.keys(e).filter(function(e){return!n.includes(e)}).map(function(t){var n=e[t];i.push(n)}),i.length>this._loaderPool.maxSlots&&(brease.loggerService.log(Enum.EventLoggerId.CLIENT_PRECACHING_CONTENT_SLOTS_EXCEEDED,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.WARNING,[]),i=i.slice(0,this._loaderPool.maxSlots-1)),i.map(function(e){s.setActiveState(e.id,ContentStatus.preCached),e&&(r[e.id]=e)}),r},l.getTmpQueue=function(){return o};function c(e,t){var n=new $.Deferred,i=[];e.map(function(t){var r=document.getElementById(t),o=function(t){t.target.id===r.id&&(r.removeEventListener(BreaseEvent.WIDGET_READY,o),e.splice(e.indexOf(t.target.id),1),e.length<=0&&setTimeout(function(){clearTimeout(s),n.resolve()},0))};r&&(r.addEventListener(BreaseEvent.WIDGET_READY,o),i.push({widget:{elem:r},eventListener:o}))});var s=setTimeout(function(){i.map(function(e){void 0!==e&&null!==e.widget&&e.widget.elem.removeEventListener(BreaseEvent.WIDGET_READY,e.eventListener)}),n.reject(t.settings.contentId,i)},r.maxAllowedLoadingTime);return n}function u(e){this._loaderPool.tagMode=!0,this._loaderPool.suspendLoader(e.elem),this._loaderPool.pool[e.elem.id].inUse=!1,this._loaderPool.tagMode=!1;try{i.callWidget(e.elem.id,"suspend")}catch(e){t.logError(e)}p.call(this,o.length,e.settings.contentId),0!==o.length&&(this.contentsToPreload[e.settings.contentId].preLoadingState=a.FINISHED,this.startProcessingContentsToPreloadFromStack())}function h(){for(var e in this.contentsToPreload)o.push(this.contentsToPreload[e])}function g(){if($(this.rootContainer).append(this.splashScreenEl),this.bootProgressBar){var e=$('<div class="'+r.preloadingInfoWrapperClass+'"></div>');r.preloadingInfo=$('<div class="'+r.preloadingInfoClass+'"><span>'+this.contentsToPreloadLength+'</span> contents to preload: <div style="display: inline-block" class="'+r.preloadingInfoClass+'_inner"></div></div>'),e.append(r.preloadingInfo),r.preloadingInfoSpan=$("span",r.preloadingInfo).eq(0),r.preloadingInfoInner=$("."+r.preloadingInfoClass+"_inner",r.preloadingInfo).eq(0),f.call(this,e)}}function f(e){var t=$('<div id="'+r.progressBarWrapperId+'" class="'+r.progressBarWrapperClass+'"></div>');r.startupProgressBarEl=$('<div id="'+r.progressBarId+'" class="'+r.progressBarClass+'"></div>'),t.prepend(e),t.append(r.startupProgressBarEl),this.splashScreenEl.prepend(t)}function p(e,t){var n=this;n.bootProgressBar&&(r.preloadingInfoSpan.html(e),void 0!==t&&r.preloadingInfoInner.html(t),m()),0===e&&(delete n.rejectedContents,n.bootProgressBar&&(r.preloadingInfo.html("All contents have been precached"),r.startupProgressBarEl.slideUp("slow")),setTimeout(function(){n.readyDef.resolve(),$("#"+r.preloadingContainerId).remove(),$("#splashscreen").remove()},r.showContentLoadedMessage))}function m(){r.progressBarInitialWidth-=r.progressbarSteps,r.startupProgressBarEl.width(r.progressBarInitialWidth+"%")}function v(e,t,i){var s=[];for(var r in e.assignments){var o=e.assignments[r];if(o.type===AssignTypes.VISU&&void 0!==t.visus[o.contentId]){var a=o.contentId=Utils.ensureVisuId(o.contentId),l=n.getVisuById(a),d=$.extend({},l,{page:e,assignment:o});i?(d.embeddedOnStartPage=!0,s.unshift(d)):s.push(d)}}return s}function b(e,t){return e.filter(function(e,n,i){return i.map(function(e){return e[t]}).indexOf(e[t])===n})}function y(e,t){var n=[];for(var i in t.pages){var s=i===t.startPageId,r=t.pages[i],o=v(r,t,s);n=n.concat(o)}for(var a in t.dialogs){var l=t.dialogs[a],d=v(l,t,s);n=n.concat(d)}return n=b(n,"id"),n}function E(e){var t=$.Deferred(),n=function(e){t.resolve()},i=function(e,n,i){t.reject()};return $.when(this._visuModel.activateVisu(e,{visuId:e})).then(n,i),t}return Preloader}),define("brease/controller/PageController",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/libs/Utils","brease/core/libs/Deferred","brease/model/VisuModel","brease/controller/libs/LoaderPool","brease/controller/libs/PageLogger","brease/controller/libs/LoadCycle","brease/controller/libs/ScrollManager","brease/controller/ZoomManager","brease/controller/libs/Areas","brease/controller/libs/Containers","brease/controller/libs/Themes","brease/controller/libs/LogCode","brease/controller/objects/Client","brease/controller/objects/PageTypes","brease/controller/objects/AssignTypes","brease/controller/objects/VisuStatus","brease/datatype/ZoomType","brease/objects/AreaInfo","brease/controller/Preloader"],function(BreaseEvent,Enum,e,Utils,Deferred,t,LoaderPool,PageLogger,LoadCycle,ScrollManager,n,Areas,i,Themes,LogCode,Client,PageTypes,AssignTypes,VisuStatus,ZoomType,s,Preloader){"use strict";var PageController={init:function e(n,i,s){void 0===this.logger&&(brease.appElem.addEventListener(BreaseEvent.PAGE_CHANGE,V.bind(this)),this.logger=new PageLogger(this,i)),a=t.init(n,this.logger),r=new LoadCycle,void 0!==s&&(ScrollManager=s)},reset:function(){o&&o.dispose()},start:function t(n,i,s){this.reset(),n=e.ensureVisuId(n),o=new LoaderPool(s?s.cachingSlots:void 0),document.body.removeEventListener(BreaseEvent.VISU_ACTIVATED,b),Areas.injectDependencies(ScrollManager,i.id),$.when(a.activateVisu(n,{visuId:n,rootContainer:i,loaderPool:o,splashScreenEl:$("#splashscreen").eq(0)})).then(c,u)},swipeNavigation:function e(t){var n=i.getCurrentPage(this.rootContainer.id),s=a.findNav4page(n);return!!(s&&s.swipes&&s.swipes[n]&&s.swipes[n][t])&&(PageController.loadPage(s.swipes[n][t],this.rootContainer),!0)},loadPage:function e(t,n){var s;if(n){var r=a.getPageById(t);void 0!==r?(i.setLatestRequest(n.id,t),s=h.call(this,r,n)):(s={success:!1,code:LogCode.PAGE_NOT_FOUND},this.logger.log(s.code,{pageId:t,isStartPage:a.startPageId===t}))}else s={success:!1,code:LogCode.CONTAINER_NOT_FOUND},this.logger.log(s.code,{pageId:t,isStartPage:a.startPageId===t});return s},loadDialog:function e(t,n){var s=a.getDialogById(t);if(void 0!==s)return i.setLatestRequest(n.id,t),h.call(this,s,n),s;this.logger.log(LogCode.DIALOG_NOT_FOUND,{dialogId:t})},loadContentInArea:function e(t,n,i,s,r){var o=this,l=new Deferred("singleShot",[s]),d=B({contentId:t,areaId:n,pageId:i,pageType:PageTypes.PAGE},r);return d.success?P(d.data.area,d.data.assignment).done(function e(t,n,i,s){if(i.info){var r=a.getContentById(s.contentId);if(r){var d=N(t,{width:r.width,height:r.height},{width:i.info.width,height:i.info.height},s.zoomMode);i.setProperties({width:r.width,height:r.height},s,d,n)}f.call(o,l,!0)}}).fail(function e(){f.call(o,l,!1)}):f.call(o,l,d.success,d.statusCode,d.data),l},loadContentInDialogArea:function e(t,n,i){var s=this,r=new Deferred("singleShot"),o=B({contentId:t,areaId:n,pageId:i,pageType:PageTypes.DIALOG});return o.success?P(o.data.area,o.data.assignment).done(function e(t,n,i,o){var l=a.getContentById(o.contentId);if(l){var d=N(t,{width:l.width,height:l.height},{width:i.info.width,height:i.info.height},o.zoomMode);i.setProperties({width:l.width,height:l.height},o,d,n)}f.call(s,r,!0)}).fail(function e(){f.call(s,r,!1)}):f.call(s,r,o.success,o.statusCode,o.data),r},loadContentInWidget:function e(t,n,o,l,d,c,u){var h="A0",g=t,f="virtualPage_"+t,p=new s("A0",{width:d.realWidth,cssWidth:d.cssWidth,height:d.realHeight,cssHeight:d.cssHeight,top:0,left:0}),m=a.getContentById(o),v;0===c.length?(a.addLayout(g,{id:g,areas:{}}),a.addArea(g,p),a.addPage(f,{id:f,layout:g,type:"Page",visuId:m?m.visuId:a.startVisuId,assignments:{}}),a.addAssignment("A0",f,{areaId:"A0",contentId:n,type:"Content",zoomMode:l}),i.addContainer(t,{currentPage:f}),v=Areas.add(t,g,p,"Page"),document.getElementById(t).appendChild(v.div)):(v=Areas.getArea(t,g,"A0","Page"),v.$div=c,v.div=c[0],v.$innerBox=c.find(" > .ScrollBox"),v.innerBox=v.$innerBox[0],v.info=p);var b=new Deferred("singleShot",v?[v.id]:void 0);return r.inProgress?(G.add(n,"A0",f,b),r.addEventListener("CycleFinished",G.process.bind(G))):PageController.loadContentInArea(n,"A0",f,null,u).done(function(e){b.resolve(e)}),b},disposeContentInWidget:function(e){var t="A0",n=e,s="virtualPage_"+e,r=Areas.getArea(e,n,"A0","Page");r&&(r.div&&brease.pageController.emptyContainer(r.div),Areas.remove(r.id)),a.removeLayout(n),a.removePage(s),i.removeContainer(e)},getContentScrollOffset:function(e){var t=$('[data-brease-contentid="'+e+'"]').closest(".LayoutArea");return t.length>0?Areas.scrollManager.getScrollPosition(t[0]):(console.iatWarn("getContentScrollOffset: no layout found for content "+e),void 0)},getContentsOfPage:function(e,t){return g(e,t)},setTheme:function e(t){if(void 0!==t){if(-1===a.getThemes().indexOf(t))return this.logger.log(LogCode.THEME_NOT_FOUND,{themeId:t}),void 0;Themes.setTheme(t)}},themeId2Url:function e(t){return Themes.themeId2Url(t)},getCurrentTheme:function e(){return Themes.getCurrentTheme()},getThemes:function e(){return a.getThemes()},emptyContainer:function e(t){t&&t.childNodes&&t.id&&(W.call(this,t),i.resetCurrentPage(t.id))},getNavById:function e(t){return a.getNavById(t)},getPageById:function e(t){return a.getPageById(t)},getLayoutById:function t(n){return e.deepCopy(a.getLayoutById(n))},getDialogById:function e(t){return a.getDialogById(t)},getVisuById:function e(t){return a.getVisuById(t)},getCurrentPage:function e(t){return i.getCurrentPage(t)},getVisu4Page:function e(t){return void 0!==a.getPageById(t)?a.getPageById(t).visuId:void 0!==a.getDialogById(t)?a.getDialogById(t).visuId:void 0},getContentUrlById:function e(t){var n,i=a.getContentById(t);return i&&(n=i.path),n},getLoaderForElement:function e(t){return $(t).closest(".systemContentLoader")[0]},getContentId:function e(t){var n,i=this.getLoaderForElement(t);return void 0!==i&&(n=i.getAttribute("data-brease-contentid")),n},getLayoutDivId:function e(t,n){return"Layout_"+(this.rootContainer.id===t?"":t+"_")+n},getAreaDivId:function e(t,n,i,s){return Areas.getAreaDivId(t,n,i,s)},loadHTML:function e(t,n){var i=new Deferred("singleShot",n);return require(["text!"+t],function e(t){i.resolve(t)},function e(t){i.reject(t)}),i},getRootZoom:function e(){return n.getAppZoom()},parseVisuData:function e(t,n){return a.parseVisuData(t,n)},removeScroller:function(e){ScrollManager.remove(e)},refreshArea:function(e){var t=Areas.get(e);t&&t.refresh()},scrollContent:function(e,t,n){var i=$.Deferred(),s=$('[data-brease-contentid="'+e+'"]');if(1===s.length&&Enum.ScrollPosition.hasMember(t)){d(s.closest("[data-brease-areaid]"),t,s,n),i.resolve(!0)}else 0===s.length?(console.iatWarn("Content Id "+e+" is not defined!"),i.resolve(!1)):Enum.ScrollPosition.hasMember(t)||(console.iatWarn("Position value "+t+" is not allowed!"),i.resolve(!1));return i.promise()}},r,o,a,l;function d(e,t,n,i){i=void 0===i||isNaN(i)?0:parseInt(i,10);var s=e[0],r=ScrollManager.getScrollPosition(s),o=e.height()-n.height(),a=e.width()-n.width(),l,d;Enum.ScrollPosition.TOP===t||Enum.ScrollPosition.BOTTOM===t?(l=r.x,Enum.ScrollPosition.TOP===t?d=0:Enum.ScrollPosition.BOTTOM===t&&(d=o)):Enum.ScrollPosition.LEFT!==t&&Enum.ScrollPosition.RIGHT!==t||(d=r.y,Enum.ScrollPosition.LEFT===t?l=0:Enum.ScrollPosition.RIGHT===t&&(l=a)),ScrollManager.scrollToContent(s.id,l,d,i)}function c(e){var t=e.rootContainer;PageController.rootContainer=t,PageController.$rootContainer=$(t),PageController.setTheme(a.startThemeId);var n=new Preloader(PageController,e.loaderPool,e.splashScreenEl,brease.config.visu.bootProgressBar);!1!==n.contentsToPreload&&0!==Object.keys(n.contentsToPreload).length?(brease.config.preLoadingState=!0,n.init().then(function(){n.startProcessingContentsToPreloadFromStack().done(function(){brease.config.preLoadingState=!1,PageController.loadPage(a.startPageId,t)})})):PageController.loadPage(a.startPageId,t)}function u(e,t,n){var i={visuId:n.visuId,container:n.rootContainer};void 0!==t&&(i.code=t),PageController.logger.log("VISU_"+e,i)}function h(e,t){if(!1===r.inProgress||!0===l){l=!1;var n=i.getCurrentPage(t.id),s=a.getPageById(n),d;if(void 0===s||n!==e.id)if(void 0!==a.getLayoutById(e.layout)){var c=g(e.id,e.type),u=!1;o.startTagMode(c),void 0!==s&&e.layout===s.layout||(W.call(this,t),u=!0);var h=A.call(this,e.layout,t,e.type);E(h,e),i.setCurrentPage(t.id,e.id),r.start(m,c,{pageId:e.id,containerId:t.id,contentsToLoad:c}),u||C.call(this,s,e,t),T.call(this,e,t,u),Utils.setPageStyle(e.style||"default",h,e.type),void 0!==s&&e.layout!==s.layout&&t.id!==this.rootContainer.id&&y.call(this,e,t),d={success:!0}}else d={success:!1,code:LogCode.LAYOUT_NOT_FOUND},this.logger.log(d.code,{pageId:e.id,layoutId:e.layout,isStartPage:a.startPageId===e.id});else{d={success:!1,code:LogCode.PAGE_IS_CURRENT},this.logger.log(d.code,{pageId:e.id});for(var f=g(e.id,e.type),p=0;p<f.length;p+=1)r.remove(f[p])}return d}}function g(e,t){var n=[],i=t===PageTypes.DIALOG?a.getDialogById(e):a.getPageById(e);for(var s in i.assignments){var r=i.assignments[s];switch(r.type){case AssignTypes.CONTENT:a.isValidContent(r.contentId)&&n.push(r.contentId);break;case AssignTypes.PAGE:n.push.apply(n,g(r.contentId));break;case AssignTypes.VISU:var o=r.contentId,l=a.getVisuById(o);l&&l.status===VisuStatus.LOADED&&n.push.apply(n,g(l.startPage));break}}return n}function f(e,t,n,i){n?(this.logger.log(n,i),e.resolve(t,n)):e.resolve(t)}function p(){$(".breaseContentControl").each(function(){var e=brease.callWidget(this.id,"getPreviousState");e&&e.loadedContentId&&(brease.callWidget(this.id,"loadContent",e.loadedContentId,!0),brease.callWidget(this.id,"updateVisibility"))})}function m(e){p(),e.pageId===a.startPageId&&v(),o.endTagMode(),i.initPageLoadEvent(e.containerId,e.pageId,e.contentsToLoad,e.embedded)}function v(){a.allActivated()?Client.setValid(!0):document.body.addEventListener(BreaseEvent.VISU_ACTIVATED,b)}function b(){a.allActivated()&&(document.body.removeEventListener(BreaseEvent.VISU_ACTIVATED,b),Client.setValid(!0))}function y(e,t){var n,i,s,r,o,l,d,c,u;n=$(t).closest("div[data-brease-areaId]")[0],n&&(i=n.id,s=n.getAttribute("data-brease-areaId")),u=$(t).closest("div[data-brease-layoutId]")[0],u&&(o=u.getAttribute("data-brease-layoutId")),s&&o&&(r=a.getLayoutById(o).areas[s]),l=$(t).closest("div[data-brease-pageId]")[0],l&&(d=l.getAttribute("data-brease-pageId"),c=a.getPageById(d).assignments[s]),e&&i&&n&&r&&c&&L.call(this,e,Areas.get(i),c)}function E(e,t){e.setAttribute("data-brease-pageId",t.id);var n={"background-image":"","background-color":t.backColor?t.backColor:""};(t.backGround||t.backGroundGradient)&&(n["background-image"]="",t.backGroundGradient&&(n["background-image"]+=t.backGroundGradient),t.backGround&&(n["background-image"]+=(""!==n["background-image"]?", ":"")+"url("+t.backGround+")",n["background-repeat"]="no-repeat")),t.sizeMode&&(n["background-size"]=Enum.SizeMode.convertToCSS(t.sizeMode)),$(e).css(n)}function A(t,i,s){var r=i.id;i.id!==this.rootContainer.id&&s!==PageTypes.DIALOG&&(i=Areas.get(i.id).contentContainer);var o=this.getLayoutDivId(i.id,t),l=$("#"+i.id).find("#"+o)[0];if(!l){var d=a.getLayoutById(t);d.id=t,l=document.createElement("div"),l.setAttribute("style","width:"+d.width+"px;height:"+d.height+"px;display:block;position:absolute;z-index:0;"),l.setAttribute("id",o),l.setAttribute("class","breaseLayout"),l.setAttribute("data-brease-layoutId",t);for(var c in d.areas)l.appendChild(Areas.add(r,t,d.areas[c],s).div);if(ScrollManager.remove(r),e.prependChild(i,l),r===this.rootContainer.id){var u=void 0!==brease.config.visu&&!0===brease.config.visu.zoom;n.setAppZoom(u,l,d,this.$rootContainer),n.iosBodyFix()}}return l}function I(e,t){var n;for(var i in e.assignments){var s=e.assignments[i];if(s.areaId===t){n=s;break}}return n}function C(e,t,n){if(e){var i=a.getLayoutById(t.layout),s=Object.keys(i.areas);for(var r in t.assignments){var o=t.assignments[r];if(void 0!==i.areas[r]){var l=I(e,o.areaId);if(o&&l&&(l.contentId!==o.contentId||l.type!==o.type)){var d=Areas.getArea(n.id,e.layout,r,e.type);W.call(this,d.div)}s.splice(s.indexOf(r),1)}}s.length>0&&w.call(this,s,n,t)}}function w(e,t,n){for(var i=0;i<e.length;i+=1){var s=Areas.getArea(t.id,n.layout,e[i],n.type);s.hide(),W.call(this,s.div)}}function T(e,t,n){var i=a.getLayoutById(e.layout),s=Object.keys(i.areas);for(var o in e.assignments){var l=e.assignments[o];if(void 0!==i.areas[o]){var d=Areas.getArea(t.id,e.layout,l.areaId,e.type);S.call(this,l,d),d.setStyle(l.style||"default"),d.show(),s.splice(s.indexOf(o),1)}else l.type===AssignTypes.CONTENT&&r.remove(l.contentId),this.logger.log(LogCode.AREA_NOT_FOUND,{contentId:l.contentId,layoutId:e.layout,pageId:e.id,areaId:l.areaId,isStartPage:a.startPageId===e.id})}n&&s.length>0&&w.call(this,s,t,e)}function x(e,t){$(e).html(t)}function S(e,t){var n=this;switch(e.type){case AssignTypes.CONTENT:window.performanceMonitor.profile("loadContent - "+e.contentId,0),P(t,e).done(function e(t,n,i,s){r.remove(s.contentId);var o=a.getContentById(s.contentId);if(o){var l=N(t,{width:o.width,height:o.height},{width:i.info.width,height:i.info.height},s.zoomMode);i.setProperties({width:o.width,height:o.height},s,l,n)}}).fail(function e(t,i,s,r){t===LogCode.CONTENT_NOT_FOUND&&(n.logger.log(t,{contentId:r.contentId}),i&&n.logger.message("brease.error.CONTENT_NOT_FOUND",[r.contentId],x.bind(null,i)))});break;case AssignTypes.PAGE:var i=e.contentId;U.call(this,i,t.div),L.call(this,a.getPageById(i),t,e),M(a.getVisuByStartpage(i));break;case AssignTypes.VISU:var s=e.contentId;$.when(a.activateVisu(s,{visuId:s,area:t,assignment:e})).then(_,D);break}}function _(e){var t=a.getVisuById(e.visuId);$.when(O.call(PageController,e.area,e.assignment)).then(function n(i){L.call(PageController,a.getPageById(i),e.area,e.assignment),M(t)},function n(i,s){i===LogCode.PAGE_IS_CURRENT&&(L.call(PageController,a.getPageById(s),e.area,e.assignment),M(t))})}function D(e,t,n){if(e===VisuStatus.ACTIVATE_FAILED)for(var i=g(a.getVisuById(n.visuId).startPage),s=0;s<i.length;s+=1)r.remove(i[s],!0);var o={visuId:n.visuId};void 0!==t&&(o.code=t),k.call(PageController,"VISU_"+e,o,n.area.div)}function L(e,t,n){if(void 0!==e){var i=e.layout,s=a.getLayoutById(i),r=this.getLayoutDivId(t.contentContainer.id,i),o=N(r,{width:s.width,height:s.height},{width:t.info.width,height:t.info.height},n.zoomMode);t.setProperties({width:s.width,height:s.height},n,o,!0)}}function N(e,t,n,i){var s=n.width/t.width,r=n.height/t.height,o=1,a={};return i===ZoomType.contain?o=Math.min(s,r):i===ZoomType.cover&&(o=Math.max(s,r)),a.width=t.width,a.height=t.height,a.transform="scale("+o+","+o+")",a["transform-origin"]="0 0",$("#"+e).css(a),o}function O(e,t){var n=$.Deferred(),i=t.contentId,s,r=a.getVisuById(i);return r.status===VisuStatus.LOADED?(void 0===Themes.getCurrentTheme()&&this.setTheme(a.startThemeId),s=U.call(this,r.startPage,e.div),s.success?(a.getVisuById(i).containerId=e.div.id,n.resolve(r.startPage)):n.reject(s.code,r.startPage)):(k.call(this,"VISU_"+r.status,{visuId:i},e.div),n.reject("VISU_"+r.status)),n.promise()}function k(e,t,n){W.call(this,n),t.container=$(n).find(".ScrollBox")[0],this.logger.log(e,t)}function M(e){if(e&&e.containerId){var t=1,n=$("#"+e.containerId).find(".breaseLayout");n.length>0&&(t=n[0].getBoundingClientRect().width/n.outerWidth()),e.zoomFactor=t}}function P(e,t){var n=new Deferred("singleShot",[e,t]),s=a.getContentById(t.contentId);return i.resetCurrentPages(e.div.id),o.loadContent(s,e.$contentContainer,n),n}function B(t,n){var i,s,r=n?{success:!0,statusCode:0,data:{contentId:t.contentId}}:R(t.contentId);if(!r.success)return r;if(r=H(t.pageId,t.pageType),!r.success)return r;if(s=r.data.page,i=r.data.containerId,!1===a.pageHasArea(t.areaId,s))return r.success=!1,r.statusCode=LogCode.AREA_NOT_FOUND,r.data={areaId:t.areaId,pageId:t.pageId,layoutId:s.layout},r;var o=Areas.getArea(i,s.layout,t.areaId,s.type);if(!o)return r.success=!1,r.statusCode=LogCode.AREA_NOT_FOUND,r.data={areaId:t.areaId,pageId:t.pageId,layoutId:s.layout},r;var l={},d=a.findAssignment(s,t.areaId);return d&&(l=e.deepCopy(d)),l.contentId=t.contentId,!0===r.success&&(r.data={area:o,assignment:l}),r}function R(e){var t={success:!0,statusCode:0,data:{}},n=a.getContentById(e);return void 0===n||!0===n.virtual?(t.success=!1,t.statusCode=LogCode.CONTENT_NOT_FOUND,t.data={contentId:e}):!0===o.isContentLoaded(e)&&(t.success=!1,t.statusCode=LogCode.CONTENT_IS_ACTIVE,t.data={contentId:e}),t}function H(e,t){var n={success:!0,statusCode:0,data:{}};if("Page"===t){if(n.data.page=a.getPageById(e),!n.data.page)return n.success=!1,n.statusCode=LogCode.PAGE_NOT_FOUND,n.data={pageId:e,isStartPage:!1},n}else if("Dialog"===t&&(n.data.page=a.getDialogById(e),!n.data.page))return n.success=!1,n.statusCode=LogCode.DIALOG_NOT_FOUND,n.data={dialogId:e},n;return n.data.containerId=i.getContainerForPage(e),void 0===n.data.containerId&&(n.success=!1,n.statusCode=LogCode.PAGE_NOT_CURRENT,n.data={pageId:e}),n}function U(e,t){return l=!0,this.loadPage(e,t)}function V(e){null!==document.getElementById(e.detail.containerId)&&this.loadPage(e.detail.pageId,document.getElementById(e.detail.containerId))}function W(e){if(e.childNodes.length>0){var t,n,s,r=$(e);for(s=r.find(".LayoutArea"),t=0,n=s.length;t<n;t+=1)Areas.get(s[t].id).dispose(),i.dispose(s[t].id);for(Utils.resetContentControls(r[0]),s=Utils.findLoaders(r[0]),t=0,n=s.length;t<n;t+=1)o.removeLoader(s[t]),i.dispose(s[t].id);i.resetCurrentPages(e.id),e!==this.rootContainer?brease.uiController.dispose(e):i.resetCurrentPage(e.id),r.children().not(".iScrollLoneScrollbar,.iScrollBothScrollbars,.ScrollBox").remove(),r.children(".ScrollBox").empty()}}var G={pool:[],add:function(e,t,n,i){this.pool.push({contentId:e,areaId:t,pageId:n,def:i})},process:function(){for(var e=0;e<this.pool.length;e+=1){var t=this.pool[e];PageController.loadContentInArea(t.contentId,t.areaId,t.pageId,t).done(function(e,t){t.def&&t.def.resolve(e)})}this.pool.length=0}};return PageController}),define("brease/controller/WidgetParser",["brease/controller/FileManager","brease/controller/libs/FactoryUtils","brease/controller/objects/WidgetItem","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/Queue"],function(e,t,WidgetItem,Utils,BreaseEvent,Enum,Queue){"use strict";var n={init:function e(t){void 0!==t&&(s=t)},start:function(e){e.start(o).done(r)},parse:function e(i,r,o){if(i=t.getElem(i),null!==i){var l=Queue.getQueue(i,"parse",!0),d=i.querySelectorAll("[data-brease-widget]"),c=[],u=[],h,f,p=d.length;for(f=p-1;f>=0;f-=1)h=d[f],h.id=t.ensureElemId(h.id),-1===u.indexOf(h.id)?(c.push(h),u.push(h.id)):(console.iatWarn("[parse] HTML element has duplicate id ("+h.id+") and will be removed"),h.parentNode.removeChild(h));for(o=t.ensureContentId(o,i,s.getState(i.id)),f=0,p=c.length;f<p;f+=1)a(c[f],l,o);!0===r&&null!==i.getAttribute("data-brease-widget")&&a(i,l,o),n.start(l)}else g("parse")}},i={},s;function r(e){e.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_PARSED))}function o(t,n){var i,r;s.getState(t.id)<Enum.WidgetState.INITIALIZED?(s.optionsExist(t.id)?(i=s.getOptions(t.id),r=e.getPathByClass(i.className),void 0===i.parentContentId&&s.addOption(t.id,"parentContentId",t.parentContentId)):(i=Utils.parseElementData(t.elem,"brease-options"),r=e.getPathByClass(t.elem.getAttribute("data-brease-widget")),void 0===i.parentContentId&&(i.parentContentId=t.parentContentId),s.setOptions(t.id,i,!0)),e.loadJSFiles(r,(!0===brease.config.editMode||!0!==brease.config.mocked)&&!0!==brease.config.testMode).done(function(e){c({method:"loadWidgetFileSuccess",WidgetClass:e,widgetPath:r,widgetItem:t,queue:n})}).fail(function(e){h(e,r,t,n)})):console.iatInfo("createWidget:"+t.id+" already initialized")}function a(e,t,n){var i=s.getState(e.id);i>=Enum.WidgetState.ABORTED&&i<=Enum.WidgetState.NON_EXISTENT?(s.addWithState(e.id,Enum.WidgetState.IN_PARSE_QUEUE),t.add(new WidgetItem(e,Enum.WidgetState.IN_PARSE_QUEUE,n))):i<Enum.WidgetState.IN_PARSE_QUEUE?(s.setState(e.id,Enum.WidgetState.IN_PARSE_QUEUE),t.add(new WidgetItem(e,Enum.WidgetState.IN_PARSE_QUEUE,n))):console.iatInfo("[parse] HTML element already parsed (id="+e.id+"),state="+i)}var l=!1,d=[];function c(e){d.push(e),!0!==l&&(l=!0,"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,0))}function u(){for(var e=0;e<d.length;e+=1){var t=d[e];i[t.method].call(null,t.WidgetClass,t.widgetPath,t.widgetItem,t.queue)}d=[],l=!1}i.loadWidgetFileSuccess=function(e,t,n,i){if(n.state===Enum.WidgetState.IN_PARSE_QUEUE&&null!==i.elem)try{var r=new e(n.elem,s.getOptions(n.id,!0));r.state=Enum.WidgetState.INITIALIZED,s.addWidget(r),r.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_INITIALIZED)),!0!==r.omitReadyEvent&&r._defer("_dispatchReady"),i.finishItem(n.id)}catch(e){var o="script error for module "+t.path;s.setState(n.id,Enum.WidgetState.FAILED),console.log(o+" ("+e.message+")"),console.error&&console.error(e.stack),brease.loggerService.log(Enum.EventLoggerId.CLIENT_SCRIPT_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[],o),i.finishItem(n.id)}};function h(e,t,n,i){var r="load error for module "+(t&&t.path?t.path:"undefined")+"("+e+")";s.setState(n.id,Enum.WidgetState.FAILED),console.debug(r),brease.loggerService.log(Enum.EventLoggerId.CLIENT_MODULELOADER_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[],r),i.finishItem(n.id)}function g(e,t){var n=t||"["+e+"] target of wrong type";console.iatWarn(n),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],n)}return n}),define("brease/controller/WidgetFactory",["brease/controller/FileManager","brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/FactoryUtils","brease/controller/libs/Queue","brease/controller/WidgetParser","brease/controller/objects/WidgetItem"],function(e,BreaseEvent,Enum,t,Queue,n,WidgetItem){"use strict";var i={init:function e(t){void 0!==t&&(s=t),n.init(t)},createWidgets:function n(i,o,a,l,d){if(i=t.getElem(i),null!==i){var g=Queue.getQueue(i,"create",!0);g.pending=!0,g.autoParse=!1!==a,l=t.ensureContentId(l,i,s.getState(i.id)),g.add(o.filter(u).reverse().map(c.bind(null,l,d))),e.loadHTMLFiles(o,g.id,[g,l]).done(r).fail(r)}else h("createWidgets")}},s;function r(e,t){!0===e.pending&&(e.pending=!1,e.start(a,[t,e.autoParse]).done(o))}function o(e,t,i,r){e.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_READY));var o=[];if(t.forEach(function(e){e.node&&(s.setState(e.node.id,Enum.WidgetState.IN_PARSE_QUEUE),o.push(new WidgetItem(e.node,Enum.WidgetState.IN_PARSE_QUEUE,e.widgetInfo.options.parentContentId)))}),!0===r){var a=Queue.getQueue(e,"parse",!0);a.add(o),n.start(a)}}function a(t,n){var i=t.widgetInfo,r=i.className;r||d(t,n,i.id,"_loadHTML","[loadHTML] no class name given for widget creation; element[id="+(i.id?i.id:"undefined")+"] not created!");var o=e.getHTMLByType(r);o||d(t,n,i.id,"_loadHTML","[loadHTML] unknown class ("+r+") name given for widget creation; element[id="+(i.id?i.id:"undefined")+"] not created!");var a=i.id,c=i.content,u=i.options?i.options:{},h=e.getPathByType(r,"class");s.setOptions(a,u,!1,!0),s.addOption(a,"className",h),t.state===Enum.WidgetState.IN_QUEUE&&null!==n.elem&&l(t,n,a,h,i,o,c,u)}function l(e,i,r,o,a,l,d,c){var u=t.createNode(l,r,c,o,a.HTMLAttributes,d);c.styleClassAdded&&s.addOption(r,"styleClassAdded",!0),a.addBeforeSelector?i.elem.insertBefore(u,document.querySelector(a.addBeforeSelector)):i.elem.appendChild(u),d&&d.html&&-1!==d.html.indexOf("data-brease-widget=")&&n.parse(u,!1,e.widgetInfo.options.parentContentId),e.state=Enum.WidgetState.INITIALIZED,e.node=u,i.finishItem(a.id)}function d(e,t,n,i){h(i),e.state=Enum.WidgetState.FAILED,t.finishItem(n)}function c(e,n,i){return e&&(i.options?i.options.parentContentId=e:i.options={parentContentId:e}),n&&(i.addBeforeSelector=n),i.id=t.ensureElemId(i.id),{state:Enum.WidgetState.IN_QUEUE,widgetInfo:i,id:i.id}}function u(e){var t=s.getState(e.id)<=Enum.WidgetState.IN_QUEUE;return t||console.iatWarn("filtered out:"+e.id),t}function h(e,t){var n=t||"["+e+"] target of wrong type";console.iatWarn(n),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],n)}return i}),define("brease/controller/UIController",["brease/controller/WidgetFactory","brease/controller/WidgetParser","brease/core/Utils"],function(e,t,Utils){"use strict";var UIController=function UIController(){},n=UIController.prototype,i,s=function(e,t,n){Utils.defineProperty(e,t,n,!0,!1,void 0!==window.brease&&void 0!==brease.config&&!0===brease.config.mocked)};return n.init=function t(n,s){i=s,i.init(),this.bindingController=n,this.widgetsController={getWidget:i.getWidget,getWidgetsOfContent:i.getWidgetsOfContent,getState:i.getState,getSuspendedState:i.getSuspendedState},e.init(i)},s(n,"setOptions",function e(t,n){i.setOptions(t,n)}),s(n,"allActive",function e(){return this.bindingController.allActive.apply(this.bindingController,arguments)}),s(n,"loadValuesForContent",function e(t,n){var i=this;$.when(this.bindingController.activateContent(t)).then(function e(){"function"==typeof n&&n(),i.bindingController.sendInitialValues(t)})}),s(n,"loadValuesForVirtualContent",function e(t,n,i){var s=this;$.when(this.bindingController.activateVirtualContent(t,i)).then(function e(){"function"==typeof n&&n(),s.bindingController.sendInitialValues(t)})}),s(n,"getSubscriptionsForElement",function e(t){return this.bindingController.getSubscriptionsForElement(t)}),s(n,"parse",function e(){t.parse.apply(t,arguments)}),s(n,"dispose",function e(){i.dispose.apply(i,arguments)}),s(n,"wake",function e(){i.wake.apply(i,arguments)}),s(n,"suspend",function e(){i.suspend.apply(i,arguments)}),s(n,"wakeInContent",function e(){i.wakeInContent.apply(i,arguments)}),s(n,"suspendInContent",function e(){i.suspendInContent.apply(i,arguments)}),s(n,"callWidget",function e(){return i.callWidget.apply(i,arguments)}),s(n,"createWidgets",function t(){e.createWidgets.apply(e,arguments)}),
s(n,"findWidgets",function e(){return i.findWidgets.apply(i,arguments)}),s(n,"addWidget",function e(t){if(!t.elem||!t.elem.id)throw new SyntaxError("widget needs property 'elem' with id");i.addWidget(t)}),s(n,"getWidgetState",function e(t){return i.getState(t)}),s(n,"addWidgetOption",function e(t,n,s){i.addOption(t,n,s)}),s(n,"parentWidgetId",function e(t){if(Utils.hasClass(t,"breaseWidget"))return t.id;var n=$(t).parents(".breaseWidget");return n.length>0?n[0].id:brease.appElem.id}),s(n,"createBindings",function e(){return this.bindingController.createBindings.apply(this.bindingController,arguments)}),s(n,"deleteBindings",function e(){return this.bindingController.deleteBindings.apply(this.bindingController,arguments)}),s(n,"isContentActive",function e(t){return this.bindingController.isContentActive(t)}),new UIController}),define("brease/core/Class",["brease/core/Utils"],function(Utils){"use strict";var Class=function Class(){this._bound={}};return Class.extend=function(e,t,n){var i=this,s=function(){};if(i.final)throw new SyntaxError("Class is final and cannot be extended!");s.prototype=i.prototype,e.prototype=new s,e.prototype.constructor=e,e.prototype.superClass=i,null!==t&&(void 0!==i.prototype.defaultSettings?e.prototype.defaultSettings=Utils.extendDeepToNew(i.prototype.defaultSettings,t):e.prototype.defaultSettings=Utils.deepCopy(t)),e.extend=i.extend,e.static={},e.defaults={};for(var r in i.static)e.static[r]=i.static[r];return!0===n&&Utils.defineProperty(e,"final",!0,!1),e},Class.static={},Class.prototype.dispose=function(){this._bound=null},Class.prototype.isDisposed=function(){return null===this._bound},Class.prototype._bind=function(e){if(null!==this._bound){if("function"==typeof e.bind)void 0===this._bound[e]&&(this._bound[e]=e.bind(this));else{if("function"!=typeof this[e])throw new TypeError("Class.prototype._bind - what is trying to be bound is not callable ("+this.constructor.name+")");void 0===this._bound[e]&&(this._bound[e]=this._handlerProxy.bind(this,e))}return this._bound[e]}return console.iatWarn("trying to bind function on disposed widget"),void 0},Class.prototype._handlerProxy=function(e){var t=arguments.length,n=1;if(t>1){for(var i=[],s=1;s<t;s+=1)i.push(arguments[s]);this[e].apply(this,i)}else this[e].call(this)},Class}),define("brease/core/Decorator",[],function(){"use strict";var Decorator=function Decorator(){};Decorator.TYPE_PRE="pre",Decorator.TYPE_POST="post",Decorator.createDecorator=function(e){var t=function(){};return t.prototype=new Decorator,t.prototype.constructor=t,t.prototype.initType=e===Decorator.TYPE_PRE?Decorator.TYPE_PRE:Decorator.TYPE_POST,t},Decorator.prototype.decorate=function(n,i,s){if(s)for(var r in s)n.static[r]=$.extend({},n.static[r],s[r]);var o;for(o in this.methodsToAdd)void 0!==n.prototype[o]?t(n,this.methodsToAdd,o,i,this.initType):"init"===o?e(n,this.methodsToAdd,o,i):n.prototype[o]=this.methodsToAdd[o];for(o in this.addIfNotDefined)void 0===n.prototype[o]&&(n.prototype[o]=this.addIfNotDefined[o]);return n};function e(e,t,n,i){e.prototype[n]=function(){t[n].call(this,i)}}function t(e,t,n,i,s){var r=e.prototype[n];e.prototype[n]=function(){"init"===n?(s===Decorator.TYPE_PRE&&t[n].call(this,i),r.apply(this,arguments),s!==Decorator.TYPE_PRE&&t[n].call(this,i)):(t[n].apply(this,arguments),r.apply(this,arguments))}}return Decorator}),define("brease/decorators/Permissions",["brease/core/Decorator","brease/events/BreaseEvent","brease/core/Utils","brease/enum/Enum"],function(Decorator,BreaseEvent,Utils,Enum){"use strict";var Permissions=function(){this.initType=Decorator.TYPE_PRE},e="roles",t="permissionsChangeHandler";Permissions.prototype=new Decorator;var n=new Permissions;n.methodsToAdd={init:function(t){this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:i.bind(this),wake:s.bind(this)},!0===t&&(this._updatePermissions(),r.call(this,Enum.Dependency.ACTIVE))},dispose:function(){this.dependencies[e]=null,a.call(this)}},n.methodsToAdd[t]=function(){this._updatePermissions(!0)},n.methodsToAdd._setPermission=function(e,t){var n=this.constructor.static.permissions[t];n&&(this.settings[n.property]=e,this._updatePermission(t,!0))},n.methodsToAdd._updatePermissions=function(e){var t=this.constructor.static.permissions;for(var n in t)this._updatePermission(n,e)},n.methodsToAdd._updatePermission=function(e,t){var n=this.constructor.static.permissions[e];void 0!==n&&void 0!==this.settings[n.property]&&(this.settings.permissions[e]=null===this.settings[n.property]||brease.user.hasOneOfRoles(this.settings[n.property]),!0===t&&this[n.updateMethod]())};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored=brease.user.getUserRoles(),r.call(this,Enum.Dependency.SUSPENDED))}function s(){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored.join(",")!==brease.user.getUserRoles().join(",")&&this[t]())}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):a.call(this)}function o(){document.body.addEventListener(BreaseEvent.ROLES_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.ROLES_CHANGED,this._bind(t))}return n}),define("brease/core/libs/AsyncProcess",["brease/core/Utils"],function(Utils){"use strict";var AsyncProcess=function(){this.execute=this.run.bind(this),this.queue=[]};return AsyncProcess.prototype.start=function(){this.started||(this.started=!0,Utils.requestAnimationFrame(this.execute))},AsyncProcess.prototype.add=function(e){"function"==typeof e&&(-1===this.queue.indexOf(e)&&this.queue.push(e),this.start())},AsyncProcess.prototype.run=function(){for(var e=0,t=this.queue.length;e<t;e+=1)this.queue[e].call();this.queue.length=0,this.started=!1},AsyncProcess}),define("brease/decorators/TooltipDependency",["brease/core/Decorator","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum","brease/controller/PopUpManager"],function(Decorator,Utils,BreaseEvent,Enum,PopUpManager){"use strict";var TooltipDependency=function TooltipDependency(){this.initType=Decorator.TYPE_PRE},e="tooltip",t="tooltipChangeHandler";TooltipDependency.prototype=new Decorator,TooltipDependency.prototype.constructor=TooltipDependency;var n=new TooltipDependency;n.methodsToAdd={init:function(t){this.dependencies[e]={state:Enum.Dependency.INACTIVE,stored:{tooltipModeActive:!1,arrowPosition:"n"},suspend:i.bind(this),wake:s.bind(this)},!0===t&&this.setTooltipDependency(t),this.tooltipIndicatorAttached=!1,this.tooltipContentAttached=!1,this.dependencies[e].stored.tooltipModeActive&&this.activateTooltipMode()},tooltipChangeHandler:function(){l.call(this)&&this.tooltipContentAttached&&(y.apply(this,[b(this.settings.tooltip)]),E(this.tooltipElements,this.tooltipIndicator,{x:"left",y:"top"}))},setTooltip:function(e){this.settings.tooltip=e},getTooltip:function(){return this.settings.tooltip},showTooltip:function(){this.activateTooltipMode()},activateTooltipMode:function(){l.call(this)&&!1===this.isHidden&&(f.call(this),p(this.tooltipIndicator,this.tooltipElements,this.el,{x:"right",y:"top"},!0),this.dependencies[e]&&(this.dependencies[e].stored.tooltipModeActive||(this.dependencies[e].stored.tooltipModeActive=!0,document.body.dispatchEvent(new CustomEvent(BreaseEvent.TOOLTIPMODE_ACTIVE)))))},deactivateTooltipMode:function(){m.call(this),A.call(this),this.dependencies[e]&&this.dependencies[e].stored.tooltipModeActive&&(this.dependencies[e].stored.tooltipModeActive=!1,document.body.dispatchEvent(new CustomEvent(BreaseEvent.TOOLTIPMODE_INACTIVE)))},setTooltipDependency:function(e){!0===e?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,a.call(this),brease.bodyEl.off(BreaseEvent.MOUSE_DOWN,this._bind(h)),this.deactivateTooltipMode(),this.tooltipIndicatorAttached=null,this.tooltipContentAttached=null,this.tooltipElements=null,this.tooltipIndicator=null,this.tooltipIndicatorInner=null,this.tooltipContentOutterWrapper=null,this.tooltipContent=null,this.tooltipContentText=null,this.tooltipContentArrow=null}};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored.key=brease.language.getCurrentLanguage(),this.dependencies[e].stored.version=brease.language.getCurrentVersion(),r.call(this,Enum.Dependency.SUSPENDED))}function s(n){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored.key===brease.language.getCurrentLanguage()&&this.dependencies[e].stored.version===brease.language.getCurrentVersion()||this[t](n))}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):(a.call(this),this.deactivateTooltipMode())}function o(){document.body.addEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}function l(){return this.settings.tooltip.length>0&&this.settings.parentContentId&&this.settings.parentContentId!==brease.settings.globalContent}function d(){this.tooltipIndicator=$('<div class="breaseTooltipIndicator system_brease_Tooltip_style_default" data-source="'+this.elem.id+'" style="box-sizing:border-box;width:auto; height:auto; position:absolute !important; z-index:1;"></div>'),this.tooltipIndicatorInner=$('<div class="breaseTooltipIndicatorInner"></div>'),this.tooltipIndicator.append(this.tooltipIndicatorInner)}function c(){this.tooltipContentOutterWrapper=$('<div class="breaseTooltipOutterWrapper system_brease_Tooltip_style_default" data-source="'+this.elem.id+'"></div>'),this.tooltipContent=$('<div class="breaseTooltip n"></div>'),this.tooltipContentText=$('<div class="textDiv breaseTooltipText"></div>'),this.tooltipContentArrow=$('<div class="tooltip-arrow"></div>'),this.tooltipContentArrowBorder=$('<div class="tooltip-arrow-border"></div>'),this.tooltipContentArrowBackground=$('<div class="tooltip-arrow-background"></div>'),this.tooltipContentArrow.append(this.tooltipContentArrowBorder),this.tooltipContentArrow.append(this.tooltipContentArrowBackground),this.tooltipContentOutterWrapper.append(this.tooltipContent),this.tooltipContentOutterWrapper.append(this.tooltipContentArrow),this.tooltipContent.append(this.tooltipContentText),this.tooltipElements={tooltipIndicator:this.tooltipIndicator,tooltipIndicatorInner:this.tooltipIndicatorInner,tooltipContentOutterWrapper:this.tooltipContentOutterWrapper,tooltipContent:this.tooltipContent,tooltipContentText:this.tooltipContentText,tooltipContentArrow:this.tooltipContentArrow}}function u(){var e=this;brease.bodyEl.on(BreaseEvent.MOUSE_DOWN,this._bind(h)),this.tooltipIndicator.on(BreaseEvent.CLICK,this._bind(v)),this.tooltipIndicator.on(BreaseEvent.MOUSE_DOWN,function(t){e._handleEvent(t,!0)}),$(window).resize(function(){e.deactivateTooltipMode()}),$(window).on("mousewheel",function(t){e.deactivateTooltipMode()})}function h(e){$(e.target).hasClass("tooltipindicator")||$.contains(this.tooltipContentOutterWrapper.get(0),e.target)||(brease.bodyEl.off(BreaseEvent.MOUSE_DOWN,this._bind(h)),this.deactivateTooltipMode())}function g(){brease.bodyEl.off(BreaseEvent.MOUSE_DOWN,this._bind(h)),this.tooltipIndicator.off()}function f(){this.tooltipIndicatorAttached||(d.call(this),u.call(this),this.tooltipIndicatorAttached=!0),this.tooltipContentAttached||(c.call(this),y.apply(this,[b(this.settings.tooltip)]))}function p(e,t,n,i,s){s=s||!1,i=i||{x:"right",y:"top"};var r=Utils.getScaleFactor(n),o=n.css("transform").replace(/matrix|\(|\)/gi,"").split(","),a="none"!==o[0]?o[0]:1,l=o[1]||0,d=n.get(0).getBoundingClientRect(),c={w:(n.outerWidth()||d.width)*r,h:(n.outerHeight()||d.height)*r,left:n.get(0).offsetLeft,top:n.get(0).offsetTop};(function(){var e=$(this);n.parent().append(e);var o={transform:n.css("transform"),"transform-origin":n.css("transform-origin"),"z-index":n.css("z-index")+1},d={top:0,left:0},u=0,h=0,g={w:e.outerWidth()*r,h:e.outerHeight()*r};e.css(o),s?(u=c.top+l*(c.w-g.w),h="left"===i.x?c.left:c.left+a*(c.w-g.w)):(u=c.top-g.h,u=u<0?c.top+c.h:u,h="left"===i.x?c.left:c.left+c.w-g.w),d.top=u-t.tooltipIndicatorInner.get(0).offsetTop,d.left=h+t.tooltipIndicatorInner.get(0).offsetLeft,this.css(d)}).call(t.tooltipIndicator)}function m(){this.tooltipIndicatorAttached&&(g.call(this),this.tooltipIndicator.detach(),this.tooltipIndicatorAttached=!1)}function v(e){l.call(this)&&!this.isHidden&&(e&&this._handleEvent(e,!0),this.tooltipContentAttached?"hidden"===this.tooltipContentOutterWrapper.css("visibility")?this.tooltipContentOutterWrapper.css("visibility","visible"):this.tooltipContentOutterWrapper.css("visibility","hidden"):this.tooltipContentAttached=!0,"hidden"!==this.tooltipContentOutterWrapper.css("visibility")&&E(this.tooltipElements,this.tooltipIndicator,{x:"left",y:"top"}))}function b(e){return brease.language.isKey(e)?brease.language.getTextByKey(brease.language.parseKey(e)):e}function y(e){null!==e.match(/(\r\n|\n|\r)/gm)&&this.tooltipElements.tooltipContentText.css("white-space","pre"),this.tooltipContentText.text(e)}function E(e,t,n,i){var s=function(){var t=I(e.tooltipContentOutterWrapper),n=e.tooltipIndicatorInner.get(0).getBoundingClientRect(),i=e.tooltipIndicatorInner.offset(),s={top:i.top,left:i.left,width:n.width,height:n.height},r=e.tooltipContentArrow.get(0).getBoundingClientRect(),o=s.left+s.width/2,a={top:0,left:0},l="-50%",d={width:brease.appView.children().eq(0).width()+"px","max-width":.5*brease.appView.children().eq(0).width()+"px","z-index":PopUpManager.getHighestZindex()+1};e.tooltipContentOutterWrapper.css(d);var c=e.tooltipContent.get(0).getBoundingClientRect(),u=c.height+r.height;a.left=o;var h=parseFloat(e.tooltipContent.css("border-radius"));h=Math.min(h,20);var g=h/2;o-c.width/2<=0?l=e.tooltipContentArrow.width()/2*-1-g+"px":o-c.width/2+c.width>=brease.appView.get(0).getBoundingClientRect().width&&(l=-1*(e.tooltipContent.outerWidth()-e.tooltipContentArrow.width()/2)+g+"px"),a.top=s.top-u,s.top-u<=0&&(e.tooltipContentArrow.addClass("n"),a.top=s.top+s.height+r.height),this.css(a);var f={borderRadius:h+"px",transform:"translate("+l+")"};e.tooltipContent.css(f)};brease.bodyEl.append(e.tooltipContentOutterWrapper),s.call(e.tooltipContentOutterWrapper)}function A(){this.tooltipContentAttached&&(this.tooltipContentOutterWrapper.detach(),this.tooltipContentAttached=!1)}function I(e){var t=brease.pageController.getCurrentPage("appContainer"),n=brease.pageController.getVisu4Page(t),i=brease.pageController.getVisuById(n),s=1;if(i&&i.containerId){var r=brease.pageController.getPageById(brease.pageController.getCurrentPage(i.containerId));if(r){var o=document.querySelector('[data-brease-layoutid="'+r.layout+'"][data-brease-pageId="'+r.id+'"]');s=Utils.getScaleFactor(o)}}return e.css({transform:"scale("+s+","+s+")","transform-origin":"0 0"}),s}return n}),define("brease/core/BaseWidget",["brease/core/Class","brease/events/BreaseEvent","brease/config","brease/core/Utils","brease/enum/Enum","brease/core/Types","brease/events/EventHandler","brease/decorators/Permissions","brease/controller/BindingController","brease/controller/FileManager","brease/core/libs/AsyncProcess","brease/decorators/TooltipDependency"],function(e,BreaseEvent,t,Utils,Enum,Types,EventHandler,n,i,s,AsyncProcess,r){"use strict";var o={enable:!0,editable:!0,visible:!0,omitClass:!1,style:"default",stylePrefix:"",permissions:{view:!0,operate:!0},parentVisibleState:!0,parentEnableState:!0,tooltip:""},BaseWidget=e.extend(function BaseWidget(t,n,i){e.call(this),Utils.defineProperty(this,"dependencies",{}),this.events={},this.internalData={},this.initialized=!1,this.settings=void 0!==n&&null!==n?Utils.extendDeepToNew(this.defaultSettings,n):Utils.deepCopy(this.defaultSettings),this.settings.className=this.constructor.defaults.className,null!==t&&void 0!==t&&(this.elem=t,this.el=$(t)),!0===this.constructor.static.multitouch&&this.el.attr("data-multitouch","true"),this.isDisabled=!1,this.isHidden=!1,this._cssClasses=!0===brease.config.editMode?["editMode","breaseWidget"]:["breaseWidget"],this._cssUpdates={},!0!==i&&(this.omitReadyEvent=!0,this.init())},o),a=new AsyncProcess,l=BaseWidget.prototype;l.init=function(e){this.omitReadyEvent=e,this._internalEnable(),this.updateVisibility(!0),Utils.isString(this.settings.position)&&(this._cssUpdates.position=this.settings.position,this._invalidate()),h(this),!0!==this.settings.styleClassAdded&&this.addInitialClass(this.settings.stylePrefix+"_style_"+this.settings.style),this.addClassNames(this._cssClasses),this._initEventHandler(),!0===brease.config.preLoadingState&&(this.internalData.preLoaded=!0),this._waitForBinding()},l.addClassNames=function(e){if(void 0!==this.elem&&e.length>0){for(var t=this.elem.className,n=t.split(" "),i="",s=0;s<e.length;s+=1)-1===n.indexOf(e[s])&&(i+=(""!==i?" ":"")+e[s]);this.elem.className=(""!==t?t+" ":"")+i}this.initialized=!0},l.setStyle=function(e){this.el.removeClass(this.settings.stylePrefix+"_style_"+this.settings.style),this.settings.style=e,this.el.addClass(this.settings.stylePrefix+"_style_"+this.settings.style)},l.getStyle=function(){return this.settings.style},l.resetStyles=function(){this.el.removeClass(this.settings.stylePrefix+"_style_"+this.settings.style);for(var e=0;e<this.elem.classList.length;e+=1)0===this.elem.classList[e].indexOf(this.settings.stylePrefix)&&this.el.removeClass(this.elem.classList[e]);this.settings.style="default",this.el.addClass(this.settings.stylePrefix+"_style_"+this.settings.style)},l._invalidate=function(){this._cssRender()},l._defer=function(e){void 0===this.queue&&(this.queue=[]),-1===this.queue.indexOf(e)&&this.queue.push(e),!0!==this._updatePending&&(this._updatePending=!0,a.add(this._bind("_processDefered")))},l._processDefered=function(){this._updatePending=!1;for(var e=0,t=this.queue.length;e<t;e+=1)this[this.queue[e]]();this.queue.length=0},l._cssRender=function(){Object.keys(this._cssUpdates).length>0&&(this.el.css(this._cssUpdates),this._cssUpdates={})},l._setCSSUpdate=function(e,t,n,i,s){this.settings[n]=Types.parseValue(this.settings[n],i,s),this._cssUpdates[e]=this.settings[n]+t},l._setWidth=function(e){this.settings.width=e},l._setHeight=function(e){this.settings.height=e},l.deferredInit=function(e,t,n){this.el=$(t).prependTo(e),this.elem=this.el[0],this.init(n)},l.addInitialClass=function(e){-1===this._cssClasses.indexOf(e)&&this._cssClasses.push(e)},l.removeInitialClass=function(e){var t=this._cssClasses.indexOf(e);-1!==t&&this._cssClasses.splice(t,1)},l.createEvent=function(e,t){if(this.settings.className&&null!==this.elem){if(void 0!==this.events[e])return this.events[e].setEventArgs(t),this.events[e];var n=s.getPathByClass(this.settings.className,"type");return this.events[e]=new EventHandler(n+".Event",this.elem.id,e,t,this.elem),this.events[e]}return console.iatWarn("could not create Event"),void 0},l.dispatchServerEvent=function(e,t){var n=this.createEvent(e,t);n&&n.dispatch(!1)},l.disable=function(){!1===this.isDisabled&&(this.isDisabled=!0,!0!==this.initialized?this.addInitialClass("disabled"):(this.el.addClass("disabled"),this._enableHandler(!1)))},l.enable=function(){!0===this.isDisabled&&(this.isDisabled=!1,!0!==this.initialized?this.removeInitialClass("disabled"):(this.el.removeClass("disabled"),this._enableHandler(!0)))},l.setEnable=function(e){var t=arguments[1];this.settings.enable=Types.parseValue(e,"Boolean"),this._internalEnable(),"server"!==(t?t.origin:void 0)&&this.sendValueChange({enable:this.getEnable()});var n=this.createEvent("EnableChanged",{value:this.getEnable()});n&&n.dispatch()},l._enableHandler=function(){},l.setEditable=function(e,t){},l.getEditable=function(){return this.settings.editable},l.getEnable=function(){return this.settings.enable},l.setVisible=function(e){var t=arguments[1];this.settings.visible=Types.parseValue(e,"Boolean"),this.updateVisibility(),"server"!==(t?t.origin:void 0)&&this.sendValueChange({visible:this.getVisible()});var n=this.createEvent("VisibleChanged",{value:this.getVisible()});n&&n.dispatch()},l.getVisible=function(){return this.settings.visible},l.getSettings=function(){return this.settings},l.getDefaultSettings=function(){return this.defaultSettings},l.isEnabled=function(){return!this.isDisabled},l.isVisible=function(){return!this.isHidden},l.addEventListener=function(e,t){this.elem&&this.elem.addEventListener(e,t)},l.removeEventListener=function(e,t){this.elem&&this.elem.removeEventListener(e,t)},l.dispatchEvent=function(e){try{this.elem.dispatchEvent(e)}catch(t){console.iatWarn(t.message),console.iatWarn(this.settings.className+"["+(this.elem?this.elem.id:"undefined elem")+"].dispatchEvent("+e.type+"):"+t.message)}},l.suspend=function(){for(var e in this.dependencies)this.dependencies[e].suspend()},l.wake=function(e,t,n){for(var i in this.dependencies)this.dependencies[i].wake(e[i])},l.dispose=function(t){this.queue&&(this.queue.length=0);for(var n in this.events)this.events[n].dispose();this.events=null,this.el.off(),this.el.empty(),document.body.removeEventListener(BreaseEvent.BINDING_LOADED,this._bind(c)),e.prototype.dispose.call(this),document.body.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_DISPOSE,{detail:{id:this.elem.id,keepBindingInformation:t},bubbles:!0})),this.el.remove(),this.el=null,this.elem=null},l.sendValueChange=function(e){this.dispatchEvent(new CustomEvent(BreaseEvent.ATTRIBUTE_CHANGE,{detail:e,bubbles:!0})),brease.uiController.bindingController.attributeChangeForwarder({target:{id:this.elem.id},detail:e})},l.sendNodeChange=function(e){this.dispatchEvent(new CustomEvent(BreaseEvent.NODE_ATTRIBUTE_CHANGE,{detail:e,bubbles:!0})),brease.uiController.bindingController.nodeAttributeChangeForwarder({target:{id:this.elem.id},detail:e})},l._setChildData=function(e,t,n,i){},l._handleEvent=function(e,t){e.originalEvent&&e.originalEvent.preventDefault(),!0!==this.isDisabled&&!0!==t||e.stopImmediatePropagation()},l._dispatchReady=function(){this.state=Enum.WidgetState.READY,this.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_READY,{detail:{widgetType:this.settings.className},bubbles:!0}))},l._initEventHandler=function(){this.el&&this.el.on(BreaseEvent.CLICK,this._bind("_clickHandler"))},l._clickHandler=function(e,t){if(this.isDisabled)this._disabledClickHandler(e,t);else{var n=d({},t,e.target);this.createEvent("Click",n).dispatch(!1)}};function d(e,t,n){var i=_.assign(e,t);return Utils.isString(i.origin)||(i.origin=brease.uiController.parentWidgetId(n)),i}l._disabledClickHandler=function(e,t){var n=d({hasPermission:this.settings.editable&&this.settings.permissions.operate},t,e.target);this.createEvent("DisabledClick",n).dispatch(!1),document.body.dispatchEvent(new CustomEvent(BreaseEvent.DISABLED_CLICK,{detail:{contentId:this.settings.parentContentId,hasPermission:n.hasPermission,origin:n.origin,widgetId:this.elem.id},bubbles:!0})),this._handleEvent(e)},l._internalEnable=function(){!0!==this.settings.enable||!0!==this.settings.editable||!0!==this.settings.permissions.operate||!0!==this.settings.parentEnableState?this.disable():this.enable()},l.updateVisibility=function(e){u.call(this,this.settings.visible,this.settings.permissions.view,this.settings.parentVisibleState,brease.config.editMode,e)},l.setParentVisibleState=function(e){this.settings.parentVisibleState=e,this.updateVisibility()},l.setParentEnableState=function(e){this.settings.parentEnableState=e,this._internalEnable()},l._waitForBinding=function(){void 0===this.settings.parentContentId||this.settings.parentContentId===brease.settings.globalContent?this._initialValueHandling():i.isBindingLoaded(this.settings.parentContentId)?this._initialValueHandling(i.getSubscriptionsForElement(this.elem.id)):document.body.addEventListener(BreaseEvent.BINDING_LOADED,this._bind(c))},l._initialValueHandling=function(e){this.bindings=e};function c(e){e.detail.contentId===this.settings.parentContentId&&(document.body.removeEventListener(BreaseEvent.BINDING_LOADED,this._bind(c)),this._initialValueHandling(i.getSubscriptionsForElement(this.elem.id)))}function u(e,t,n,i,s){!0!==i&&(!0!==e||!0!==t||!0!==n?(s?this.addInitialClass("remove"):this.el.addClass("remove"),this.isHidden=!0):s||(this.el.removeClass("remove"),this.isHidden=!1))}function h(e){e.settings.stylePrefix||(void 0===e.constructor.defaults.stylePrefix&&(e.constructor.defaults.stylePrefix=s.getPathByClass(e.settings.className,"style")),e.settings.stylePrefix=e.constructor.defaults.stylePrefix)}return n.decorate(BaseWidget,!0!==brease.config.editMode,{permissions:{view:{property:"permissionView",updateMethod:"updateVisibility"},operate:{property:"permissionOperate",updateMethod:"_internalEnable"}}}),r.decorate(BaseWidget,!0),BaseWidget}),define("brease/core/ContainerWidget",["brease/core/BaseWidget","brease/events/BreaseEvent","brease/enum/Enum"],function(e,BreaseEvent,Enum){"use strict";var t={},n=e.extend(function ContainerWidget(){e.apply(this,arguments)},t),i=n.prototype;n.widgetAddedHandler="widgetAddedHandler",n.widgetRemovedHandler="widgetRemovedHandler",i.init=function(){this.containerVisibility=!0,this.el.wrapInner('<div class="container" />'),this.getContainer(),s.call(this),e.prototype.init.apply(this,arguments),this.debouncedRefresh=_.debounce(this._refresh.bind(this),100)},i.disable=function(){e.prototype.disable.apply(this,arguments),!0!==this.initialized&&o(this.getContainer()).each(function(){(brease.uiController.getWidgetState(this.id)<Enum.WidgetState.INITIALIZED||null===brease.uiController.callWidget(this.id,"setParentEnableState",!1))&&brease.uiController.addWidgetOption(this.id,"parentEnableState",!1)})},i._enableHandler=function(){e.prototype._enableHandler.apply(this,arguments);var t=this.isDisabled;o(this.getContainer()).each(function(){brease.uiController.callWidget(this.id,"setParentEnableState",!t)})},i.updateChildrenVisibility=function(){var e=!0===this.containerVisibility&&!1===this.isHidden;o(this.getContainer()).each(function(){brease.uiController.callWidget(this.id,"setParentVisibleState",e)})},i.updateVisibility=function(){var t=this.isHidden;e.prototype.updateVisibility.apply(this,arguments),this.isHidden!==t&&(t=this.isHidden,this.updateChildrenVisibility()),this.elem.dispatchEvent(new CustomEvent(BreaseEvent.VISIBILITY_CHANGED,{bubbles:!1,detail:{visible:!this.isHidden}}))},i.visibilityChangeHandler=function(e){this.scroller&&($.contains(e.target,this.elem)||e.target===this.elem||$.contains(this.elem,e.target))&&this.debouncedRefresh()},i._refresh=function(){this.scroller&&!this.isHidden&&this.scroller.refresh()},i.dispose=function(){r.call(this),this.scroller&&("function"==typeof this.scroller.destroy&&this.scroller.destroy(),this.scroller.wrapper=null,this.scroller=null),e.prototype.dispose.apply(this,arguments)},i.wake=function(){e.prototype.wake.apply(this,arguments),document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)},i.suspend=function(){document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0),e.prototype.suspend.apply(this,arguments)},i.getContainer=function(){return void 0===this.container&&(this.container=this.el.find(">.container")),this.container},i[n.widgetAddedHandler]=function(){},i[n.widgetRemovedHandler]=function(){};function s(){!0===brease.config.editMode&&(this.elem.addEventListener(BreaseEvent.WIDGET_ADDED,this._bind(n.widgetAddedHandler)),this.elem.addEventListener(BreaseEvent.WIDGET_REMOVED,this._bind(n.widgetRemovedHandler))),document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)}function r(){!0===brease.config.editMode&&(this.elem.removeEventListener(BreaseEvent.WIDGET_ADDED,this._bind(n.widgetAddedHandler)),this.elem.removeEventListener(BreaseEvent.WIDGET_REMOVED,this._bind(n.widgetRemovedHandler))),document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)}function o(e){var t=e.find("[data-brease-widget]");return t.length>0&&(t=t.first().parent().children("[data-brease-widget]")),t}return n}),define("brease/core/designer/BaseWidget/ClassExtension",["brease/core/Utils"],function(Utils){"use strict";var ClassExtension={extend:function(t){if("BaseWidget"===t.name){e(t);var n=t.prototype;n.isRotatable=function(){return!0},n.isMovable=function(){return!0},n.isResizable=function(){return!0},n.getHandles=function(){return[]};var i=n.init;n.init=function(){var e=this,t=e.constructor.meta;this.designer={isRotatable:function(){return e.isRotatable.apply(e,arguments)},isMovable:function(){return e.isMovable.apply(e,arguments)},isResizable:function(){return e.isResizable.apply(e,arguments)},getHandles:function(){return e.getHandles.apply(e,arguments)},allowsChild:function(e){if(!Utils.isWidget(e))throw new SyntaxError("argument has to be of type Widget");var n=t.children,i=e.constructor.meta.inheritance;if(-1!==n.indexOf("*"))return!0;for(var s=!1,r=0;r<i.length;r+=1)if(-1!==n.indexOf(i[r])){s=!0;break}return s},isAllowedIn:function(e){if(!Utils.isWidget(e))throw new SyntaxError("argument has to be of type Widget");var n=t.parents,i=e.constructor.meta.className;return Array.isArray(n)?-1!==n.indexOf("*")||-1!==n.indexOf(i):(console.warn("Meta data of "+e.elem.id+" missing!"),!1)},isAllowedInContent:function(){var e=t.parents;if(Array.isArray(e))return-1!==e.indexOf("*")||-1!==e.indexOf("system.brease.Content")}},i.apply(this,arguments)}}}};function e(e){e.static.getInitialProperties=function(e,t){return{left:e,top:t}}}return ClassExtension}),define("brease/core/designer/BaseWidget/ClassInfo",["brease/core/designer/BaseWidget/ClassExtension"],function(e){"use strict";return{}}),define("brease/core/designer/Brease/ClassExtension",["brease/core/Utils"],function(Utils){"use strict";var e={isWidgetAllowedIn:function(e,r,o){var a=$.Deferred(),l=s(e,!1,!0)+"/designer/ClassInfo.js",d=s(r,!1,!0)+"/designer/ClassInfo.js";return require([l,d],function(e,s){t(a,o,n(s.meta,e.meta)&&i(e.meta,s.meta))}),a.promise()},getInitialProperties:function(e,n,i,r){var o=$.Deferred(),a=s(i,!1),l=s(i,!1,!0)+"/designer/ClassInfo.js";return require([a,l],function(i,s){s.classExtension&&!0!==i.extended&&s.classExtension.extend(i);var a=i.static.getInitialProperties(e,n);t(o,r,a)}),o.promise()},className2Path:function(e,t,n){return s.apply(null,arguments)}};function t(e,t,n){Utils.isFunction(t)&&t(n),e.resolve(n)}function n(e,t){var n=e.children,i=t.inheritance;if(-1!==n.indexOf("*"))return!0;for(var s=!1,r=0;r<i.length;r+=1)if(-1!==n.indexOf(i[r])){s=!0;break}return s}function i(e,t){var n=e.parents,i=t.className,s=-1!==n.indexOf("*"),r=-1!==n.indexOf(i),o=!1;if(!0===t.isDerived){var a=t.inheritance[1];o=-1!==n.indexOf(a)}return s||r||o}function s(e,t,n){var i=e;return!0!==n&&0!==e.indexOf("brease")&&(i+=i.substring(i.lastIndexOf("."))),-1===e.indexOf("BaseWidget")&&-1===e.indexOf("ContainerWidget")||(i=i.substring(0,i.lastIndexOf("."))),i=i.replace(/\./g,"/"),!0===t&&-1===i.indexOf(".js")&&(i+=".js"),i}return{extend:function(brease){brease.designer=e}}}),define("brease/core/designer/ContainerWidget/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e){"use strict";return{}}),define("brease/core/libs/Extensions",[],function(){"use strict";var Extensions={originalConsole:window.console,console:{init:function(e){e.storageLog&&(console.log=function(){try{throw new Error("LogError")}catch(s){var e=s.stack.split("\n"),n=e[2].substring(e[2].lastIndexOf("/")+1),i=n.split(":");t("log",Date.now(),arguments[0],i[0],i[1],arguments[1])}},console.debug=function(){try{throw new Error("LogError")}catch(s){var e=s.stack.split("\n"),n=e[2].substring(e[2].lastIndexOf("/")+1),i=n.split(":");t("debug",Date.now(),arguments[0],i[0],i[1],"#0000ff")}},console.warn=function(){try{throw new Error("LogError")}catch(s){var e=s.stack.split("\n"),n=e[2].substring(e[2].lastIndexOf("/")+1),i=n.split(":");t("warn",Date.now(),arguments[0],i[0],i[1],"#000","#fffbe6")}}),
!0===e.warn?(console.iatWarn=console.warn,console.iatInfo=console.info):(console.iatWarn=function(){},console.iatInfo=function(){}),!0===e.debug?(console.iatDebug=console.debug,console.iatDebugLog=console.log):(console.iatDebug=function(){},console.iatDebugLog=function(){}),console.always=function(){console.log.apply(console,arguments)},console.color=function(e,t){console.log("%c"+e,"color:"+t+";")}}}},e=!0;function t(){var t=localStorage.getItem("log");t=e?n.apply(null,arguments):t+"|#|"+n.apply(null,arguments),e=!1,localStorage.setItem("log",t)}function n(e,t,n,s,r,o,a){n=n||"";var l={type:e,time:t,message:0===n.indexOf("%c")?n.substring(2):n,file:s,line:r,color:o?i(o):"#000",backColor:a||"transparent"};return JSON.stringify(l)}function i(e){return e.indexOf&&-1!==e.indexOf("color:")?(e=e.substring(e.indexOf(":")+1),e.indexOf(";")===e.length-1&&(e=e.substring(0,e.length-1)),e):e}return Math.range=function(e,t,n){return e<t&&(e=t),e>n&&(e=n),e},Math.roundTo=function(e,t){var n=Math.pow(10,t);return isNaN(n)?NaN:Math.round(e*n)/n},$.fn.showByFlag=function(e){return 0!==e?this.show():this.hide()},$.containsOrEquals=function(e,t){return e===t||$.contains(e,t)},Extensions}),define("brease/datatype/Node",["brease/core/Utils"],function(Utils){"use strict";var Node=function(t,n,i,s,r){e+=1,this.id=void 0!==r?r+"":"brease_node_"+e,this.setUnit(n),this.setValue(t),this.setMinValue(i),this.setMaxValue(s)},e=0,t=Node.prototype;return t.toJSON=function(){return{value:this.value,id:this.id,unit:this.unit?this.unit:null,minValue:this.minValue,maxValue:this.maxValue}},t.setId=function(e){void 0!==e&&(this.id=e+"")},t.getId=function(){return this.id},t.setUnit=function(e){this.unit=void 0!==e&&null!==e?e+"":null},t.getUnit=function(){return this.unit},t.setMinValue=function(e){this.minValue=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getMinValue=function(){return this.minValue},t.setMaxValue=function(e){this.maxValue=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getMaxValue=function(){return this.maxValue},t.setValue=function(e){this.value=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getValue=function(){return this.value},Node.json2Node=function(e){if(Utils.isObject(e)){return new Node(e.value,e.unit,e.minValue,e.maxValue,e.id)}return null},Node}),define("brease/datatype/ArrayNode",["brease/datatype/Node","brease/core/Utils"],function(Node,Utils){"use strict";var ArrayNode=function ArrayNode(t,n,i,s,r){e+=1,this.id=void 0!==r?r:"brease_arrayNode_"+e,this.setUnit(n),this.setValue(t),this.setMinValue(i),this.setMaxValue(s)},e=0;return(ArrayNode.prototype=new Node).setValue=function(e){if(!0!==Array.isArray(e))throw new TypeError("value has to be of type Array");this.value=e},ArrayNode.json2ArrayNode=function(e){return Utils.isObject(e)?new ArrayNode(e.value,e.unit,e.minValue,e.maxValue,e.id):null},ArrayNode}),define("brease/decorators/CultureDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var CultureDependency=function(){this.initType=Decorator.TYPE_PRE},e="culture",t="cultureChangeHandler";CultureDependency.prototype=new Decorator,CultureDependency.prototype.constructor=CultureDependency;var n=new CultureDependency;n.methodsToAdd={init:function(r){if(void 0===this[t])throw new Error("widget "+this.elem.id+': decoration with "'+n.constructor.name+'" requires method "'+t+'"');this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:i.bind(this),wake:s.bind(this)},!0===r&&this.setCultureDependency(r)},setCultureDependency:function(e){!0===e?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,a.call(this)}};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored=brease.culture.getCurrentCulture().key,r.call(this,Enum.Dependency.SUSPENDED))}function s(n){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored!==brease.culture.getCurrentCulture().key&&this[t](n))}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):a.call(this)}function o(){document.body.addEventListener(BreaseEvent.CULTURE_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.CULTURE_CHANGED,this._bind(t))}return n}),define("brease/decorators/LanguageDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var LanguageDependency=function LanguageDependency(){this.initType=Decorator.TYPE_PRE},e="language",t="langChangeHandler";LanguageDependency.prototype=new Decorator,LanguageDependency.prototype.constructor=LanguageDependency;var n=new LanguageDependency;n.methodsToAdd={init:function(r){if(void 0===this[t])throw new Error("widget "+this.elem.id+': decoration with "'+n.constructor.name+'" requires method "'+t+'"');this.dependencies[e]={state:Enum.Dependency.INACTIVE,stored:{},suspend:i.bind(this),wake:s.bind(this)},!0===r&&this.setLangDependency(r)},setLangDependency:function(e){!0===e?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,a.call(this)}};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored.key=brease.language.getCurrentLanguage(),this.dependencies[e].stored.version=brease.language.getCurrentVersion(),r.call(this,Enum.Dependency.SUSPENDED))}function s(n){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored.key===brease.language.getCurrentLanguage()&&this.dependencies[e].stored.version===brease.language.getCurrentVersion()||this[t](n))}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):a.call(this)}function o(){document.body.addEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}return n}),define("brease/decorators/MeasurementSystemDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var MeasurementSystemDependency=function(){this.initType=Decorator.TYPE_PRE},e="mms",t="measurementSystemChangeHandler";MeasurementSystemDependency.prototype=new Decorator,MeasurementSystemDependency.prototype.constructor=MeasurementSystemDependency;var n=new MeasurementSystemDependency;n.methodsToAdd={init:function(r){if(void 0===this[t])throw new Error("widget "+this.elem.id+': decoration with "'+n.constructor.name+'" requires method "'+t+'"');this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:i.bind(this),wake:s.bind(this)},!0===r&&this.setMeasurementSystemDependency(r)},setMeasurementSystemDependency:function(e){!0===e?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,a.call(this)}};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored=brease.measurementSystem.getCurrentMeasurementSystem(),r.call(this,Enum.Dependency.SUSPENDED))}function s(n){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored!==brease.measurementSystem.getCurrentMeasurementSystem()&&this[t](n))}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):a.call(this)}function o(){document.body.addEventListener(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,this._bind(t))}return n}),define("brease/decorators/UserDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var UserDependency=function UserDependency(){this.initType=Decorator.TYPE_PRE},e="user",t="userChangeHandler";UserDependency.prototype=new Decorator,UserDependency.prototype.constructor=UserDependency;var n=new UserDependency;n.methodsToAdd={init:function(r){if(void 0===this[t])throw new Error("widget "+this.elem.id+': decoration with "'+n.constructor.name+'" requires method "'+t+'"');this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:i.bind(this),wake:s.bind(this)},!0===r&&this.setUserDependency(r)},setUserDependency:function(e){!0===e?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,a.call(this)}};function i(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&(this.dependencies[e].stored=brease.user.getCurrentUser().userID,r.call(this,Enum.Dependency.SUSPENDED))}function s(n){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&(r.call(this,Enum.Dependency.ACTIVE),this.dependencies[e].stored!==brease.user.getCurrentUser().userID&&this[t](n))}function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?o.call(this):a.call(this)}function o(){document.body.addEventListener(BreaseEvent.USER_CHANGED,this._bind(t))}function a(){document.body.removeEventListener(BreaseEvent.USER_CHANGED,this._bind(t))}return n}),define("brease/decorators/VisibilityDependency",["brease/core/Decorator","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,Utils,BreaseEvent,Enum){"use strict";var e="visibility",t="visibilityChangeHandler",n=100,i=Decorator.createDecorator(Decorator.TYPE_PRE),s=new i;s.methodsToAdd={init:function(t){this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:r.bind(this),wake:o.bind(this)},!0===t&&this.setVisibilityDependency(t),this.debouncedRefresh=_.debounce(this._refreshScroller.bind(this),100)},setVisibilityDependency:function(e){!0===e?a.call(this,Enum.Dependency.ACTIVE):a.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,d.call(this)}},s.methodsToAdd[t]=function(e){Utils.elemContains(e.target,this.elem)&&this.debouncedRefresh()},s.addIfNotDefined={_refreshScroller:function(){this.scroller&&"function"==typeof this.scroller.refresh&&!this.isHidden&&this.scroller.refresh()}};function r(){this.dependencies[e].state===Enum.Dependency.ACTIVE&&a.call(this,Enum.Dependency.SUSPENDED)}function o(){this.dependencies[e].state===Enum.Dependency.SUSPENDED&&a.call(this,Enum.Dependency.ACTIVE)}function a(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?l.call(this):d.call(this)}function l(){document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind(t),!0)}function d(){document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind(t),!0)}return s}),define("brease/events/Gestures",["brease/core/Utils","brease/config","hammer"],function(Utils,e,t){"use strict";var n=new Map,i=[{name:"pan",superClass:t.Pan},{name:"pinch",superClass:t.Pinch},{name:"press",superClass:t.Press},{name:"rotate",superClass:t.Rotate},{name:"swipe",superClass:t.Swipe},{name:"tap",superClass:t.Tap}],Gestures={settings:{mngOptions:{}},add:function(e,i,o){if(Array.isArray(i)&&Array.isArray(o)){var a;n.has(e)?(a=n.get(e),i.forEach(function(e,t){s(r(e,o[t]),a)})):(a=new t.Manager(e,Gestures.settings.mngOptions),i.forEach(function(e,t){s(r(e,o[t]),a)}),n.set(e,a))}},remove:function(e){var t=n.get(e);t&&t.destroy(),n.delete(e)},on:function(e,t,i){n.get(e).on(t,i)},off:function(e,t,i){var s=n.get(e);s&&s.off(t,i)},getGestures:function(){return n},getOptionsForElement:function(e){var t=n.get(e);return e?Utils.deepCopy(t.recognizers[0].options):void 0},getSrcEvent:function(e){return e.srcEvent},getScaleFactor:function(e){return Utils.getScaleFactor(e)},getAnimationFrame:function(e,t){return"function"!=typeof t?0:o()?(this.cancelAnimationFrame(e),window.requestAnimationFrame(t)):(this.cancelAnimationFrame(e),window.setTimeout(t,0))},cancelAnimationFrame:function(e){return 0===e||"number"!=typeof e?0:(o()?window.cancelAnimationFrame(e):window.clearTimeout(e),0)}},s=function(e,t){e&&t&&t.add(e)},r=function(e,t){var n=i.find(function(t){return t.name===e}),s;return void 0===n?console.debug("Gesture class: ",e," not defined. Available classes:",i.map(function(e){return e.name})):s=new n.superClass(t),s};function o(){return"function"==typeof window.requestAnimationFrame}return Gestures}),function(e,t){var n,i,s,r,o,a,l,d,c,u,h,g,f,p,m,v,b,y,E,A,I,C,w,T;n=function(e){return new n.prototype.init(e)},void 0!==require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=n:e.Globalize=n,n.cultures={},n.prototype={constructor:n,init:function(e){return this.cultures=n.cultures,this.cultureSelector=e,this}},n.prototype.init.prototype=n.prototype,n.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},n.cultures.default.calendar=n.cultures.default.calendars.standard,n.cultures.en=n.cultures.default,n.cultureSelector="en",i=/^0x[a-f0-9]+$/i,s=/^[+\-]?infinity$/i,r=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,a=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},l=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,n,i,s,r,o=arguments[0]||{},a=1,l=arguments.length,g=!1;for("boolean"==typeof o&&(g=o,o=arguments[1]||{},a=2),"object"==typeof o||u(o)||(o={});a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(g&&i&&(h(i)||(s=c(i)))?(s?(s=!1,r=n&&c(n)?n:[]):r=n&&h(n)?n:{},o[t]=d(g,r,i)):void 0!==i&&(o[t]=i));return o},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e){return"[object Function]"===Object.prototype.toString.call(e)},h=function(e){return"[object Object]"===Object.prototype.toString.call(e)},g=function(e,t){return 0===e.indexOf(t)},f=function(e){return(e+"").replace(o,"")},p=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},m=function(e,t,n){var i;for(i=e.length;i<t;i+=1)e=n?"0"+e:e+"0";return e},v=function(e,t){for(var n=0,i=!1,s=0,r=e.length;s<r;s++){var o=e.charAt(s);switch(o){case"'":i?t.push("'"):n++,i=!1;break;case"\\":i&&t.push("\\"),i=!i;break;default:t.push(o),i=!1;break}}return n},b=function(e,t){t=t||"F";var n,i=e.patterns,s=t.length;if(1===s){if(n=i[t],!n)throw"Invalid date format string '"+t+"'.";t=n}else 2===s&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},y=function(e,t,n){var i=n.calendar,s=i.convert,r;if(!t||!t.length||"i"===t){if(n&&n.name.length)if(s)r=y(e,i.patterns.F,n);else{var o=new Date(e.getTime()),a=I(e,i.eras);o.setFullYear(C(e,i,a)),r=o.toLocaleString()}else r=e.toString();return r}var l=i.eras,d="s"===t;t=b(i,t),r=[];var c,u=["0","00","000"],h,g,f=/([^d]|^)(d|dd)([^d]|$)/g,p=0,m=A(),E;function w(e,t){var n,i=e+"";return t>1&&i.length<t?(n=u[t-2]+i,n.substr(n.length-t,t)):(n=i,n)}function T(){return h||g?h:(h=f.test(t),g=!0,h)}function x(e,t){if(E)return E[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}for(!d&&s&&(E=s.fromGregorian(e));;){var S=m.lastIndex,_=m.exec(t),D=t.slice(S,_?_.index:t.length);if(p+=v(D,r),!_)break;if(p%2)r.push(_[0]);else{var L=_[0],N=L.length;switch(L){case"ddd":case"dddd":var O=3===N?i.days.namesAbbr:i.days.names;r.push(O[e.getDay()]);break;case"d":case"dd":h=!0,r.push(w(x(e,2),N));break;case"MMM":case"MMMM":var k=x(e,1);r.push(i.monthsGenitive&&T()?i.monthsGenitive[3===N?"namesAbbr":"names"][k]:i.months[3===N?"namesAbbr":"names"][k]);break;case"M":case"MM":r.push(w(x(e,1)+1,N));break;case"y":case"yy":case"yyyy":k=E?E[0]:C(e,i,I(e,l),d),N<4&&(k%=100),r.push(w(k,N));break;case"h":case"hh":c=e.getHours()%12,0===c&&(c=12),r.push(w(c,N));break;case"H":case"HH":r.push(w(e.getHours(),N));break;case"m":case"mm":r.push(w(e.getMinutes(),N));break;case"s":case"ss":r.push(w(e.getSeconds(),N));break;case"t":case"tt":k=e.getHours()<12?i.AM?i.AM[0]:" ":i.PM?i.PM[0]:" ",r.push(1===N?k.charAt(0):k);break;case"f":case"ff":case"fff":r.push(w(e.getMilliseconds(),3).substr(0,N));break;case"z":case"zz":c=e.getTimezoneOffset()/60,r.push((c<=0?"+":"-")+w(Math.floor(Math.abs(c)),N));break;case"zzz":c=e.getTimezoneOffset()/60,r.push((c<=0?"+":"-")+w(Math.floor(Math.abs(c)),2)+":"+w(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":i.eras&&r.push(i.eras[I(e,l)].name);break;case"/":r.push(i["/"]);break;default:throw"Invalid date format pattern '"+L+"'."}}}return r.join("")},function(){var e;e=function(e,t,n){var i=n.groupSizes,s=i[0],r=1,o=Math.pow(10,t),a=Math.round(e*o)/o;isFinite(a)||(a=e),e=a;var l=e+"",d="",c=l.split(/e/i),u=c.length>1?parseInt(c[1],10):0;l=c[0],c=l.split("."),l=c[0],d=c.length>1?c[1]:"",u>0?(d=m(d,u,!1),l+=d.slice(0,u),d=d.substr(u)):u<0&&(u=-u,l=m(l,u+1,!0),d=l.slice(-u,l.length)+d,l=l.slice(0,-u)),d=t>0?n["."]+(d.length>t?d.slice(0,t):m(d,t)):"";for(var h=l.length-1,g=n[","],f="";h>=0;){if(0===s||s>h)return l.slice(0,h+1)+(f.length?g+f+d:d);f=l.slice(h-s+1,h+1)+(f.length?g+f:""),h-=s,r<i.length&&(s=i[r],r++)}return l.slice(0,h+1)+g+f+d},E=function(t,n,i){if(!isFinite(t))return t===1/0?i.numberFormat.positiveInfinity:t===-1/0?i.numberFormat.negativeInfinity:i.numberFormat.NaN;if(!n||"i"===n)return i.name.length?t.toLocaleString():t.toString();n=n||"D";var s=i.numberFormat,r=Math.abs(t),o=-1,a;n.length>1&&(o=parseInt(n.slice(1),10));var l=n.charAt(0).toUpperCase(),d;switch(l){case"D":a="n",r=p(r),-1!==o&&(r=m(""+r,o,!0)),t<0&&(r="-"+r);break;case"N":d=s;case"C":d=d||s.currency;case"P":d=d||s.percent,a=t<0?d.pattern[0]:d.pattern[1]||"n",-1===o&&(o=d.decimals),r=e(r*("P"===l?100:1),o,d);break;default:throw"Bad number format specifier: "+l}for(var c=/n|\$|-|%/g,u="";;){var h=c.lastIndex,g=c.exec(a);if(u+=a.slice(h,g?g.index:a.length),!g)break;switch(g[0]){case"n":u+=r;break;case"$":u+=s.currency.symbol;break;case"-":/[1-9]/.test(r)&&(u+=s["-"]);break;case"%":u+=s.percent.symbol;break}}return u}}(),A=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},I=function(e,t){if(!t)return 0;for(var n,i=e.getTime(),s=0,r=t.length;s<r;s++)if(n=t[s].start,null===n||i>=n)return s;return 0},C=function(e,t,n,i){var s=e.getFullYear();return!i&&t.eras&&(s-=t.eras[n].offset),s},function(){var e,t,n,i,s,r,o;e=function(e,t){if(t<100){var n=new Date,i=I(n),s=C(n,e,i),r=e.twoDigitYearMax;r="string"==typeof r?(new Date).getFullYear()%100+parseInt(r,10):r,t+=s-s%100,t>r&&(t-=100)}return t},t=function(e,t,n){var i,s=e.days,l=e._upperDays;return l||(e._upperDays=l=[o(s.names),o(s.namesAbbr),o(s.namesShort)]),t=r(t),n?(i=a(l[1],t),-1===i&&(i=a(l[2],t))):i=a(l[0],t),i},n=function(e,t,n){var i=e.months,s=e.monthsGenitive||e.months,l=e._upperMonths,d=e._upperMonthsGen;l||(e._upperMonths=l=[o(i.names),o(i.namesAbbr)],e._upperMonthsGen=d=[o(s.names),o(s.namesAbbr)]),t=r(t);var c=a(n?l[1]:l[0],t);return c<0&&(c=a(n?d[1]:d[0],t)),c},i=function(e,t){var n=e._parseRegExp;if(n){var i=n[t];if(i)return i}else e._parseRegExp=n={};for(var s=b(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],o=[],a=0,l=0,d=A(),c;null!==(c=d.exec(s));){var u=s.slice(a,c.index);if(a=d.lastIndex,l+=v(u,r),l%2)r.push(c[0]);else{var h=c[0],g=h.length,f;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":f="(\\D+)";break;case"tt":case"t":f="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":f="(\\d{"+g+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":f="(\\d\\d?)";break;case"zzz":f="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":f="([+-]?\\d\\d?)";break;case"/":f="(\\/)";break;default:throw"Invalid date format pattern '"+h+"'."}f&&r.push(f),o.push(c[0])}}v(s.slice(a),r),r.push("$");var p=r.join("").replace(/\s+/g,"\\s+"),m={regExp:p,groups:o};return n[t]=m},s=function(e,t,n){return e<t||e>n},r=function(e){return e.split("").join(" ").toUpperCase()},o=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=r(e[n]);return t},w=function(r,o,a){r=f(r);var l=a.calendar,d=i(l,o),c=new RegExp(d.regExp).exec(r);if(null===c)return null;for(var u=d.groups,h=null,p=null,m=null,v=null,b=null,y=0,E,A=0,I=0,C=0,w=null,T=!1,x=0,S=u.length;x<S;x++){var _=c[x+1];if(_){var D=u[x],L=D.length,N=parseInt(_,10);switch(D){case"dd":case"d":if(v=N,s(v,1,31))return null;break;case"MMM":case"MMMM":if(m=n(l,_,3===L),s(m,0,11))return null;break;case"M":case"MM":if(m=N-1,s(m,0,11))return null;break;case"y":case"yy":case"yyyy":if(p=L<4?e(l,N):N,s(p,0,9999))return null;break;case"h":case"hh":if(y=N,12===y&&(y=0),s(y,0,11))return null;break;case"H":case"HH":if(y=N,s(y,0,23))return null;break;case"m":case"mm":if(A=N,s(A,0,59))return null;break;case"s":case"ss":if(I=N,s(I,0,59))return null;break;case"tt":case"t":if(T=l.PM&&(_===l.PM[0]||_===l.PM[1]||_===l.PM[2]),!T&&(!l.AM||_!==l.AM[0]&&_!==l.AM[1]&&_!==l.AM[2]))return null;break;case"f":case"ff":case"fff":if(C=N*Math.pow(10,3-L),s(C,0,999))return null;break;case"ddd":case"dddd":if(b=t(l,_,3===L),s(b,0,6))return null;break;case"zzz":var O=_.split(/:/);if(2!==O.length)return null;if(E=parseInt(O[0],10),s(E,-12,13))return null;var k=parseInt(O[1],10);if(s(k,0,59))return null;w=60*E+(g(_,"-")?-k:k);break;case"z":case"zz":if(E=N,s(E,-12,13))return null;w=60*E;break;case"g":case"gg":var M=_;if(!M||!l.eras)return null;M=f(M.toLowerCase());for(var P=0,B=l.eras.length;P<B;P++)if(M===l.eras[P].name.toLowerCase()){h=P;break}if(null===h)return null;break}}}var R=new Date,H,U=l.convert;if(H=U?U.fromGregorian(R)[0]:R.getFullYear(),null===p?p=H:l.eras&&(p+=l.eras[h||0].offset),null===m&&(m=0),null===v&&(v=1),U){if(R=U.toGregorian(p,m,v),null===R)return null}else{if(R.setFullYear(p,m,v),R.getDate()!==v)return null;if(null!==b&&R.getDay()!==b)return null}if(T&&y<12&&(y+=12),R.setHours(y,A,I,C),null!==w){var V=R.getMinutes()-(w+R.getTimezoneOffset());R.setHours(R.getHours()+parseInt(V/60,10),V%60)}return R}}(),T=function(e,t,n){var i=t["-"],s=t["+"],r;switch(n){case"n -":i=" "+i,s=" "+s;case"n-":l(e,i)?r=["-",e.substr(0,e.length-i.length)]:l(e,s)&&(r=["+",e.substr(0,e.length-s.length)]);break;case"- n":i+=" ",s+=" ";case"-n":g(e,i)?r=["-",e.substr(i.length)]:g(e,s)&&(r=["+",e.substr(s.length)]);break;case"(n)":g(e,"(")&&l(e,")")&&(r=["-",e.substr(1,e.length-2)]);break}return r||["",e]},n.prototype.findClosestCulture=function(e){return n.findClosestCulture.call(this,e)},n.prototype.format=function(e,t,i){return n.format.call(this,e,t,i)},n.prototype.localize=function(e,t){return n.localize.call(this,e,t)},n.prototype.parseInt=function(e,t,i){return n.parseInt.call(this,e,t,i)},n.prototype.parseFloat=function(e,t,i){return n.parseFloat.call(this,e,t,i)},n.prototype.culture=function(e){return n.culture.call(this,e)},n.addCultureInfo=function(e,t,n){var i={},s=!1;"string"!=typeof e?(n=e,e=this.culture().name,i=this.cultures[e]):"string"!=typeof t?(n=t,s=null==this.cultures[e],i=this.cultures[e]||this.cultures.default):(s=!0,i=this.cultures[t]),this.cultures[e]=d(!0,{},i,n),s&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},n.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),c(e)){var n,i=this.cultures,s=e,r,o=s.length,a=[];for(r=0;r<o;r++){e=f(s[r]);var l,d=e.split(";");n=f(d[0]),1===d.length?l=1:(e=f(d[1]),0===e.indexOf("q=")?(e=e.substr(2),l=parseFloat(e),l=isNaN(l)?0:l):l=1),a.push({lang:n,pri:l})}for(a.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),r=0;r<o;r++)if(n=a[r].lang,t=i[n],t)return t;for(r=0;r<o;r++)for(n=a[r].lang;;){var u=n.lastIndexOf("-");if(-1===u)break;if(n=n.substr(0,u),t=i[n],t)return t}for(r=0;r<o;r++){n=a[r].lang;for(var h in i){var g=i[h];if(g.language===n)return g}}}else if("object"==typeof e)return e;return t||null},n.format=function(e,t,n){var i=this.findClosestCulture(n);return e instanceof Date?e=y(e,t,i):"number"==typeof e&&(e=E(e,t,i)),e},n.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},n.parseDate=function(e,t,n){n=this.findClosestCulture(n);var i,s,r;if(t){if("string"==typeof t&&(t=[t]),t.length)for(var o=0,a=t.length;o<a;o++){var l=t[o];if(l&&(i=w(e,l,n),i))break}}else{r=n.calendar.patterns;for(s in r)if(i=w(e,r[s],n),i)break}return i||null},n.parseInt=function(e,t,i){return p(n.parseFloat(e,t,i))},n.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var o=this.findClosestCulture(n),a=NaN,l=o.numberFormat;if(e.indexOf(o.numberFormat.currency.symbol)>-1&&(e=e.replace(o.numberFormat.currency.symbol,""),e=e.replace(o.numberFormat.currency["."],o.numberFormat["."])),e.indexOf(o.numberFormat.percent.symbol)>-1&&(e=e.replace(o.numberFormat.percent.symbol,"")),e=e.replace(/ /g,""),s.test(e))a=parseFloat(e);else if(!t&&i.test(e))a=parseInt(e,16);else{var d=T(e,l,l.pattern[0]),c=d[0],u=d[1];""===c&&"(n)"!==l.pattern[0]&&(d=T(e,l,"(n)"),c=d[0],u=d[1]),""===c&&"-n"!==l.pattern[0]&&(d=T(e,l,"-n"),c=d[0],u=d[1]),c=c||"+";var h,g,f=u.indexOf("e");f<0&&(f=u.indexOf("E")),f<0?(g=u,h=null):(g=u.substr(0,f),h=u.substr(f+1));var p,m,v=l["."],b=g.indexOf(v);b<0?(p=g,m=null):(p=g.substr(0,b),m=g.substr(b+v.length));var y=l[","];p=p.split(y).join("");var E=y.replace(/\u00A0/g," ");y!==E&&(p=p.split(E).join(""));var A=c+p;if(null!==m&&(A+="."+m),null!==h){var I=T(h,l,"-n");A+="e"+(I[0]||"+")+I[1]}r.test(A)&&(a=parseFloat(A))}return a},n.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),define("globalize",function(){}),define("brease/helper/DateFormatter",["globalize"],function(e){"use strict";var t={format:function(e,t,i,s){var r=n(t,s);i(Globalize.format(e,r.format,r.key))},formatSync:function(e,t,i){var s=n(t,i);return Globalize.format(e,s.format,s.key)},getFormat4Pattern:function(e){return brease.culture.getCurrentCulture().culture.calendar.patterns[e]},defaultPattern:"S"};function n(e,n){var i;if(void 0!==n){if(i=Globalize.findClosestCulture(n),null===i){var s=brease.culture.getCurrentCulture();console.iatWarn('invalid culture "'+n+'" -> take default culture "'+s.key+'"'),i=s.culture,n=s.key}}else i=brease.culture.getCurrentCulture().culture;return 1===e.length&&void 0===i.calendar.patterns[e]&&(console.iatWarn('invalid pattern "'+e+'" -> take default pattern "'+t.defaultPattern+'"'),e=t.defaultPattern),{format:e,key:n}}return t}),define("brease/helper/NumberFormatter",[],function(){"use strict";var e=function(){return void 0===c&&(c=this),c},t=e.prototype;t.defaults={useDigitGrouping:!1,decimalPlaces:1,minimumIntegerDigits:1,maximumIntegerDigits:8,separators:{dsp:".",gsp:","}},t.parseFloat=function(e,t){return t=t||{dsp:"."},e=e.replace(l(t),""),e=e.replace(t.dsp,"."),parseFloat(e)},t.formatNumber=function(e,t,n,i){var s=Math.abs(e),a;return a=0===s?1:e/s,-1!==s.toString().indexOf("e+")?o.call(this,s,-1===a?"-":"",i,t):r.call(this,s,-1===a?"-":"",i,t,n)},t.roundToSignificant=function(e,t){if(isNaN(e))throw new SyntaxError("value has to be a number");if(isNaN(t))throw new SyntaxError("precision has to be a positive integer >= 1");if(0===e)return e;t=Math.max(1,parseInt(t,10));var n=Math.abs(e),i=e/n,s=Math.floor(Math.log10(n))+1,r=Math.max(1,Math.round(Math.pow(10,t)/Math.pow(10,s)));return i*Math.round(r*n)/r},t.roundToFormat=function(e,t){if(isNaN(e))throw new SyntaxError("value has to be a number");if(isNaN(t))throw new SyntaxError("decimalPlaces has to be a positive integer >= 0");if(0===e)return e;t=Math.max(0,parseInt(t,10));var n=Math.abs(e),i=e/n,s=Math.max(1,Math.pow(10,t));return n>0&&n*s<Number.MAX_VALUE?i*Math.round(n*s)/s:e};function n(e,t){var n=this.defaults.separators[e];return t&&t[e]&&(n=t[e]),n}function i(e,t,n){var i=this.defaults[e];return t&&t[e]>=n&&(i=parseInt(t[e],10)),i}function s(e,t,n,i){var s=Math.floor(Math.log10(e)),r=e/Math.pow(10,s),o=Math.round(r*Math.pow(10,n))/Math.pow(10,n);10===o&&(o=1,s+=1);var a=o.toFixed(n).split(".");return a.length>1?t+a[0]+i+a[1]+"e+"+s:t+a[0]+"e+"+s}function r(e,t,r,o,l){var d=n.call(this,"dsp",r),c=n.call(this,"gsp",r),u=i.call(this,"decimalPlaces",o,0),h=i.call(this,"minimumIntegerDigits",o,1),g=i.call(this,"maximumIntegerDigits",o,1),f,p="";h>g&&(g=h);var m=e.toFixed(u).split(".");if(u>0&&(p=m[1]),m[0].length>g)return s(e,t,u,d);if(h>0&&h>m[0].length){f=(parseInt(m[0],10)/Math.pow(10,h-1)).toFixed(h-1).replace(".","")}else f=m[0];return!0===l&&(f=a(f,c)),t+f+(""!==f&&""!==p?d:"")+p}function o(e,t,n,i){var s=this.defaults.separators.dsp;n&&n.dsp&&(s=n.dsp);var r=e.toString().split("e+");return r[0]=parseFloat(r[0]).toFixed(i.decimalPlaces),r[0]=r[0].replace(".",s),t+r.join("e+")}function a(e,t){return e.split(d).join(t)}function l(e){return u.gsp!==e.gsp&&(u.gsp=e.gsp,h=new RegExp("\\"+e.gsp,"g")),h}var d=/(?=(?:\d{3})+(?:\.|$))/g,c,u={},h;return e}),define("brease/helper/stubs/RuntimeService",["brease/events/EventDispatcher","brease/events/ServerEvent","brease/controller/objects/VisuStatus"],function(EventDispatcher,ServerEvent,VisuStatus){"use strict";var e=function e(t,n,i){this.testData={};for(var s in t)this.testData[s.toLowerCase()]=t[s];this.subscriptions=n||{},this.eventSubscriptions=i||{}};e.prototype=new EventDispatcher,e.prototype.constructor=e;var t=e.prototype;t.loadVisuData=function(e,t,n){e=e.toLowerCase(),"function"==typeof t&&(this.testData&&this.testData[e]?t({success:!0,visuData:this.testData[e]},n):"malformedvisu"===e?t({success:!1,status:"parsererror"},n):t({success:!1,status:VisuStatus.NOT_FOUND},n))},t.activateVisu=function(e,t,s){console.warn("activateVisu:"+e),window.setTimeout(n.bind(this,t,s),50),window.setTimeout(i.bind(this,{visuId:e.toLowerCase()},ServerEvent.VISU_ACTIVATED),150)},t.activateContent=function(e,t,s,r){console.log("activateContent:"+e+",visuId="+t),window.setTimeout(n.bind(this,s,r),50),window.setTimeout(i.bind(this,{visuId:t.toLowerCase(),contentId:e},ServerEvent.CONTENT_ACTIVATED),100)},t.deactivateContent=function(e,t,s,r){console.log("deactivateContent:"+e+",visuId="+t),window.setTimeout(n.bind(this,s,r),50),window.setTimeout(i.bind(this,{visuId:t.toLowerCase(),contentId:e},ServerEvent.CONTENT_DEACTIVATED),100)},t.deactivateVisu=function(e){console.log("deactivateVisu:"+e)},t.getSessionEventSubscription=function(){return{success:!0,eventSubscriptions:[]}},t.getEventSubscription=function(e,t,n,i){n({status:{code:0,message:""},success:!0,eventSubscriptions:this.eventSubscriptions[e]},i)},t.getSubscription=function(e,t,n,i){n({status:{code:0,message:""},success:!0,subscriptions:this.subscriptions[e]},i)},t.setClientInformation=function(e){console.log("%csetClientInformation:"+e,"color:#cc00cc;")},t.sendUpdate=function(e){console.info("%csendUpdate:"+JSON.stringify(e),"color:darkgreen")},t.sendEvent=function(e){console.log("sendEvent:",JSON.stringify(e))},t.opcuaReadNodeHistory=function(){
console.log("opcuaReadNodeHistory:",JSON.stringify(arguments))},t.opcuaReadHistoryCount=function(){console.log("opcuaReadHistoryCount:",JSON.stringify(arguments))},t.opcuaReadHistoryStart=function(){console.log("opcuaReadHistoryStart:",JSON.stringify(arguments))},t.opcuaReadHistoryEnd=function(){console.log("opcuaReadHistoryEnd:",JSON.stringify(arguments))},t.opcuaBrowse=function(){console.log("opcuaBrowse:",JSON.stringify(arguments))},t.opcuaCallMethod=function(){console.log("opcuaCallMethod:",JSON.stringify(arguments))},t.opcuaRead=function(){console.log("opcuaRead:",JSON.stringify(arguments))},t.triggerServerAction=function(e,t,n,i){var s="action";this.dispatchEvent({event:s,detail:{action:e,target:t,actionArgs:i||{},actionId:n}},s)},t.initLangModule=function(e){var t=this;this.langModule=e,this.loadLanguages=function(e){e({current_language:t.langModule.current_language,languages:t.langModule.languages,success:t.langModule.loadSuccess})},this.loadTexts=function(e,n,i){n(t.langModule.text[e],i)},this.loadSystemTexts=function(e,n,i){n(t.langModule.text[e],i)},this.getUnitSymbols=function(e,n,i,s){for(var r={},o=0;o<n.length;o+=1)void 0!==t.langModule.unitSymbols[e][n[o]]&&(r[n[o]]=t.langModule.unitSymbols[e][n[o]]);window.setTimeout(function(){i({unitSymbols:r},s)},10)},this.switchLanguage=function(e,n){t.langModule.switchSuccess&&(t.langModule.current_language=e),n({success:t.langModule.switchSuccess})}};function n(e,t){e({status:{code:0},success:!0},t)}function i(e,t){this.dispatchEvent({event:t,detail:e},t)}return e}),define("brease/helper/stubs/Server",["brease/events/EventDispatcher","brease/events/ServerEvent","brease/events/ClientSystemEvent"],function(EventDispatcher,ServerEvent,ClientSystemEvent){"use strict";var e={client:{id:"ClientIdFromServerStub"},subscriptions:{},eventSubscriptions:{},sessionEventSubscriptions:[{event:ClientSystemEvent.KEY_PRESS},{event:ClientSystemEvent.KEY_UP},{event:ClientSystemEvent.KEY_DOWN},{event:ClientSystemEvent.CONTENT_LOADED}],measurementSystems:{measurementSystemList:{metric:{description:"Metrisch"},imperial:{description:"Imperial"},"imperial-us":{description:"Imperial U.S."}},current_measurementSystem:"metric"},language:{data:{languages:{de:{description:"Deutsch",index:2},en:{description:"English",index:1},fr:{description:"Franais",index:5},zh:{description:"",index:4},ko:{description:"",index:3},ja:{description:"",index:6}},current_language:"de"},texts:{de:{"BR/IAT/brease.common.attention":"Achtung","BR/IAT/brease.common.connectionError.text":"Die Verbindung zum Server wurde unterbrochen!","BR/IAT/brease.common.transferStart":"Transfer gestartet - bitte warten Sie bis der Server bereit ist!","BR/IAT/brease.common.ok":"ok","BR/IAT/brease.common.yes":"ja","BR/IAT/brease.common.no":"nein","BR/IAT/brease.common.cancel":"abbrechen","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.enter":"enter","BR/IAT/brease.common.reset":"reset","BR/IAT/brease.common.pageloading":"Seite wird geladen...","BR/IAT/brease.error.STARTPAGE_NOT_FOUND":"Startseite nicht gefunden!","BR/IAT/brease.error.DIALOG_NOT_FOUND":"Dialog nicht gefunden!","BR/IAT/brease.error.NO_PAGES_FOUND":"Achtung: keine Pages in Visualisierung angegeben!","BR/IAT/brease.error.NO_LAYOUTS_FOUND":"Achtung: keine Layouts in Visualisierung angegeben!","BR/IAT/brease.error.INCORRECT_VISU":'Visualisierung (id="{1}") kann nicht dargestellt werden!',"BR/IAT/brease.error.VISU_NOT_FOUND":'Visualisierung (id="{1}") nicht gefunden!',"BR/IAT/brease.error.LAYOUT_NOT_FOUND":"Layout nicht gefunden!","BR/IAT/brease.error.CONTENT_NOT_FOUND":"Content nicht gefunden!","BR/IAT/brease.error.ACTIVATE_VISU_FAILED":'Zugriff verweigert! Lizenz fr die Visualisierung "{1}" nicht vorhanden!',"IAT/brease.unittest.text1":"text1_de","IAT/brease.unittest.text2":"text2_de","IAT/unit.temp.gc":"C","IAT/unit.time.sec":"s","IAT/unit.pieces":"Stk","IAT/brease.common.today":"heute","IAT/brease.common.languages":"Sprachen","IAT/brease.demo.home":"Startseite","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startseite","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Kontakt","IAT/brease.demo.buttonbar.btn04":"Hilfe","IAT/brease.demo.buttons.example":"Beispiel Button","IAT/brease.demo.differentText":"anderer text","IAT/brease.demo.dropdown.prompt":"bitte whlen","IAT/brease.demo.dropdown.testoption1":"Auswahl 1","IAT/brease.demo.dropdown.testoption2":"Auswahl 2","IAT/brease.demo.dropdown.testoption3":"Auswahl 3","IAT/brease.demo.dropdown.testoption4":"Auswahl 4","IAT/brease.demo.dropdown.testoption5":"Auswahl 5","IAT/brease.format.y":"Y","IAT/snippetSample":"enthaelt ein snippet: {$IAT/unit.temp.gc}","IAT/snippetError":"snippetError: {$IAT/unit.temp.gc}"},en:{"BR/IAT/brease.common.attention":"Attention","BR/IAT/brease.common.connectionError.text":"Connection to server is lost!","BR/IAT/brease.common.transferStart":"Server transfer started - please wait for reconnection!","BR/IAT/brease.common.ok":"ok","BR/IAT/brease.common.yes":"yes","BR/IAT/brease.common.no":"no","BR/IAT/brease.common.cancel":"cancel","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.enter":"enter","BR/IAT/brease.common.reset":"reset","BR/IAT/brease.common.pageloading":"page is loading...","BR/IAT/brease.error.STARTPAGE_NOT_FOUND":"Startpage not found!","BR/IAT/brease.error.DIALOG_NOT_FOUND":"Dialog not found!","BR/IAT/brease.error.NO_PAGES_FOUND":"Attention: no pages declared!","BR/IAT/brease.error.NO_LAYOUTS_FOUND":"Attention: no layouts declared","BR/IAT/brease.error.INCORRECT_VISU":'Visualization (id="{1}") could not be displayed!',"BR/IAT/brease.error.VISU_NOT_FOUND":'Visualization (id="{1}") not found!',"BR/IAT/brease.error.LAYOUT_NOT_FOUND":"Layout not found!","BR/IAT/brease.error.CONTENT_NOT_FOUND":"Content not found!","BR/IAT/brease.error.ACTIVATE_VISU_FAILED":'Not allowed! License not available for visualization "{1}"!',"IAT/brease.unittest.text1":"text1_en","IAT/brease.unittest.text2":"text2_en","IAT/unit.temp.gc":"C","IAT/unit.time.sec":"s","IAT/unit.pieces":"pcs","IAT/brease.common.today":"today","IAT/brease.common.languages":"Languages","IAT/brease.demo.home":"Home","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startpage","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Contact","IAT/brease.demo.buttonbar.btn04":"Help","IAT/brease.demo.buttons.example":"Example Button","IAT/brease.demo.differentText":"different text","IAT/brease.demo.dropdown.prompt":"please select","IAT/brease.demo.dropdown.testoption1":"option 1","IAT/brease.demo.dropdown.testoption2":"option 2","IAT/brease.demo.dropdown.testoption3":"option 3","IAT/brease.demo.dropdown.testoption4":"option 4","IAT/brease.demo.dropdown.testoption5":"option 5","IAT/brease.format.y":"t","IAT/snippetSample":"enthaelt ein snippet: {$IAT/unit.temp.gc}","IAT/snippetError":"snippetError: {$IAT/unit.temp.gc}"},fr:{"IAT/unit.temp.gc":"C","IAT/unit.time.sec":"s","IAT/brease.unittest.text1":"text1_fr","IAT/brease.unittest.text2":"text2_fr"},zh:{"IAT/unit.temp.gc":"C","IAT/unit.time.sec":"s","IAT/brease.unittest.text1":"text1_zh","IAT/brease.unittest.text2":"text2_zh"},ko:{"BR/IAT/brease.common.attention":"Attention","BR/IAT/brease.common.transferStart":"transferStart","BR/IAT/brease.common.yes":"","BR/IAT/brease.common.no":"","BR/IAT/brease.common.ok":"","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.cancel":"","IAT/brease.unittest.text1":"text1_kr","IAT/brease.unittest.text2":"text2_kr","IAT/unit.temp.gc":"","IAT/unit.time.sec":"s","IAT/unit.pieces":"","IAT/brease.common.today":"today","IAT/brease.common.languages":" ","IAT/brease.demo.home":"","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startpage","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Contact","IAT/brease.demo.buttonbar.btn04":"Help","IAT/brease.demo.buttons.example":"Example Button","IAT/brease.demo.differentText":"different text","IAT/brease.demo.dropdown.prompt":"please select","IAT/brease.demo.dropdown.testoption1":"option 1","IAT/brease.demo.dropdown.testoption2":"option 2","IAT/brease.demo.dropdown.testoption3":"option 3","IAT/brease.demo.dropdown.testoption4":"option 4","IAT/brease.demo.dropdown.testoption5":"option 5"}},units:{INH:"in",MTR:"m",GRM:"g"}},culture:{data:{cultures:{de:{description:"German"},en:{description:"English"},fr:{description:"French"},zh:{description:"Chinese"}},current_culture:"de"}},visus:{Visu:{startPage:"miscPage",startTheme:"DemoTheme",pages:{miscPage:{layout:"main",assignments:[{areaId:"A0",contentId:"navigationContent",type:"Content",style:"navigation"},{areaId:"A1",contentId:"miscContent",type:"Content"}]},groupBoxPage:{layout:"main",assignments:[{areaId:"A0",contentId:"navigationContent",type:"Content",style:"navigation"},{areaId:"A1",contentId:"embeddedVisu",type:"Visu"}]}},navigations:{mainNav:{pages:{miscPage:{targets:["groupBoxPage"]},groupBoxPage:{targets:["miscPage"]}}}},layouts:{main:{areas:{A0:{height:50,width:780,top:0,left:0,zIndex:2},A1:{height:500,width:780,top:50,left:0,zIndex:1}},width:780,height:550}},contents:{navigationContent:{path:"/contents/mappView/navigationContent.html",height:50,width:780},miscContent:{path:"/contents/mappView/miscContent.html",height:500,width:780}},themes:["DemoTheme","BuRThemeFlat1"],configurations:{activityCount:!1,watchdog:0,zoom:!1,bootLogo:"Media/images/DKT.png",bootColor:"rgb(156,26,32)",favicon:"Media/images/DKTicon.png"}},embeddedVisu:{startPage:"embedded_page1",pages:{embedded_page1:{layout:"embedded_L1",assignments:[{areaId:"A1",contentId:"groupBoxContent",type:"Content"}]}},layouts:{embedded_L1:{width:780,height:500,areas:{A1:{height:500,width:780,top:0,left:0}}}},contents:{groupBoxContent:{path:"/contents/mappView/groupBoxContent.html",height:500,width:780}}}}};function t(e,t,n){var i=t.split(".");if(1===i.length)e[t]=n;else{for(var s=0,r=i.length;s<r-1;s+=1)e=e[i[s]];e[i[r-1]]=n}}var n=new EventDispatcher;return n.getModelData=function(t,n){return e[t]?e[t][n]:void 0},n.setModelData=function(n,i){t(e,n,i)},n.setData=function(t){for(var n=0;n<t.length;n+=1)if(t[n].event===ServerEvent.PROPERTY_VALUE_CHANGED)for(var i=0;i<t[n].eventArgs.length;i+=1)for(var s=t[n].eventArgs[i],r=0;r<s.data.length;r+=1){var o=s.data[r];e[s.refId]=e[s.refId]||{},e[s.refId][o.attribute]=o.value}else"PropertyUnitChanged"===t[n].event&&t[n].eventArgs.forEach(function(t){t.data&&t.data.forEach(function(n){e[t.refId]=e[t.refId]||{},e[t.refId][n.attribute].unit=n.unit})})},n.addSubscriptions=function(t){var n=t.contentId;e.subscriptions[n]=e.subscriptions[n]||{subscriptions:[]};for(var i=0;i<t.subscriptions.length;i+=1)e.subscriptions[n].subscriptions.push(t.subscriptions[i])},n.removeSubscriptions=function(t){var n=t.contentId,i=t.subscriptions,s=[];e.subscriptions[n]&&(s=e.subscriptions[n].subscriptions.filter(function(e){for(var t=!0,n=0;n<i.length;n+=1)e.refId===i[n].refId&&e.attribute===i[n].attribute&&(t=!1);return t}),e.subscriptions[n].subscriptions=s)},n.addEventSubscriptions=function(t){var n=t.contentId;e.eventSubscriptions[n]=e.eventSubscriptions[n]||{eventSubscriptions:[]};for(var i=0;i<t.eventSubscriptions.length;i+=1)e.eventSubscriptions[n].eventSubscriptions.push(t.eventSubscriptions[i])},n.getSubscriptions=function(t){return void 0!==e.subscriptions[t]?e.subscriptions[t].subscriptions:[]},n.getVisuData=function(t){return e.visus[t]},n.setCurrentLanguage=function(t){e.language.data.current_language=t},n.getCurrentText=function(){return $.extend({},e.language.texts.de,e.language.texts[e.language.data.current_language])},n.getLanguages=function(){return e.language.data},n.getAllUnitSymbols=function(){return e.language.units},n.getUnitSymbol=function(t){return e.language.units[t]},n.getCultures=function(){return e.culture.data},n.setCurrentCulture=function(t){e.culture.data.current_culture=t},n.getMMSystems=function(){return e.measurementSystems},n.setCurrentMMS=function(t){e.measurementSystems.current_measurementSystem=t},n.getEventSubscriptions=function(t){return void 0!==e.eventSubscriptions[t]?e.eventSubscriptions[t].eventSubscriptions:[]},n.getSessionEventSubscriptions=function(){return void 0!==e.sessionEventSubscriptions?e.sessionEventSubscriptions:[]},n}),define("brease/helper/stubs/ServiceBridge",["brease/helper/stubs/Server","brease/controller/objects/VisuStatus","brease/controller/libs/ErrorCode","brease/events/ServerEvent"],function(Server,VisuStatus,ErrorCode,ServerEvent){"use strict";var e=0,t={addSubscriptions:function(){Server.addSubscriptions.apply(Server,arguments)},addEventSubscriptions:function(){Server.addEventSubscriptions.apply(Server,arguments)},getModelData:function(){return Server.getModelData.apply(Server,arguments)},setModelData:function(){Server.setModelData.apply(Server,arguments)},setData:function(e,t,s){"timeout"===s?i[e]=t:n[e]=t},getData:function(e){return n[e]}},n={registerClientResponseCode:0,activateVisuSuccessResponseCode:0,activateVisuFailResponseCode:ErrorCode.NO_LICENSE,visusWithoutLicense:["visuwithoutlicense"]},i={activateContent:10,deactivateContent:10,activateVisu:50,registerClient:25};function s(e,t,n,s){i[e]>0?window.setTimeout(function(){t(n,s)},i[e]):t(n,s)}var r={authenticate:function(e,t){var n=(new Date).valueOf();for(var i in o)if(l(o[i].username,e)&&l(o[i].password,t))return o[i].signature=n,{userID:e,isAuthenticated:!0,signature:n};return{userID:e,isAuthenticated:!1,signature:n}},setCurrentUser:function(){},triggerUserChange:function(e){r.currentUser=e;var t=ServerEvent.USER_CHANGED;Server.dispatchEvent({event:t,detail:{user:e}},t)}};r.currentUser=r.authenticate("anonymous","");var o=[{username:"anonymous",password:""},{username:"martin",password:"iat"}],a={anonymous:["Everyone"],TestUser99:["Everyone","Administrators"]};function l(e,t){return 0===e.indexOf(t)&&e.length===t.length}function d(e,t,n,i){n(e,i)}function c(e,t,n){t(e,n)}function u(e,t,n,i){var s={Data:e};t&&(s.Parameter=t),n(s,i)}return{respondWith:function(e,t){this[e]="data"===t?c:"dataAndParameter"===t?u:d.bind(null,t)},createBindings:function(e,t,n,i,s){var r={status:{code:0},bindingsStatus:[]},o=[];n.forEach(function(e){"brease"===e.target.type?(o.push({refId:e.target.refId,attribute:e.target.attribute}),r.bindingsStatus.push({code:0})):r.bindingsStatus.push({code:255})}),o.length>0&&Server.addSubscriptions({contentId:e,subscriptions:o}),i(r,s)},deleteBindings:function(e,t,n,i,s){var r={status:{code:0},bindingsStatus:[]},o=[];n.forEach(function(e){console.debug(e),o.push({refId:e.refId,attribute:e.attribute}),r.bindingsStatus.push({code:0})}),o.length>0&&Server.removeSubscriptions({contentId:e,subscriptions:o}),i(r,s)},deactivateContent:function(e,t,n,s){var r={success:!0,contentId:e},o=ServerEvent.CONTENT_DEACTIVATED,a={event:o,detail:{contentId:e,success:!0}};n(r,s),window.setTimeout(function(){Server.dispatchEvent(a,o)},i.deactivateContent)},getSubscription:function(e,t,n,i){var s={contentId:e,success:!0};s.subscriptions=Server.getSubscriptions(e),n(s,i)},activateContent:function(e,t,n,r){s("activateContent",n,{success:!0},r);var o=ServerEvent.CONTENT_ACTIVATED,a={event:o,detail:{contentId:e,success:!0}};i.activateContent>0?window.setTimeout(function(){Server.dispatchEvent(a,o)},i.activateContent>0?i.activateContent+10:0):Server.dispatchEvent(a,o)},activateVisu:function(e,t,r){var o=n.activateVisuSuccessResponseCode;-1!==n.visusWithoutLicense.indexOf(e.toLowerCase())&&(o=n.activateVisuFailResponseCode),s("activateVisu",t,{success:!0,status:{code:o}},r);var a=ServerEvent.VISU_ACTIVATED,l={event:a,detail:{visuId:e.toLowerCase()}};window.setTimeout(function(){Server.dispatchEvent(l,a)},i.activateVisu+10)},registerClient:function(e,i){var r={status:{code:n.registerClientResponseCode}};0!==n.registerClientResponseCode?r.Error={Code:9,Text:"Visualization already open on this client, no further sessions allowed"}:(r.success=!0,r.ClientId=t.getModelData("client","id")),s("registerClient",i,r)},deactivateVisu:function(e,t,n){var i={success:!0};"function"==typeof t&&t(i,n)},loadConfiguration:function(e,t){e({success:!0,configuration:{ContentCaching:{cachingSlots:"0",preserveOldValues:"TRUE"}}},t)},loadVisuData:function(e,t,n){if("project"===brease.config.mockType)$.getJSON("/"+e+".json",function(e){t({success:!0,visuData:e},n)}).fail(function(e,i,s){console.log("error:"+JSON.stringify({status:i,errorMessage:s.toString()})),t({success:!1,status:i},n)});else if("malformedvisu"===e.toLowerCase())t({success:!1,status:"parsererror"},n);else{var i=Server.getVisuData(e);i?t({success:!0,visuData:i},n):t({success:!1,status:VisuStatus.NOT_FOUND},n)}},logEvents:function(e,t){t({success:!0,verboseLvl:255})},loadLanguages:function(e){var t=Server.getLanguages();t.success=!0,e(t)},switchLanguage:function(e,t){Server.setCurrentLanguage(e),t({langKey:e,success:!0})},loadTexts:function(e,t,n){var i=Server.getCurrentText();i.success=!0,t(i,n)},loadSystemTexts:function(e,t,n){var i=Server.getCurrentText();i.success=!0,t(i,n)},getAllUnitSymbols:function(e,t,n){if(void 0!==e){t({unitSymbols:Server.getAllUnitSymbols(),success:!0},n)}},getUnitSymbols:function(e,t,n,i){if(void 0!==e){for(var s={},r=0;r<t.length;r+=1)s[t[r]]=Server.getUnitSymbol(t[r]);n({unitSymbols:s,success:!0},i)}},loadCultures:function(e){var t=Server.getCultures();t.success=!0,e(t)},switchCulture:function(e,t){Server.setCurrentCulture(e),t({cultureKey:e,success:!0})},loadMeasurementSystemList:function(e){var t=Server.getMMSystems();t.success=!0,e(t)},switchMeasurementSystem:function(e,t,n){void 0!==e&&(Server.setCurrentMMS(e),t({success:!0},n))},authenticateUser:function(e,t,n){var i=r.authenticate(e,t);n(void 0!==i?{success:!0,user:i}:{success:!1})},setCurrentUser:function(e,t){r.currentUser=e,"function"==typeof t&&t({success:!0}),r.triggerUserChange(e)},loadCurrentUser:function(e){e({success:!0,user:r.currentUser})},setDefaultUser:function(e){var t=r.authenticate("anonymous","");r.currentUser=t,e({success:!0,user:r.currentUser}),r.triggerUserChange(t)},userHasRoles:function(e,t){for(var n={},i=0;i<e.length;i+=1)n[e[i]]="NotInRole"!==e[i];t({success:!0,roles:n})},loadUserRoles:function(e,t){e({success:!0,roles:a[r.currentUser.userID]||["Everyone"]},t)},formatText:function(e,t,n){if(-1!==e.indexOf("snippetError"))n({success:!1,string:e});else{for(var i=0;i<t.length;i+=1)e=e.replace(new RegExp("\\{"+(i+1)+"\\}",["g"]),t[i]);n({success:!0,string:e})}},setClientInformation:function(){},getEventSubscription:function(e,t,n,i){var s={contentId:e,success:!0};s.eventSubscriptions=Server.getEventSubscriptions(e),n(s,i)},getSessionEventSubscription:function(e,t){var n={contentId:"_session",success:!0};n.eventSubscriptions=Server.getEventSubscriptions(),e(n,t)},testServices:t,mocked:!0,opcuaReadNodeHistory:function(e,t,n,i){n({success:!0},i)},opcuaReadHistoryCount:function(e,t,n,i){n({success:!0},i)},opcuaReadHistoryStart:function(e,t,n,i){n({success:!0},i)},opcuaReadHistoryEnd:function(e,t,n,i){n({success:!0},i)},opcuaBrowse:function(e,t,n,i){n({success:!0},i)},opcuaCallMethod:function(e,t,n,i){n({success:!0},i)},opcuaRead:function(e,t,n,i){n({success:!0},i)}}}),define("brease/helper/stubs/WebSocket",["brease/helper/stubs/Server","brease/events/ServerEvent","brease/events/BreaseEvent"],function(Server,ServerEvent,BreaseEvent){"use strict";var e=0;function t(e){if("LanguageChangedByEditor"===e.detail.event){var t=ServerEvent.LANGUAGE_CHANGED;Server.dispatchEvent({event:t,detail:{currentLanguage:e.detail.currentLanguage}},t)}}return{send:function(e){var t;try{t=JSON.parse(e)}catch(e){console.log("PARSE ERROR:"+e.message)}t&&"update"===t.Command&&Server.setData(t.Data)},getModelData:function(e,t){return Server.getModelData(e,t)},start:function(e){e(!0),document.body.addEventListener("EditorEvent",t),window.setTimeout(function(){var e=ServerEvent.SESSION_ACTIVATED;Server.dispatchEvent({event:e},e)},0)},startHeartbeat:function(){},addEventListener:function(e,t){Server.addEventListener(e,t)},removeEventListener:function(e,t){Server.removeEventListener(e,t)},triggerServerAction:function(e,t,n,i){var s="action";Server.dispatchEvent({event:s,detail:{action:e,target:t,actionArgs:i||{},actionId:n}},s)},triggerServerChange:function(e,t,n){var i=ServerEvent.PROPERTY_VALUE_CHANGED;Server.dispatchEvent({event:i,detail:[{data:[{attribute:t,value:n}],refId:e}]},i)},triggerConnectionStateChange:function(e){var t=BreaseEvent.CONNECTION_STATE_CHANGED;Server.dispatchEvent({event:t,detail:{state:e}},t)},triggerContentActivated:function(e){var t=ServerEvent.CONTENT_ACTIVATED;Server.dispatchEvent({event:t,detail:{contentId:e}},t)}}}),define("brease/helper/Timer",["brease/events/EventDispatcher","brease/events/BreaseEvent"],function(e,BreaseEvent){"use strict";var Timer=function Timer(e){this.active=!1,this.interval=e,this.start()},t=Timer.prototype=new e;return t.start=function(){!1===this.active&&(this.ticker=window.setInterval(this.tickHandler.bind(this),this.interval),this.active=!0)},t.stop=function(){window.clearInterval(this.ticker),this.active=!1},t.tickHandler=function(){this.dispatchEvent(new CustomEvent(BreaseEvent.TICK,{detail:{timestamp:Date.now()}}))},t.addEventListener=function(t,n,i){e.prototype.addEventListener.call(this,t,n,i),this.start()},t.removeEventListener=function(t,n){e.prototype.removeEventListener.call(this,t,n),!1===this.hasListenersOfType("tick")&&this.stop()},t.dispose=function(){window.clearInterval(this.ticker)},Timer}),define("brease/objects/Response",[],function(){"use strict";var e={fromXHR:function(e){return""!==e?t(e):{success:!1}}};function t(e){try{var t=JSON.parse(e);return t.Error||t.error?(t.success=!1,t.error&&(t.Error={Code:-1,Text:t.error},delete t.error),t):(void 0===t.success&&(t.success=!0),t)}catch(e){return console.iatWarn("malformed data in server response!"),{success:!1,Error:{Code:-1,Text:"malformed data in server response"}}}}return e}),define("brease/helper/XHR",["brease/objects/Response","brease/core/Utils"],function(e,Utils){"use strict";var XHR=function(){try{this.xhr=new XMLHttpRequest,this.ontimeout=n.bind(this),this.onreadystatechange=t.bind(this)}catch(e){return console.log("XMLHttpRequest not supported!"),null}};XHR.prototype.open=function e(t,n){"GET"===t&&(n=Utils.addTimestamp(n)),this.xhr.open(t,n,!0),this.xhr.setRequestHeader("Content-Type","application/json; charset=utf-8"),this.xhr.setRequestHeader("Cache-Control","no-cache"),this.xhr.setRequestHeader("Accept","*/*"),this.xhr.ontimeout=this.ontimeout,this.xhr.onreadystatechange=this.onreadystatechange},XHR.prototype.send=function e(t,n){this.callback=n,this.xhr.send(t)};function t(){if(this.xhr.readyState===XMLHttpRequest.DONE){if(this.xhr.status===XMLHttpRequest.UNSENT)return console.log("%chttp status 0 for server connection!","color:#fa00f1;"),void 0;this.xhr.ontimeout=void 0,this.xhr.onreadystatechange=void 0,"function"==typeof this.callback&&this.callback(e.fromXHR(this.xhr.responseText),this.callbackInfo),this.callback=void 0,this.callbackInfo=void 0,this.active=!1}}function n(){this.xhr.ontimeout=void 0,this.xhr.onreadystatechange=void 0,this.callback=void 0,this.callbackInfo=void 0,this.active=!1}return XHR}),define("brease/helper/XHRPool",["brease/helper/XHR"],function(XHR){"use strict";var XHRPool={getXHR:function(n){var i=t();return void 0===i&&(i=new XHR,e.push(i)),i.active=!0,i.callbackInfo=n,i}},e=[];function t(){for(var t,n=0;n<e.length;n+=1)if(!0!==e[n].active){t=e[n];break}return t}return XHRPool}),define("brease/services/Configuration",["brease/services/Preloader"],function(e){"use strict";var Configuration={init:function(e){return t=e,this},loadConfigurations:function(r){r&&i(r);var o=$.Deferred(),a=e.get("configuration");return a?(s(a),o.resolve()):t.loadConfiguration(n,{deferred:o}),o.promise()}},t;function n(e,t){!0===e.success?(e.configuration&&s(e.configuration),t.deferred.resolve()):t.deferred.reject()}function i(e){brease.config.visu.zoom=r(e.zoom),brease.config.visu.browserZoom=o(e.browserZoom),brease.config.visu.activityCount=a(e.activityCount),brease.config.visu.bootProgressBar=l(e.bootProgressBar),brease.config.watchdog=d(e.watchdog),brease.config.gestures=c(e.gestures),brease.config.virtualKeyboards=u(e.virtualKeyboards)}function s(e){brease.config.ContentCaching={preserveOldValues:e.ContentCaching&&"TRUE"===e.ContentCaching.preserveOldValues,cachingSlots:e.ContentCaching&&void 0!==e.ContentCaching.cachingSlots?Math.min(parseInt(e.ContentCaching.cachingSlots,10),brease.settings.cachingSlotsMax):brease.settings.cachingSlotsDefault}}function r(e){return"true"===e||!0===e}function o(e){return"true"===e||!0===e}function a(e){return"true"===e||!0===e}function l(e){return!("true"!==e&&!0!==e)}function d(e){return void 0===brease.config.watchdog&&void 0!==e?parseInt(e,10):brease.config.watchdog}function c(e){return e||void 0}function u(e){return e||void 0}return Configuration}),define("brease/services/Culture",["brease/events/BreaseEvent","brease/core/Utils","brease/config","globalize"],function(BreaseEvent,Utils,e){"use strict";var Culture={init:function(){return document.body.addEventListener(BreaseEvent.LANGUAGE_CHANGED,s),this},isReady:function(){var e=$.Deferred();return i(brease.language.getCurrentLanguage(),!1,e),e.promise()},getCurrentCulture:function(){return t},switchCulture:function(e){i(e,!0)},findClosestCulture:function(e){var t=$.Deferred(),n=Globalize.findClosestCulture(e);return null!==n?t.resolve(n):require(["libs/cultures/globalize.culture."+e],function(){t.resolve(Globalize.findClosestCulture(e))},function(){t.resolve(Globalize.cultures.default)}),t.promise()},defaultCulture:{key:Globalize.cultures.default.name,culture:Globalize.cultures.default}},t={};function n(e){Globalize.culture(e.name),t={key:e.name,culture:e}}function i(e,i,s){$.when(brease.culture.findClosestCulture(e)).then(function(e){n(e),!0===i&&document.body.dispatchEvent(new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:{currentCulture:t.key}})),s&&s.resolve()})}function s(){i(brease.language.getCurrentLanguage(),!0)}return Culture}),define("brease/services/Language",["brease/events/BreaseEvent","brease/events/ServerEvent","brease/core/Utils","brease/config"],function(BreaseEvent,ServerEvent,Utils,e){"use strict";var Language={init:function(e){return a=e,a.addEventListener(ServerEvent.LANGUAGE_CHANGED,v),this},isReady:function(){return o=$.Deferred(),h(),o.promise()},loadAllTexts:function(){return o=$.Deferred(),a.loadTexts(n.key,b,{def:o}),o.promise()},getLanguages:function(){return Utils.deepCopy(t)},getCurrentLanguage:function(){return n.key},getTextByKey:function(t){-1===t.indexOf("IAT/")&&(t="IAT/"+t);var n=i[t];return brease.config.editMode?(void 0===n&&(n=window.iatd&&window.iatd.model&&"function"==typeof window.iatd.model.getTextByKey?window.iatd.model.getTextByKey(t):t),n!==t?n:(console.iatWarn("undefined text key:"+t),"$"+t)):void 0!==n?n:(console.iatWarn("undefined text key:"+t),e.undefinedTextReturnValue)},getSystemTextByKey:function(t){var n=i[t];return void 0!==n?n:(console.iatWarn("undefined text key:"+t),e.undefinedTextReturnValue)},getFormattedTextByKey:function(t,n){var s=i[t];void 0!==s?A(s)?brease.textFormatter.format(s,[]).then(function e(t){n(t)},function e(){console.iatWarn('error in textFormatter for textkey "'+t+'"'),n(void 0)}):n(s):(console.iatWarn("undefined text key:"+t),n(e.undefinedTextReturnValue))},switchLanguage:function(e){return o=$.Deferred(),void 0===t.languages[e]?(console.iatWarn("Language "+e+" is not defined!"),o.resolve({success:!1})):n.key===e?(console.iatInfo("Language "+e+" is current!"),o.resolve({success:!0})):(l=e,n.version=0,a.switchLanguage(e,f)),o.promise()},reloadTexts:function(){n.version+=1,a.loadTexts(n.key,y)},getCurrentVersion:function(){return n.version},setKeyText:function(e,t){i[e]=t},addTextKey:function(e,t,n){i[e]&&!0===n?i[e]=t:i[e]&&!0!==n?console.iatWarn("text key ["+e+"] already exists!"):i[e]=t},addTextKeys:function(e,t){for(var n in e)Language.addTextKey(n,e[n],t)},isKey:function(e){return Utils.isString(e)&&"$"===e.substring(0,1)},parseKey:function(e){try{return e.substring(1)}catch(e){return}},parseProperty:function(e){return Language.isKey(e)?Language.getTextByKey(Language.parseKey(e)):e},pipeAsyncUnitSymbol:function(e,t){void 0!==e?void 0!==s[e]?void 0!==t&&t(s[e]):void 0!==r[e]?d(e,t):c(e,t):void 0!==t&&t(void 0)}},t={},n={version:0},i={},s={GRM:"g",DJ:"dag",KGM:"kg",ONZ:"oz",LBR:"lb",MMT:"mm",DMT:"dm",CMT:"cm","4H":"m",MTR:"m",INH:"in",M7:"in",FOT:"ft",YRD:"yd",PAL:"Pa",KPA:"kPa",BAR:"bar",HBA:"hbar",MBR:"mbar",KBA:"kbar",CEL:"C",FAH:"F",KEL:"K",MMQ:"mm",CMQ:"cm",DMQ:"dm",INQ:"in",FTQ:"ft",YDQ:"yd",AMP:"A",B22:"kA",H38:"MA","4K":"mA",B84:"A",C39:"nA",WTT:"W",KWT:"kW",MAW:"MW",JOU:"J",KJO:"kJ",WHR:"Wh",MWH:"MWh",KWH:"kWh"},r={},o,a,l;function d(e,t){$.when(r[e].promise()).then(function(e){void 0!==t&&t(e)})}function c(e,t){r[e]=$.Deferred(),a.getUnitSymbols(n.key,[e+""],function(n){void 0!==n.unitSymbols[e]&&(s[e]=n.unitSymbols[e]),r[e].resolve(s[e]),r[e]=void 0,t(s[e])})}function u(e,t){!0===e?o.resolve(t):o.reject(t)}function h(){a.loadLanguages(g)}function g(e){!0===e.success?(t={languages:e.languages,current_language:e.current_language},n.key=t.current_language,$.when(m("system"),p()).then(function(){u(!0,"languages and texts loaded successfully"),document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_LOADED,{detail:{currentLanguage:n.key}}))},function(e){console.log("fail:",arguments)})):u(!1,"languages load error")}function f(e){!0===e.success?(n.key=l,$.when(m("all"),p()).then(function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}}))},function(e){console.log("fail:",arguments)}),o.resolve({success:!0})):(console.iatWarn("service switchLanguage failed!"),document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}})),o.resolve({success:!1}))}function p(){var e=$.Deferred();return a.getUnitSymbols(n.key,Object.keys(s),E,{requestedLang:n.key,def:e}),e.promise()}function m(e){var t=$.Deferred();return"system"===e?a.loadSystemTexts(n.key,b,{def:t}):a.loadTexts(n.key,b,{def:t}),t.promise()}function v(e){n.key=e.detail.currentLanguage,document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}}))}function b(e,t){i=brease.config.mocked?Utils.deepCopy(e):e,t.def&&t.def.resolve()}function y(e){i=brease.config.mocked?Utils.deepCopy(e):e,document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}}))}function E(e,t){e.unitSymbols?(s=e.unitSymbols,t.def.resolve()):(console.iatWarn("error on fetching unit symbols!"),t.def.reject())}function A(e){return void 0!==e&&-1!==e.indexOf("{")}return Language}),define("brease/services/Logger",["brease/events/BreaseEvent","brease/enum/Enum"],function(BreaseEvent,Enum){"use strict";var Logger=function(){},e=Logger.prototype;e.init=function(e){return this.runtimeService=e,this.verboseLevel=Enum.EventLoggerVerboseLevel.OFF,document.addEventListener(BreaseEvent.LOG_MESSAGE,this._logMessageHandler.bind(this)),this},e.logMessage=function(e,t,n,i){
(void 0===t||t<=this.verboseLevel)&&this.runtimeService.logEvents(e,t,n,i,this._logCallbackHandler.bind(this))},e.log=function(e,n,i,s,r,o){if(void 0===i&&(i=Enum.EventLoggerVerboseLevel.OFF),void 0!==e){var a=t(e,Enum.EventLoggerFacility.IAT,n||Enum.EventLoggerCustomer.BUR,s);this.logMessage(a,i,o||"",r||[])}},e._logMessageHandler=function(e){var n=Enum.EventLoggerVerboseLevel.OFF;if(void 0!==e.detail.verbose&&(n=e.detail.verbose),e.detail&&e.detail.code){e.detail.args=e.detail.args||[];var i=t(e.detail.code,Enum.EventLoggerFacility.IAT,e.detail.customer||Enum.EventLoggerCustomer.BUR,e.detail.severity);this.logMessage(i,n,e.detail.text,e.detail.args)}},e._logCallbackHandler=function(e){void 0!==e.verboseLvl&&(this.verboseLevel=e.verboseLvl)};function t(e,t,n,i){var s;return void 0===i&&(i=Enum.EventLoggerSeverity.INFORMATIONAL),s=e|t<<16|n<<29|i<<30,s}return new Logger}),define("brease/services/MeasurementSystem",["brease/events/BreaseEvent","brease/core/Utils"],function(BreaseEvent,Utils){"use strict";var MeasurementSystem={init:function(e){return o=e,this},isReady:function(){return s=$.Deferred(),l(),s.promise()},getMeasurementSystems:function(){return Utils.deepCopy(e)},updateMeasurementSystems:function(){return r=$.Deferred(),n!==brease.language.getCurrentLanguage()?(o.loadMeasurementSystemList(c),n=brease.language.getCurrentLanguage()):r.reject("language is current"),r.promise()},getCurrentMeasurementSystem:function(){return t},switchMeasurementSystem:function(n){return i=$.Deferred(),void 0===e[n]?(console.iatWarn("Measurement-System "+n+" is not defined!"),i.resolve({success:!1})):t===n?(console.iatInfo("Measurement-System "+n+" is current!"),i.resolve({success:!0})):o.switchMeasurementSystem(n,u,{newKey:n}),i.promise()}},e={},t="",n,i,s,r,o;function a(e,t,n){!0===t?e.resolve(n):e.reject(n)}function l(){o.loadMeasurementSystemList(d)}function d(n){_.isObject(n)&&!0===n.success?(e=n.measurementSystemList,t=n.current_measurementSystem,document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_LOADED,{detail:{currentMeasurementSystem:t}})),a(s,!0)):a(s,!1,"MeasurementSystems load error")}function c(n){_.isObject(n)&&!0===n.success?(e=n.measurementSystemList,t=n.current_measurementSystem,document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_LOADED,{detail:{currentMeasurementSystem:t}})),a(r,!0)):a(r,!1,"MeasurementSystems load error")}function u(e,n){!0===e.success?(t=n.newKey,i.resolve({success:!0})):(console.iatWarn("service switchMeasurementSystem failed!"),i.resolve({success:!1})),document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:t}}))}return MeasurementSystem}),define("brease/services/RuntimeService",[],function(){"use strict";var RuntimeService=function RuntimeService(){},e=RuntimeService.prototype;return e.init=function(e,t){this.services=e,this.socket=t},e.socketIsReady=function(){var e=$.Deferred();return this.socket.start(function(t){!0===t?e.resolve():e.reject()}),e.promise()},e.startHeartbeat=function(){this.socket.startHeartbeat.apply(this.socket,arguments)},e.addEventListener=function(){this.socket.addEventListener.apply(this.socket,arguments)},e.removeEventListener=function(){this.socket.removeEventListener.apply(this.socket,arguments)},e.loadLanguages=function(){this.services.loadLanguages.apply(this.services,arguments)},e.loadTexts=function(){this.services.loadTexts.apply(this.services,arguments)},e.loadSystemTexts=function(){this.services.loadSystemTexts.apply(this.services,arguments)},e.switchLanguage=function(){this.services.switchLanguage.apply(this.services,arguments)},e.getAllUnitSymbols=function(){this.services.getAllUnitSymbols.apply(this.services,arguments)},e.getUnitSymbols=function(){this.services.getUnitSymbols.apply(this.services,arguments)},e.loadCultures=function(){this.services.loadCultures.apply(this.services,arguments)},e.switchCulture=function(){this.services.switchCulture.apply(this.services,arguments)},e.loadMeasurementSystemList=function(){this.services.loadMeasurementSystemList.apply(this.services,arguments)},e.switchMeasurementSystem=function(){this.services.switchMeasurementSystem.apply(this.services,arguments)},e.authenticateUser=function(){this.services.authenticateUser.apply(this.services,arguments)},e.setCurrentUser=function(){this.services.setCurrentUser.apply(this.services,arguments)},e.loadCurrentUser=function(){this.services.loadCurrentUser.apply(this.services,arguments)},e.setDefaultUser=function(){this.services.setDefaultUser.apply(this.services,arguments)},e.userHasRoles=function(){this.services.userHasRoles.apply(this.services,arguments)},e.loadUserRoles=function(){this.services.loadUserRoles.apply(this.services,arguments)},e.formatText=function(){this.services.formatText.apply(this.services,arguments)},e.logEvents=function(e,t,n,i,s){var r=[];if(void 0!==e){var o={eventId:e,verboseLvl:t,text:n||"",args:i||[]};r.push(o)}this.services.logEvents(r,s)},e.getSubscription=function(){this.services.getSubscription.apply(this.services,arguments)},e.activateContent=function(){this.services.activateContent.apply(this.services,arguments)},e.deactivateContent=function(){this.services.deactivateContent.apply(this.services,arguments)},e.activateVisu=function(){this.services.activateVisu.apply(this.services,arguments)},e.deactivateVisu=function(){this.services.deactivateVisu.apply(this.services,arguments)},e.sendUpdate=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"update",Resource:"services/client",Data:e}))},e.createBindings=function(){this.services.createBindings.apply(this.services,arguments)},e.deleteBindings=function(){this.services.deleteBindings.apply(this.services,arguments)},e.getEventSubscription=function(){this.services.getEventSubscription.apply(this.services,arguments)},e.getSessionEventSubscription=function(){this.services.getSessionEventSubscription.apply(this.services,arguments)},e.sendEvent=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"event",Resource:"services/client",Data:e}))},e.actionResponse=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"actionResponse",Resource:"services/client",Data:e}))},e.setClientInformation=function(){this.services.setClientInformation.apply(this.services,arguments)},e.registerClient=function(){this.services.registerClient.apply(this.services,arguments)},e.loadVisuData=function(){this.services.loadVisuData.apply(this.services,arguments)},e.loadConfiguration=function(){this.services.loadConfiguration.apply(this.services,arguments)},e.opcuaReadNodeHistory=function(){this.services.opcuaReadNodeHistory.apply(this.services,arguments)},e.opcuaReadHistoryCount=function(){this.services.opcuaReadHistoryCount.apply(this.services,arguments)},e.opcuaReadHistoryStart=function(){this.services.opcuaReadHistoryStart.apply(this.services,arguments)},e.opcuaReadHistoryEnd=function(){this.services.opcuaReadHistoryEnd.apply(this.services,arguments)},e.opcuaBrowse=function(){this.services.opcuaBrowse.apply(this.services,arguments)},e.opcuaCallMethod=function(){this.services.opcuaCallMethod.apply(this.services,arguments)},e.opcuaRead=function(){this.services.opcuaRead.apply(this.services,arguments)},new RuntimeService}),define("brease/services/Opcua",["brease/services/RuntimeService"],function(e){"use strict";var Opcua={readNodeHistory:function(i,s,r){var o=$.Deferred(),a=n("serverAlias",r),l={nodesReadInfo:i};return s&&(l.timeSpan=s),e.opcuaReadNodeHistory(l,a,t,{deferred:o}),o.promise()},readHistoryCount:function(i,s,r){var o=$.Deferred(),a=n("serverAlias",r);return e.opcuaReadHistoryCount({nodeId:i,timeSpan:s},a,t,{deferred:o}),o.promise()},readHistoryStart:function(i,s){var r=$.Deferred(),o=n("serverAlias",s);return e.opcuaReadHistoryStart({nodeId:i},o,t,{deferred:r}),r.promise()},readHistoryEnd:function(i,s){var r=$.Deferred(),o=n("serverAlias",s);return e.opcuaReadHistoryEnd({nodeId:i},o,t,{deferred:r}),r.promise()},browse:function(i,s){var r=$.Deferred(),o=n("serverAlias",s);return e.opcuaBrowse({nodeId:i},o,t,{deferred:r}),r.promise()},read:function(i,s){var r=$.Deferred(),o=n("serverAlias",s);return e.opcuaRead({nodesToRead:i},o,t,{deferred:r}),r.promise()},callMethod:function(i,s,r,o){var a=$.Deferred(),l=n("serverAlias",o);return e.opcuaCallMethod({objectId:i,methodId:s,arguments:r},l,t,{deferred:a}),a.promise()}};function t(e,t){t.deferred.resolve(e)}function n(e,t){var n;return void 0!==t&&(n={},n[e]=t),n}return Opcua}),define("brease/services/ServiceBridge",["brease/helper/XHRPool"],function(XHRPool){"use strict";var e=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/services/",t=e+"client/",n=e+"server/";function i(e,t){var n={Data:e};return t&&(n.Parameter=t),JSON.stringify(n)}return{activateVisu:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"activateVisu?visuId="+e),s.send(null,n)}else console.iatWarn("undefined visuId in method activateVisu")},deactivateVisu:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"deactivateVisu?visuId="+e),s.send(null,n)}else console.iatWarn("undefined visuId in method deactivateVisu")},deactivateContent:function(e,n,i,s){if(void 0!==e){var r=XHRPool.getXHR(s);r.open("GET",t+"deactivateContent?contentId="+e+"&visuId="+n),r.send(null,i)}else console.iatWarn("undefined contentId in method deactivateContent")},getSubscription:function(e,n,i,s){if(void 0!==e){var r=XHRPool.getXHR(s);r.open("GET",t+"getSubscription?contentId="+e+"&visuId="+n),r.send(null,i)}else console.iatWarn("undefined contentId in method getSubscription")},activateContent:function(e,n,i,s){if(void 0!==e){var r=XHRPool.getXHR(s);r.open("GET",t+"activateContent?contentId="+e+"&visuId="+n),r.send(null,i)}else console.iatWarn("undefined contentId in method activateContent")},loadConfiguration:function(e,t){var i=XHRPool.getXHR(t);i.open("GET",n+"getConfiguration"),i.send(null,e)},loadVisuData:function(e,t,n){$.getJSON("/"+e+".json",function(e){t({success:!0,visuData:e},n)}).fail(function(e,i,s){console.log("error:"+JSON.stringify({status:i,errorMessage:s.toString()})),t({success:!1,status:i},n)})},createBindings:function(e,n,i,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"createBindings"),o.send(JSON.stringify({Parameter:{visuId:n,contentId:e},Data:i}),s)},deleteBindings:function(e,n,i,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"deleteBindings"),o.send(JSON.stringify({Parameter:{visuId:n,contentId:e},Data:i}),s)},getEventSubscription:function(e,n,i,s){if(void 0!==e){var r=XHRPool.getXHR(s);r.open("GET",t+"getEventSubscription?contentId="+e+"&visuId="+n),r.send(null,i)}else console.iatWarn("undefined contentId in method getEventSubscription")},getSessionEventSubscription:function(e,n){var i=XHRPool.getXHR(n);i.open("GET",t+"getSessionEventSubscription"),i.send(null,e)},loadLanguages:function(e){var n=XHRPool.getXHR();n.open("GET",t+"getLanguages"),n.send(null,e)},switchLanguage:function(e,n){if(void 0!==e){var i=XHRPool.getXHR();i.open("GET",t+"switchLanguage?language="+e),i.send(null,n)}else console.iatWarn("undefined language key in method switchLanguage")},loadTexts:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"getText?language="+e),s.send(null,n)}else console.iatWarn("undefined language key in method loadTexts")},loadSystemTexts:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"getSystemTexts?language="+e),s.send(null,n)}else console.iatWarn("undefined language key in method loadSystemTexts")},getAllUnitSymbols:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"getAllUnitSymbols?language="+e),s.send(null,n)}else console.iatWarn("undefined language key in method getAllUnitSymbols")},getUnitSymbols:function(e,n,i,s){if(void 0!==e){var r=XHRPool.getXHR(s);r.open("POST",t+"getUnitSymbols"),r.send(JSON.stringify({Data:{language:e,commonCodes:n}}),i)}else console.iatWarn("undefined language key in method getUnitSymbols")},loadCultures:function(e){var n=XHRPool.getXHR();n.open("GET",t+"loadCultures"),n.send(null,e)},switchCulture:function(e,n){if(void 0!==e){var i=XHRPool.getXHR();i.open("GET",t+"switchCulture?culture="+e),i.send(null,n)}else console.iatWarn("undefined culture key in method getUnitSymbols")},loadMeasurementSystemList:function(e){var n=XHRPool.getXHR();n.open("GET",t+"getMeasurementSystemList"),n.send(null,e)},switchMeasurementSystem:function(e,n,i){if(void 0!==e){var s=XHRPool.getXHR(i);s.open("GET",t+"setMeasurementSystem?measurementSystem="+e),s.send(null,n)}else console.iatWarn("undefined MeasurementSystem key in method switchMeasurementSystem")},logEvents:function(e,t){var i=XHRPool.getXHR();i.open("POST",n+"sendEventLog"),i.send(JSON.stringify({Data:e}),t)},loadCurrentUser:function(e){var n=XHRPool.getXHR();n.open("GET",t+"getCurrentUser"),n.send(null,e)},setDefaultUser:function(e){var n=XHRPool.getXHR();n.open("GET",t+"setDefaultUser"),n.send(null,e)},loadUserRoles:function(e,n){var i=XHRPool.getXHR(n);i.open("GET",t+"getUserRoles"),i.send(null,e)},authenticateUser:function(e,n,i){var s=XHRPool.getXHR();s.open("POST",t+"authenticate"),s.send(JSON.stringify({Data:{userID:e,password:n}}),i)},setCurrentUser:function(e,n){var i=XHRPool.getXHR();i.open("POST",t+"setCurrentUser"),i.send(JSON.stringify({Data:{user:e}}),n)},userHasRoles:function(e,n){var i=XHRPool.getXHR();i.open("POST",t+"userHasRoles"),i.send(JSON.stringify({Data:{roles:e}}),n)},formatText:function(e,n,i){var s=XHRPool.getXHR(),r={formatstring:e,args:n};s.open("POST",t+"format"),s.send(JSON.stringify({Data:r}),i)},setClientInformation:function(e){var n=XHRPool.getXHR();n.open("POST",t+"setClientInformation"),n.send('{"Data":'+e+"}")},registerClient:function(e,n){var i=XHRPool.getXHR();i.open("GET",t+"registerclient"+(void 0!==e?"?visuId="+e:"")),i.send(null,n)},opcuaReadNodeHistory:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/readHistory"),o.send(i(e,n),s)},opcuaReadHistoryCount:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/readHistoryCount"),o.send(i(e,n),s)},opcuaReadHistoryStart:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/readHistoryStart"),o.send(i(e,n),s)},opcuaReadHistoryEnd:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/readHistoryEnd"),o.send(i(e,n),s)},opcuaBrowse:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/browse"),o.send(i(e,n),s)},opcuaCallMethod:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/callMethod"),o.send(i(e,n),s)},opcuaRead:function(e,n,s,r){var o=XHRPool.getXHR(r);o.open("POST",t+"opcua/read"),o.send(i(e,n),s)}}}),define("brease/services/TextFormatter",["brease/events/BreaseEvent","brease/core/Utils","brease/enum/Enum"],function(BreaseEvent,Utils,Enum){"use strict";var TextFormatter={init:function(e){return t=e,this},isReady:function(){return e=$.Deferred(),e.resolve(),e.promise()},format:function(e,i){var s=$.Deferred();return t.formatText(e,i,function(e){n(e,s)}),s.promise()}},e,t;function n(e,t){!0===e.success?t.resolve(e.string):t.reject(e.string)}return TextFormatter}),define("brease/services/User",["brease/core/Utils","brease/events/BreaseEvent","brease/events/ServerEvent","brease/events/ClientSystemEvent","brease/enum/Enum"],function(Utils,BreaseEvent,ServerEvent,ClientSystemEvent,Enum){"use strict";var User={init:function(e){return d=e,a=null,this},isReady:function(){return i=$.Deferred(),h(),i.promise()},getSeparators:function(){return{dsp:".",gsp:","}},authenticateUser:function(e,t){return s=$.Deferred(),d.authenticateUser(e,t,f),s.promise()},setCurrentUser:function(e){return r=$.Deferred(),d.setCurrentUser(e,p),r.promise()},loadCurrentUser:function(){return r=$.Deferred(),void 0!==a&&null!==a?r.resolve(a):d.loadCurrentUser(m),r.promise()},getCurrentUser:function(){return a},setDefaultUser:function(){return r=$.Deferred(),d.setDefaultUser(p),r.promise()},hasOneOfRoles:function(e){return Utils.permission(e,l)},getUserRoles:function(){return l},loadUserRoles:function(e){var t=$.Deferred();return d.loadUserRoles(c,{deferred:t,callback:e}),t.promise()},loginAction:function(t,n){return o=$.Deferred(),d.authenticateUser(t,n,e),o.promise()}};function e(e){!0===e.success&&void 0!==e.user&&!0===e.user.isAuthenticated?d.setCurrentUser(e.user,n.bind(null,e.user.userID)):t(!1,e.user.userID)}function t(e,t){o.resolve({success:e});var n={event:e?ClientSystemEvent.LOGIN_SUCCESS:ClientSystemEvent.LOGIN_FAILED,source:{type:"clientSystem.Event"},eventArgs:{userName:t}};d.sendEvent(n)}function n(e,n){t(n.success,e)}var i,s,r,o,a,l=[],d;function c(e,t){e.success&&e.roles&&(l=e.roles.sort()),u(t.deferred,t.callback,e.roles)}function u(e,t,n){Utils.isFunction(t)&&t(n),e.resolve(n)}function h(){d.addEventListener(ServerEvent.USER_CHANGED,v),d.loadCurrentUser(g)}function g(e){!0===e.success?(a=e.user,document.body.dispatchEvent(new CustomEvent(BreaseEvent.USER_LOADED,{detail:e.user})),$.when(brease.user.loadUserRoles()).then(function(){i.resolve()})):i.reject()}function f(e){!0===e.success&&void 0!==e.user&&!0===e.user.isAuthenticated?(s.resolve(e.user),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_AUTHENTICATE_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS,[e.user.userID])):(s.reject(e.user),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_AUTHENTICATE_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[e.user.userID]))}function p(e){!0===e.success?(r.resolve(),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_SETUSER_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS)):(r.reject(),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_SETUSER_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR))}function m(e){e.success?(a=e.user,r.resolve(e.user)):r.reject()}function v(e){a=e.detail.user,$.when(brease.user.loadUserRoles()).then(function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.ROLES_CHANGED))}),document.body.dispatchEvent(new CustomEvent(BreaseEvent.USER_CHANGED,{detail:a})),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_USERCHANGE,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.INFORMATIONAL,[a.userID])}return User}),define("brease/services/WebSocket",["brease/events/EventDispatcher","brease/events/BreaseEvent"],function(EventDispatcher,BreaseEvent){"use strict";var e=!1,t=window.location.protocol+"//"+window.location.hostname+":"+window.location.port,n,i,s;function r(e,t){if("WebSocket"in window){var r="ws://";0===window.location.protocol.indexOf("https")&&(r="wss://");try{var a=window.setTimeout(function(){b("timedOutInitially")},void 0!==t?t:15e3);e||(e=window.WebSocket),s=new e(r+n.host+":"+n.port+"?watchdog="+n.watchdog),s.onmessage=o,s.onopen=function(){console.log(y.MESSAGES.success),window.clearTimeout(a),n.sockets.available=!0,i(!0)},s.onclose=function(){console.log(y.MESSAGES.socketClosed),window.clearTimeout(d),!0!==n.sockets.available?(window.clearTimeout(a),b("socketClosedBeforeSuccess")):(u(),f(),v({type:BreaseEvent.CONNECTION_STATE_CHANGED,detail:{state:!1}}),window.setTimeout(m,1e3))},s.onerror=function(e){console.log("SOCKET ERROR["+e.type+"]:"+e.message)}}catch(e){b("openSocketError","\n"+e.message)}}else b("noSockets")}function o(e){if("pong"!==e.data){var t;try{t=JSON.parse(e.data)}catch(e){console.warn(y.MESSAGES.parsererror+"\n"+e.message)}t&&("getUpdate"===t.Command||"system"===t.Command?v({type:t.Data.event,detail:t.Data.eventArgs}):"event"===t.Command?void 0!==t.Data&&v({type:t.Data.event,detail:t.Data.eventArgs}):"action"===t.Command&&v({type:t.Command,detail:t.Data}))}void 0!==a&&c()}var a,l,d;function c(){u(),n.watchdog>=1e4&&(l=window.setTimeout(h,n.watchdog))}function u(){l&&window.clearTimeout(l)}function h(){s.readyState===s.OPEN&&(s.close(),d=window.setTimeout(function e(){s.readyState===s.CLOSING&&(console.log(y.MESSAGES.socketNotClosing),s.onclose(),s.onclose=null)},1500))}function g(){n.watchdog>=1e4&&(p(),a=window.setInterval(p,n.watchdog/2)),c()}function f(){a&&window.clearInterval(a)}function p(){s.readyState===s.OPEN&&s.send("ping")}function m(){$.ajax({type:"GET",url:t+window.location.pathname,async:!0,complete:function(e,t){"error"===t?window.setTimeout(m,1e3):(r(),v({type:BreaseEvent.CONNECTION_STATE_CHANGED,detail:{state:!0}}))}})}function v(e){y.dispatchEvent(e)}function b(e,t){var n=y.MESSAGES[e]+(t||"");n&&console.log(n),i(!1)}var y=new EventDispatcher;return y.send=function(e){s.send(e)},y.start=function(t,s,o){i=t,n={sockets:{},port:window.location.port,host:window.location.hostname,watchdog:1e4},void 0!==brease.config.watchdog&&(0===brease.config.watchdog||brease.config.watchdog>=1e4)&&(n.watchdog=brease.config.watchdog),!0!==e&&(e=!0,r(s,o))},y.startHeartbeat=function(){g()},y.MESSAGES={timedOutInitially:"socket connection timed out!",success:"socket connection established!",parsererror:"could not parse server message",noSockets:"WebSockets not available",openSocketError:"could not open WebSocket",socketClosed:"socket connection closed!",socketClosedBeforeSuccess:"socket connection closed before opened --\x3e failure!",socketNotClosing:"socket not closing -> force close"},y}),define("text",["module"],function(e){"use strict";var t,n,i,s,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,h=d&&(location.port||void 0),g={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(e){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,i,s=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(s="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,s){var r,o,a,l=t.xdRegExp.exec(e);return!l||(r=l[2],o=l[3],o=o.split(":"),a=o[1],o=o[0],!(r&&r!==n||o&&o.toLowerCase()!==i.toLowerCase()||(a||o)&&a!==s))},finishLoad:function(e,n,i,s){i=n?t.strip(i):i,f.isBuild&&(g[e]=i),s(i)},load:function(e,n,i,s){if(s&&s.isBuild&&!s.inlineText)return i(),void 0;f.isBuild=s&&s.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),a=n.toUrl(o),l=f.useXhr||t.useXhr;if(0===a.indexOf("empty:"))return i(),void 0;!d||l(a,c,u,h)?t.get(a,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)})},write:function(e,n,i,s){if(g.hasOwnProperty(n)){var r=t.jsEscape(g[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,s,r){var o=t.parseName(n),a=o.ext?"."+o.ext:"",l=o.moduleName+a,d=i.toUrl(o.moduleName+a)+".js";t.load(l,i,function(n){var i=function(e){return s(d,e)};i.asModule=function(e,t){return s.asModule(e,d,t)},t.write(e,l,i,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");0===s.indexOf("\ufeff")&&(s=s.substring(1)),t(s)}catch(e){i&&i(e)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,s){var r=t.createXhr(),o;if(r.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(t){var s,o;4===r.readyState&&(s=r.status||0,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,i&&i(o)):n(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,s="utf-8",r=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(o),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,o,a,l={};r&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(a,1,0,!1),o=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),o.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),t(l.value)}catch(e){throw new Error((a&&a.path||"")+": "+e)}}),t}),define("text!system/widgets/CompoundWidget/CompoundWidget.html",[],function(){return'<div id="WIDGETID" data-brease-widget="system/widgets/CompoundWidget" data-instruction-loadContent="true"></div>'}),define("system/widgets/CompoundWidget/CompoundWidget",["brease/core/BaseWidget","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/libs/Utils"],function(e,BreaseEvent,Enum,Utils,t){"use strict";var n={addContent:brease.config.editMode},i=e.extend(function CompoundWidget(){e.apply(this,arguments)},n),s=i.prototype;i.static.delimiter="",s.init=function(){this.data={},this.addInitialClass("classCompoundWidget"),c.call(this),!0===this.settings.addContent?d.call(this):this.contentAdded(!1)},s.contentAdded=function(t){e.prototype.init.call(this),!0===t&&this._dispatchReady(),this.setInitialValues()},s.setInitialValues=function(){},s.initMapping=function(e){this.settings.idPrefix=this.elem.id+i.static.delimiter;var t=this,n={};for(var s in e)if("all"===e[s])n[s]="all";else{var r={};for(var o in e[s])r[t.settings.idPrefix+o]=e[s][o];n[s]=r}this.propertyMapping=n},s.selectChildren=function(e){return void 0!==this.children&&0!==this.children.length||(this.directChildren=this.el.find(">[data-brease-widget]"),this.children=this.el.find("[data-brease-widget]")),"direct"===e?this.directChildren:this.children},s.disable=function(){if(e.prototype.disable.apply(this,arguments),!0!==this.initialized){var t=!this.isDisabled;!1===brease.config.editMode&&this.selectChildren("direct").each(function(){var e=this.id;(brease.uiController.getWidgetState(e)<Enum.WidgetState.INITIALIZED||null===brease.uiController.callWidget(e,"setParentEnableState",t))&&brease.uiController.addWidgetOption(e,"parentEnableState",t)})}},s._enableHandler=function(){e.prototype._enableHandler.apply(this,arguments);var t=!this.isDisabled;!1===brease.config.editMode&&this.selectChildren("direct").each(function(){var e=this.id;(brease.uiController.getWidgetState(e)<Enum.WidgetState.INITIALIZED||null===brease.uiController.callWidget(e,"setParentEnableState",t))&&brease.uiController.addWidgetOption(e,"parentEnableState",t)})},s.setChildProps=function(e,t){if(void 0!==t&&null!==t){var n=this.propertyMapping[e];n&&this.selectChildren().each(function(){var i="all"===n?e:n[this.id];if(void 0!==i)if(-1!==i.indexOf(","))for(var s=i.split(","),o=0;o<s.length;o+=1)r(this.id,s[o],t);else r(this.id,i,t)})}};function r(e,t,n){(brease.uiController.getWidgetState(e)<Enum.WidgetState.INITIALIZED||null===brease.uiController.callWidget(e,o(t),n,a(t)))&&brease.uiController.addWidgetOption(e,t,n)}function o(e){return"permissionOperate"===e||"permissionView"===e?"_setPermission":Utils.setter(e)}function a(e){return"permissionOperate"===e?"operate":"permissionView"===e?"view":void 0}s.updateVisibility=function(){var t=this.isVisible();e.prototype.updateVisibility.apply(this,arguments),t!==this.isVisible()&&(t=this.isVisible(),!1===brease.config.editMode&&this.selectChildren("direct").each(function(){var e=this.id;(brease.uiController.getWidgetState(e)<Enum.WidgetState.INITIALIZED||null===brease.uiController.callWidget(e,"setParentVisibleState",t))&&brease.uiController.addWidgetOption(e,"parentVisibleState",t)}))};function l(){var e=Utils.getHighestZindex(this.selectChildren("direct"));$('<div style="position:absolute;width:100%;height:100%; background-color:rgba(255,0,0,0); z-index:'+(e+1)+';"></div>').appendTo(this.elem),this.elem.removeEventListener(BreaseEvent.CONTENT_PARSED,this._bind(l))}function d(){var e=this;require(["text!"+e.settings.className+"/content/widgets.html"],function(n){n=n.replace(/\{ID_PREFIX\}/g,e.settings.idPrefix),n=n.substring(5,n.length-6),t.appendHTML(e.elem,n),e.elem.addEventListener(BreaseEvent.CONTENT_PARSED,e._bind(l)),brease.uiController.parse(e.elem,!1,e.settings.parentContentId),e.contentAdded(!0)})}function c(){this.constructor.static.contentCSS&&t.injectCSS(this.constructor.static.contentCSS.replace(/\{ID_PREFIX\}/g,this.settings.idPrefix))}return i}),define("text!system/widgets/ContentLoader/ContentLoader.html",[],function(){return'<div id="WIDGETID" data-brease-widget="system/widgets/ContentLoader"></div>\r\n'}),define("system/widgets/ContentLoader/ContentLoader",["brease/core/BaseWidget","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/WidgetController","brease/controller/WidgetParser","brease/controller/libs/Utils"],function(e,Enum,BreaseEvent,t,n,i){"use strict";var s={loadPolicy:Enum.LoadPolicy.IMMEDIATE,cachePolicy:Enum.CachePolicy.CACHE,busyTimeout:1e3},r=e.extend(function ContentLoader(){e.apply(this,arguments)},s,!0),o=r.prototype;o.init=function e(){this.bindingController=brease.uiController.bindingController,this.step=0,this.isLoaded=!1,this.loadQueue=[],this.settings.url&&this.settings.loadPolicy===Enum.LoadPolicy.IMMEDIATE&&this.load(this.settings.url,this.settings.contentId),this._defer("_dispatchReady")},o.load=function e(t,n,i){if(0===this.loadQueue.length||t!==this.loadQueue[0]||!0===i){this.contentComplete=!1,this.loadQueue.unshift(t);var s=this.settings.contentId,r=this.settings.url;this.settings.url=t,this.settings.contentId=n,this.loadFlag=!0,!0===this.isLoaded?p.call(this,s,r).then(function e(t){v.call(t)}):v.call(this),this.el.attr("data-brease-contentid",n)}},o.suspend=function e(){t.suspendInContent(this.elem,this.settings.contentId),h.call(this),this.loadQueue.length=0,c.call(this),this.suspended=!0},o.flush=function e(){t.disposeInContent(this.elem,this.settings.contentId),h.call(this),g.call(this)},o.wake=function e(){var n=this;!0===this.contentComplete?(t.wakeInContent(this.settings.contentId),this.suspended=!1,this.step=0,$.when(this.bindingController.activateContent(this.settings.contentId)).then(function e(t){0===n.step&&(n.active=!0,n.step=1,a.call(n,!0),t===n.settings.contentId&&(n.bindingController.sendInitialValues(n.settings.contentId),n.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:n.settings.url,contentId:n.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("loadContent - "+n.settings.contentId,1)))},function(){console.log("activateContent.fail")})):this.load(this.settings.url,this.settings.contentId)},o.dispose=function n(){this.loadFlag=!1,
t.disposeInContent(this.elem,this.settings.contentId),!0===this.isLoaded&&u.call(this),this.loadQueue.length=0,c.call(this),e.prototype.dispose.apply(this,arguments)},o.getContentId=function e(){return this.settings.contentId},o.getUrl=function e(){return this.settings.url};function a(e){this.el&&(this.el.css("visibility",e?"visible":"hidden"),this.elem.dispatchEvent(new CustomEvent(BreaseEvent.VISIBILITY_CHANGED,{bubbles:!1,detail:{visible:e}})))}function l(){var e=this;if(0===this.step){if(this.step=1,this.contentComplete=!0,a.call(this,!0),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,0),e.settings.preCache)return e.elem&&e.dispatchEvent(new CustomEvent("preCachedContentReady",{detail:{url:e.settings.url,contentId:e.settings.contentId},bubbles:!0})),void 0;this.bindingController.sendInitialValues(e.settings.contentId,function t(n){e.settings.contentId===n&&(e.elem&&e.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:e.settings.url,contentId:e.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,1),window.performanceMonitor.profile("loadContent - "+e.settings.contentId,1))})}}function d(){this.el.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.pageloading"))}function c(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0)}function u(){this.active&&(this.active=!1,this.step=-1,this.bindingController.deactivateContent(this.settings.contentId))}function h(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id,contentId:this.settings.contentId}})),this.loadFlag=!1,a.call(this,!1),u.call(this),m.call(this,this.settings.contentId,this.settings.url)}function g(){this.isLoaded=!1,this.settings.url=void 0}function f(e){var t=$.Deferred(),i=this,s=function n(){e.removeEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+i.settings.contentId,1),t.resolve(null)};return e.addEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+this.settings.contentId,0),n.parse(e,!1,i.settings.contentId),t.promise()}function p(e,n){var i=$.Deferred();return brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_UNLOAD,{detail:{id:this.elem.id,contentId:e}})),brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id,contentId:e}})),a.call(this,!1),m.call(this,e,n),t.disposeInContent(this.elem,e),this.bindingController.isContentActive(e)&&this.bindingController.deactivateContent(e),this.isLoaded=!1,this.el.empty(),i.resolve(this),i.promise()}function m(e,t){this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_HIDE,{detail:{contentId:e,url:t}}))}function v(){var e=this;c.call(this),e.timer=window.setTimeout(e._bind(d),e.settings.busyTimeout),window.performanceMonitor.profile("loadContentHTML - "+e.settings.contentId,0),this.bindingController.isContentActive(e.settings.contentId)?E.call(this,{message:"ContentActive"}):brease.pageController.loadHTML(e.settings.url,[e.settings.url]).done(e._bind(b)).fail(e._bind(E))}function b(e,t){var n=this;if(t===n.loadQueue[0]&&!0===this.loadFlag){c.call(this),n.loadQueue.length=0;try{i.appendHTML(n.elem,e)}catch(e){console.error(e),console.log('Content "'+n.settings.contentId+'": error in widget properties (ContentLoader.js)')}n.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_LOADED,{detail:{url:n.settings.url,contentId:n.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("loadContentHTML - "+n.settings.contentId,1),n.isLoaded=!0,n.step=0,n.settings.preCache?y.call(this):$.when(this.bindingController.activateContent(n.settings.contentId)).then(n._bind(y)),this.active=!0}}function y(){var e=this;$.when(f.call(e,e.elem)).then(e._bind(l))}function E(e){var t=this;c.call(this),t.isLoaded=!1,t.elem&&!0===this.loadFlag&&(t.dispatchEvent(new CustomEvent(BreaseEvent.LOAD_ERROR,{detail:{url:t.settings.url,contentId:t.settings.contentId}})),t.el.html("ERROR: could not load content with url="+t.settings.url).css("visibility","visible")),console.iatWarn("WARNING: could not load content in ContentLoader["+(t.elem?t.elem.id:"")+"]:"+e.message)}return o.dispatchEvent=function e(t){this.elem.dispatchEvent(t)},r}),define("text!widgets/brease/common/DragDropHandler/doc/example.html",[],function(){return'<!doctype html>\r\n<html>\r\n\r\n<head>\r\n    <meta charset="utf-8">\r\n    <title>GenericDialog</title>\r\n    <base href="../../../../../" />\r\n\r\n\r\n\r\n\r\n    <link id="theme_css" href="././css/brease_core.css" rel="stylesheet" />\r\n    <script src="././libs/require.js" data-main="require_config"><\/script>\r\n\r\n    <style>\r\n        .draggableItem.drag-drop-item-clone {\r\n            position: fixed;\r\n            cursor: pointer;\r\n            touch-action: none;\r\n        }\r\n\r\n        .draggableContainer {\r\n            overflow: hidden;\r\n        }\r\n\r\n        .droppableContainer {\r\n            overflow: hidden;\r\n        }\r\n\r\n        .draggableItem {\r\n            float: left;\r\n            width: 100px;\r\n            height: 100px;\r\n            margin: 10px;\r\n            border: 1px solid grey;\r\n        }\r\n\r\n        .draggableItem:hover {\r\n            background-color: rgb(255, 138, 0);\r\n        }\r\n\r\n        .droppableItem {\r\n            float: left;\r\n            width: 100px;\r\n            height: 100px;\r\n            margin: 10px;\r\n            cursor: pointer;\r\n            border: 1px solid grey;\r\n        }\r\n\r\n        .dropPossible {\r\n            background-color: rgba(255, 138, 0, 0.3);\r\n        }\r\n\r\n        .dragEntered {\r\n            background-color: rgb(255, 138, 0);\r\n        }\r\n\r\n        .draggableItem img {\r\n            touch-action: none;\r\n            user-select: none;\r\n            pointer-events: none;\r\n        }\r\n\r\n        .border-class {\r\n            border: 2px solid #000000;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    \x3c!-- To use this example, you need a web server, nodeJs or "Web Server for Chrome" Extension \r\n        (https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb)\r\n\r\n        Root folder must be the BRVisu folder. Then navigate to this Example.html file\r\n    --\x3e\r\n\r\n\r\n    <div id="appContainer" data-mocked="true" style="height: 800px; width: 600px; min-height: 1px;">\r\n\r\n        <div class="systemContentLoader" id="systemContentLoaderContent" data-brease-contentid="content1">\r\n\r\n            <div class="draggableContainer">\r\n                <h1>Draggables</h1>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #FF0000" width="64" height="64">\r\n                </div>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #00FF00" width="64" height="64">\r\n                </div>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #0000FF" width="64" height="64">\r\n                </div>\r\n            </div>\r\n            <div style="clear:both"></div>\r\n            <div class="droppableContainer">\r\n                <h1>Droppables</h1>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        require([\'brease/application\'],\r\n            function (application, DragDropHandler, DraggableSettings, DroppableSettings) {\r\n                application.start(\'page1\', { debug: true, warn: true, editMode: false });\r\n\r\n                document.getElementById(\'appContainer\').addEventListener(\'app_ready\', function () {\r\n                    require([\'widgets/brease/common/DragDropHandler/doc/example\']);\r\n                });\r\n            });\r\n\r\n        console.log(\'Current file url:\' + window.location.href);\r\n    <\/script>\r\n</body>\r\n\r\n</html>'}),define("widgets/brease/common/DragDropHandler/libs/draggable",[],function(){"use strict";function e(){this.id="",this.elem={},this.clone=!1,this.cloneClassList=[],this.data=null}return e}),define("widgets/brease/common/DragDropHandler/libs/droppable",[],function(){"use strict";function e(){this.id="",this.elem={},this.dragEnter=function(){},this.dragLeave=function(){},this.dragMove=function(){},this.drop=function(){}}return e}),define("widgets/brease/common/DragDropHandler/libs/utils",[],function(){"use strict";function Utils(){return{mapProperties:function(e,t){for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n])},mapMethods:function(e,t){for(var n in e)"function"==typeof t[n]&&(t[n]=e[n])},addClass:function(e,t){e.classList?e.classList.add(t):$(e).addClass(t)},removeClass:function(e,t){e.classList?e.classList.remove(t):$(e).removeClass(t)},containsClass:function(e,t){return e.classList?e.classList.contains(t):$(e).hasClass(t)}}}return new Utils}),define("widgets/brease/common/DragDropHandler/libs/eventListenerModel",[],function(){"use strict";function e(e,t){this.event=e,this.function=t}return e}),define("widgets/brease/common/DragDropHandler/libs/dragDropArgs",[],function(){"use strict";function e(){this.originalEventArgs=null,this.target=null,this.clientX=0,this.clientY=0,this.pageX=0,this.pageY=0,this.screenX=0,this.screenY=0,this.dragItem=null,this.sourceItem=null,this.dragData=null}var t=e.prototype;return e}),define("widgets/brease/common/DragDropHandler/libs/dragDropBase",["widgets/brease/common/DragDropHandler/libs/draggable","widgets/brease/common/DragDropHandler/libs/droppable","widgets/brease/common/DragDropHandler/libs/utils","widgets/brease/common/DragDropHandler/libs/eventListenerModel","widgets/brease/common/DragDropHandler/libs/dragDropArgs"],function(e,t,Utils,n,i){"use strict";var s="drag-drop-item-clone",r="drag-drop-item-active";function o(e,t,n){for(var i=0;i<e.dragDropAreaEventListeners.length;i+=1)if(e.dragDropAreaEventListeners[i].event===t&&e.dragDropAreaEventListeners[i].function===n)return e.dragDropAreaEventListeners[i];return null}function a(e,t){var dragDropArgs=new i;return dragDropArgs.dragItem=e.dragItem,dragDropArgs.sourceItem=e.sourceItem,dragDropArgs.originalEventArgs=t,dragDropArgs.target=e._getDragDropTarget(e,t),dragDropArgs.clientX=e._getEventClientX(t),dragDropArgs.clientY=e._getEventClientY(t),dragDropArgs.pageX=e._getEventPageX(t),dragDropArgs.pageY=e._getEventPageY(t),dragDropArgs.dragData=e.dragData,dragDropArgs}function l(e){var t=0,n;for(t=0;t<e.dragDropAreaEventListeners.length;t+=1)n=e.dragDropAreaEventListeners[t],e.dragDropArea.removeEventListener(n.event,n.function);e.dragDropArea=null}function d(e,t){var n=a(e,t),i=new CustomEvent("dragstarted",{detail:n});e.dragDropArea.dispatchEvent(i)}function c(e,t){var n=a(e,t),i=new CustomEvent("dragended",{detail:n});e.dragDropArea.dispatchEvent(i)}function u(e,t){var n=a(e,t),droppable=e.getClosestDroppable(n.target);droppable&&"function"==typeof droppable.dragEnter&&droppable.dragEnter(n)}function h(e,t){var n=a(e,t),droppable=e.getClosestDroppable(n.target);droppable&&"function"==typeof droppable.dragMove&&droppable.dragMove(n)}function g(e,t){var n=a(e,t),droppable=e.getClosestDroppable(n.target);droppable&&"function"==typeof droppable.dragLeave&&droppable.dragLeave(n)}function f(e,t){var n=a(e,t),droppable=e.getClosestDroppable(n.target);droppable&&"function"==typeof droppable.drop&&droppable.drop(n)}function p(e,t){if(!e.isDisabled){var n=e._getDragDropTarget(e,t),droppable=e.getClosestDroppable(n);droppable&&(e.canDrop=!0,e.dragEntered=!0,e.dropTarget=droppable.elem,u(e,t))}}function m(e,t){h(e,t)}function v(e,t){var droppable=e.getClosestDroppable(t.target);null!==droppable&&(droppable.elem===e.dropTarget&&(e.canDrop=!1,e.dragEntered=!1,e.dropTarget=null),g(e,t))}function b(e,t){f(e,t)}function y(e,t){if(!e.isDisabled){var draggable=e.getClosestDraggable(t.target);if(e.dragActive=!0,e.sourceItem=t.target,e.dragItem=draggable.elem,!1===e.clickOperationMode){if(draggable.clone){var n=e.dragItem,i=n.cloneNode(!0);e.dragItem=i,e.setDragItemClone(e.dragItem,draggable.cloneClassList)}}else Utils.addClass(e.dragItem,r);d(e,t)}}function E(e,t){e.canDrop&&(e.isDisabled||b(e,t),v(e,t)),e.canDrop=!1,e.dragEntered=!1,e.dropTarget=null,Utils.containsClass(e.dragItem,s)&&document.body.removeChild(e.dragItem),Utils.removeClass(e.dragItem,r),e.dragActive=!1,e.dragEnabled=!1,c(e,t),e.dragItem=null,e.sourceItem=null,e.dragData=null}function A(){this.dragEnabled=!1,this.mouseDownClientX=0,this.mouseDownClientY=0,this.dragItem=null,this.sourceItem=null,this.dragActive=!1,this.dragData=null,this.canDrop=!1,
this.dragEntered=!1,this.dropTarget=null,this.isDisabled=!1,this.draggables=[],this.droppables=[],this.dragDropArea=document.body,this.dragDropAreaEventListeners=[],this.clickOperationMode=!1,this.preventMouseDownEvent=!0;var e=window.devicePixelRatio>1?window.devicePixelRatio:1;this.dragDelay=10*e,this._wrapEventHandler(),this._documentAddEventListener()}var I=A.prototype;return I._wrapEventHandler=function(){var e=this;this.documentMouseUpHandler=function(t){e._documentMouseUpHandler(e,t)},this.documentMouseDownHandler=function(t){e._documentMouseDownHandler(e,t)},this.documentMouseMoveHandler=function(t){e._documentMouseMoveHandler(e,t)},this.draggableMouseMoveHandler=function(t){e._draggableMouseMoveHandler(e,t)},this.draggableMouseDownHandler=function(t){e._draggableMouseDownHandler(e,t)},this.draggableMouseLeaveHandler=function(t){e._draggableMouseLeaveHandler(e,t)},this.droppableMouseEnterHandler=function(t){e._droppableMouseEnterHandler(e,t)},this.droppableMouseMoveHandler=function(t){e._droppableMouseMoveHandler(e,t)},this.droppableMouseLeaveHandler=function(t){e._droppableMouseLeaveHandler(e,t)}},I._getEventClientX=function(e){return e.clientX},I._getEventClientY=function(e){return e.clientY},I._getEventPageX=function(e){return e.pageX},I._getEventPageY=function(e){return e.pageY},I._getDragDropTarget=function(e,t){return t.target},I._documentAddEventListener=function(){document.addEventListener("mouseup",this.documentMouseUpHandler),document.addEventListener("mousedown",this.documentMouseDownHandler),document.addEventListener("mousemove",this.documentMouseMoveHandler)},I._draggableAddEventListener=function(draggable){draggable.elem.addEventListener("mousemove",this.draggableMouseMoveHandler),draggable.elem.addEventListener("mousedown",this.draggableMouseDownHandler),draggable.elem.addEventListener("mouseleave",this.draggableMouseLeaveHandler)},I._droppableAddEventListener=function(droppable){droppable.elem.addEventListener("mouseenter",this.droppableMouseEnterHandler),droppable.elem.addEventListener("mousemove",this.droppableMouseMoveHandler),droppable.elem.addEventListener("mouseleave",this.droppableMouseLeaveHandler)},I._documentRemoveEventListener=function(){document.removeEventListener("mouseup",this.documentMouseUpHandler),document.removeEventListener("mousedown",this.documentMouseDownHandler),document.removeEventListener("mousemove",this.documentMouseMoveHandler)},I._draggableRemoveEventListener=function(draggable){draggable.elem.removeEventListener("mousemove",this.draggableMouseMoveHandler),draggable.elem.removeEventListener("mousedown",this.draggableMouseDownHandler),draggable.elem.removeEventListener("mouseleave",this.draggableMouseLeaveHandler)},I._droppableRemoveEventListener=function(droppable){droppable.elem.removeEventListener("mouseenter",this.droppableMouseEnterHandler),droppable.elem.removeEventListener("mousemove",this.droppableMouseMoveHandler),droppable.elem.removeEventListener("mouseleave",this.droppableMouseLeaveHandler)},I._documentMouseUpHandler=function(e,t){e.clickOperationMode||(e.dragActive&&E(e,t),e.dragEnabled=!1)},I._documentMouseMoveHandler=function(e,t){if(e.dragActive&&!e.clickOperationMode){var n=e._getEventClientX(t),i=e._getEventClientY(t);e.dragItem&&(e.dragItem.style.left=n-e.dragItem.offsetWidth/2+"px",e.dragItem.style.top=i-e.dragItem.offsetHeight/2+"px")}},I._documentMouseDownHandler=function(e,t){e.dragActive&&E(e,t)},I._draggableMouseDownHandler=function(e,t){t.target&&(e.mouseDownClientX=e._getEventClientX(t),e.mouseDownClientY=e._getEventClientY(t),e.dragEnabled=!0,e.clickOperationMode&&(e.dragActive?E(e,t):(e.dragActive=!0,y(e,t))))},I._draggableMouseMoveHandler=function(e,t){if(!e.clickOperationMode){var n=e._getEventClientX(t),i=e._getEventClientY(t);e.dragEnabled&&!e.dragActive&&(Math.abs(e.mouseDownClientX-n)>e.dragDelay||Math.abs(e.mouseDownClientY-i)>e.dragDelay)&&y(e,t)}},I._draggableMouseLeaveHandler=function(e,t){!e.dragActive&&e.dragEnabled&&y(e,t)},I._droppableMouseEnterHandler=function(e,t){e.dragActive&&p(e,t)},I._droppableMouseMoveHandler=function(e,t){e.dragActive&&(!1===e.dragEntered&&p(e,t),m(e,t))},I._droppableMouseLeaveHandler=function(e,t){e.dragActive&&v(e,t)},I.getDraggableByElement=function(e){var t=0;for(t=0;t<this.draggables.length;t+=1)if(this.draggables[t].elem===e)return this.draggables[t];return null},I.getClosestDraggable=function(e){for(var t=e;t;){var draggable=this.getDraggableByElement(t);if(draggable)return draggable;t=t.parentNode}return null},I.getDroppableByElement=function(e){var t=0;for(t=0;t<this.droppables.length;t+=1)if(this.droppables[t].elem===e)return this.droppables[t];return null},I.getClosestDroppable=function(e){for(var t=e;t;){var droppable=this.getDroppableByElement(t);if(droppable)return droppable;t=t.parentNode}return null},I.setDragDropArea=function(e){var t,n;for(this.dragDropArea&&l(this),this.dragDropArea=e,n=0;n<this.dragDropAreaEventListeners.length;n+=1)t=this.dragDropAreaEventListeners[n],this.dragDropArea.addEventListener(t.event,t.function)},I.getDragItem=function(){return this.dragItem},I.setDragItemClone=function(e,t){if(Utils.addClass(e,s),t)for(var n=0;n<t.length;n+=1)Utils.addClass(e,t[n]);e.style.pointerEvents="none",this.dragItem=e,document.body.appendChild(e)},I.setClickOperationMode=function(e){this.clickOperationMode=e},I.getClickOperationMode=function(){return this.clickOperationMode},I.setPreventMouseDownEvent=function(e){this.preventMouseDownEvent=e},I.getPreventMouseDownEvent=function(){return this.preventMouseDownEvent},I.setDragData=function(e){this.dragData=e},I.getDragData=function(){return this.dragData},I.registerDraggable=function(t,n){var draggable=new e;return draggable.id=t.id,draggable.elem=t,Utils.mapProperties(n,draggable),this.draggables.push(draggable),this._draggableAddEventListener(draggable),draggable},I.registerDroppable=function(e,n){var droppable=new t;return droppable.id=e.id,droppable.elem=e,Utils.mapProperties(n,droppable),Utils.mapMethods(n,droppable),this.droppables.push(droppable),this._droppableAddEventListener(droppable),droppable},I.unregisterDraggable=function(e){var draggable=this.getClosestDraggable(e);return!!draggable&&(this._draggableRemoveEventListener(draggable),this.draggables.splice(this.draggables.indexOf(draggable),1),!0)},I.unregisterDroppable=function(e){var droppable=this.getClosestDroppable(e);return!!droppable&&(this._droppableRemoveEventListener(droppable),this.droppables.splice(this.droppables.indexOf(droppable),1),!0)},I.unregisterDraggables=function(){for(var e=0;e<this.draggables.length;e+=1)this.unregisterDraggable(this.draggables[e]);this.draggables=null},I.unregisterDroppables=function(){for(var e=0;e<this.droppables.length;e+=1)this.unregisterDroppable(this.droppables[e]);this.droppables=null},I.getDraggables=function(){return this.draggables},I.getDroppables=function(){return this.droppables},I.addEventListener=function(e,t){null===o(this,e,t)&&(this.dragDropAreaEventListeners.push(new n(e,t)),this.dragDropArea.addEventListener(e,t))},I.removeEventListener=function(e,t){null!==o(this,e,t)&&this.dragDropArea.removeEventListener(e,t)},I.disable=function(){this.isDisabled=!0},I.enable=function(){this.isDisabled=!1},I.dispose=function(){l(this),this.dragDropAreaEventListeners=void 0,this.unregisterDraggables(),this.unregisterDroppables(),this._documentRemoveEventListener()},A}),define("widgets/brease/common/DragDropHandler/libs/dragDropTouch",["widgets/brease/common/DragDropHandler/libs/dragDropBase"],function(e){"use strict";function t(e,t){setTimeout(function(){var n=new Event("mouseenter",t);e.dispatchEvent(n)},0)}function n(e,t){setTimeout(function(){var n=new Event("mouseleave",t);e.dispatchEvent(n)},0)}function i(){e.call(this)}i.prototype=Object.create(e.prototype);var s=i.prototype;return s._wrapEventHandler=function(){e.prototype._wrapEventHandler.call(this);var i=this,s=null;this.documentTouchStartHandler=function(e){i._documentMouseDownHandler(i,e)},this.documentTouchEndHandler=function(e){i._documentMouseUpHandler(i,e),s&&(n(s),s=null)},this.documentTouchMoveHandler=function(e){var r=event.touches[0],o=document.elementFromPoint(r.clientX,r.clientY);if(null===s&&null!==o?(t(o),s=o):s!==o&&null!==o&&(n(s),t(o),s=o),o){var droppable=i.getClosestDroppable(o);i.dragActive&&droppable&&i._droppableMouseMoveHandler(i,e)}i._documentMouseMoveHandler(i,e)},this.draggableTouchMoveHandler=function(e){e.preventDefault(),i._draggableMouseMoveHandler(i,e)},this.draggableTouchStartHandler=function(e){e.preventDefault(),i._draggableMouseDownHandler(i,e)},this.droppableTouchMoveHandler=function(e){e.preventDefault()}},s._documentAddEventListener=function(){e.prototype._documentAddEventListener.call(this),document.addEventListener("touchstart",this.documentTouchStartHandler),document.addEventListener("touchend",this.documentTouchEndHandler),document.addEventListener("touchmove",this.documentTouchMoveHandler)},s._draggableAddEventListener=function(draggable){e.prototype._draggableAddEventListener.call(this,draggable),draggable.elem.addEventListener("touchmove",this.draggableTouchMoveHandler),draggable.elem.addEventListener("touchstart",this.draggableTouchStartHandler)},s._droppableAddEventListener=function(droppable){e.prototype._droppableAddEventListener.call(this,droppable),droppable.elem.addEventListener("touchmove",this.droppableTouchMoveHandler)},s._documentRemoveEventListener=function(){e.prototype._documentRemoveEventListener.call(this),document.removeEventListener("touchstart",this.documentTouchStartHandler),document.removeEventListener("touchend",this.documentTouchEndHandler),document.removeEventListener("touchmove",this.documentTouchMoveHandler)},s._draggableRemoveEventListener=function(draggable){e.prototype._draggableRemoveEventListener.call(this,draggable),draggable.elem.removeEventListener("touchmove",this.draggableTouchMoveHandler),draggable.elem.removeEventListener("touchstart",this.draggableTouchStartHandler)},s._droppableRemoveEventListener=function(droppable){e.prototype._droppableRemoveEventListener.call(this,droppable),droppable.elem.removeEventListener("touchmove",this.droppableTouchMoveHandler)},s._getEventClientX=function(e){return e instanceof TouchEvent?e.changedTouches[0].clientX:e.clientX},s._getEventClientY=function(e){return e instanceof TouchEvent?e.changedTouches[0].clientY:e.clientY},s._getEventPageX=function(e){return e instanceof TouchEvent?e.changedTouches[0].pageX:e.pageX},s._getEventPageY=function(e){return e instanceof TouchEvent?e.changedTouches[0].pageY:e.pageY},s._getDragDropTarget=function(e,t){var n=t.target;if(t instanceof TouchEvent){var i=t.changedTouches.item(0);n=document.elementFromPoint(i.clientX,i.clientY)}return n},i}),define("widgets/brease/common/DragDropHandler/libs/dragDropPointer",["widgets/brease/common/DragDropHandler/libs/dragDropBase"],function(e){"use strict";function t(){e.call(this)}t.prototype=Object.create(e.prototype);var n=t.prototype;return n._wrapEventHandler=function(){e.prototype._wrapEventHandler.call(this);var t=this;this.documentPointerUpHandler=function(e){t._documentMouseUpHandler(t,e)},this.documentPointerDownHandler=function(e){t._documentMouseDownHandler(t,e)},this.documentPointerMoveHandler=function(e){t._documentMouseMoveHandler(t,e)},this.draggablePointerMoveHandler=function(e){e.target.hasPointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId),t._draggableMouseMoveHandler(t,e)},this.draggablePointerDownHandler=function(e){t._draggableMouseDownHandler(t,e)},this.draggablePointerLeaveHandler=function(e){t._draggableMouseLeaveHandler(t,e)},this.droppablePointerEnterHandler=function(e){t._droppableMouseEnterHandler(t,e)},this.droppablePointerMoveHandler=function(e){t._droppableMouseMoveHandler(t,e)},this.droppablePointerLeaveHandler=function(e){t._droppableMouseLeaveHandler(t,e)}},n._documentAddEventListener=function(){document.addEventListener("pointerup",this.documentPointerUpHandler),document.addEventListener("pointerdown",this.documentPointerDownHandler),document.addEventListener("pointermove",this.documentPointerMoveHandler)},n._draggableAddEventListener=function(draggable){draggable.elem.addEventListener("pointermove",this.draggablePointerMoveHandler),draggable.elem.addEventListener("pointerdown",this.draggablePointerDownHandler),draggable.elem.addEventListener("pointerleave",this.draggablePointerLeaveHandler)},n._droppableAddEventListener=function(droppable){droppable.elem.addEventListener("pointerenter",this.droppablePointerEnterHandler),droppable.elem.addEventListener("pointermove",this.droppablePointerMoveHandler),droppable.elem.addEventListener("pointerleave",this.droppablePointerLeaveHandler)},n._documentRemoveEventListener=function(){document.removeEventListener("pointerup",this.documentPointerUpHandler),document.removeEventListener("pointerdown",this.documentPointerDownHandler),document.removeEventListener("pointermove",this.documentPointerMoveHandler)},n._draggableRemoveEventListener=function(draggable){draggable.elem.removeEventListener("pointermove",this.draggablePointerMoveHandler),draggable.elem.removeEventListener("pointerdown",this.draggablePointerDownHandler),draggable.elem.removeEventListener("pointerleave",this.draggablePointerLeaveHandler)},n._droppableRemoveEventListener=function(droppable){droppable.elem.removeEventListener("pointerenter",this.documentPointerUpHandler),droppable.elem.removeEventListener("pointermove",this.droppablePointerMoveHandler),droppable.elem.removeEventListener("pointerleave",this.droppablePointerLeaveHandler)},t}),define("widgets/brease/common/DragDropHandler/libs/dragDropHandler",["widgets/brease/common/DragDropHandler/libs/dragDropBase","widgets/brease/common/DragDropHandler/libs/dragDropTouch","widgets/brease/common/DragDropHandler/libs/dragDropPointer"],function(e,t,n){"use strict";function i(){return"ontouchstart"in window||navigator.maxTouchPoints}function s(){return!!window.PointerEvent}function r(){s()?n.call(this):i()?t.call(this):e.call(this)}return s()?r.prototype=Object.create(n.prototype):i()?r.prototype=Object.create(t.prototype):r.prototype=Object.create(e.prototype),r}),define("widgets/brease/common/DragDropHandler/libs/draggableSettings",[],function(){"use strict";function e(){this.clone=!1,this.cloneClassList=[],this.data=null}return e}),define("widgets/brease/common/DragDropHandler/libs/droppableSettings",[],function(){"use strict";function e(){this.dragEnter=function(){},this.dragLeave=function(){},this.dragMove=function(){},this.drop=function(){}}return e}),require(["widgets/brease/common/DragDropHandler/libs/dragDropHandler","widgets/brease/common/DragDropHandler/libs/draggableSettings","widgets/brease/common/DragDropHandler/libs/droppableSettings"],function(e,t,n){"use strict";var i=0,dragDropHandler=new e,s=document.getElementsByClassName("draggableItem");for(i=0;i<s.length;i+=1){var draggableSettings=new t;dragDropHandler.registerDraggable(s[i],draggableSettings)}var r=document.getElementsByClassName("droppableItem");for(i=0;i<r.length;i+=1){var droppableSettings=new n;droppableSettings.dragEnter=function(e){console.log(e.target.id+" dragEnter!"),e.target.classList.add("dragEntered")},droppableSettings.dragMove=_.throttle(function(e){console.log(e.target.id+" dragMove!")},500),droppableSettings.dragLeave=function(e){console.log(e.target.id+" dragLeave!"),e.target.classList.remove("dragEntered")},droppableSettings.drop=function(e){console.log(e.target.id+" drop!");var droppable=dragDropHandler.getClosestDroppable(e.target);droppable.elem.innerHTML="",droppable.elem.appendChild(e.dragItem.children[0].cloneNode(!0)),droppable.elem.classList.remove("dragEntered")},dragDropHandler.registerDroppable(r[i],droppableSettings)}dragDropHandler.addEventListener("dragstarted",function(e){console.log("dragstarted!");for(var t=document.getElementsByClassName("droppableItem"),n=0;n<t.length;n+=1)t[n].classList.add("dropPossible");var i=e.detail.target.cloneNode(!0),s=["border-class"];dragDropHandler.setDragItemClone(i,s)}),dragDropHandler.addEventListener("dragended",function(e){console.log("dragended!");for(var t=document.getElementsByClassName("droppableItem"),n=0;n<t.length;n+=1)t[n].classList.remove("dropPossible")})}),define("widgets/brease/common/DragDropHandler/doc/example",function(){}),define("widgets/brease/common/ErrorHandling/libs/CommissioningErrorHandler",["brease/core/Class"],function(e){"use strict";var t=e.extend(function t(n){this.widget=n,this.init(),e.apply(this,arguments)},null),n=t.prototype;n.init=function(){this.contentId=this.widget.settings.parentContentId,this.widgetId=this.widget.elem.id,this.numberOfReportedErrors=0},n.requiredBindingMissing=function(e,t){var n=i(this.widgetId,this.contentId),s=e;void 0!==t&&(n=i(t,this.contentId)),r(this,n,"Binding for property "+s+" missing!")},n.invalidPropertyValue=function(e,t){var n=i(this.widgetId,this.contentId),s=e;void 0!==t&&(n=i(t,this.contentId)),r(this,n,'Property "'+s+'" has invalid or conflicting value!')},n.requiredAncestorWidgetMissing=function(e,t){var n=i(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(n=i(t,this.contentId)),r(this,n,"Missing an ancestor of type "+s+"!")},n.requiredParentWidgetMissing=function(e,t){var n=i(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(n=i(t,this.contentId)),r(this,n,"Missing a parent of type "+s+"!")},n.requiredChildWidgetMissing=function(e,t){var n=i(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(n=i(t,this.contentId)),r(this,n,"Missing a child of type "+s+"!")},n.childrenConflict=function(e,t){var n=i(this.widgetId,this.contentId),s=i(e,this.contentId);void 0!==t&&(n=i(t,this.contentId)),r(this,n,"Child "+s+" is invalid or conflicts with other children!")};function i(e,t){return e.replace(t+"_","")}function s(e){var t=$("<div />"),n={"background-color":"white",width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",color:"red","z-index":"999"};return t.css(n),e.el.append(t),t}function r(e,t,n){if(brease.config.editMode||window.jasmine)return!1;o(e.widget,"ERROR: "+n+" { WidgetId: "+t+", ContentId: "+e.contentId+" }"),e._numberOfReportedErrors+=1}function o(e,t){s(e).text(t),console.error(t)}return t}),define("widgets/brease/common/libs/BindingSync",["brease/core/Utils","brease/enum/Enum","brease/events/BreaseEvent"],function(Utils,Enum,BreaseEvent){"use strict";var BindingSync={};BindingSync.setupPropertyOrder=function t(n,i){function s(){var t={};i.forEach(function(e,n,i){t[e.name]={name:e.name,waitFor:e.waitFor},e.waitFor.forEach(function(e){t.hasOwnProperty(e)||(t[e]={name:e,waitFor:[]})})});for(var s in t)if(t.hasOwnProperty(s)){var r=t[s],o=Utils.setter(r.name),a=Object.getPrototypeOf(n);!function(t,i){Utils.isFunction(n[t])&&(n[t]=function(){n[t].methodCalled=!0,n[t].dependenciesResolved?a[t].apply(n,arguments):n[t].bufferedCalls.push(arguments),n.dispatchEvent(new CustomEvent("BindingEvent"))},n[t].bufferedCalls=[],n[t].inSync=!1,n[t].waitDone=!1,n[t].methodCalled=!1,n[t].dependenciesResolved=e(n,i),n[t].waitPromise=new Promise(function(s,r){n.elem.addEventListener("BindingEvent",function r(){n[t].waitDone||(n[t].dependenciesResolved=e(n,i),n[t].waitDone=n[t].dependenciesResolved&&n[t].methodCalled,n[t].waitDone&&(s(),n.elem.removeEventListener("BindingEvent",r),n.dispatchEvent(new CustomEvent("BindingEvent"))))})}).then(function(){n[t].bufferedCalls.forEach(function(e){a[t].apply(n,e)}),n[t].inSync=!0}))}(o,r)}}return n.state>=Enum.WidgetState.INITIALIZED?s():new Promise(function(e){n.elem.addEventListener(BreaseEvent.WIDGET_INITIALIZED,function(t){t.target===n.elem&&e()})}).then(s),!0};function e(e,t){return t.waitFor.reduce(function(t,n){var i=void 0!==e.bindings&&e.bindings.hasOwnProperty(n);return t&&(e[Utils.setter(n)].waitDone||!i)},!0)}return BindingSync}),define("widgets/brease/common/libs/BoxLayout",["brease/enum/Enum"],function(Enum){"use strict";var BoxLayout={};BoxLayout.CONTAINER_CLASS="box-container",BoxLayout.BOX_CLASS="box-class",BoxLayout.ORIENTATION_RIGHT="orientation-right",BoxLayout.ORIENTATION_LEFT="orientation-left",BoxLayout.ORIENTATION_TOP="orientation-top",BoxLayout.ORIENTATION_BOTTOM="orientation-bottom",BoxLayout.ALIGNMENT_TOP_LEFT="content-top-left",BoxLayout.ALIGNMENT_TOP="content-top",BoxLayout.ALIGNMENT_TOP_RIGHT="content-top-right",BoxLayout.ALIGNMENT_LEFT="content-left",BoxLayout.ALIGNMENT_CENTER="content-center",BoxLayout.ALIGNMENT_RIGHT="content-right",BoxLayout.ALIGNMENT_BOTTOM_LEFT="content-bottom-left",BoxLayout.ALIGNMENT_BOTTOM="content-bottom",BoxLayout.ALIGNMENT_BOTTOM_RIGHT="content-bottom-right";function e(e,t){if(e.classList.contains(t))return e;for(e=e.parentElement;e&&!e.classList.contains(t);)e=e.parentElement;return e}return BoxLayout.resetContainerClass=function(e){for(var t=0,n;n=e.classList.item(t);){switch(n){case this.ORIENTATION_RIGHT:case this.ORIENTATION_LEFT:case this.ORIENTATION_TOP:case this.ORIENTATION_BOTTOM:e.classList.remove(n);break}t+=1}},BoxLayout.resetBoxClass=function(e){for(var t=0,n;n=e.classList.item(t);){switch(n){case this.ALIGNMENT_TOP_LEFT:case this.ALIGNMENT_TOP:case this.ALIGNMENT_TOP_RIGHT:case this.ALIGNMENT_LEFT:case this.ALIGNMENT_CENTER:case this.ALIGNMENT_RIGHT:case this.ALIGNMENT_BOTTOM_LEFT:case this.ALIGNMENT_BOTTOM:case this.ALIGNMENT_BOTTOM_RIGHT:e.classList.remove(n);break}t+=1}},BoxLayout.createBoxContainer=function(){var e=document.createElement("div");return e.classList.add(this.CONTAINER_CLASS),e},BoxLayout.createBox=function(){var e=document.createElement("div");return e.classList.add(this.BOX_CLASS),e},BoxLayout.setOrientation=function(t,n){var i=e(t,this.CONTAINER_CLASS);if(i)switch(this.resetContainerClass(i),n){case Enum.Orientation.RTL:i.classList.add(this.ORIENTATION_RIGHT);break;case Enum.Orientation.LTR:i.classList.add(this.ORIENTATION_LEFT);break;case Enum.Orientation.TTB:i.classList.add(this.ORIENTATION_TOP);break;case Enum.Orientation.BTT:i.classList.add(this.ORIENTATION_BOTTOM);break}},BoxLayout.setBoxAlign=function(t,n){var i=e(t,this.BOX_CLASS);if(i)switch(this.resetBoxClass(i),n){case"TopLeft":i.classList.add(this.ALIGNMENT_TOP_LEFT);break;case"Top":i.classList.add(this.ALIGNMENT_TOP);break;case"TopRight":i.classList.add(this.ALIGNMENT_TOP_RIGHT);break;case"Left":i.classList.add(this.ALIGNMENT_LEFT);break;case"Center":i.classList.add(this.ALIGNMENT_CENTER);break;case"Right":i.classList.add(this.ALIGNMENT_RIGHT);break;case"BottomLeft":i.classList.add(this.ALIGNMENT_BOTTOM_LEFT);break;case"Bottom":i.classList.add(this.ALIGNMENT_BOTTOM);break;case"BottomRight":i.classList.add(this.ALIGNMENT_BOTTOM_RIGHT);break}},BoxLayout}),define("widgets/brease/common/libs/ChartUtils",["brease/enum/Enum","brease/core/Utils","libs/d3/d3"],function(Enum,Utils,e){"use strict";var ChartUtils={};function t(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}ChartUtils.rotateTickLabels=function(e,n,i,s){var o=t(s,0),l=t(i,0),d=a(o,180,180,.5,90),c="",u="",h;"top"===n?(c="y",l=-l,h=-90===d?"0.3em":"0em",u="rotate("+d+", 0, "+l+")"):"bottom"===n?(c="y",h=-90===d?"0.3em":"0.7em",u="rotate("+d+", 0, "+l+")"):"right"===n?(c="x",h=-90===d?"0.7em":"0.3em",u="rotate("+d+", "+l+", 0)"):(c="x",h=-90===d?"-0.3em":"0.3em",l=-l,u="rotate("+d+", "+l+", 0)"),e.attr(c,l).attr("dy",h).attr("transform",u).style("text-anchor",r(d,n))},ChartUtils.getNumberOfTickLabel=function(e,n){var i=a(t(n.info.tickLabelRotation,0),180,180,.5,90),s=Math.abs(i*Math.PI/180),o=r(i,n.info.position),l=10,d=e.map(function(e){var t=e.getBBox();return{width:t.width,height:t.height}}),c=Math.max.apply(null,d.map(function(e){return e.width})),u=Math.max.apply(null,d.map(function(e){return e.height})),h=c+10,g;return"middle"===o?g=Math.floor(n.width/h):(h=Math.min((u+5)/Math.sin(s),c*Math.cos(s)),h=Math.max(h,u+5),g=Math.floor(n.width/h)),g},ChartUtils.getTickLabelValues=function(t,n,s){if(n<0)return console.error("ChartUtils.getTickLabelValues: numberOfTickLabel must be >= 0"),void 0;n=n||1;var r=this._getTickLabelStep(t,n,s),o=i(t,r),a;switch(s){case"dateTime":a=e.range(o[0],o[1],r).map(function(e){return new Date(e)});break;case"index":case"secondsAsNumber":a=e.range(o[0],o[1],r);break;default:a=[0,1]}return a},ChartUtils.getMultiLine=function(t,n){var i=t,s=i[0][0].innerHTML.split("\n"),r,o;if(s.length>1)if("bottom"===n)for(o=0;o<i[0].length;o+=1){for(e.select(i[0][o]).append("tspan").text($(i[0][o])[0].firstChild.data.split("\n")[0]),r=1;r<s.length;r+=1)e.select(i[0][o]).append("tspan").text($(i[0][o])[0].firstChild.data.split("\n")[r]).attr("position","relative").attr("x","0").attr("dy","1em");$(i[0][o])[0].firstChild.data=""}else if("top"===n)for(o=0;o<i[0].length;o+=1){for(e.select(i[0][o]).append("tspan").text($(i[0][o])[0].firstChild.data.split("\n")[s.length-1]),r=s.length-2;r>-1;r-=1)e.select(i[0][o]).append("tspan").text($(i[0][o])[0].firstChild.data.split("\n")[r]).attr("position","relative").attr("x","0").attr("dy","-1em");$(i[0][o])[0].firstChild.data=""}return i},ChartUtils._binarySearchSuccessor=function(e,t){if(!e.length)return-1;if(e[e.length-1]<t)return e.length-1;for(var n=0,i=e.length-1,s;n!==i;){if(s=n+i>>>1,e[s]===t)return s;e[s]<t?n=s+1:i=s}return 0===n&&e[n]<t?-1:n},ChartUtils._getTickLabelStep=function(e,t,i){switch(i){case"dateTime":return s.call(this,e,t);case"index":case"secondsAsNumber":return n(e,t);default:return 1}};function n(e,t){for(var n=Math.abs(e[1]-e[0]),i=t-1,s=[2,5,10],r,o=5,a,l,d=-1,c,u=0;u<s.length;u+=1)l=Math.pow(s[u],Math.floor(Math.log(n/i)/Math.log(s[u]))),c=Math.ceil(n/(i*l)),r=Math.floor(n/(c*l)),d<r&&r<=i&&c<=5&&(d=r,a=c*l);return a}function i(e,t){return[Math.ceil(e[0]/t)*t,Math.floor(e[1]/t)*t+.5*t]}ChartUtils._stepBases=[1,2,4,5,10,20,50,100,200,400,500,1e3,2e3,4e3,5e3,6e3,1e4,12e3,15e3,2e4,3e4,45e3,6e4,12e4,24e4,3e5,36e4,6e5,72e4,9e5,12e5,18e5,27e5,36e5,72e5,108e5,144e5,216e5,288e5,432e5,864e5,1728e5,3456e5,6048e5,12096e5,2592e6,5184e6,7776e6,31536e6,63072e6,126144e6,15768e7,31536e7,63072e7,15768e8,31536e8,63072e8,126144e8,15768e9,31536e9,63072e9,15768e10,31536e10];function s(e,t){var n=Math.abs(e[1]-e[0]),i=n/t,s=this._binarySearchSuccessor(this._stepBases,i);return-1===s?1:this._stepBases[s]}function r(e,t){switch(t){case"top":case"bottom":return o(e,t);case"right":return-90===e?"middle":"start";case"left":return-90===e?"middle":"end";default:return"middle"}}function o(e,t){return 0===e?"middle":(e+180)%180<90?"top"===t?"end":"start":"top"===t?"start":"end"}function a(e,t,n,i,s){return Math.round(t*(e/n-i-Math.floor(e/n-i))-s)}return ChartUtils}),define("widgets/brease/common/libs/ChildHandling",["brease/enum/Enum","brease/events/BreaseEvent"],function(Enum,BreaseEvent){"use strict";var ChildHandling={};return ChildHandling.setChildClasses=function e(t,n){if(t.length>0)for(var i=0;i<t.length;i+=1)$("#"+t[i]).addClass(n)},ChildHandling.removeChildClasses=function e(t,n){if(t.length>0)for(var i=0;i<t.length;i+=1)$("#"+t[i]).removeClass(n)},ChildHandling.getChildren=function e(t){var n=t.find("[data-brease-widget]"),i={id:[]};if(void 0!==n&&n.length>0){n=n.first().parent().children("[data-brease-widget]");for(var s=0;s<n.length;s+=1)i.id.push(n[s].id)}return i},ChildHandling.setSameParameterForAllChilds=function e(t,n,i){t.forEach(function(e){brease.callWidget(e,n,i)})},ChildHandling.setParameterForChild=function e(t,n,i){brease.callWidget(t,n,i)},ChildHandling.childrenInitDone=function(e,t){var n=[];0!==e.length&&(e.forEach(function(e){var t=$("#"+e)[0],i=$.Deferred();n.push(i),brease.uiController.getWidgetState(e)>=Enum.WidgetState.INITIALIZED&&brease.uiController.getWidgetState(e)!==Enum.WidgetState.SUSPENDED?i.resolve():t.addEventListener(BreaseEvent.WIDGET_INITIALIZED,function(e){i.resolve()})}),$.when.apply($,n).done(function(){t()}))},ChildHandling}),define("widgets/brease/common/libs/DataAdapter",["brease/core/Class","libs/d3/d3","brease/core/Utils"],function(e,t,Utils){"use strict";var n=e.extend(function DataAdapter(t){e.call(this),this.widget=t,this.settings={chartMargin:{marginTop:15,marginRight:15,marginBottom:15,marginLeft:15},cursorAreaWidth:20},this.init()},null),i=n.prototype;i.init=function(){this.xAxisAreas=[],this.yAxisAreas=[],this.xAxisCursorAreas=[],this.chartArea={},this.yScales=[],this.xScales=[],this.xAxisCursors=[],this.graphs=[];for(var e in this.widget.chartItems.yValues)this.graphs.push({id:e,coordinates:[]});this.graphIntersectionPoints=[];for(var t=0;t<this.graphs.length;t+=1)this.graphIntersectionPoints[t]={graphId:this.graphs[t].id,xCursors:[]};s(this)},i.dispose=function(){},i.updateScales=function(){o(this)},i.updateGraphData=function(){a(this)},i.updateCursor=function(){l(this)},i.updateZoomLevelLimits=function(){c(this)},i.getXAxisAreas=function(){return this.xAxisAreas},i.getYAxisAreas=function(){return this.yAxisAreas},i.getXAxisCursorAreas=function(){return this.xAxisCursorAreas},i.getChartArea=function(){return this.chartArea},i.getGraphs=function(){return this.graphs},i.getGraphIntersectionPoints=function(){return this.graphIntersectionPoints},i.getYAxesMinimum=function(){var e=this.getYAxisAreas(),t=null;if(!this.widget||this.widget.chartItems.length<1||this.widget.chartItems.yAxis.length<0)return t;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this.widget.chartItems.yAxis[n].minimum();(null===t||i<t)&&(t=i)}return t},i.getYAxesMaximum=function(){var e=this.getYAxisAreas(),t=null;if(!this.widget||this.widget.chartItems.length<1||this.widget.chartItems.yAxis.length<0)return t;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this.widget.chartItems.yAxis[n].maximum();(null===t||i>t)&&(t=i)}return t};function s(e){var n=0,i,s,o=0,a=e.widget.settings.width,l=0,d=e.widget.settings.height,c=0,u=0,h,g,f,p,m,v,b=e.widget.settings.width,y=e.widget.settings.height,E,A,I,C,w;E=e.widget.settings.chartMargin.match(/-?\d+(\.\d+)?px/g);for(var T in e.settings.chartMargin)e.settings.chartMargin[T]=parseFloat(E[n],10),n=E[n+1]?n+1:0;A=parseInt(e.widget.el.css("border-top-width"),10),I=parseInt(e.widget.el.css("border-bottom-width"),10),C=parseInt(e.widget.el.css("border-left-width"),10),w=parseInt(e.widget.el.css("border-right-width"),10),o+=e.settings.chartMargin.marginLeft,a-=e.settings.chartMargin.marginRight+C+w,l+=e.settings.chartMargin.marginTop,d-=e.settings.chartMargin.marginBottom;for(i in e.widget.chartItems.yAxis)p=e.widget.chartItems.yAxis[i],u=parseInt(e.widget.chartItems.yAxis[i].settings.width,10),m=parseFloat(p.getTickLabelDistance()),v=parseFloat(p.getTickLabelRotation())%360,e.yAxisAreas[i]={id:i,y:e.settings.chartMargin.marginTop,width:u,info:{coordinate:"y",position:e.widget.chartItems.yAxis[i].getAxisPosition(),axisLabelDistance:parseInt(p.getAxisLabelDistance(),10),tickLabelDistance:m||0,tickLabelRotation:v||0,minZoomLevel:e.widget.getMinZoomLevel()/100,maxZoomLevel:e.widget.getMaxZoomLevel()/100,format:p.currentFormat(),type:"number"}},a-="right"===e.yAxisAreas[i].info.position?u:0,e.yAxisAreas[i].x="left"===e.yAxisAreas[i].info.position?o:a,o+="left"===e.yAxisAreas[i].info.position?u:0,e.yScales[i]=t.scale.linear(),e.yAxisAreas[i].scale=e.yScales[i];for(i in e.widget.chartItems.xAxis){switch(g=e.widget.chartItems.xAxis[i],c=parseInt(g.settings.height,10),m=parseFloat(g.getTickLabelDistance()),v=parseFloat(g.getTickLabelRotation())%360,e.xAxisAreas[i]={id:i,x:o,width:a-o,height:c,info:{coordinate:"x",position:g.getAxisPosition(),axisLabelDistance:parseInt(g.getAxisLabelDistance(),10),tickLabelDistance:m||0,tickLabelRotation:v||0,minZoomLevel:e.widget.getMinZoomLevel()/100,maxZoomLevel:e.widget.getMaxZoomLevel()/100}},d-="bottom"===e.xAxisAreas[i].info.position?c:0,e.xAxisAreas[i].y="bottom"===e.xAxisAreas[i].info.position?d-I-A:l,l+="top"===e.xAxisAreas[i].info.position?c:0,f=e.widget.chartItems.xAxis[i]._getMinValue(),g._getAxisType()){case"dateTime":e.xScales[i]=t.time.scale();break;case"index":
case"secondsAsNumber":e.xScales[i]=t.scale.linear();break}e.xAxisAreas[i].scale=e.xScales[i]}for(i in e.widget.chartItems.yAxis)e.yAxisAreas[i].y=l,e.yAxisAreas[i].height=d-l-A-I;e.chartArea={x:o,y:l,width:a-o,height:d-l-A-I};for(s in e.widget.chartItems.xCursors){var x=e.widget.chartItems.xCursors[s];e.xAxisCursorAreas[s]={id:s,xCursor:x._getValue(),yValues:[],yValueAxes:[],markerVisible:[],active:!1,x:-e.settings.cursorAreaWidth/2+e.xAxisAreas[x.axisWidget.elem.id].scale(x._getValue()),y:0,width:e.settings.cursorAreaWidth,height:e.chartArea.height,maxAvailableXPositionIndex:x._getMaxDrawnXSampleIndex(x._getMaxNumberOfSamples())};for(var S in x.graphWidgets){var _=x.graphWidgets[S],D,L;L=_.getNumberOfSamples()<0?_.getValue().length:_.getNumberOfSamples(),D=x.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[s].xCursor)<=L-1,e.xAxisCursorAreas[s].yValues[S]=_.getCursorValue(),e.xAxisCursorAreas[s].yValueAxes[S]=_.axisWidget.elem.id,e.xAxisCursorAreas[s].markerVisible[S]=_.isVisible()&&x.isVisible()&&D}}r(e),e._createGraphIntersectionPoints()}function r(e){for(var t=0;t<e.graphs.length;t+=1){var n=e.graphs[t].id,i=e.widget.chartItems.yValues[n],s=i.xAxisWidget.cursors,r=e.graphs[t].intersectionPoints={};for(var o in s){var a=e.widget.chartItems.xCursors[o],l=i.getNumberOfSamples()<0?i.getValue().length:i.getNumberOfSamples(),d=a.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[o].xCursor)<=l-1;r[o]={xValue:a._getValue(),yValues:i._getYValueFromXCoordinate(a._getValue()),yValueAxes:i.axisWidget.elem.id,markerSize:parseInt(i.getIntersectionPointSize(),10),markerEnable:a.isEnabled(),markerActive:a._getActive(),markerVisible:i.isVisible()&&i.isVisible()&&a.isVisible()&&d}}}}i._createGraphIntersectionPoints=function(){var e=this;this.getGraphIntersectionPoints().forEach(function(t){var n=t.graphId,i=e.widget.chartItems.yValues[n],s=i.xAxisWidget.cursors;for(var r in s){var o=e.widget.chartItems.xCursors[r],a=i.getNumberOfSamples()<0?i.getValue().length:i.getNumberOfSamples(),l=o.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[r].xCursor)<=a-1;t.xCursors[r]={xValue:o._getValue(),yValues:i._getYValueFromXCoordinate(o._getValue()),yValueAxes:i.axisWidget.elem.id,markerSize:parseInt(i.getIntersectionPointSize(),10),markerEnable:o.isEnabled(),markerActive:o._getActive(),markerVisible:i.isVisible()&&i.isVisible()&&o.isVisible()&&l}}})},i._updateGraphIntersectionPoints=function(){var e=this;this.getGraphIntersectionPoints().forEach(function(t){var n=t.graphId,i=e.widget.chartItems.yValues[n],s=i.xAxisWidget.cursors;for(var r in s){var o=e.widget.chartItems.xCursors[r],a=i.getNumberOfSamples()<0?i.getValue().length:i.getNumberOfSamples(),l=o.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[r].xCursor)<=a-1;t.xCursors[r]={xValue:o._getValue(),yValues:i._getYValueFromXCoordinate(o._getValue()),yValueAxes:i.axisWidget.elem.id,markerSize:parseInt(i.getIntersectionPointSize(),10),markerEnable:o.isEnabled(),markerActive:o._getActive(),markerVisible:i.isVisible()&&i.isVisible()&&o.isVisible()&&l}}})};function o(e){var n,i,s,r,o;for(n in e.yAxisAreas)r=e.widget.chartItems.yAxis[n].minimum(),o=e.widget.chartItems.yAxis[n].maximum(),r===o&&(0!==r?(r*=.9,o*=1.1):(r=-1,o=1)),e.yScales[n]=t.scale.linear().domain([r,o]).range([e.yAxisAreas[n].height,0]),e.yAxisAreas[n].scale=e.yScales[n],e.yAxisAreas[n].info.format=e.widget.chartItems.yAxis[n].currentFormat();for(n in e.xAxisAreas){var l=e.widget.chartItems.xAxis[n];switch(i=l._getMinValue(),s=l._getMaxValue(),l._getAxisType()){case"dateTime":e.xScales[n]=t.time.scale(),e.xAxisAreas[n].info.type=l._getAxisType();break;case"index":case"secondsAsNumber":e.xScales[n]=t.scale.linear(),e.xAxisAreas[n].info.type=l._getAxisType();break}e.xAxisAreas[n].info.format=e.widget.chartItems.xAxis[n].currentFormat(),e.xScales[n].domain([i,s]).range([0,e.xAxisAreas[n].width]),e.xAxisAreas[n].scale=e.xScales[n]}a(e)}function a(e){for(var t,n,i,s=0;s<e.graphs.length;s+=1)t=e.widget.chartItems.yValues[e.graphs[s].id],n=t.axisWidget.elem.id,i=t.xAxisWidget.elem.id,e.graphs[s].yScale=e.yScales[n],e.graphs[s].xScale=e.xScales[i],e.graphs[s].coordinates=t._coordinates(),e.graphs[s].interpolationType=t.getInterpolationType()}function l(e){for(var t in e.widget.chartItems.xCursors){var n=e.widget.chartItems.xCursors[t];e.xAxisCursorAreas[t].xCursor=n._getValue(),e.xAxisCursorAreas[t].active=n._getActive(),e.xAxisCursorAreas[t].x=-e.settings.cursorAreaWidth/2+e.xAxisAreas[n.axisWidget.elem.id].scale(n._getValue()),e.xAxisCursorAreas[t].y=0,e.xAxisCursorAreas[t].width=e.settings.cursorAreaWidth;for(var i in n.graphWidgets){var s=n.graphWidgets[i],r,o;o=s.getNumberOfSamples()<0?s.getValue().length:s.getNumberOfSamples(),r=n.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[t].xCursor)<=o-1,e.xAxisCursorAreas[t].markerVisible[i]=s.isVisible()&&n.isVisible()&&r,e.xAxisCursorAreas[t].markerVisible[i]&&(e.xAxisCursorAreas[t].yValues[i]=s._getIntersectionValue(n._getValue(),n._getActive())),e.xAxisCursorAreas[t].yValueAxes[i]=s.axisWidget.elem.id}e.xAxisCursorAreas[t].maxAvailableXPositionIndex=n._getMaxDrawnXSampleIndex(n._getMaxNumberOfSamples())}d(e),e._updateGraphIntersectionPoints()}function d(e){for(var t=0;t<e.graphs.length;t+=1){var n=e.graphs[t].id,i=e.widget.chartItems.yValues[n],s=i.xAxisWidget.cursors,r=e.graphs[t].intersectionPoints;for(var o in s){var a=e.widget.chartItems.xCursors[o],l=i.getNumberOfSamples()<0?i.getValue().length:i.getNumberOfSamples(),d=a.axisWidget._xPositions().map(function(e){return+e}).indexOf(+e.xAxisCursorAreas[o].xCursor)<=l-1;r[o]={xValue:a._getValue(),yValues:i._getYValueFromXCoordinate(a._getValue()),yValueAxes:i.axisWidget.elem.id,markerEnable:a.isEnabled(),markerActive:a._getActive(),markerVisible:i.isVisible()&&i.isVisible()&&a.isVisible()&&d}}}}function c(e){for(var t in e.widget.chartItems.yAxis)e.yAxisAreas[t].info.minZoomLevel=e.widget.getMinZoomLevel()/100,e.yAxisAreas[t].info.maxZoomLevel=e.widget.getMaxZoomLevel()/100;for(t in e.widget.chartItems.xAxis)e.xAxisAreas[t].info.minZoomLevel=e.widget.getMinZoomLevel()/100,e.xAxisAreas[t].info.maxZoomLevel=e.widget.getMaxZoomLevel()/100}return n}),define("widgets/brease/common/libs/EditorGrid",["brease/core/Class","libs/d3/d3","globalize","widgets/brease/common/libs/ChartUtils"],function(e,t,n,ChartUtils){"use strict";var i={},s=e.extend(function EditorGrid(t,n){e.call(this),this.widget=t,n.mainContainer||(this.parentWidget=brease.callWidget(t.el.parents(":eq(1)")[0].id,"widget"),this.areas=this.parentWidget?this.parentWidget.editorGrid.areas:null),this.children={},this.configuration=n,this.init()},i),r=s.prototype;r.init=function(){this.widget.el.on("widget_added",this._bind("childrenAdded")),this.widget.el.on("widget_removed",this._bind("childrenRemoved"))},r.dispose=function(){this.widget.el.off("widget_added",this._bind("childrenAdded")),this.widget.el.off("widget_removed",this._bind("childrenRemoved"))},r.childrenAdded=function(e){if(e.target===this.widget.elem){var t=e.detail.widgetId,n=brease.callWidget(t,"widget");this.children.hasOwnProperty(t)||(this.children[t]=n)}},r.childrenRemoved=function(e){if(e.target===this.widget.elem){var t=e.detail.widgetId;this.children.hasOwnProperty(t)&&delete this.children[t]}},r.createLayout=function(){var e=this;switch(this.areas={left:$("<div class='container areaLeft'></div>"),right:$("<div class='container areaRight'></div>"),graph:$("<div class='container areaGraph'></div>")},e.configuration.layout){case"2Areas":e.leftAreaSize=0,e.widget.el.append(this.areas.left),this.areas.right.append(this.areas.graph),e.widget.el.append(this.areas.right);break;case"5Areas":this.areas.center=$("<div class='container areaCenter'></div>"),this.areas.top=$("<div class='container areaTop'></div>"),this.areas.bottom=$("<div class='container areaBottom'></div>"),e.leftAreaSize=0,e.rightAreaSize=0,e.topAreaHeight=0,e.bottomAreaHeight=0,e.actualOrder=0,this.areas.top.css({"flex-basis":e.topAreaHeight,overflow:"visible"}),this.areas.bottom.css({"flex-basis":e.bottomAreaHeight,overflow:"visible"}),this.areas.center.css({overflow:"visible"}),this.areas.left.css({overflow:"visible"}),this.areas.right.css({overflow:"visible"}),e.widget.el.append(this.areas.left),this.areas.center.append(this.areas.top),this.areas.center.append(this.areas.graph),this.areas.center.append(this.areas.bottom),e.widget.el.append(this.areas.center),e.widget.el.append(this.areas.right);break}},r.createAxis=function(){var e=this,n={},i={info:{}},s,r,l;if(n=o(e),e.scaleContainer=t.select(e.widget.el.get(0)).append("svg").attr("style","z-index:-1").attr("class","container scaleContainer"),e.scale="time"===e.widget.editorGrid.configuration.scaleType?t.time.scale():t.scale.linear(),e.scale.domain(n.domain).range(n.range),e.axis=t.svg.axis().scale(e.scale).orient(n.orient),e.widget.editorGrid.configuration.tickFormat&&e.axis.tickFormat(function(t){return a(e.widget.editorGrid.configuration.tickFormat,t,e.widget.editorGrid.configuration.scaleType)}),e.axisElement=e.scaleContainer.append("g").attr("class","axis").attr("id",n.id).call(e.axis),e.configuration.tickLabelRotation){var d=e.axisElement.selectAll(".tick>text");ChartUtils.rotateTickLabels(d,e.configuration.axisPosition,e.configuration.tickLabelDistance,e.configuration.tickLabelRotation)}/ChartXAxis/.test(e.widget.elem.className)&&(i.info.tickLabelRotation=e.configuration.tickLabelRotation,i.info.position=e.configuration.axisPosition,i.info.type="time"===e.configuration.scaleType?"dateTime":"index",i.width=document.querySelector('g.axis[id*="'+e.widget.elem.id+'"] .domain').getBBox().width,s=Array.prototype.slice.call(document.getElementById(e.widget.elem.id+"_XAxis").querySelectorAll(".tick text")),r=Math.min(ChartUtils.getNumberOfTickLabel(s,i),10),l=ChartUtils.getTickLabelValues(n.domain,r,i.info.type),e.axis.tickValues(l),e.axisElement.call(e.axis)),e.scaleContainer.append("g").attr("transform","translate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?n.axisLabelDistance:e.areas.graph.width()/2)+", "+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?e.areas.graph.height()/2:n.axisLabelDistance)+") rotate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?-90:0)+")").attr("id",n.id+"_axisLabel").attr("class","containerAxisDescription").append("text").attr("class","axisDescription").style("text-anchor","middle").text(n.axisLabel)},r.updateAxis=function(){var e=this,t={},n={info:{}},i,s,r,l;t=o(e),e.scale.domain(t.domain),e.scale.range(t.range),e.axis.orient(t.orient),t.tickFormat&&e.axis.tickFormat(function(t){return a(e.widget.editorGrid.configuration.tickFormat,t,e.widget.editorGrid.configuration.scaleType)}),e.axisElement.call(e.axis),e.axisElement.attr("transform","translate("+t.offsetX+","+t.offsetY+")").call(e.axis),e.configuration.tickLabelRotation&&(l=e.axisElement.selectAll(".tick>text"),l=ChartUtils.getMultiLine(l,e.configuration.axisPosition),ChartUtils.rotateTickLabels(l,e.configuration.axisPosition,e.configuration.tickLabelDistance,e.configuration.tickLabelRotation)),/ChartXAxis/.test(e.widget.elem.className)&&(n.info.tickLabelRotation=e.configuration.tickLabelRotation,n.info.position=e.configuration.axisPosition,n.info.type="time"===e.configuration.scaleType?"dateTime":"index",n.width=document.querySelector('g.axis[id*="'+e.widget.elem.id+'"] .domain').getBBox().width,i=Array.prototype.slice.call(document.getElementById(e.widget.elem.id+"_XAxis").querySelectorAll(".tick text")),s=Math.min(ChartUtils.getNumberOfTickLabel(i,n),10),r=ChartUtils.getTickLabelValues(t.domain,s,n.info.type),e.axis.tickValues(r),e.axisElement.call(e.axis)),e.configuration.tickLabelRotation&&(l=e.axisElement.selectAll(".tick>text"),l=ChartUtils.getMultiLine(l,e.configuration.axisPosition),ChartUtils.rotateTickLabels(l,e.configuration.axisPosition,e.configuration.tickLabelDistance,e.configuration.tickLabelRotation)),e.scaleContainer.select(".containerAxisDescription").attr("transform","translate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?t.axisLabelDistance:e.areas.graph.width()/2)+", "+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?e.areas.graph.height()/2:t.axisLabelDistance)+") rotate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?-90:0)+")"),e.scaleContainer.select(".axisDescription").attr("dy","left"===e.configuration.axisPosition||"top"===e.configuration.axisPosition?"-0.03em":"0.75em").text(t.axisLabel)},r.updateAllChildren=function(){};function o(e){var n={};switch(e.configuration.axisType){case"Vertical":n.domain="TopToBottom"===e.widget.settings.orientation?[0,100]:[100,0],n.range="5Areas"===e.parentWidget.editorGrid.configuration.layout?[20,e.areas.graph.height()-20]:[20,e.widget.el.height()-20],n.orient="right"===e.configuration.axisPosition?"right":"left",n.offsetX=e.configuration.offsetX||("right"===e.configuration.axisPosition?0:e.widget.settings.width-10),n.offsetY=e.configuration.offsetY||0,n.axisLabel=e.configuration.axisLabel||null,n.axisLabelDistance=e.configuration.offsetX+1+("left"===e.configuration.axisPosition?-1:1)*e.configuration.axisLabelDistance||0,n.id=e.widget.elem.id+"_YAxis";break;case"Horizontal":n.domain="RightToLeft"===e.widget.settings.orientation?e.widget.editorGrid.configuration.axisDomain?e.widget.editorGrid.configuration.axisDomain:[100,0]:e.widget.editorGrid.configuration.axisDomain?e.widget.editorGrid.configuration.axisDomain:[0,100],n.format&&(n.format=e.widget.editorGrid.configuration.tickFormat&&"time"===e.widget.editorGrid.configuration.scaleType?t.time.format(e.widget.editorGrid.configuration.tickFormat):t.format("d")),n.range="5Areas"===e.parentWidget.editorGrid.configuration.layout?[20,e.areas.graph.width()-20]:[20,e.widget.el.width()-20],n.orient="top"===e.configuration.axisPosition?"top":"bottom",n.offsetX=e.configuration.offsetX||0,n.offsetY=e.configuration.offsetY||("top"===e.configuration.axisPosition?e.widget.settings.height-10:0),n.axisLabel=e.configuration.axisLabel||null,n.axisLabelDistance=e.configuration.offsetY+1+("top"===e.configuration.axisPosition?-1:1)*e.configuration.axisLabelDistance||0,n.id=e.widget.elem.id+"_XAxis";break;default:n=void 0}return n}function a(e,n,i){switch(i){case"time":return Globalize.format(n,e);case"number":var s=0===e.decimalPlaces?e.minimumIntegerDigits:e.minimumIntegerDigits+e.decimalPlaces+1;return t.format("0"+(n<0?s+1:s)+"."+e.decimalPlaces+"f")(n);default:return t.format("d")}}return s}),define("widgets/brease/common/libs/flux/mocks/MockedDispatcher",[],function(){"use strict";return function MockedDispatcher(){this.registeredStores=[],this.registerStore=function e(t){this.registeredStores.push(t)},this.resetStores=function e(){this.registeredStores=[]},this.dispatch=function e(t){this.registeredStores.forEach(function(e){e.newAction(t)})}}}),define("widgets/brease/common/libs/flux/mocks/MockedStore",["brease/enum/Enum"],function(Enum){"use strict";return function MockedView(){this.suscribedViews=[],this.registerView=function e(t){this.suscribedViews.push(t)},this.dispatchAction=function e(){this.suscribedViews.forEach(function(e){e.update()})},this.state={imageList:[""],imageListWithPrefix:[""],imageIndex:0,pathPrefix:"",sizeMode:Enum.SizeMode.CONTAIN,backgroundAlignment:["left","top"],type:"invalid",svgInline:void 0,actualImage:"",height:"auto",width:"auto",visible:!0,preloading:!1},this.getImageType=function e(){return this.state.type},this.getImagePath=function e(){return this.state.actualImage},this.getSvgInline=function e(){return this.state.svgInline},this.getImageSizeMode=function e(){return this.state.sizeMode},this.getBackgroundAlignment=function e(){return this.state.backgroundAlignment},this.getHeight=function e(){return this.state.height},this.getWidth=function e(){return this.state.width},this.getVisible=function e(){return this.state.visible},this.getPreloading=function e(){return this.state.preloading}}}),define("widgets/brease/common/libs/flux/mocks/MockedView",[],function(){"use strict";return function MockedView(){this.update=function(){this.updated=!0},this.isUpdated=function(){return this.updated},this.reset=function(){this.updated=!1}}}),define("widgets/brease/common/libs/flux/stores/ImageStore/ImageActionTypes",[],function(){"use strict";return{INIT_IMAGE:"INIT_IMAGE",INIT_IMAGE_AFTER_PRELOAD:"INIT_IMAGE_AFTER_PRELOAD",SET_IMAGE_LIST:"SET_IMAGE_LIST",SET_IMAGE_FROM_INDEX:"SET_IMAGE_FROM_INDEX",SET_IMAGE_INDEX:"SET_IMAGE_INDEX",SET_PATH_PREFIX:"SET_PATH_PREFIX",SET_SIZE_MODE:"SET_SIZE_MODE",SET_BACKGROUND_ALIGNMENT:"SET_BACKGROUND_ALIGNMENT",SET_WIDTH:"SET_WIDTH",SET_HEIGHT:"SET_HEIGHT",SET_VISIBLE:"SET_VISIBLE",SET_USE_SVG_STYLING:"SET_USE_SVG_STYLING"}}),define("widgets/brease/common/libs/flux/stores/ImageStore/ImageActions",["widgets/brease/common/libs/flux/stores/ImageStore/ImageActionTypes"],function(ImageActionTypes){"use strict";var ImageActions=function(e){this.dispatcher=e};return ImageActions.prototype.initImage=function e(){this.dispatcher.dispatch({type:ImageActionTypes.INIT_IMAGE})},ImageActions.prototype.initImageAfterPreload=function e(){this.dispatcher.dispatch({type:ImageActionTypes.INIT_IMAGE_AFTER_PRELOAD})},ImageActions.prototype.setImageList=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_IMAGE_LIST,data:t})},ImageActions.prototype.setImageFromIndex=function e(t,n){this.dispatcher.dispatch({type:ImageActionTypes.SET_IMAGE_FROM_INDEX,data:{image:t,index:n}})},ImageActions.prototype.setImageIndex=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_IMAGE_INDEX,data:t})},ImageActions.prototype.setPathPrefix=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_PATH_PREFIX,data:t})},ImageActions.prototype.setSizeMode=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_SIZE_MODE,data:t})},ImageActions.prototype.setUseSVGStyling=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_USE_SVG_STYLING,data:t})},ImageActions.prototype.setBackgroundAlignment=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_BACKGROUND_ALIGNMENT,data:t})},ImageActions.prototype.setWidth=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_WIDTH,data:t})},ImageActions.prototype.setHeight=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_HEIGHT,data:t})},ImageActions.prototype.setVisible=function e(t){this.dispatcher.dispatch({type:ImageActionTypes.SET_VISIBLE,data:t})},ImageActions}),define("widgets/brease/common/libs/flux/stores/ImageStore/ImageTypes",[],function(){"use strict";return{SVG:"svg",INVALID:"invalid",OTHER:"other"}}),define("widgets/brease/common/libs/wfUtils/UtilsImage",["libs/d3/d3"],function(e){"use strict";var UtilsImage={};return UtilsImage.getInlineSvg=function(t,n){var i=$.Deferred();return e.xml(t).mimeType("image/svg+xml").get(function(e,t){if(e)if(!0===n)i.reject();else{var s=UtilsImage.getBrokenSvg();i.resolve($(s))}else i.resolve($(t.documentElement))}),i},UtilsImage.isStylable=function(e){var t;return t=""!==e&&void 0!==e&&"svg"===e.split(".").pop(),t},UtilsImage.getBrokenSvg=function(){var t=document.createElementNS(e.ns.prefix.svg,"svg"),n=e.select(t).attr("style","width: 20px; height:23px");return n.append("line").attr("x1",3.75).attr("y1",-.069449).attr("x2",.75).attr("y2",23).attr("stroke","#b2b2b2").attr("stroke-width",1.5),n.append("line").attr("x1",23).attr("y1",22.25).attr("x2",0).attr("y2",22.25).attr("stroke","#666666").attr("stroke-width",1.5),n.append("line").attr("x1",22.521265).attr("y1",3.787241).attr("x2",22.521265).attr("y2",16.808505).attr("stroke","#666666").attr("stroke-width",1.5),n.append("line").attr("x1",19.25).attr("y1",5.202132).attr("x2",19.25).attr("y2",23).attr("stroke","#666666").attr("stroke-width",1.5),n.append("rect").attr("height",3.339856).attr("width",15.40424).attr("x",2.297881).attr("y",17.436729).attr("stroke","#00bf00").attr("stroke-width",1.5).attr("fill","#00bf00"),n.append("rect").attr("height",7.914511).attr("width",14.553177).attr("x",2.808519).attr("y",8.01064).attr("stroke","#97c9fc").attr("stroke-width",2.5).attr("fill","#97c9fc"),n.append("rect").attr("height",3.489358).attr("width",8.51063).attr("x",2.808518).attr("y",2.563837).attr("stroke","#97c9fc").attr("stroke-width",2.5).attr("fill","#97c9fc"),n.append("ellipse").attr("rx",1.548673).attr("ry",.309735).attr("cx",5.840707).attr("cy",5.615045).attr("stroke","#ffffff").attr("stroke-width",1.5),n.append("ellipse").attr("rx",7.743362).attr("ry",2.964602).attr("cx",10.088495).attr("cy",16.676991).attr("stroke","#00bf00").attr("stroke-width",1.5).attr("fill","#00bf00"),n.append("line").attr("x1",21.814158).attr("y1",12.207965).attr("x2",7.743362).attr("y2",25.039822).attr("stroke","#ffffff").attr("stroke-width",3.5),n.append("line").attr("x1",12.964601).attr("y1",.349558).attr("x2",19.690264).attr("y2",6.013275).attr("stroke","#666666").attr("stroke-width",1.5),n.append("line").attr("x1",0).attr("y1",.615045).attr("x2",13.672565).attr("y2",.792036).attr("stroke","#b2b2b2").attr("stroke-width",1.5),n.append("line").attr("x1",12.964601).attr("y1",-.09292).attr("x2",13.053096).attr("y2",6.89823).attr("stroke","#666666").attr("stroke-width",1.5),n.append("line").attr("x1",19.867255).attr("y1",6.190266).attr("x2",12.610619).attr("y2",6.278761).attr("stroke","#666666").attr("stroke-width",1.5),t},UtilsImage}),define("widgets/brease/common/libs/flux/stores/ImageStore/ImageStore",["widgets/brease/common/libs/flux/stores/ImageStore/ImageActionTypes","widgets/brease/common/libs/flux/stores/ImageStore/ImageTypes","widgets/brease/common/libs/wfUtils/UtilsImage","brease/enum/Enum","brease/core/Utils"],function(ImageActionTypes,ImageTypes,UtilsImage,Enum,Utils){"use strict";var ImageStore=function ImageStore(e,t){e.registerStore(this);var s=n();this.state=i(t,s),this.suscribedViews=[],this.state.promise=Promise.resolve()};ImageStore.prototype.newAction=function n(i){var s=this;switch(i.type){case ImageActionTypes.INIT_IMAGE:e(s),t(s),s._proccessImage(s);break;case ImageActionTypes.INIT_IMAGE_AFTER_PRELOAD:s.state.preloading=!1,s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_IMAGE_LIST:Array.isArray(i.data)?s.state.imageList=i.data:s.state.imageList=[""],e(s),t(s),s._proccessImage(s);break;case ImageActionTypes.SET_IMAGE_FROM_INDEX:if(!1===Utils.isNumeric(i.data.index))return;var r=Utils.isString(i.data.image)?i.data.image:"";s.state.imageList[i.data.index]=r,e(s),t(s),s._proccessImage(s);break;case ImageActionTypes.SET_IMAGE_INDEX:s.state.imageIndex=Utils.isNumeric(i.data)?i.data:void 0,t(s),s._proccessImage(s);break;case ImageActionTypes.SET_PATH_PREFIX:var o=Utils.isString(i.data)?i.data:"";s.state.pathPrefix=o,e(s),t(s),s._proccessImage(s);break;case ImageActionTypes.SET_SIZE_MODE:s.state.sizeMode=i.data,s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_BACKGROUND_ALIGNMENT:s.state.backgroundAlignment=i.data.split(" "),s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_WIDTH:s.state.width=i.data,s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_HEIGHT:s.state.height=i.data,s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_VISIBLE:s.state.visible=i.data,s.state.promise=Promise.resolve();break;case ImageActionTypes.SET_USE_SVG_STYLING:s.state.useSVGStyling=i.data,s._proccessImage(s);break}s.state.promise.then(s.dispatchAction.bind(s)).catch(function(){})},ImageStore.prototype.dispatchAction=function e(){this.suscribedViews.forEach(function(e){e.update()})},ImageStore.prototype.getImageType=function e(){return this.state.type},ImageStore.prototype.getImagePath=function e(){return this.state.actualImage},ImageStore.prototype.getSvgInline=function e(){return this.state.svgInline},ImageStore.prototype.getImageSizeMode=function e(){return this.state.sizeMode},ImageStore.prototype.getBackgroundAlignment=function e(){return this.state.backgroundAlignment},ImageStore.prototype.getHeight=function e(){return this.state.height},ImageStore.prototype.getWidth=function e(){return this.state.width},ImageStore.prototype.getVisible=function e(){return this.state.visible},ImageStore.prototype.getUseSVGStyling=function e(){return this.state.useSVGStyling},ImageStore.prototype.getPreloading=function e(){return this.state.preloading},ImageStore.prototype.registerView=function e(t){this.suscribedViews.push(t)},ImageStore.prototype._proccessImage=function(e){return void 0===e.state.actualImage||""===e.state.actualImage?(e.state.type=ImageTypes.INVALID,e.state.promise=Promise.resolve()):UtilsImage.isStylable(e.state.actualImage)&&e.state.useSVGStyling?(e.state.type=ImageTypes.SVG,void 0!==e.state.promise&&!1===e.state.promiseFinished&&e.state.rejectPromise(),e.state.promiseFinished=!1,e.state.promise=new Promise(function(t,n){e.state.rejectPromise=n,UtilsImage.getInlineSvg(e.state.actualImage).then(function(n){e.state.svgInline=n,e.state.promiseFinished=!0,t()})})):(e.state.type=ImageTypes.OTHER,e.state.promise=Promise.resolve()),e.state.promise};function e(e){void 0!==e.state.pathPrefix&&""!==e.state.pathPrefix?e.state.imageListWithPrefix=e.state.imageList.map(function(t){return void 0!==t&&""!==t?e.state.pathPrefix+t:""}):e.state.imageListWithPrefix=e.state.imageList}function t(e){var t=e.state.imageListWithPrefix[e.state.imageIndex];e.state.actualImage=void 0===t?"":t}function n(){return{imageList:[""],imageListWithPrefix:[""],imageIndex:0,pathPrefix:"",sizeMode:Enum.SizeMode.CONTAIN,backgroundAlignment:["left","top"],type:ImageTypes.INVALID,svgInline:$('<svg xmlns="http://www.w3.org/2000/svg" viewBox="1 1 1 1"></svg>'),actualImage:"",height:"auto",width:"auto",visible:!0,useSVGStyling:!0,preloading:!1}}function i(e,t){return void 0===e||!1===Utils.isObject(e)?t:(e=JSON.parse(JSON.stringify(e)),{imageList:void 0!==e.imageList?e.imageList:t.imageList,imageListWithPrefix:t.imageListWithPrefix,imageIndex:void 0!==e.imageIndex?e.imageIndex:t.imageIndex,pathPrefix:void 0!==e.pathPrefix?e.pathPrefix:t.pathPrefix,sizeMode:void 0!==e.sizeMode?e.sizeMode:t.sizeMode,backgroundAlignment:void 0!==e.backgroundAlignment?e.backgroundAlignment.split(" "):t.backgroundAlignment,type:t.type,svgInline:t.svgInline,actualImage:t.actualImage,height:void 0!==e.height?e.height:t.height,width:void 0!==e.width?e.width:t.width,visible:void 0!==e.visible?e.visible:t.visible,useSVGStyling:void 0!==e.useSVGStyling?e.useSVGStyling:t.useSVGStyling,preloading:void 0!==e.preloading?e.preloading:t.preloading})}return ImageStore}),define("widgets/brease/common/libs/flux/views/ImageView/ImageView",["widgets/brease/common/libs/flux/stores/ImageStore/ImageTypes","brease/enum/Enum"],function(ImageTypes,Enum){"use strict";var ImageView=function(e,t,n){this.dispatcher=t,this.store=e,this.store.registerView(this),this.parent=n,this._createElements()};ImageView.prototype._createElements=function e(){this.el=$('<div class="ImageView"></div>').height(this.store.getHeight()).width(this.store.getWidth()),this.imageElem=new Image,this.imageElem.draggable=!1,$(this.imageElem).hide(),this.svgEl=$("<svg></svg>").hide(),this.spanHelper=$('<span class="ImageView helper"></span>').hide(),this.el.append(this.spanHelper).append(this.imageElem).append(this.svgEl),this.parent.append(this.el)},ImageView.prototype.update=function i(){if(!this.store.getPreloading()){var s=this;switch(s.el.height(this.store.getHeight()),s.el.width(this.store.getWidth()),s.svgEl.css({position:"relative",bottom:"auto",top:"auto"}),$(s.imageElem).css({position:"relative",bottom:"auto",top:"auto",left:"auto",rigth:"auto"}),s.store.getImageType()){case ImageTypes.INVALID:$(s.imageElem).show(),s.svgEl.hide(),s.spanHelper.hide(),s.imageElem.src="";break;case ImageTypes.SVG:s.svgEl.show(),$(s.imageElem).hide(),s.spanHelper.hide(),s.svgEl.replaceWith(s.store.getSvgInline()),s.svgEl=s.store.getSvgInline();var r="";switch(s.store.getImageSizeMode()){case Enum.SizeMode.CONTAIN:s.svgEl.eq(0)[0].setAttribute("preserveAspectRatio",e(s.store.getBackgroundAlignment())),s.svgEl.eq(0)[0].setAttribute("width","100%"),s.svgEl.eq(0)[0].setAttribute("height","100%");break;case Enum.SizeMode.COVER:s.svgEl.eq(0)[0].setAttribute("preserveAspectRatio","xMinYMin");var o=s.svgEl.eq(0)[0].getAttribute("viewBox").split(" ").map(function(e){return parseInt(e)})[2],a=s.svgEl.eq(0)[0].getAttribute("viewBox").split(" ").map(function(e){return parseInt(e)})[3],l=s.store.getBackgroundAlignment();s.el.height()/s.el.width()>a/o?(s.svgEl.eq(0)[0].setAttribute("width",s.el.height()/a*o),s.svgEl.eq(0)[0].setAttribute("height",s.el.height()),n(l[0],s.svgEl,s.el,s.svgEl.eq(0)[0].getAttribute("width"))):(s.svgEl.eq(0)[0].setAttribute("width",s.el.width()),s.svgEl.eq(0)[0].setAttribute("height",s.el.width()/o*a),t(l[1],s.svgEl,s.el,s.svgEl.eq(0)[0].getAttribute("height")));break;case Enum.SizeMode.FILL:s.svgEl.eq(0)[0].setAttribute("preserveAspectRatio","none"),s.svgEl.eq(0)[0].setAttribute("width","100%"),s.svgEl.eq(0)[0].setAttribute("height","100%");break;default:break}break;case ImageTypes.OTHER:$(s.imageElem).show(),s.svgEl.hide(),s.spanHelper.hide(),$(s.imageElem).attr("src")===s.store.getImagePath()?s._readjustImageSize():(s.imageElem.onload=s._readjustImageSize.bind(s),s.imageElem.src=s.store.getImagePath());break}}},ImageView.prototype._readjustImageSize=function e(){var i=this;switch(i.store.getImageSizeMode()){case Enum.SizeMode.CONTAIN:i.spanHelper.show();var s=i.store.getBackgroundAlignment()[1];s="center"===s?"middle":s,i.el.css("text-align",i.store.getBackgroundAlignment()[0]),i.spanHelper.css("vertical-align",s),$(i.imageElem).css("vertical-align",s),i.el.height()/i.el.width()>=i.imageElem.naturalHeight/i.imageElem.naturalWidth?($(i.imageElem).width("100%"),$(i.imageElem).height("auto")):($(i.imageElem).width("100%"),$(i.imageElem).width("auto"),$(i.imageElem).height("100%"));break;case Enum.SizeMode.COVER:var r=i.store.getBackgroundAlignment();i.el.height()/i.el.width()>i.imageElem.naturalHeight/i.imageElem.naturalWidth?($(i.imageElem).width("auto"),$(i.imageElem).height("100%"),n(r[0],$(i.imageElem),i.el,$(i.imageElem).width())):($(i.imageElem).width("100%"),$(i.imageElem).height("auto"),t(r[1],$(i.imageElem),i.el,$(i.imageElem).height()));break;case Enum.SizeMode.FILL:$(i.imageElem).width("100%"),$(i.imageElem).height("100%");break;default:break}};function e(e){var t,n;switch(e[0]){case"left":t="Min";break;case"center":t="Mid";break;case"right":t="Max";break;default:t="Min"}switch(e[1]){case"top":n="Min";break;case"center":n="Mid";break;case"bottom":n="Max";break;default:n="Min"}return"x"+t+"Y"+n}function t(e,t,n,i){switch(e){case"bottom":t.css({position:"absolute",bottom:"0px",top:"auto"});break;case"top":t.css({position:"absolute",top:"0px",bottom:"auto"});break;case"center":var s=n.height()/2-i/2;t.css({position:"absolute",top:s+"px",bottom:"auto"});break}}function n(e,t,n,i){switch(e){case"left":t.css({position:"absolute",left:"0px",rigth:"auto"});break;case"right":t.css({position:"absolute",left:"auto",right:"0px"});break;case"center":var s=n.width()/2-i/2;t.css({position:"absolute",left:s+"px",rigth:"auto"});break}}return ImageView}),define("widgets/brease/common/libs/ImageHandling",["widgets/brease/common/libs/wfUtils/UtilsImage"],function(UtilsImage){"use strict";var ImageHandling={};ImageHandling.helpers={utilsImage:UtilsImage},ImageHandling.setImage=function(e,t){var n;ImageHandling.helpers.utilsImage.isStylable(e)?(n=ImageHandling.createSvgTag(),void 0!==this.imageDeferred&&"pending"===this.imageDeferred.state()&&this.imageDeferred.reject(),this.imageDeferred=ImageHandling.helpers.utilsImage.getInlineSvg(e),this.imageDeferred.done(function(e){n.replaceWith(e),n=e,n.removeClass("remove"),t(n)})):(void 0!==this.imageDeferred&&this.imageDeferred.reject(),n=ImageHandling.createImgTag(),n.attr("src",e),void 0!==e&&""!==e&&n.removeClass("remove"),t(n))},
ImageHandling.createImgTag=function(){return $("<img/>").addClass("remove")},ImageHandling.createSvgTag=function(){return $("<svg/>").addClass("remove")},ImageHandling.createImgSvgTags=function(){return{imgEl:ImageHandling.createImgTag(),svgEl:ImageHandling.createSvgTag()}};function e(){return{setImage:ImageHandling.setImage,createImgTag:ImageHandling.createImgTag,createSvgTag:ImageHandling.createSvgTag,createImgSvgTags:ImageHandling.createImgSvgTags}}return e}),define("widgets/brease/common/libs/redux/reducers/DataHandler/DataHandlerActions",["brease/core/Class"],function(e){"use strict";var DataHandlerActions={COLLECT_CHILDREN:"COLLECT_CHILDREN",collectChildren:function e(){return{type:DataHandlerActions.COLLECT_CHILDREN}},CHILD_ADDED:"CHILD_ADDED",childrenAdded:function e(t,n){return{type:DataHandlerActions.CHILD_ADDED,event:t,widget:n}},CHILD_REMOVED:"CHILD_REMOVED",childrenRemoved:function e(t,n){return{type:DataHandlerActions.CHILD_REMOVED,event:t,widget:n}},CHILDREN_INITIALISED:"CHILDREN_INITIALISED",childrenInitialised:function e(t,n){return{type:DataHandlerActions.CHILDREN_INITIALISED,childrenList:t,childrenIdList:n}},DISABLE_CHILDREN:"DISABLE_CHILDREN",disableChildren:function e(){return{type:DataHandlerActions.DISABLE_CHILDREN}},ENABLE_CHILDREN:"ENABLE_CHILDREN",enableChildren:function e(){return{type:DataHandlerActions.ENABLE_CHILDREN}}};return DataHandlerActions}),define("widgets/brease/common/libs/redux/middleware/DataHandler/DataHandlerMiddleware",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","widgets/brease/common/libs/redux/reducers/DataHandler/DataHandlerActions"],function(BreaseEvent,Enum,Utils,DataHandlerActions){"use strict";var e={};return e.childrenInitialized=function t(n){return function(t){return function(i){return function(s){n.settings.childrenInitialized?i(s):brease.config.editMode?e._initEditor(n):e._initChildren(n,t)}}}},e._initEditor=function(e){!0===brease.config.editMode&&(e.elem.addEventListener(BreaseEvent.WIDGET_ADDED,e._bind(e.childrenAdded)),e.elem.addEventListener(BreaseEvent.WIDGET_REMOVED,e._bind(e.childrenRemoved)),e.settings.childrenInitialized=!0)},e._initChildren=function(t,n){var i=[],s=[];t.el.find("[data-brease-widget]").each(function(){var e=this,t=e.id,n=$.Deferred();i.push(n),s.push(t),brease.uiController.getWidgetState(t)>=Enum.WidgetState.INITIALIZED&&brease.uiController.getWidgetState(t)!==Enum.WidgetState.SUSPENDED?n.resolve():e.addEventListener(BreaseEvent.WIDGET_INITIALIZED,function(e){n.resolve()})}),$.when.apply($,i).done(function(){t.settings.childrenInitialized=!0,e._setChildWidgetEnableState(t),e.childrenInitializedHandler(t,s,n)})},e.childrenInitializedHandler=function(e,t,n){var i=[];t.forEach(function(e){var t=brease.callWidget(e,"widget");i.push(t)}),t.forEach(function(t){var n=brease.callWidget(t,"widget");Utils.isFunction(n.setParentWidget)&&n.setParentWidget(e)});var s=DataHandlerActions.childrenInitialised(i,t);n.dispatch(s),e.childrenInitializedHandler()},e._setChildWidgetEnableState=function(e){e.settings.childrenIdList.forEach(function(t){brease.uiController.callWidget(t,"setParentEnableState",!e.isDisabled)})},e}),define("widgets/brease/common/libs/redux/utils/UtilsDataHandler",[],function(){"use strict";var UtilsDataHandler={};return UtilsDataHandler.order=function e(t){for(var e=t.el.find("[data-brease-widget]"),n=[],i=0;i<e.length;i+=1)n.push($(e)[i].id);return n},UtilsDataHandler}),define("widgets/brease/common/libs/redux/reducers/DataHandler/DataHandlerReducer",["widgets/brease/common/libs/redux/reducers/DataHandler/DataHandlerActions","widgets/brease/common/libs/redux/utils/UtilsDataHandler"],function(DataHandlerActions,UtilsDataHandler){"use strict";return function DataHandlerReducer(e,t){if(void 0===e)return null;var n,i;switch(t.type){case DataHandlerActions.CHILDREN_INITIALISED:return e.childrenList=t.childrenList,e.childrenIdList=t.childrenIdList,e;case DataHandlerActions.CHILD_ADDED:if(t.event.target===t.widget.elem){n=event.detail.widgetId,i=brease.callWidget(n,"widget"),e.childrenIdList.push(n),e.childrenList.push(i);var s=UtilsDataHandler.order(t.widget);e.childrenList.sort(function(e,t){return s.indexOf(e.elem.id)-s.indexOf(t.elem.id)}),e.childrenIdList.sort(function(e,t){return s.indexOf(e)-s.indexOf(t)})}return e;case DataHandlerActions.CHILD_REMOVED:if(t.event.target===t.widget.elem){n=event.detail.widgetId,i=brease.callWidget(n,"widget");var r=e.childrenIdList.indexOf(n);r>-1&&(e.childrenList.splice(r,1),e.childrenIdList.splice(r,1))}return e;case DataHandlerActions.DISABLE_CHILDREN:return e;case DataHandlerActions.ENABLE_CHILDREN:return e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Format/FormatActions",["brease/core/Class"],function(e){"use strict";var FormatActions={FORMAT_CHANGE:"FORMAT_CHANGE",changeFormat:function e(t){return{type:FormatActions.FORMAT_CHANGE,format:t}}};return FormatActions}),define("widgets/brease/common/libs/redux/reducers/Format/FormatReducer",["widgets/brease/common/libs/redux/reducers/Format/FormatActions"],function(FormatActions){"use strict";return function FormatReducer(e,t){if(void 0===e)return null;switch(t.type){case FormatActions.FORMAT_CHANGE:return e.format=t.format,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Image/ImageActions",["brease/core/Class"],function(e){"use strict";var ImageActions={UPDATE_IMAGE_LIST:"UPDATE_IMAGE_LIST",updateImageList:function e(t){return{type:ImageActions.UPDATE_IMAGE_LIST,imageList:t}},UPDATE_IMAGE_PATH:"UPDATE_IMAGE_PATH",updateImagePath:function e(t){return{type:ImageActions.UPDATE_IMAGE_PATH,imagePath:t}},UPDATE_IMAGE_SETTINGS:"UPDATE_IMAGE_SETTINGS",updateImageSettings:function e(t){return{type:ImageActions.UPDATE_IMAGE_SETTINGS,imageSettings:t}}};return ImageActions}),define("widgets/brease/common/libs/redux/utils/UtilsImage",[],function(){"use strict";var UtilsImage={};return UtilsImage.createImageList=function e(t){var n=[],i=0;for(i=0;i<t.length;i+=1)void 0!==t[i].image?n.push(t[i].image):n.push(i.toString()+".png");return n},UtilsImage.createImageElements=function e(t,n){var i={},s=0;for(s=0;s<t.length;s+=1){var r=s.toString();i[r]={},i[r].id=r,i[r].imagePath=void 0!==n&&""!==n?n+t[s]:void 0}return i},UtilsImage}),define("widgets/brease/common/libs/redux/reducers/Image/ImageReducer",["widgets/brease/common/libs/redux/reducers/Image/ImageActions","widgets/brease/common/libs/redux/utils/UtilsImage"],function(ImageActions,UtilsImage){"use strict";return function ImageReducer(e,t){if(void 0===e)return null;var n;switch(t.type){case ImageActions.UPDATE_IMAGE_LIST:return n=UtilsImage.createImageElements(t.imageList,e.imagePath),_.assign({},e,{imageList:t.imageList,imageElements:n});case ImageActions.UPDATE_IMAGE_PATH:return n=UtilsImage.createImageElements(e.imageList,t.imagePath),_.assign({},e,{imagePath:t.imagePath,imageElements:n});default:return e}}}),define("widgets/brease/common/libs/redux/reducers/List/ListActions",[],function(){"use strict";var e={UPDATE_ITEM_LIST:"UPDATE_ITEM_LIST",updateItemList:function t(n){return{type:e.UPDATE_ITEM_LIST,itemList:n}},UPDATE_ITEM_SETTINGS:"UPDATE_ITEM_SETTINGS",updateItemSettings:function t(n){return{type:e.UPDATE_ITEM_SETTINGS,itemSettings:n}},UPDATE_SELECTED_ITEM:"UPDATE_SELECTED_ITEM",updateSelectedItem:function t(n){return{type:e.UPDATE_SELECTED_ITEM,selectedItemIndex:n}},UPDATE_SELECTED_VALUE:"UPDATE_SELECTED_VALUE",updateSelectedValue:function t(n){return{type:e.UPDATE_SELECTED_VALUE,selectedItemValue:n}},TOGGLE_LIST_STATUS:"TOGGLE_LIST_STATUS",toggleListStatus:function t(){return{type:e.TOGGLE_LIST_STATUS}},CLOSE_LIST:"CLOSE_LIST",closeList:function t(){return{type:e.CLOSE_LIST}},OPEN_LIST:"OPEN_LIST",openList:function t(){return{type:e.OPEN_LIST}},UPDATE_LIST_SETTINGS:"UPDATE_LIST_SETTINGS",updateListSettings:function t(n){return{type:e.UPDATE_LIST_SETTINGS,listSettings:n}}};return e}),define("widgets/brease/common/libs/redux/utils/UtilsList",["brease/enum/Enum"],function(Enum){"use strict";var UtilsList={};return UtilsList.parseJSONtoObject=function e(t){var n=[];return t.map(function(e){if("string"==typeof e)try{return n.push(JSON.parse(e))}catch(e){return[]}else"object"==typeof e&&n.push(e)}),n},UtilsList.getItemsFromItems=function e(t,n){var i=[],s;for(s=0;s<t.length;s+=1)i.push({imageId:s.toString(),textId:s.toString(),value:t[s].value,selected:s===n});return i},UtilsList.getSelectedValueFromItems=function e(t,n){return void 0!==t[n]?t[n].value:""},UtilsList.calculateListHeight=function e(t,n,i,s){return(i>n||t?n:i)*s},UtilsList.getDataProviderForLanguage=function e(t){return Object.keys(t).map(function(e,n){return{value:e,text:t[e].description,image:e+".png",index:void 0!==t[e].index?t[e].index:0}}).sort(function(e,t){return e.index-t.index})},UtilsList.getDataProviderForMeasurement=function e(t){return Object.keys(t).map(function(e,n){return{value:e,text:t[e].description,image:e+".png"}}).sort(function(e,t){return e.index-t.index})},UtilsList.getShowValues=function e(t){return{showTexts:t===Enum.DropDownDisplaySettings.default||t===Enum.DropDownDisplaySettings.text||t===Enum.DropDownDisplaySettings.imageAndText,showImages:t===Enum.DropDownDisplaySettings.default||t===Enum.DropDownDisplaySettings.image||t===Enum.DropDownDisplaySettings.imageAndText,showTextsInButton:t===Enum.DropDownDisplaySettings.default||t===Enum.DropDownDisplaySettings.text||t===Enum.DropDownDisplaySettings.imageAndText,showImagesInButton:t===Enum.DropDownDisplaySettings.image||t===Enum.DropDownDisplaySettings.imageAndText}},UtilsList.isEqualIntBool=function e(t,n){return!((!0!==t&&1!==t||!0!==n&&1!==n)&&(!1!==t&&0!==t||!1!==n&&0!==n))},UtilsList}),define("widgets/brease/common/libs/redux/reducers/List/ListReducer",["widgets/brease/common/libs/redux/reducers/List/ListActions","widgets/brease/common/libs/redux/utils/UtilsList","brease/core/Utils"],function(ListActions,UtilsList,Utils){"use strict";var ListReducer=function ListReducer(i,s){if(void 0===i)return null;var r,o,a,l,d;switch(s.type){case ListActions.UPDATE_ITEM_LIST:return o=t(s.itemList,i.selectedValue),l=e(s.itemList,o),r=UtilsList.getSelectedValueFromItems(l,o),_.assign({},i,{itemList:l,selectedValue:r,selectedIndex:o,previousSelectedIndex:i.selectedIndex,listSettings:_.assign({},i.listSettings,{listHeight:UtilsList.calculateListHeight(i.listSettings.fitHeight2Items,s.itemList.length,i.listSettings.maxVisibleEntries,i.itemSettings.itemHeight)})});case ListActions.UPDATE_SELECTED_ITEM:return o=n(s.selectedItemIndex,i.itemList.length),l=e(i.itemList,o),r=UtilsList.getSelectedValueFromItems(l,o),_.assign({},i,{itemList:l,selectedIndex:o,selectedValue:r,previousSelectedIndex:i.selectedIndex,listOpen:!1});case ListActions.UPDATE_SELECTED_VALUE:return o=t(i.itemList,s.selectedItemValue),l=e(i.itemList,o),r=UtilsList.getSelectedValueFromItems(l,o),_.assign({},i,{itemList:l,selectedIndex:o,selectedValue:r,previousSelectedIndex:i.selectedIndex,listOpen:!1});case ListActions.UPDATE_ITEM_SETTINGS:return _.assign({},i,{itemSettings:{itemHeight:void 0===s.itemSettings.itemHeight?i.itemSettings.itemHeight:s.itemSettings.itemHeight,imageAlign:void 0===s.itemSettings.imageAlign?i.itemSettings.imageAlign:s.itemSettings.imageAlign}});case ListActions.TOGGLE_LIST_STATUS:return a=!i.listOpen,_.assign({},i,{listOpen:a});case ListActions.CLOSE_LIST:return _.assign({},i,{listOpen:!1});case ListActions.OPEN_LIST:return _.assign({},i,{listOpen:!0});case ListActions.UPDATE_LIST_SETTINGS:return _.assign({},i,{listSettings:{fitHeight2Items:void 0===s.listSettings.fitHeight2Items?i.listSettings.fitHeight2Items:s.listSettings.fitHeight2Items,listPosition:void 0===s.listSettings.listPosition?i.listSettings.listPosition:s.listSettings.listPosition,listWidth:void 0===s.listSettings.listWidth?i.listSettings.listWidth:s.listSettings.listWidth,listHeight:void 0===s.listSettings.listHeight?i.listSettings.listHeight:s.listSettings.listHeight,maxVisibleEntries:void 0===s.listSettings.maxVisibleEntries?i.listSettings.maxVisibleEntries:s.listSettings.maxVisibleEntries,cropToParent:void 0===s.listSettings.cropToParent?i.listSettings.cropToParent:s.listSettings.cropToParent,showTexts:void 0===s.listSettings.showTexts?i.listSettings.showTexts:s.listSettings.showTexts,showImages:void 0===s.listSettings.showImages?i.listSettings.showImages:s.listSettings.showImages,showTextsInButton:void 0===s.listSettings.showTextsInButton?i.listSettings.showTextsInButton:s.listSettings.showTextsInButton,showImagesInButton:void 0===s.listSettings.showImagesInButton?i.listSettings.showImagesInButton:s.listSettings.showImagesInButton}});default:return i}};function e(e,t){return e.map(function(e,n){return e.selected=n===t,e})}function t(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n].value===t)return n;return 0}function n(e,t){var n=0;return n=Utils.isNumeric(e)&&e<t&&e>0?e:!0===e?1:0,n}return ListReducer}),define("widgets/brease/common/libs/redux/reducers/Numeric/NumericActions",[],function(){"use strict";var NumericActions={UPDATE_VALUE:"UPDATE_VALUE",updateValue:function e(t){return{type:NumericActions.UPDATE_VALUE,value:t}},UPDATE_MINVALUE:"UPDATE_MINVALUE",updateMinValue:function e(t){return{type:NumericActions.UPDATE_MINVALUE,minValue:t}},UPDATE_MAXVALUE:"UPDATE_MAXVALUE",updateMaxValue:function e(t){return{type:NumericActions.UPDATE_MAXVALUE,maxValue:t}}};return NumericActions}),define("widgets/brease/common/libs/redux/reducers/Numeric/NumericReducer",["widgets/brease/common/libs/redux/reducers/Numeric/NumericActions"],function(NumericActions){"use strict";return function NumericReducer(e,t){if(void 0===e)return null;switch(t.type){case NumericActions.UPDATE_VALUE:return e.value=t.value,e;case NumericActions.UPDATE_MINVALUE:return e.minValue=t.minValue,e;case NumericActions.UPDATE_MAXVALUE:return e.maxValue=t.maxValue,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Orientation/OrientationActions",["brease/core/Class"],function(e){"use strict";var OrientationActions={ORIENTATION_CHANGE:"ORIENTATION_CHANGE",changeOrientation:function e(t){return{type:OrientationActions.ORIENTATION_CHANGE,orientation:t}}};return OrientationActions}),define("widgets/brease/common/libs/redux/reducers/Orientation/OrientationReducer",["widgets/brease/common/libs/redux/reducers/Orientation/OrientationActions"],function(OrientationActions){"use strict";return function OrientationReducer(e,t){if(void 0===e)return null;switch(t.type){case OrientationActions.ORIENTATION_CHANGE:return e.orientation=t.orientation,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Scale/ScaleActions",["brease/core/Class"],function(e){"use strict";var ScaleActions={SCALEDOMAIN_CHANGE:"SCALEDOMAIN_CHANGE",changeScaleDomain:function e(t){return{type:ScaleActions.SCALEDOMAIN_CHANGE,scaleDomain:t}},SCALERANGE_CHANGE:"SCALERANGE_CHANGE",changeScaleRange:function e(t){return{type:ScaleActions.SCALERANGE_CHANGE,scaleRange:t}},SCALEOFFSET_CHANGE:"SCALEOFFSET_CHANGE",changeScaleOffset:function e(t){return{type:ScaleActions.SCALEOFFSET_CHANGE,scaleOffset:t}},SCALEPOSITION_CHANGE:"SCALEPOSITION_CHANGE",changeScalePosition:function e(t){return{type:ScaleActions.SCALEPOSITION_CHANGE,tickPosition:t}},SCALEMAJORTICKS_CHANGE:"SCALEMAJORTICKS_CHANGE",changeScaleMajorTicks:function e(t){return{type:ScaleActions.SCALEMAJORTICKS_CHANGE,majorTicks:t}},SCALESHOWTICKNUMBERS_CHANGE:"SCALESHOWTICKNUMBERS_CHANGE",changeScaleShowTickNumbers:function e(t){return{type:ScaleActions.SCALESHOWTICKNUMBERS_CHANGE,showTickNumbers:t}}};return ScaleActions}),define("widgets/brease/common/libs/redux/reducers/Scale/ScaleReducer",["widgets/brease/common/libs/redux/reducers/Scale/ScaleActions"],function(ScaleActions){"use strict";return function ScaleReducer(e,t){if(void 0===e)return null;switch(t.type){case ScaleActions.SCALEDOMAIN_CHANGE:return e.scaleDomain=t.scaleDomain,e;case ScaleActions.SCALERANGE_CHANGE:return e.scaleRange=t.scaleRange,e;case ScaleActions.SCALEOFFSET_CHANGE:return e.scaleOffset=parseInt(t.scaleOffset,10),e;case ScaleActions.SCALEPOSITION_CHANGE:return e.tickPosition=t.tickPosition,e;case ScaleActions.SCALEMAJORTICKS_CHANGE:return e.majorTicks=t.majorTicks,e;case ScaleActions.SCALESHOWTICKNUMBERS_CHANGE:return e.showTickNumbers=t.showTickNumbers,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Size/SizeActions",[],function(){"use strict";var SizeActions={HEIGHT_CHANGE:"HEIGHT_CHANGE",changeHeight:function e(t){return{type:SizeActions.HEIGHT_CHANGE,height:t}},WIDTH_CHANGE:"WIDTH_CHANGE",changeWidth:function e(t){return{type:SizeActions.WIDTH_CHANGE,width:t}}};return SizeActions}),define("widgets/brease/common/libs/redux/reducers/Size/SizeReducer",["widgets/brease/common/libs/redux/reducers/Size/SizeActions"],function(SizeActions){"use strict";return function SizeReducer(e,t){if(void 0===e)return null;switch(t.type){case SizeActions.HEIGHT_CHANGE:return e.height=t.height,e;case SizeActions.WIDTH_CHANGE:return e.width=t.width,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Status/StatusActions",["brease/core/Class"],function(e){"use strict";var StatusActions={VISIBLE_CHANGE:"VISIBLE_CHANGE",changeVisible:function e(t){return{type:StatusActions.VISIBLE_CHANGE,visibility:t}},ENABLE_CHANGE:"ENABLE_CHANGE",changeEnable:function e(t){return{type:StatusActions.ENABLE_CHANGE,enable:t}},ACTIVE_CHANGE:"ACTIVE_CHANGE",changeActive:function e(t){return{type:StatusActions.ACTIVE_CHANGE,active:t}}};return StatusActions}),define("widgets/brease/common/libs/redux/reducers/Status/StatusReducer",["widgets/brease/common/libs/redux/reducers/Status/StatusActions"],function(StatusActions){"use strict";return function StatusReducer(e,t){if(void 0===e)return null;switch(t.type){case StatusActions.VISIBLE_CHANGE:return e.visible=t.visibility,e;case StatusActions.ENABLE_CHANGE:return e.enabled=t.enable,e;case StatusActions.ACTIVE_CHANGE:return e.active=t.active,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Style/StyleActions",[],function(){"use strict";var StyleActions={STYLE_CHANGE:"STYLE_CHANGE",styleChange:function e(t){return{type:StyleActions.STYLE_CHANGE,style:t}},THEME_CHANGE:"THEME_CHANGE",themeChange:function e(){return{type:StyleActions.THEME_CHANGE}}};return StyleActions}),define("widgets/brease/common/libs/redux/utils/UtilsStyle",[],function(){"use strict";var UtilsStyle={};return UtilsStyle.addStylePrefix=function e(t,n){return t+"_style_"+n},UtilsStyle}),define("widgets/brease/common/libs/redux/reducers/Style/StyleReducer",["widgets/brease/common/libs/redux/reducers/Style/StyleActions","widgets/brease/common/libs/redux/utils/UtilsStyle"],function(StyleActions,UtilsStyle){"use strict";return function StyleReducer(e,t){if(void 0===e)return null;switch(t.type){case StyleActions.STYLE_CHANGE:return e=_.assign({},e,{style:t.style,styleToApply:UtilsStyle.addStylePrefix(e.stylePrefix,t.style)}),e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Text/TextActions",["brease/core/Class"],function(e){"use strict";var TextActions={LANGUAGE_CHANGE:"LANGUAGE_CHANGE",changeLanguage:function e(){return{type:TextActions.LANGUAGE_CHANGE}},UPDATE_TEXT:"UPDATE_TEXT",updateText:function e(t){return{type:TextActions.UPDATE_TEXT,textElements:t}},UPDATE_TEXT_SETTINGS:"UPDATE_TEXT_SETTINGS",updateTextSettings:function e(t){return{type:TextActions.UPDATE_TEXT_SETTINGS,textSettings:t}}};return TextActions}),define("widgets/brease/common/libs/redux/utils/UtilsText",[],function(){"use strict";var UtilsText={};return UtilsText.getTextsFromItems=function e(t){var n={},i;for(i=0;i<t.length;i+=1){var s=i.toString();n[s]=UtilsText.getTextElement(t[i].text,s)}return n},UtilsText.getTextElement=function e(t,n){var i={textId:n};return brease.language.isKey(t)?(i.textKey=brease.language.parseKey(t),i.displayText=brease.language.getTextByKey(i.textKey)):(i.textKey=void 0,i.displayText=t),i},UtilsText.translateTextElements=function e(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=UtilsText.translateTextElement(t[i]));return n},UtilsText.translateTextElement=function e(t){return void 0===t.textKey?t:_.assign({},t,{displayText:brease.language.getTextByKey(t.textKey)})},UtilsText}),define("widgets/brease/common/libs/redux/reducers/Text/TextReducer",["widgets/brease/common/libs/redux/reducers/Text/TextActions","widgets/brease/common/libs/redux/utils/UtilsText"],function(TextActions,UtilsText){"use strict";return function TextReducer(e,t){if(void 0===e)return null;switch(t.type){case TextActions.LANGUAGE_CHANGE:return _.assign({},e,{textElements:UtilsText.translateTextElements(e.textElements)});case TextActions.UPDATE_TEXT:return _.assign({},e,{textElements:t.textElements});case TextActions.UPDATE_TEXT_SETTINGS:return _.assign({},e,{textSettings:{multiLine:void 0===t.textSettings.multiLine?e.textSettings.multiLine:t.textSettings.multiLine,wordWrap:void 0===t.textSettings.wordWrap?e.textSettings.wordWrap:t.textSettings.wordWrap,ellipsis:void 0===t.textSettings.ellipsis?e.textSettings.ellipsis:t.textSettings.ellipsis}});default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Thumb/ThumbActions",["brease/core/Class"],function(e){"use strict";var ThumbActions={THUMBSIZE_CHANGE:"THUMBSIZE_CHANGE",changeThumbSize:function e(t){return{type:ThumbActions.THUMBSIZE_CHANGE,thumbSize:parseInt(t,10)}},THUMBIMAGE_CHANGE:"THUMBIMAGE_CHANGE",changeThumbImage:function e(t){return{type:ThumbActions.THUMBIMAGE_CHANGE,thumbImage:t}},SELECT_THUMB:"SELECT_THUMB",selectThumb:function e(){return{type:ThumbActions.SELECT_THUMB}},UNSELECT_THUMB:"UNSELECT_THUMB",unselectThumb:function e(){return{type:ThumbActions.UNSELECT_THUMB}}};return ThumbActions}),define("widgets/brease/common/libs/redux/reducers/Thumb/ThumbReducer",["widgets/brease/common/libs/redux/reducers/Thumb/ThumbActions"],function(ThumbActions){"use strict";return function ThumbReducer(e,t){if(void 0===e)return null;switch(t.type){case ThumbActions.THUMBSIZE_CHANGE:return e.thumbSize=parseInt(t.thumbSize,10),e;case ThumbActions.THUMBIMAGE_CHANGE:return e.thumbImage=t.thumbImage,e;case ThumbActions.SELECT_THUMB:return e.thumbSelected=!0,e;case ThumbActions.UNSELECT_THUMB:return e.thumbSelected=!1,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/Track/TrackActions",["brease/core/Class"],function(e){"use strict";var TrackActions={TRACKSIZE_CHANGE:"TRACKSIZE_CHANGE",changeTrackSize:function e(t){return{type:TrackActions.TRACKSIZE_CHANGE,trackSize:parseInt(t,10)}},TRACK_LOCKED:"TRACK_LOCKED",lockTrack:function e(t){return{type:TrackActions.TRACK_LOCKED,trackLocked:t}}};return TrackActions}),define("widgets/brease/common/libs/redux/reducers/Track/TrackReducer",["widgets/brease/common/libs/redux/reducers/Track/TrackActions"],function(TrackActions){"use strict";return function TrackReducer(e,t){if(void 0===e)return null;switch(t.type){case TrackActions.TRACKSIZE_CHANGE:return e.trackSize=parseInt(t.trackSize,10),e;case TrackActions.TRACK_LOCKED:return e.trackLocked=t.trackLocked,e;default:return e}}}),define("widgets/brease/common/libs/redux/reducers/ValueDisplay/ValueDisplayActions",["brease/core/Class"],function(e){"use strict";var ValueDisplayActions={VALUEDISPLAYSIZE_CHANGE:"VALUEDISPLAYSIZE_CHANGE",changeValueDisplaySize:function e(t){return{type:ValueDisplayActions.VALUEDISPLAYSIZE_CHANGE,valueDisplaySize:parseInt(t,10)}},SHOWVALUEDISPLAY_CHANGE:"SHOWVALUEDISPLAY_CHANGE",changeShowValueDisplay:function e(t){return{type:ValueDisplayActions.SHOWVALUEDISPLAY_CHANGE,showValueDisplay:t}},SHOWUNIT_CHANGE:"SHOWUNIT_CHANGE",changeShowUnit:function e(t){return{type:ValueDisplayActions.SHOWUNIT_CHANGE,showUnit:t}},UNITSYMBOL_CHANGE:"UNITSYMBOL_CHANGE",changeUnitSymbol:function e(t){return{type:ValueDisplayActions.UNITSYMBOL_CHANGE,unitSymbol:t}},ELLIPSIS_CHANGE:"ELLIPSIS_CHANGE",changeEllipsis:function e(t){return{type:ValueDisplayActions.ELLIPSIS_CHANGE,ellipsis:t}}};return ValueDisplayActions}),define("widgets/brease/common/libs/redux/reducers/ValueDisplay/ValueDisplayReducer",["widgets/brease/common/libs/redux/reducers/ValueDisplay/ValueDisplayActions"],function(ValueDisplayActions){"use strict";return function ValueDisplayReducer(e,t){if(void 0===e)return null;switch(t.type){case ValueDisplayActions.VALUEDISPLAYSIZE_CHANGE:return e.valueDisplaySize=parseInt(t.valueDisplaySize,10),e;case ValueDisplayActions.SHOWVALUEDISPLAY_CHANGE:return e.showValueDisplay=t.showValueDisplay,e;case ValueDisplayActions.SHOWUNIT_CHANGE:return e.showUnit=t.showUnit,e;case ValueDisplayActions.UNITSYMBOL_CHANGE:return e.unitSymbol=t.unitSymbol,e;case ValueDisplayActions.ELLIPSIS_CHANGE:return e.ellipsis=t.ellipsis,e;default:return e}}}),define("widgets/brease/common/libs/redux/utils/UtilsNumeric",["brease/config/NumberFormat"],function(NumberFormat){"use strict";var UtilsNumeric={};return UtilsNumeric.getFormatedNumber=function(e,t){var n=NumberFormat.getFormat(t,brease.measurementSystem.getCurrentMeasurementSystem());return e=brease.formatter.formatNumber(e,n),e},UtilsNumeric.getDecimalPlaces=function(e){return NumberFormat.getFormat(e,brease.measurementSystem.getCurrentMeasurementSystem()).decimalPlaces},UtilsNumeric}),define("widgets/brease/common/libs/redux/utils/UtilsAxis",["libs/d3/d3","widgets/brease/common/libs/redux/utils/UtilsNumeric","brease/enum/Enum"],function(e,UtilsNumeric,Enum){"use strict";var UtilsAxis={};UtilsAxis.createSVGContainer=function t(n,i,s,r){return e.select(n).append("svg").attr("height",i).attr("width",s).attr("class","Axis")},UtilsAxis.createAxisTop=function n(i,s,r,o,a){var l=t(s,r,o);return e.svg.axis().orient("top").tickValues(l).tickFormat(e.format(",."+UtilsNumeric.getDecimalPlaces(a)+"f")).scale(i)},UtilsAxis.createAxisRight=function n(i,s,r,o,a){var l=t(s,r,o);return e.svg.axis().orient("right").tickValues(l).tickFormat(e.format(",."+UtilsNumeric.getDecimalPlaces(a)+"f")).scale(i)},UtilsAxis.createAxisBottom=function n(i,s,r,o,a){var l=t(s,r,o);return e.svg.axis().orient("bottom").tickValues(l).tickFormat(e.format(",."+UtilsNumeric.getDecimalPlaces(a)+"f")).scale(i)},UtilsAxis.createAxisLeft=function n(i,s,r,o,a){var l=t(s,r,o);return e.svg.axis().orient("left").tickValues(l).tickFormat(e.format(",."+UtilsNumeric.getDecimalPlaces(a)+"f")).scale(i)},UtilsAxis.appendAxisHorizontal=function e(t,n,i){t.append("g").attr("transform","translate(0,"+i+")").call(n)},UtilsAxis.appendAxisVertical=function e(t,n,i){t.append("g").attr("transform","translate("+i+",0)").call(n)},UtilsAxis.showTickNumber=function e(t,n){n?t.selectAll("g.tick text").classed("remove",!1):t.selectAll("g.tick text").classed("remove",!0)},UtilsAxis.showUnitSymbol=function e(t,n){n?t.selectAll("text.UnitSymbol").classed("remove",!1):t.selectAll("text.UnitSymbol").classed("remove",!0)},UtilsAxis.createCombinedAxis=function e(t){var n=this.createSVGContainer(t.elem,t.height,t.width,t.additionalClasses);switch(t.orientation){case Enum.Orientation.LTR:case Enum.Orientation.RTL:this.createCombinedAxisHorizontal(t,n);break;case Enum.Orientation.BTT:case Enum.Orientation.TTB:this.createCombinedAxisVertical(t,n);break}return this.showTickNumber(n,t.showTickNumbers),n},UtilsAxis.updateCombinedAxis=function t(n){var i=e.select(n.elem).select("svg").attr("height",n.height).attr("width",n.width);switch(i.selectAll("g").remove(),n.orientation){case Enum.Orientation.LTR:case Enum.Orientation.RTL:this.createCombinedAxisHorizontal(n,i);break;case Enum.Orientation.BTT:case Enum.Orientation.TTB:this.createCombinedAxisVertical(n,i);break}return this.showTickNumber(i,n.showTickNumbers),i},UtilsAxis.createCombinedAxisHorizontal=function e(t,n){var i;switch(t.tickPosition){case Enum.TickStyle.NONE:break;case Enum.TickStyle.TOP:i=this.createAxisTop(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisHorizontal(n,i,t.height/2-t.scaleOffset);break;case Enum.TickStyle.BOTTOM:i=this.createAxisBottom(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisHorizontal(n,i,t.height/2+t.scaleOffset);break;case Enum.TickStyle.TOPBOTTOM:i=this.createAxisTop(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisHorizontal(n,i,t.height/2-t.scaleOffset),i=this.createAxisBottom(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisHorizontal(n,i,t.height/2+t.scaleOffset);break}},UtilsAxis.createCombinedAxisVertical=function e(t,n){var i;switch(t.tickPosition){case Enum.TickStyle.NONE:break;case Enum.TickStyle.TOP:i=this.createAxisLeft(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisVertical(n,i,t.width/2-t.scaleOffset);break;case Enum.TickStyle.BOTTOM:i=this.createAxisRight(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisVertical(n,i,t.width/2+t.scaleOffset);break;case Enum.TickStyle.TOPBOTTOM:i=this.createAxisLeft(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisVertical(n,i,t.width/2-t.scaleOffset),i=this.createAxisRight(t.scale,t.limitMin,t.limitMax,t.majorTicks,t.format),this.appendAxisVertical(n,i,t.width/2+t.scaleOffset);break}};function t(e,t,n){var i=[],s=t-e;if(0===n)i=[];else if(1===n)i=[s/2+e];else for(var r=s/(n-1),o=0;o<n;o+=1)i.push(e+r*o);return i}return UtilsAxis}),define("widgets/brease/common/libs/redux/utils/UtilsJSON",["require"],function(e){"use strict";var UtilsJSON={};return UtilsJSON.convertJSONtoObject=function(e){return"string"==typeof e&&""!==e?JSON.parse(e):e},UtilsJSON.convertObjectToJSON=function(e){return"object"==typeof e&&""!==e?JSON.stringify(e):e},UtilsJSON}),define("widgets/brease/common/libs/redux/utils/UtilsScale",["libs/d3/d3"],function(e){"use strict";var UtilsScale={};return UtilsScale.createScaleLinear=function(t,n){return e.scale.linear().domain(t).range(n)},UtilsScale.updateDomain=function(e,t){e.domain(t)},UtilsScale.updateRange=function(e,t){e.range(t)},UtilsScale}),define("widgets/brease/common/libs/redux/utils/UtilsSize",[],function(){"use strict";var UtilsSize={};return UtilsSize.getWidth=function(e,t){var n=0;return!1===isNaN(e)?n=parseInt(e,10):($(t).css("width",e),n=t.offsetWidth),void 0===n&&(n=$(t).parent().width()*(parseInt(e,10)/100)),n},UtilsSize.getHeight=function(e,t){var n=0;return!1===isNaN(e)?n=parseInt(e,10):($(t).css("height",e),n=t.offsetHeight),void 0===n&&(n=$(t).parent().height()*(parseInt(e,10)/100)),n},UtilsSize}),define("widgets/brease/common/libs/redux/view/AxisView/AxisView",["widgets/brease/common/libs/redux/utils/UtilsAxis"],function(UtilsAxis){"use strict";var TrackView=function(e,t,n){void 0===n?(this.create(e,t),this.render(e,t)):n.render(e,t),this.props=e},e=TrackView.prototype;return e.create=function(e,t){var n=UtilsAxis.createCombinedAxis(e);this.el=t.find("svg.Axis"),this.el.addClass("AxisView")},e.render=function e(t,n){UtilsAxis.updateCombinedAxis(t)},e.dispose=function e(){},TrackView}),define("widgets/brease/common/libs/redux/view/ImageView/ImageView",["widgets/brease/common/libs/BoxLayout"],function(BoxLayout){"use strict";var ImageView=function(e,t){this.render(e,t)},e=ImageView.prototype;return e.render=function e(t,n){this.el=$(BoxLayout.createBox()),this.el.addClass("ImageView"),this.image=$("<img src="+t.image+">"),this.el.append(this.image),n.append(this.el)},e.dispose=function e(){this.image.remove(),this.el.remove()},ImageView}),define("widgets/brease/common/libs/redux/view/TextView/TextView",["widgets/brease/common/libs/BoxLayout"],function(BoxLayout){"use strict";var TextView=function(e,t){this.render(e,t)},e=TextView.prototype;e.render=function e(n,i){this.el=$(BoxLayout.createBox()),this.span=$("<span></span>"),t(this.el,n.textSettings,n.selected),this.span.text(n.text),this.el.append(this.span),i.append(this.el)},e.dispose=function e(){this.span.remove(),this.el.remove()};function t(e,t,n){e.addClass("TextView"),!0===t.ellipsis?e.addClass("ellipsis"):e.removeClass("ellipsis"),n?e.addClass("textSelected"):e.removeClass("textSelected"),
!0===t.multiLine?(e.addClass("multiLine"),!0===t.wordWrap?(e.addClass("wordWrap"),e.removeClass("multiLine")):e.removeClass("wordWrap"),!0===t.breakWord?(e.addClass("breakWord"),e.removeClass("multiLine")):e.removeClass("breakWord")):(e.removeClass("breakWord"),e.removeClass("wordWrap"),e.removeClass("multiLine"))}return TextView}),define("widgets/brease/common/libs/redux/view/ItemView/ItemView",["widgets/brease/common/libs/redux/view/ImageView/ImageView","widgets/brease/common/libs/redux/view/TextView/TextView","widgets/brease/common/libs/BoxLayout","brease/events/BreaseEvent","brease/enum/Enum"],function(ImageView,TextView,BoxLayout,BreaseEvent,Enum){"use strict";var ItemView=function(e,t){this.render(e,t)},e=ItemView.prototype;e.render=function e(n,i){this.el=$(BoxLayout.createBoxContainer()),this.el.on(BreaseEvent.CLICK,n.onClick),t(this.el,n.status,n.itemSettings.imageAlign),n.status.visible&&(this.el.height(n.itemSettings.itemHeight),void 0!==n.image.image&&n.image.showImage&&(this.image=new ImageView(n.image,this.el)),void 0!==n.text&&n.text.showText&&""!==n.text.text&&void 0!==n.text.text&&(this.text=new TextView({text:n.text.text,textSettings:n.text.textSettings,selected:n.status.selected},this.el)),i.append(this.el))};function t(e,t,n){e.addClass("ItemView"),t.visible?(t.selected&&e.addClass("itemSelected"),t.enabled||e.addClass("itemDisabled")):e.addClass("itemInvisible"),t.lastItem&&e.addClass("lastItem");var i=n===Enum.ImagePosition.left?Enum.Orientation.LTR:Enum.Orientation.RTL;BoxLayout.setOrientation(e[0],i)}return e.dispose=function e(){void 0!==this.image&&(this.image.dispose(),this.image=void 0),void 0!==this.text&&(this.text.dispose(),this.text=void 0),this.el.off(),this.el.remove()},ItemView}),define("widgets/brease/common/libs/redux/view/ListView/ListView",["widgets/brease/common/libs/redux/view/ItemView/ItemView","brease/helper/Scroller"],function(ItemView,Scroller){"use strict";var ListView=function(e,t){this.render(e,t)},e=ListView.prototype;e.render=function e(t,s){if(this.elContainer=$('<div class="ListView Container"></div>'),this.elList=$('<div class="ListView List"></div>'),this.elContainer.append(this.elList),this.items=[],n(this.elContainer,t.status.visible,t.status.enabled),t.status.visible){var r=0;for(r=0;r<t.items.itemList.length;r+=1){var o=t.text.textElements[t.items.itemList[r].textId],a=t.image.imageElements[t.items.itemList[r].imageId],l={text:{text:void 0===o?"":o.displayText,textSettings:t.text.textSettings,showText:t.items.listSettings.showTexts},image:{image:void 0===a?void 0:a.imagePath,showImage:t.items.listSettings.showImages},itemSettings:t.items.itemSettings,status:{enabled:t.status.enabled,visible:t.status.visible,selected:t.items.itemList[r].selected,lastItem:r===t.items.itemList.length-1},onClick:function(e){var n=e;return function(e){t.onClick(n,e)}}(r)},d=new ItemView(l,this.elList);this.items.push(d)}s.append(this.elContainer);var c=void 0===this.items[t.items.selectedIndex]?void 0:this.items[t.items.selectedIndex].el[0],u=void 0===this.items[t.items.previousSelectedIndex]?void 0:this.items[t.items.previousSelectedIndex].el[0];this.scroller=i(!t.items.itemSettings.fitHeight2Items,t.status.editMode,this.elContainer[0],c,u)}},e.dispose=function e(){t(this),void 0!==this.scroller&&this.scroller.destroy(),this.elList.remove(),this.elContainer.remove()};function t(e){if(void 0!==e.items){var t=0;for(t=0;t<e.items.length;t+=1)e.items[t].dispose()}e.items=void 0}function n(e,t,n){t?(e.removeClass("invisible"),n?e.removeClass("disabled"):e.addClass("disabled")):e.addClass("invisible")}function i(e,t,n,i,r){var o;return e&&(o=s(n),t?(o.subsequentlyDisableTouch(),o.subsequentlyDisableMouse()):(void 0!==r&&o.scrollToElement(r,0,!0,!0),void 0!==i&&o.scrollToElement(i,400,!0,!0))),o}function s(e){var t={mouseWheel:!0,scrollX:!0,scrollY:!0};return Scroller.addScrollbars(e,t)}return ListView}),define("widgets/brease/common/libs/redux/view/ThumbView/ThumbView",["brease/events/BreaseEvent","libs/d3/d3"],function(BreaseEvent,e){"use strict";var ThumbView=function(e,t,n){return void 0===n?(this.create(e,t),this.render(e),this):(n.render(e),n)},t=ThumbView.prototype;return t.create=function e(t,n){void 0!==t.additionalId?this.id=n[0].id+"_Thumb_"+t.additionalId:this.id=n[0].id+"_Thumb",this.el=$('<div id="'+this.id+'"></div>'),void 0!==t.additionalClass&&this.el.addClass(t.additionalClass),this.el.addClass("ThumbView"),this.el.append("<img/>"),n.append(this.el)},t.render=function(e){void 0!==e.thumbImage&&""!==e.thumbImage?this.el.find("img").attr("src",e.thumbImage).show():this.el.find("img").hide(),this.el.css("left",e.left),this.el.css("top",e.top),this.el.css("height",e.thumbSize),this.el.css("width",e.thumbSize),void 0!==e.selected&&e.selected?this.el.css("z-index",5):this.el.css("z-index",0),this.dragBehavior(e)},t.dragBehavior=function(e){!brease.config.editMode&&e.enabled&&(this.mouseMove=e.onMouseMove,this.mouseUp=e.onMouseUp,this.mouseDown=e.onMouseDown,e.selected?($(document.body).on(BreaseEvent.MOUSE_MOVE,e.onMouseMove),$(document.body).on(BreaseEvent.MOUSE_UP,e.onMouseUp)):this.el.on(BreaseEvent.MOUSE_DOWN,e.onMouseDown))},t.dispose=function e(){$(document.body).off(BreaseEvent.MOUSE_MOVE,this.mouseMove),$(document.body).off(BreaseEvent.MOUSE_UP,this.mouseUp),this.el.off(BreaseEvent.MOUSE_DOWN,this.mouseDown)},ThumbView}),define("widgets/brease/common/libs/redux/view/TrackView/TrackView",[],function(){"use strict";var TrackView=function(e,t,n){return void 0===n?(this.create(e,t),this.render(e),this):(n.render(e),n)},e=TrackView.prototype;return e.create=function(e,t){void 0!==e.additionalId?this.id=t[0].id+"_TrackView_"+e.additionalId:this.id=t[0].id+"_TrackView",this.el=$('<div id="'+this.id+'"></div>'),this.el.addClass("TrackView"),""===e.additionalClass&&void 0===e.additionalClass||this.el.addClass(e.additionalClass),t.append(this.el)},e.render=function e(t){this.el.css("height",t.height),this.el.css("left",t.left),this.el.css("top",t.top),this.el.css("width",t.width)},e.dispose=function e(){},TrackView}),define("widgets/brease/common/libs/redux/view/ValueDisplayView/ValueDisplayView",["brease/enum/Enum"],function(Enum){"use strict";var ValueDisplayView=function(e,t,n){return void 0===n?(this.create(e,t),this.render(e),this):(n.render(e),n)},e=ValueDisplayView.prototype;return e.create=function(e,t){this.el=$("<output></output>"),this.el.addClass("ValueDisplayView"),this.addElements(e),t.append(this.el)},e.render=function e(t){this.zIndex(t),this.visible(t),this.showUnit(t),this.orientation(t),this.ellipsis(t),this.position(t),this.updateElements(t)},e.position=function(e){!0===e.ellipsis||void 0===e.ellipsis?this.el.css("width",e.width):this.el.css("width","auto"),void 0!==e.left&&(this.el.css("left",e.left),this.el.css("right","initial")),void 0!==e.right&&(this.el.css("right",e.right),this.el.css("left","initial")),this.el.css("height",e.height),this.el.css("top",e.top)},e.ellipsis=function(e){!0===e.ellipsis?this.el.addClass("ellipsis"):this.el.removeClass("ellipsis")},e.zIndex=function(e){void 0!==e.selected&&e.selected?this.el.css("z-index",5):this.el.css("z-index",0)},e.visible=function(e){!0===e.visible?this.el.removeClass("remove"):this.el.addClass("remove")},e.orientation=function(e){e.orientation===Enum.Orientation.LTR||e.orientation===Enum.Orientation.RTL?this.el.addClass("horizontal"):e.orientation!==Enum.Orientation.BTT&&e.orientation!==Enum.Orientation.TTB||this.el.addClass("vertical")},e.addElements=function e(t){this.outputValEl=$("<span/>").attr("class","valueOutput").text(t.value),this.outputUnitEl=$("<span/>").attr("class","unitOutput").text(t.unitSymbol),this.outputArrowEl=$("<span/>").attr("class","arrowOutput"),this.el.append([this.outputValEl,this.outputUnitEl,this.outputArrowEl])},e.showUnit=function(e){!0===e.showUnit?this.outputUnitEl.removeClass("remove"):this.outputUnitEl.addClass("remove")},e.updateElements=function(e){this.outputValEl.text(e.value),this.outputUnitEl.text(e.unitSymbol)},e.dispose=function e(){this.el.removeClass("horizontal vertical")},ValueDisplayView});define("widgets/brease/common/libs/Renderer",["brease/core/Class","libs/d3/d3","brease/core/Utils","brease/enum/Enum","globalize","widgets/brease/common/libs/ChartUtils","brease/events/BreaseEvent"],function(e,t,Utils,Enum,n,ChartUtils,BreaseEvent){"use strict";var i={enableZoomingBehavior:!0},s=e.extend(function Renderer(t,n){e.call(this),this.settings=void 0!==n?$.extend(!0,{},this.defaultSettings,n):Utils.deepCopy(this.defaultSettings),this.widget=t,this.dataAdapter=t.dataAdapter,this.clipPathId=Utils.uniqueID(this.widget.elem.id+"_svg_clipPath"),this.init()},i),r=s.prototype;r.init=function(){this.svg=t.select(this.widget.elem).append("svg").attr("width",this.widget.el.width()).attr("height",this.widget.el.height()),this.mainZoomBehavior=null,this.savedX=null,this.savedY=null,this.scaleXY=null,this.scaleX=null,this.scaleY=null,this.roundScale=.05,this.previousMainScale=null,this.zoomBehaviorXAxes=[],this.zoomBehaviorYAxes=[],o(this),a(this),this.settings.enableZoomingBehavior&&h(this),x(this),l(this),this._createGraphIntersectionPoints(),O(this)},r.updateAxis=function(){d(this),this.settings.enableZoomingBehavior&&p(this)},r.updateCursor=function(){u(this)},r.updateGraphs=function(){S(this)},r.updateZoomLevelLimits=function(){f(this)},r.updateZoomType=function(e){m(this,e)},r.zoomIn=function(){D(this,this.widget.settings.zoomFactor,{x:0,y:0})},r.zoomOut=function(){D(this,1/this.widget.settings.zoomFactor,{x:0,y:0})},r.zoomReset=function(){this.mainZoomBehavior.scale(1),this.mainZoomBehavior.translate([0,0]);var e=this.widget.getZoomType();e===Enum.ChartZoomType.none?(this.savedX=0,this.savedY=0):e===Enum.ChartZoomType.x?(this.savedX=null,this.savedY=0):e===Enum.ChartZoomType.y&&(this.savedX=0,this.savedY=null),this.scaleX=1,this.scaleY=1,this.previousMainScale=1,b(this,!0)},r.scrollLeft=function(){D(this,1,{x:this.widget.settings.scrollFactor,y:0})},r.scrollRight=function(){D(this,1,{x:-this.widget.settings.scrollFactor,y:0})},r.scrollUp=function(){D(this,1,{x:0,y:this.widget.settings.scrollFactor})},r.scrollDown=function(){D(this,1,{x:0,y:-this.widget.settings.scrollFactor})},r.xCursorStepLeft=function(e,t){k(this,e,t)},r.xCursorStepRight=function(e,t){M(this,e,t)},r.xCursorDisableDrag=function(e){P(this,e)},r.xCursorEnableDrag=function(e){B(this,e)},r._updateGraphIntersectionPoints=function(){var e=this,n=this.dataAdapter.getChartArea();this.svg.select("g.chart").selectAll("g.intersectionPoints").each(function(n){var i=t.select(this);for(var s in n.xCursors){var r=n.xCursors[s],o=i.selectAll('circle[data-xCursorId="'+s+'"].marker'),a=e.widget.chartItems.xCursors[s],l=e.dataAdapter.xAxisAreas[a.axisWidget.elem.id].scale(r.xValue),d=e.dataAdapter.yAxisAreas[r.yValueAxes].scale(r.yValues);o.attr("cx",l).attr("cy",d||e.dataAdapter.getChartArea().height).classed("disabled",!r.markerEnable).classed("active",r.markerActive).classed("remove",!r.markerVisible)}})},r.dispose=function(){};function o(e){var n=e.dataAdapter.getChartArea();e.svg.append("defs").append("clipPath").attr("id",e.clipPathId).append("rect").attr("x",.5).attr("y",.5).attr("width",n.width-1).attr("height",n.height-1),e.svg.append("g").attr("class","chart").attr("transform","translate("+(n.x+.5)+","+(n.y+.5)+")").append("rect").attr("width",n.width).attr("height",n.height),e.svg.selectAll("g.xAxis").data(t.values(e.dataAdapter.getXAxisAreas())).enter().append("g").attr("class","axis xAxisArea").attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"}),e.svg.selectAll("g.yAxis").data(t.values(e.dataAdapter.getYAxisAreas())).enter().append("g").attr("class","axis yAxisArea").attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"})}function a(e){var n=e.dataAdapter.getChartArea();e.svg.selectAll("g.xAxisArea").each(function(i){var s=e.widget.chartItems.xAxis[i.id],r=t.select(this).append("g").attr("id",i.id+"_breaseChartXAxis").attr("class","xAxis").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("fill","none").attr("transform",function(e){return"translate(0, "+("top"===e.info.position?e.height:0)+")"});r.append("rect").attr("id",i.id+"_rect").attr("height",s.settings.height).attr("width",n.width).attr("pointer-events","visible").attr("transform",function(e){return"translate(0, "+("top"===e.info.position?-1*e.height:0)+")"});var o=r[0][0];$(o).on(BreaseEvent.CLICK,s._bind("_clickHandler")),r.append("g").attr("transform","translate("+n.width/2+", "+("top"===i.info.position?-i.info.axisLabelDistance:i.info.axisLabelDistance)+")").append("text").attr("class","xAxisDescription").attr("dy","top"===i.info.position?"-0.03em":"0.75em").attr("text-anchor","middle")}),e.svg.selectAll("g.chart").append("g").attr("class","xGrid gridLines").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")"),e.svg.selectAll("g.chart").append("g").attr("class","yGrid gridLines").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")"),e.svg.selectAll("g.yAxisArea").each(function(i){var s=e.widget.chartItems.yAxis[i.id],r=t.select(this).append("g").attr("id",i.id+"_breaseChartYAxis").attr("class","yAxis").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("fill","none").attr("transform",function(e){return"translate("+("left"===e.info.position?e.width:0)+", 0)"});r.append("rect").attr("id",i.id+"_rect").attr("height",n.height).attr("width",s.settings.width).attr("pointer-events","visible").attr("transform",function(e){return"translate("+("left"===e.info.position?-1*e.width:0)+",0)"});var o=r[0][0];$(o).on(BreaseEvent.CLICK,s._bind("_clickHandler")),r.append("g").attr("transform","rotate(-90) translate(-"+i.height/2+", "+("left"===i.info.position?-i.info.axisLabelDistance:i.info.axisLabelDistance)+")").append("text").attr("class","yAxisDescription").attr("dy","left"===i.info.position?"-0.03em":"0.75em").style("text-anchor","middle")})}function l(e){var n=e.dataAdapter.getChartArea();e.svg.select("g.chart").selectAll("g.xCursorAreas").data(t.values(e.dataAdapter.getXAxisCursorAreas())).enter().append("g").attr("class","xCursorArea").classed("disabled",function(t){return!e.widget.chartItems.xCursors[t.id].isEnabled()}).classed("remove",function(t){return!e.widget.chartItems.xCursors[t.id].isVisible()}).attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")").append("rect").attr("class",function(e){return"cursor "+e.id}).classed("remove",function(t){return e.widget.chartItems.xCursors[t.id].isHidden}).attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"}).attr("height",function(e){return e.height}).attr("width",function(e){return e.width}).style("fill","transparent").style("stroke","transparent"),e.svg.selectAll("g.xCursorArea").each(function(i){var s=e.widget.chartItems.xCursors[i.id],r=t.select(this).attr("id",i.id+"_breaseChartXAxisCursor").append("line").attr("class","cursor "+i.id).classed("remove",e.widget.chartItems.xCursors[i.id].isHidden).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",n.height)}),e.svg.selectAll("g.xCursorArea").each(function(n){var i=e.widget.chartItems.xCursors[n.id],s=t.select(this),r=s[0][0];$(r).on(BreaseEvent.CLICK,i._bind("_clickHandler"))})}function d(e){var n=e.dataAdapter.getXAxisAreas(),i=e.dataAdapter.getYAxisAreas(),s={top:[],bottom:[]};e.svg.selectAll("g.xAxisArea").each(function(n){var i=e.widget.chartItems.xAxis[n.id],r,o,a,l=t.svg.axis().scale(n.scale).orient(n.info.position).tickFormat(function(t){return R(e.dataAdapter.xAxisAreas[i.elem.id].info.format,t,e.dataAdapter.xAxisAreas[i.elem.id].info.type)});t.select(this).selectAll("g.xAxis").call(l),t.select(this).selectAll("text.xAxisDescription").text(i.getAxisLabel());var d=t.select(this).selectAll(".tick>text");d=ChartUtils.getMultiLine(d,n.info.position),ChartUtils.rotateTickLabels(d,n.info.position,n.info.tickLabelDistance,n.info.tickLabelRotation),r=Array.prototype.slice.call(document.getElementById(n.id+"_breaseChartXAxis").querySelectorAll(".tick text")),o=Math.min(ChartUtils.getNumberOfTickLabel(r,n),10),a=ChartUtils.getTickLabelValues(n.scale.domain(),o,n.info.type),s[n.info.position]=a,l=t.svg.axis().scale(n.scale).orient(n.info.position).tickFormat(function(t){return R(e.dataAdapter.xAxisAreas[i.elem.id].info.format,t,e.dataAdapter.xAxisAreas[i.elem.id].info.type)}).tickValues(a),t.select(this).selectAll("g.xAxis").call(l),d=t.select(this).selectAll(".tick>text"),d=ChartUtils.getMultiLine(d,n.info.position),ChartUtils.rotateTickLabels(d,n.info.position,n.info.tickLabelDistance,n.info.tickLabelRotation)}),e.svg.selectAll("g.yAxisArea").each(function(n){var i=e.widget.chartItems.yAxis[n.id],s=t.svg.axis().scale(n.scale).orient(n.info.position).tickFormat(function(t){return R(e.dataAdapter.yAxisAreas[i.elem.id].info.format,t,e.dataAdapter.yAxisAreas[i.elem.id].info.type)});t.select(this).selectAll("g.yAxis").call(s),t.select(this).selectAll("text.yAxisDescription").text(i.getAxisLabel()+" "+i.currentUnitSymbol());var r=t.select(this).selectAll(".tick>text");ChartUtils.rotateTickLabels(r,n.info.position,n.info.tickLabelDistance,n.info.tickLabelRotation)}),c(e,e.widget.settings.showGrid,s),S(e)}function c(e,n,i){var s=e.dataAdapter.getChartArea(),r=e.dataAdapter.getYAxisAreas(),o=null,a=null,l=null,d=e.dataAdapter.getXAxisAreas(),c=null,u=null,h=null,g,f,p;for(var m in r)"left"===r[m].info.position&&(o=r[m]),"right"===r[m].info.position&&(a=r[m]);l=o||a;for(m in d)"bottom"===d[m].info.position&&(u=d[m]),"top"===d[m].info.position&&(c=d[m]);u?(h=u,g=i.bottom):(h=c,g=i.top),n&&h&&l?(f=t.svg.axis().scale(h.scale).outerTickSize(0).innerTickSize(-s.height).orient("top").tickValues(g),p=t.svg.axis().scale(l.scale).outerTickSize(0).innerTickSize(-s.width).orient("left"),e.svg.selectAll("g.xGrid").call(f),e.svg.selectAll("g.yGrid").call(p)):(e.svg.selectAll("g.xGrid").selectAll("*").remove(),e.svg.selectAll("g.yGrid").selectAll("*").remove())}function u(e){e.svg.selectAll("g.xCursorArea").each(function(t){var n=e.widget.chartItems.xCursors[t.id];if(n.axisWidget.elem.id){var i=e.dataAdapter.xAxisAreas[n.axisWidget.elem.id].scale(n._getValue());e.svg.select("rect."+t.id).attr("transform","translate("+(i-e.dataAdapter.settings.cursorAreaWidth/2)+", 0)");var s=e.svg.select("line."+t.id).attr("transform","translate("+i+", 0)")}}),e._updateGraphIntersectionPoints()}function h(e){e.mainZoomBehavior=g(e);var n="";for(n in e.dataAdapter.xAxisAreas)Object.prototype.hasOwnProperty.call(e.dataAdapter.xAxisAreas,n)&&(e.zoomBehaviorXAxes[n]=t.behavior.zoom());for(n in e.dataAdapter.yAxisAreas)Object.prototype.hasOwnProperty.call(e.dataAdapter.yAxisAreas,n)&&(e.zoomBehaviorYAxes[n]=t.behavior.zoom());e.svg.selectAll("g.chart").call(e.mainZoomBehavior)}function g(e){var n=e.widget.getMinZoomLevel()/100,i=e.widget.getMaxZoomLevel()/100,s=t.behavior.zoom().x(w(e)).y(T(e)).scaleExtent([n,i]).on("zoomstart",function(){t.event.sourceEvent&&(t.event.sourceEvent.stopPropagation(),t.event.sourceEvent.stopImmediatePropagation())}).on("zoom.stopPropagation",function(){t.event.sourceEvent&&(t.event.sourceEvent.stopPropagation(),t.event.sourceEvent.stopImmediatePropagation())}).on("zoom.throttledHandleZooming",_.throttle(_.partial(b,e),50,{trailing:!1,leading:!0})),r=s.scale();return e.scaleX=r,e.scaleY=r,e.scaleXY=r,e.previousMainScale=r,s}function f(e){e.mainZoomBehavior.scaleExtent([e.widget.getMinZoomLevel()/100,e.widget.getMaxZoomLevel()/100]),e.svg.selectAll("g.chart").call(e.mainZoomBehavior)}function p(e){var t=e.dataAdapter.getYAxisAreas(),n=e.dataAdapter.getXAxisAreas();e.svg.selectAll("g.xAxisArea").each(function(t){e.zoomBehaviorXAxes[t.id].x(n[t.id].scale)}),e.svg.selectAll("g.yAxisArea").each(function(n){e.zoomBehaviorYAxes[n.id].y(t[n.id].scale)}),v(e),b(e,!0)}function m(e,t){v(e);var n=e.mainZoomBehavior,i=n.translate();t===Enum.ChartZoomType.xy&&(e.savedX=null,e.savedY=null),t===Enum.ChartZoomType.x&&(e.savedX=null,e.savedY=i[1]),t===Enum.ChartZoomType.y&&(e.savedX=i[0],e.savedY=null),t===Enum.ChartZoomType.none&&(e.savedX=i[0],e.savedY=i[1])}function v(e){var t=e.mainZoomBehavior,n=t.translate(),i=n;null!==e.savedX&&(i[0]=e.savedX),null!==e.savedY&&(i[1]=e.savedY),t.translate(i)}function b(e,t){var n=new CustomEvent("Zoomed");e.widget.dispatchEvent(n);var i=e.mainZoomBehavior.scale()-e.previousMainScale,s=1+i/e.previousMainScale,r=e.scaleX*s,o=e.scaleY*s,a=Utils.getChromeScale(e.widget.elem),l=e.mainZoomBehavior.translate();e.widget.getInfiniteScroll()||(r=parseFloat(r.toFixed(5)),o=parseFloat(o.toFixed(5)),r<=1+e.roundScale&&(r=1),o<=1+e.roundScale&&(o=1),y(e,l,r,o,a));var c=e.widget.getZoomType();c===Enum.ChartZoomType.xy||t?(e.scaleX=r,e.scaleY=o,E(e,e.scaleX,l),A(e,e.scaleY,l)):c===Enum.ChartZoomType.x?(e.scaleX=r,E(e,e.scaleX,l)):c===Enum.ChartZoomType.y&&(e.scaleY=o,A(e,e.scaleY,l)),d(e),S(e),u(e),e.previousMainScale=e.mainZoomBehavior.scale()}function y(e,t,n,i,s){t[0]=I(e,n,t[0]),t[0]=Math.abs(t[0])>e.roundScale?t[0]:0,t[1]=C(e,i,t[1]),t[1]=Math.abs(t[1])>e.roundScale?t[1]:0,t=t.map(function(e){return e/s}),e.mainZoomBehavior.translate(t)}function E(e,t,n){var i="";for(i in e.zoomBehaviorXAxes)Object.prototype.hasOwnProperty.call(e.zoomBehaviorXAxes,i)&&e.zoomBehaviorXAxes[i].scale(t).translate(n)}function A(e,t,n){var i="";for(i in e.zoomBehaviorYAxes)Object.prototype.hasOwnProperty.call(e.zoomBehaviorYAxes,i)&&e.zoomBehaviorYAxes[i].scale(t).translate(n)}function I(e,t,n){for(var i=e.dataAdapter.chartArea.width,s=n,r=e.dataAdapter.graphs,o=0,a=0;a<r.length;a+=1){var l=r[a],d=l.xScale;if(l.coordinates.length>0){var c=i/((d.domain()[1]-d.domain()[0])*t),u=0,h=-((d.domain()[0]-d.domain()[1])*t+(d.range()[1]-(d.range()[1]-i*t/c)))*c-0;s>0?s=0:s<h&&(s=h)}}return s}function C(e,t,n){for(var i=e.dataAdapter.chartArea.height,s=n,r=e.dataAdapter.graphs,o=e.dataAdapter.getYAxesMinimum(),a=e.dataAdapter.getYAxesMaximum(),l=0,d=0;d<r.length;d+=1){var c=r[d],u=c.yScale;if(c.coordinates.length>0){var h=i/((u.domain()[1]-u.domain()[0])*t),g=((u.domain()[0]-u.domain()[1])*t+(a-o))*h*t+0,f=-((u.domain()[0]-u.domain()[1])*t+(a-(a-i*t/h)))*h-0;s>g?s=g:s<f&&(s=f)}}return s}function w(e){for(var t in e.dataAdapter.xAxisAreas)if(Object.prototype.hasOwnProperty.call(e.dataAdapter.xAxisAreas,t))return e.dataAdapter.xScales[t];return null}function T(e){for(var t in e.dataAdapter.yAxisAreas)if(Object.prototype.hasOwnProperty.call(e.dataAdapter.yAxisAreas,t))return e.dataAdapter.yScales[t];return null}function x(e){e.svg.select("g.chart").selectAll("g.graph").data(e.dataAdapter.getGraphs()).enter().append("g").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")").attr("class","graph").each(function(n){var i=t.svg.area(),s=e.widget.chartItems.yValues[n.id];t.select(this).attr("id",n.id+"_breaseChartYValueList").append("path").datum(n.coordinates).attr("id",n.id+"_breaseChartYValueList_area").attr("class","area").style("stroke","none").attr("pointer-events","none").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("d",i(n.coordinates));var r=t.svg.line(),o=t.select(this).append("path").attr("id",n.id+"_breaseChartYValueList_line").attr("class","graph").style("fill","none").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("d",r(n.coordinates)),a=o[0][0];$(a).on(BreaseEvent.CLICK,s._bind("_clickHandler"))})}r._createGraphIntersectionPoints=function(){var e=this,n=this.dataAdapter.getChartArea();this.svg.select("g.chart").selectAll("g.intersectionPoints").data(this.dataAdapter.getGraphIntersectionPoints()).enter().append("g").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+this.clipPathId+")").attr("class","intersectionPoints").each(function(i){var s=this;s.setAttribute("id",i.graphId+"_intersectionPoints"),Object.keys(i.xCursors).forEach(function(r){var o=i.xCursors[r],a=e.dataAdapter.yAxisAreas[o.yValueAxes].scale(o.yValues),l=e.widget.chartItems.xCursors[r];t.select(s).append("circle").attr("class","marker").attr("data-xCursorId",r).classed("active",o.markerActive).classed("disabled",!o.markerEnable).classed("remove",!o.markerVisible).attr("cx",e.dataAdapter.xAxisAreas[l.axisWidget.elem.id].scale(o.xValue)).attr("cy",a||n.height).attr("r",o.markerSize/2)})})};function S(e){e.svg.select("g.chart").selectAll("g.graph").data(e.dataAdapter.getGraphs()).each(function(n){var i=n.yScale,s=n.xScale,r=t.svg.area().interpolate(n.interpolationType).x(function(e){return s(e.x)}).y0(e.dataAdapter.chartArea.height).y1(function(e){return i(e.y)});t.select(this).selectAll("path.area").attr("d",r(n.coordinates));var o=t.svg.line().interpolate(n.interpolationType).x(function(e){return s(e.x)}).y(function(e){return i(e.y)});t.select(this).selectAll("path.graph").attr("d",o(n.coordinates))})}function D(e,t,n){var i=e.mainZoomBehavior,s=e.dataAdapter.getChartArea(),r=[s.width/2,s.height/2],o={x:i.translate()[0],y:i.translate()[1],s:i.scale()},a=[(r[0]-o.x)/o.s,(r[1]-o.y)/o.s],l={x:o.x+s.width*n.x,y:o.y+s.height*n.y,s:i.scale()*t},d;l.s<i.scaleExtent()[0]?l.s=i.scaleExtent()[0]:l.s>i.scaleExtent()[1]&&(l.s=i.scaleExtent()[1]),d=[a[0]*l.s+o.x,a[1]*l.s+o.y],l.x+=r[0]-d[0],l.y+=r[1]-d[1],i.scale(l.s),i.translate([l.x,l.y]),b(e)}function L(e){return t.behavior.drag().on("dragstart",function(n){var i=t.event.sourceEvent.target.getAttribute("data-xCursorId"),s;n.currentXCursorId=i||n.id,s=e.widget.chartItems.xCursors[n.currentXCursorId],t.event.sourceEvent.stopPropagation(),s._getActive()||s.axisWidget._setActiveCursor(n.currentXCursorId)}).on("drag",function(n){var i=Utils.getChromeScale(e.widget.elem),s=t.event.x/i+e.dataAdapter.getChartArea().x/i-e.dataAdapter.getChartArea().x,r=n.currentXCursorId,o=(r,e.widget.chartItems.xCursors[r]),a=o.axisWidget._xPositions(o.cursorType),l=e.dataAdapter.xAxisAreas[o.axisWidget.elem.id].scale.invert(s),d=o._getValue(),c,u=t.bisectLeft(a,l),h=a[Math.max(u-1,0)],g=a[Math.min.apply(Math,[u,a.length-1,e.dataAdapter.xAxisCursorAreas[o.elem.id].maxAvailableXPositionIndex])];c=+l-(+g+ +h)/2<0?h:g,c!==d&&o._updateValue(c)}).on("dragend",function(e){})}function N(e,t){for(var n in e.graphWidgets)if(Object.prototype.hasOwnProperty.call(e.graphWidgets,n)){var i=e.graphWidgets[n].getIndexOfXCoordinate(t),s=e.graphWidgets[n].getNumberOfSamples();if(s<0||i<s&&i>=0)return!0}return!1}function O(e){var n=L(e);e.svg.selectAll("g.xCursorArea").each(function(i){if(e.widget.chartItems.xCursors[i.id].isEnabled()){t.select(this).call(n);Array.from(document.querySelectorAll("circle.marker")).filter(function(e){return e.getAttribute("data-xCursorId")===i.id}).forEach(function(e){t.select(e).call(n)})}})}function k(e,t,n){var i=e.widget.chartItems.xCursors[t],s=i.axisWidget._xPositions(i.cursorType).map(function(e){return+e}).indexOf(+i._getValue()),r;r=s-n>=0?s-n:s,r!==s&&(e.widget.chartItems.xCursors[t]._updateValue(i.axisWidget._xPositions(i.cursorType)[r]),u(e))}function M(e,t,n){var i=e.widget.chartItems.xCursors[t],s=i.axisWidget._xPositions(i.cursorType).map(function(e){return+e}).indexOf(+i._getValue()),r;r=s+n<=e.dataAdapter.xAxisCursorAreas[i.elem.id].maxAvailableXPositionIndex?s+n:s,r!==s&&(e.widget.chartItems.xCursors[t]._updateValue(i.axisWidget._xPositions(i.cursorType)[r]),u(e))}function P(e,n){var i=e.svg.selectAll("g.xCursorArea").filter(function(e){return e.id===n?this:null}),s=Array.from(document.querySelectorAll("circle.marker")).filter(function(e){return e.getAttribute("data-xCursorId")===n});i.on(".drag",null),s.forEach(function(e){t.select(e).on(".drag",null)})}function B(e,n){var i=e.svg.selectAll("g.xCursorArea").filter(function(e){return e.id===n?this:null}),s=Array.from(document.querySelectorAll("circle.marker")).filter(function(e){return e.getAttribute("data-xCursorId")===n}),r=L(e);i.call(r),s.forEach(function(e){t.select(e).call(r)})}function R(e,n,i){var s;switch(i){case"dateTime":return Globalize.format(n,e);case"secondsAsNumber":return s=t.format("0.6f"),s(n);default:var r=0===e.decimalPlaces?e.minimumIntegerDigits:e.minimumIntegerDigits+e.decimalPlaces+1;return s=t.format("0"+(n<0?r+1:r)+"."+e.decimalPlaces+"f"),s(n)}}return s}),define("widgets/brease/common/libs/ReorderingByJson",["widgets/brease/common/libs/redux/utils/UtilsJSON"],function(UtilsJSON){"use strict";var ReorderingByJson={};return ReorderingByJson.helpers={utilsJson:UtilsJSON},ReorderingByJson.ordering=function e(t,n,i){for(var s=ReorderingByJson.helpers.utilsJson.convertJSONtoObject(t),r=[],o=0;o<s.length;o+=1)r.push(s[o].wRef);r.forEach(function(e){var t=$("#"+i+"_"+e).detach();n.append(t)})},ReorderingByJson.getOrder=function e(t){for(var n=[],i=0,s,r=t.find("> .breaseGridLineItem"),o=0;o<r.length;o+=1)s=brease.callWidget(r[o].id,"widget"),i=s.settings.parentContentId.length,n.push({wRef:r[o].id.slice(i+1),s:s.getStatus()});return ReorderingByJson.helpers.utilsJson.convertObjectToJSON(n)},ReorderingByJson}),define("widgets/brease/common/libs/ShakeElements",["widgets/brease/common/libs/ChildHandling"],function(ChildHandling){"use strict";var ShakeElements={};return ShakeElements.helpers={childHandling:ChildHandling},ShakeElements.startShaking=function e(t){if(t.length>0)for(var n=0;n<t.length;n+=1)n%2==0?$("#"+t[n]).addClass("shakeAlternate"):$("#"+t[n]).addClass("shake")},ShakeElements.stopShaking=function e(t){ShakeElements.helpers.childHandling.removeChildClasses(t,"shake shakeAlternate")},ShakeElements}),function(){var e=void 0!==require&&require;if("function"!=typeof define||!define.amd&&"undefined"==typeof XMLHttpRequest)return module.exports=e("./text_loader_webpack");define("ace/requirejs/text",["require","exports","module","../lib/net"],function(t,n,i){"use strict";e&&e.nodeRequire?i.exports=e.nodeRequire(t.toUrl("./text_build")):n.load=function(e,n,i,s){t("../lib/net").get(n.toUrl(e),i)}})}(),define("ace/requirejs/text!ace/ext/searchbox.css",[],function(){
return'\n\n/* ------------------------------------------------------------------------------------------\n * Editor Search Form\n * --------------------------------------------------------------------------------------- */\n.ace_search {\n    background-color: #ddd;\n    color: #666;\n    border: 1px solid #cbcbcb;\n    border-top: 0 none;\n    overflow: hidden;\n    margin: 0;\n    padding: 4px 6px 0 4px;\n    position: absolute;\n    top: 0;\n    z-index: 99;\n    white-space: normal;\n}\n.ace_search.left {\n    border-left: 0 none;\n    border-radius: 0px 0px 5px 0px;\n    left: 0;\n}\n.ace_search.right {\n    border-radius: 0px 0px 0px 5px;\n    border-right: 0 none;\n    right: 0;\n}\n\n.ace_search_form, .ace_replace_form {\n    margin: 0 20px 4px 0;\n    overflow: hidden;\n    line-height: 1.9;\n}\n.ace_replace_form {\n    margin-right: 0;\n}\n.ace_search_form.ace_nomatch {\n    outline: 1px solid red;\n}\n\n.ace_search_field {\n    border-radius: 3px 0 0 3px;\n    background-color: white;\n    color: black;\n    border: 1px solid #cbcbcb;\n    border-right: 0 none;\n    box-sizing: border-box!important;\n    outline: 0;\n    padding: 0;\n    font-size: inherit;\n    margin: 0;\n    line-height: inherit;\n    padding: 0 6px;\n    min-width: 17em;\n    vertical-align: top;\n}\n.ace_searchbtn {\n    border: 1px solid #cbcbcb;\n    line-height: inherit;\n    display: inline-block;\n    padding: 0 6px;\n    background: #fff;\n    border-right: 0 none;\n    border-left: 1px solid #dcdcdc;\n    cursor: pointer;\n    margin: 0;\n    position: relative;\n    box-sizing: content-box!important;\n    color: #666;\n}\n.ace_searchbtn:last-child {\n    border-radius: 0 3px 3px 0;\n    border-right: 1px solid #cbcbcb;\n}\n.ace_searchbtn:disabled {\n    background: none;\n    cursor: default;\n}\n.ace_searchbtn:hover {\n    background-color: #eef1f6;\n}\n.ace_searchbtn.prev, .ace_searchbtn.next {\n     padding: 0px 0.7em\n}\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\n     content: "";\n     border: solid 2px #888;\n     width: 0.5em;\n     height: 0.5em;\n     border-width:  2px 0 0 2px;\n     display:inline-block;\n     transform: rotate(-45deg);\n}\n.ace_searchbtn.next:after {\n     border-width: 0 2px 2px 0 ;\n}\n.ace_searchbtn_close {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\n    border-radius: 50%;\n    border: 0 none;\n    color: #656565;\n    cursor: pointer;\n    font: 16px/16px Arial;\n    padding: 0;\n    height: 14px;\n    width: 14px;\n    top: 9px;\n    right: 7px;\n    position: absolute;\n}\n.ace_searchbtn_close:hover {\n    background-color: #656565;\n    background-position: 50% 100%;\n    color: white;\n}\n\n.ace_button {\n    margin-left: 2px;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow: hidden;\n    opacity: 0.7;\n    border: 1px solid rgba(100,100,100,0.23);\n    padding: 1px;\n    box-sizing:    border-box!important;\n    color: black;\n}\n\n.ace_button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_button:active {\n    background-color: #ddd;\n}\n\n.ace_button.checked {\n    border-color: #3399ff;\n    opacity:1;\n}\n\n.ace_search_options{\n    margin-bottom: 3px;\n    text-align: right;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    clear: both;\n}\n\n.ace_search_counter {\n    float: left;\n    font-family: arial;\n    padding: 0 8px;\n}'}),define("widgets/brease/common/libs/TextEditor/Commands",["ace/ext/searchbox"],function(e){"use strict";var Commands={};Commands.commandList=["vCopy","vPaste","vCut","insertCharacter","removeline","copylinesdown","copylinesup","movelinesdown","movelinesup","removetolineend","removetolinestart","removewordleft","removewordright","selectall","selectleft","selectright","selectwordleft","selectwordright","selecttolineend","selecttolinestart","selectup","selectdown","selectup","selectpageup","selectpagedown","duplicateSelection","gotoleft","gotoright","gotowordleft","gotowordright","golineup","golinedown","golineup","gotolinestart","gotolineend","gotopageup","gotopagedown","gotostart","gotoend","scrolldown","scrollup","jumptomatching","find","replace","findnext","findprevious","indent","outdent","undo","redo","tolowercase","touppercase","overwrite","del","backspace"],Commands.addCommands=function(n){n.editor.commands.addCommand({name:"backspace",bindKey:t("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){if(void 0!==e.searchBox)if(e.searchBox.active&&e.searchBox.isFocused()){var t=e.searchBox.activeInput.selectionStart,n=e.searchBox.activeInput.selectionEnd,i=n-t+1;if(t>0){var s=e.searchBox.activeInput.value.split("");s.splice(t-1,i),e.searchBox.activeInput.value=s.join(""),e.searchBox.activeInput.setSelectionRange(t-1,t-1)}}else e.remove("left");else e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"}),n.editor.commands.addCommand({name:"del",bindKey:t("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){if(void 0!==e.searchBox)if(e.searchBox.active&&e.searchBox.isFocused()){var t=e.searchBox.activeInput.selectionStart,n=e.searchBox.activeInput.selectionEnd,i=n-t;if(i=0===i?1:i,t<e.searchBox.activeInput.value.length){var s=e.searchBox.activeInput.value.split("");s.splice(t,i),e.searchBox.activeInput.value=s.join(""),e.searchBox.activeInput.setSelectionRange(t,t)}}else e.remove("right");else e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"}),n.editor.commands.addCommand({name:"find",bindKey:t("Ctrl-F","Command-F"),exec:function(t){e.Search(t),n.addListenersSearchBox.apply(n)},readOnly:!0}),n.editor.commands.addCommand({name:"replace",bindKey:t("Ctrl-H","Command-Option-F"),exec:function(t){e.Search(t,!0),n.addListenersSearchBox.apply(n)}}),n.editor.commands.addCommand({name:"vCopy",exec:function(e){document.execCommand("copy"),n.setClipboardText(e.getCopyText())}}),n.editor.commands.addCommand({name:"vPaste",exec:function(e){e.insert(n.getClipboardText())}}),n.editor.commands.addCommand({name:"vCut",exec:function(e){n.setClipboardText(e.getCopyText()),document.execCommand("cut")}}),n.editor.commands.addCommand({name:"insertCharacter",exec:function(e,t){document.execCommand("insertText",!1,t[0]),e.renderer.scrollCursorIntoView()}})},Commands.isValidCommand=function(e){return void 0!==e&&""!==e&&this.commandList.indexOf(e)>-1};function t(e,t){return{win:e,mac:t}}return Commands}),define("ace/requirejs/text!ace/css/editor.css",[],function(){return'.ace_editor {\n    position: relative;\n    overflow: hidden;\n    font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: \'\';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_selecting, .ace_selecting * {\n    cursor: text !important;\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left {\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n}\n\n.ace_gutter-cell {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    text-indent: -1em;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: inherit;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n    text-indent: 0;\n}\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    perspective: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n    will-change: transform;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\n}\n\n.ace_tooltip {\n    background-color: #FFF;\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n/*\nstyles = []\nfor (var i = 1; i < 16; i++) {\n    styles.push(".ace_br" + i + "{" + (\n        ["top-left", "top-right", "bottom-right", "bottom-left"]\n    ).map(function(x, j) {\n        return i & (1<<j) ? "border-" + x + "-radius: 3px;" : "" \n    }).filter(Boolean).join(" ") + "}")\n}\nstyles.join("\\n")\n*/\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n.ace_text-input-ios {\n  position: absolute !important;\n  top: -100000px !important;\n  left: -100000px !important;\n}\n'}),define("ace/requirejs/text!ace/theme/brace.css",[],function(){return".ace-brace {\r\n    background-color: #FFFFFF;\r\n    color: #000;\r\n}\r\n\r\n    .ace-brace .ace_gutter {\r\n        background: #d1d1d1;\r\n        color: #000;\r\n    }\r\n\r\n    .ace-brace .ace_gutter-active-line {\r\n        background-color: #e2e2e2;\r\n    }\r\n\r\n    .ace-brace .ace_print-margin {\r\n        width: 1px;\r\n        background: #555661;\r\n    }\r\n\r\n    .ace-brace .ace_cursor {\r\n        color: #000;\r\n    }\r\n\r\n    .ace-brace.ace_multiselect .ace_selection.ace_start {\r\n        box-shadow: 0 0 3px 0px #272822;\r\n    }\r\n\r\n    .ace-brace .ace_marker-layer .ace_selection {\r\n        background: #f80;\r\n    }\r\n\r\n\r\n    .ace-brace .ace_marker-layer .ace_step {\r\n        background: rgb(102, 82, 0);\r\n    }\r\n\r\n    .ace-brace .ace_marker-layer .ace_bracket {\r\n        margin: -1px 0 0 -1px;\r\n        border: 1px solid #49483E;\r\n    }\r\n\r\n    .ace-brace .ace_marker-layer .ace_active-line {\r\n        background: #e2e2e2;\r\n    }\r\n\r\n    .ace-brace .ace_marker-layer .ace_selected-word {\r\n        border: 1px solid #49483E;\r\n    }\r\n\r\n    .ace-brace .ace_invisible {\r\n        color: #52524d;\r\n    }\r\n\r\n    .ace-brace .ace_entity.ace_name.ace_tag,\r\n    .ace-brace .ace_keyword,\r\n    .ace-brace .ace_meta.ace_tag,\r\n    .ace-brace .ace_storage {\r\n        color: #F92672;\r\n    }\r\n\r\n    .ace-brace .ace_punctuation,\r\n    .ace-brace .ace_punctuation.ace_tag {\r\n        color: #f8f8f8;\r\n    }\r\n\r\n    .ace-brace .ace_constant.ace_character,\r\n    .ace-brace .ace_constant.ace_language,\r\n    .ace-brace .ace_constant.ace_numeric,\r\n    .ace-brace .ace_constant.ace_other {\r\n        color: #000000;\r\n    }\r\n\r\n    .ace-brace .ace_invalid {\r\n        color: #F8F8F0;\r\n        background-color: #F92672;\r\n    }\r\n\r\n        .ace-brace .ace_invalid.ace_deprecated {\r\n            color: #F8F8F0;\r\n            background-color: #AE81FF;\r\n        }\r\n\r\n    .ace-brace .ace_support.ace_constant,\r\n    .ace-brace .ace_support.ace_function {\r\n        color: #66D9EF;\r\n    }\r\n\r\n    .ace-brace .ace_fold {\r\n        background-color: #A6E22E;\r\n        border-color: #F8F8F2;\r\n    }\r\n\r\n    .ace-brace .ace_storage.ace_type,\r\n    .ace-brace .ace_support.ace_class,\r\n    .ace-brace .ace_support.ace_type {\r\n        font-style: italic;\r\n        color: #66D9EF;\r\n    }\r\n\r\n    .ace-brace .ace_entity.ace_name.ace_function,\r\n    .ace-brace .ace_entity.ace_other,\r\n    .ace-brace .ace_entity.ace_other.ace_attribute-name,\r\n    .ace-brace .ace_variable {\r\n        color: #A6E220;\r\n    }\r\n\r\n        .ace-brace .ace_variable.ace_parameter {\r\n            font-style: italic;\r\n            color: #FD971F;\r\n        }\r\n\r\n    .ace-brace .ace_string {\r\n        color: #4486ff;\r\n    }\r\n\r\n    .ace-brace .ace_comment {\r\n        color: #18a33c;\r\n    }\r\n\r\n    .ace-brace .ace_indent-guide {\r\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y;\r\n    }"}),define("widgets/brease/common/libs/TextEditor/TextEditor",["ace/ace","widgets/brease/common/libs/TextEditor/Commands","brease/core/Utils"],function(e,Commands,Utils){"use strict";var t="";function TextEditor(t,i,s,r,o,a){t instanceof Element&&(this.settings=n(i,s,r,o,a),this.editor=e.edit(t),this.editor.setTheme("ace/theme/brace"),this.editor.session.setMode("ace/mode/"+this.settings.mode),this.settings.disabled&&this.disableInteraction(!0),this.editor.on("change",this.settings.onModified),this.boundOnFocus=this.onFocus.bind(this),this.editor.on("focus",this.boundOnFocus),this.boundOnBlur=this.onBlur.bind(this),this.editor.on("blur",this.boundOnBlur),this.editor.setShowPrintMargin(!1),this.editor.setOption("hasCssTransforms",!0),this.editor.renderer.setShowGutter(this.settings.showLineNumber),Commands.addCommands(this),this.settings.keyboard&&(this.boundOnKeyboardInput=this.onKeyboardInput.bind(this),this.keyboard=new o))}TextEditor.prototype.setMode=function(e){this.settings.mode=e,this.editor.session.setMode("ace/mode/"+this.settings.mode)},TextEditor.prototype.getMode=function(){return this.settings.mode},TextEditor.prototype.getKeyboard=function(){return this.settings.keyboard},TextEditor.prototype.setOnModified=function(e){this.settings.onModified=e,this.editor.on("change",this.settings.onModified)},TextEditor.prototype.getOnModified=function(){return this.settings.onModified},TextEditor.prototype.setClipboardText=function(e){t=e},TextEditor.prototype.getClipboardText=function(){return t},TextEditor.prototype.setValue=function(e,t){this.editor.setValue(e),this.editor.clearSelection(),!0===t&&this.editor.getSession().getUndoManager().reset()},TextEditor.prototype.getValue=function(){return this.editor.getValue()},TextEditor.prototype.getSelectedText=function(){return this.editor.getSelectedText()},TextEditor.prototype.setShowLineNumber=function(e){this.settings.showLineNumber=e,this.editor.renderer.setShowGutter(e)},TextEditor.prototype.getShowLineNumber=function(){return this.settings.showLineNumber},TextEditor.prototype.disableInteraction=function(e){this.settings.disabled=!0,void 0!==this.cover&&this.cover.remove(),this.cover=document.createElement("div"),this.editor.container.appendChild(this.cover),this.cover.style.cssText="position:absolute;top:0;bottom:0;right:0;left:0;background:rgba(150,150,150,"+(e?.5:0)+");z-index:100",this.editor.renderer.scrollBarH.element.style.zIndex="101",this.editor.renderer.scrollBarV.element.style.zIndex="101",this.editor.renderer.$cursorLayer.element.style.opacity=0,this.editor.setOptions({highlightActiveLine:!1,highlightSelectedWord:!1,readOnly:!0,highlightGutterLine:!1})},TextEditor.prototype.enableInteraction=function(){this.settings.disabled=!1,void 0!==this.cover&&this.cover.remove(),this.editor.renderer.$cursorLayer.element.style.opacity=1,this.editor.setOptions({highlightActiveLine:!0,highlightSelectedWord:!0,readOnly:!1,highlightGutterLine:!0})},TextEditor.prototype.isEnabled=function(){return!this.settings.disabled},TextEditor.prototype.resize=function(e){this.editor.resize(e)},TextEditor.prototype.dispose=function(){void 0!==this.editor&&($(this.editor.container).children().off(),this.editor.destroy())},TextEditor.prototype.onFocus=function(){this.settings.keyboard&&this.openKeyboard()},TextEditor.prototype.onSearchFocus=function(){this.settings.keyboard&&this.openKeyboard()},TextEditor.prototype.onBlur=function(){this.editor.clearSelection(),this.settings.keyboard&&this.closeKeyboard()},TextEditor.prototype.onSearchBlur=function(){this.settings.keyboard&&this.closeKeyboard()},TextEditor.prototype.onKeyboardInput=function(e){var t=e.data.action,n=e.data.args;Commands.isValidCommand(t)?this.editor.execCommand(t,n):"close"===t&&(this.keyboard.removeCallback(this.boundOnKeyboardInput),this.editor.blur())},TextEditor.prototype.openKeyboard=function(){void 0!==this.keyboard&&(this.keyboard.show(),this.keyboard.addCallback(this.boundOnKeyboardInput))},TextEditor.prototype.closeKeyboard=function(){void 0!==this.keyboard&&(this.keyboard.hide(),this.keyboard.removeCallback(this.boundOnKeyboardInput))},TextEditor.prototype.addListenersSearchBox=function(){this.listenersAdded||($(this.editor.container).find(".ace_search_field").on("focus",this.onSearchFocus.bind(this)),$(this.editor.container).find(".ace_replace_field").on("focus",this.onSearchFocus.bind(this)),$(this.editor.container).find(".ace_search_field").on("blur",this.onSearchBlur.bind(this)),$(this.editor.container).find(".ace_replace_field").on("blur",this.onSearchBlur.bind(this)),this.listenersAdded=!0,this.openKeyboard())};function n(e,t,n,i,s){return{mode:Utils.isString(e)?e:"plain",onModified:Utils.isFunction(t)?t:function(){},disabled:!!n,keyboard:Utils.isObject(i),showLineNumber:!1!==s}}return TextEditor}),define("widgets/brease/common/libs/WebSocket",["brease/core/Class","brease/core/Utils"],function(e,Utils){"use strict";var t=4194304,n={WARNING:0,CONNECTION_ATTEMPT_CONNECTED:1,DISCONNECTION_ATTEMPT_DISCONNECTED:2,SEND_MSG_DISCONNECTED:3,SOCKET_ERRORS:999,HOST_NOT_REACHEABLE:1e3,CONNECTION_CLOSED_CLIENT:1005,CONNECTION_CLOSED_SERVER:1006,CONNECTION_ERRORS:1999,WRONG_HOST:2e3,WRONG_PORT:2001,UNEXPECTED_ERROR_CONNECTION:2002,UNEXPECTED_ERROR_SOCKET:2003,WRONG_PROTOCOL_IN_CONNECTION:2004,CRITICAL_ERRORS:3e3,BUFFER_FULL:3001,BUFFER_NOT_ENOUGH_DATA:3002},i=e.extend(function n(){e.apply(this,arguments),this._resolver,this._rejecter,this.textDecoder=new TextDecoder,this.buffer=new ArrayBuffer(t),this.bufferView=new Uint8Array(this.buffer),this.bytesQueued=0,this.endIndex=0,this.beginIndex=0},null),s=i.prototype;s.getString=function(e){var t=this;return this.getBytesFromBuffer(e).then(function(e){return t.textDecoder.decode(e)}).catch(function(){return Promise.reject(new Error("Connection closed"))
})},s.getDataView=function(e){var t=this;return this.getBytesFromBuffer(e).then(function(e){return new DataView(e)}).catch(function(){return Promise.reject(new Error("Connection closed"))})},s.getBytesFromBuffer=function(e){var t=this;return this.bytesQueued>=e?(this.queueingBytes=!1,Promise.resolve(a(e,t))):(this.queueingBytes=!0,this.byteToQueue=e,new Promise(function(e,n){t._resolver=e,t._rejecter=n}))},s.connect=function(e,t){this.onError=!1;var i=r(e,t);if(0===i)this.errorHandling(n.WRONG_HOST);else if(1===i)this.errorHandling(n.WRONG_PORT);else if(2===i)this.errorHandling(n.WRONG_PROTOCOL_IN_CONNECTION);else if(void 0===this.WSocket||this.WSocket.readyState===WebSocket.CLOSED||this.WSocket.readyState===WebSocket.CLOSING)try{this.WSocket=new WebSocket(i),this.WSocket.onmessage=this.socketReceivedMessage.bind(this),this.WSocket.onopen=this.socketOpened.bind(this),this.WSocket.onclose=this.socketClosed.bind(this),this.WSocket.onerror=this.socketError.bind(this)}catch(e){this.errorHandling(n.UNEXPECTED_ERROR_CONNECTION)}else this.errorHandling(n.CONNECTION_ATTEMPT_CONNECTED)},s.disconnect=function(){void 0!==this.WSocket?this.WSocket.readyState===WebSocket.OPEN||this.WSocket.readyState===WebSocket.CONNECTING?(this.WSocket.close(),this.WSocket.onmessage=function(e){},this.WSocket=void 0):this.errorHandling(n.UNEXPECTED_ERROR_CONNECTION):this.errorHandling(n.DISCONNECTION_ATTEMPT_DISCONNECTED)},s.sendMessage=function(e){void 0!==this.WSocket&&this.WSocket.readyState===WebSocket.OPEN&&this.WSocket.send(e)},s.dispose=function(){void 0!==this.WSocket&&(this.WSocket.onmessage=function(e){},this.WSocket.onopen=function(e){},this.WSocket.onclose=function(e){},this.WSocket.onerror=function(e){},this.disconnect()),this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,e.prototype.dispose.apply(this,arguments)},s.socketReceivedMessage=function(e){var t=this,n=new FileReader;n.onload=function(){void 0!==t.WSocket&&(o(n.result,t),t.onMessageRecived(),t.queueingBytes&&t.bytesQueued>=t.byteToQueue&&(t._resolver(a(t.byteToQueue,t)),t.queueingBytes=!1))},n.readAsArrayBuffer(e.data)},s.socketOpened=function(e){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.onConnect(e)},s.socketClosed=function(e){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.queueingBytes&&this._rejecter(),e.code!==n.CONNECTION_CLOSED_CLIENT?this.errorHandling(e.code):this.onError||this.onDisconnect()},s.socketError=function(){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.queueingBytes&&this._rejecter(),this.errorHandling(n.UNEXPECTED_ERROR_SOCKET)},s.errorHandling=function(e){e<=n.SOCKET_ERRORS?this.onWarning(e):this.onError||(this.onError=!0,e>=n.CRITICAL_ERRORS&&this.disconnect(),this.onConnectionFailed(e))},s.onMessageRecived=function(e){},s.onConnect=function(e){},s.onDisconnect=function(e){},s.onConnectionFailed=function(e){},s.onWarning=function(e){};function r(e,t){var n="";if(!Utils.isString(e))return 0;var i=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(e),s=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/.test(e);if(!i&&!s)return 0;if(!Utils.isNumeric(t))return 1;if(t<0||t>65535)return 1;if("http:"===self.location.protocol)n="ws://";else{if("https:"!==self.location.protocol)return 2;n="wss://"}return n+self.location.host+"/ws2tcp?host="+e+"&port="+t}function o(e,i){if(i.bytesQueued+e.byteLength>t)i.errorHandling(n.BUFFER_FULL);else{if(i.endIndex+e.byteLength<t+1)i.bufferView.set(new Uint8Array(e),i.endIndex),i.endIndex=i.endIndex+e.byteLength,i.endIndex===t&&(i.endIndex=0);else{var s=e.slice(0,t-i.endIndex),r=e.slice(t-i.endIndex);i.bufferView.set(new Uint8Array(s),i.endIndex),i.bufferView.set(new Uint8Array(r),0),i.endIndex=i.endIndex+e.byteLength-t}i.bytesQueued=i.bytesQueued+e.byteLength}}function a(e,i){if(!(e>i.bytesQueued)){var s;if(i.beginIndex+e<t+1)s=i.buffer.slice(i.beginIndex,e+i.beginIndex),i.beginIndex=i.beginIndex+e;else{var r=t-i.beginIndex,o=e-r,a=i.buffer.slice(i.beginIndex),l=i.buffer.slice(0,o),d;s=new ArrayBuffer(e),d=new Uint8Array(s),d.set(new Uint8Array(a)),d.set(new Uint8Array(l),r),i.beginIndex=o}return i.bytesQueued=i.bytesQueued-e,s}i.errorHandling(n.BUFFER_NOT_ENOUGH_DATA)}return i}),define("widgets/brease/common/libs/wfUtils/UtilsEditableBinding",[],function(){"use strict";var UtilsEditableBinding={};return UtilsEditableBinding.handleEditable=function(e,t,n,i){if(void 0!==t&&void 0!==t.refAttribute){var s=t.refAttribute;i.indexOf(s)>-1&&(n.settings.editable=e,n._internalEnable())}},UtilsEditableBinding}),define("widgets/brease/common/libs/wfUtils/UtilsLocalize",["libs/d3/d3"],function(e){"use strict";var UtilsLocalize={};return UtilsLocalize.getTimeFormatD3=function(t){t=t||brease.culture.getCurrentCulture().key;var n;n=null===Globalize.findClosestCulture(t)?Globalize.cultures[Globalize.cultures.default.name]:Globalize.cultures[t];var i=e.locale({dateTime:n.calendar.patterns.F,date:n.calendar.patterns.D,time:n.calendar.patterns.T,periods:[null===n.calendar.AM?"AM":n.calendar.AM[0],null===n.calendar.PM?"PM":n.calendar.PM[0]],days:n.calendar.days.names,shortDays:n.calendar.days.namesAbbr,months:n.calendar.months.names.slice(0,12),shortMonths:n.calendar.months.namesAbbr.slice(0,12)}),s=[[i.timeFormat.utc("%Y"),function(){return!0}],[i.timeFormat.utc("%B"),function(e){return e.getUTCMonth()}],[i.timeFormat.utc("%b %d"),function(e){return 1!==e.getUTCDate()}],[i.timeFormat.utc("%a %d"),function(e){return e.getUTCDay()&&1!==e.getUTCDate()}],[i.timeFormat.utc("%H:%M"),function(e){return e.getUTCHours()}],[i.timeFormat.utc("%H:%M"),function(e){return e.getUTCMinutes()}],[i.timeFormat.utc("%Ss"),function(e){return e.getUTCSeconds()}],[i.timeFormat.utc("%Lms"),function(e){return e.getUTCMilliseconds()}]];return function(e){return function(t){for(var n=e.length-1,i=e[n];!i[1](t);)n-=1,i=e[n];return i[0](t)}}(s)},UtilsLocalize}),define("widgets/brease/common/libs/wfUtils/Utils_FileTransfer",["require"],function(e){"use strict";var Utils_FileTransfer={};Utils_FileTransfer.transferFileToClient=function(e){this.widget=e,this.settings=t(e.settings),this.targetHostname=location.hostname,this.targetPort=location.port,this.executeHTTPTransfer()},Utils_FileTransfer.executeHTTPTransfer=function(){var e=document.createElement("a");e.download=this.settings.fileName,e.href=this.buildTransferUrl(),document.body.appendChild(e),e.click(),document.body.removeChild(e)},Utils_FileTransfer.buildTransferUrl=function(){return"http://"+this.targetHostname+":"+this.targetPort+"/FileDevice:"+this.settings.fileDeviceName+this.settings.filePath+this.settings.fileName},Utils_FileTransfer.executeFTPTransfer=function(e,t,n){var i="ftp://"+n.FTPUser+":"+n.FTPPass+"@"+this.targetHost+n.filePath+n.filename,s=n.filename,r=document.createElement("a");r.download=s,r.href=i,r.click()};function t(e){return/^\//.test(e.filePath)||(e.filePath="/"+e.filePath),/\/$/.test(e.filePath)||(e.filePath=e.filePath+"/"),e}return Utils_FileTransfer}),define("widgets/brease/common/MpLinkHandler/libs/MpLinkHandler",["brease/core/Class"],function(e){"use strict";var t=e.extend(function MpLinkHandler(t){e.call(this),this.widget=t,this.callbackQueue=[],this.activeSubscriptions={},this.init()},null),n=t.prototype;return n.init=function(){this.reset()},n.reset=function(){this.componentActive=!1,this.queueUntilComponentIsActive=[]},n.dispose=function(){this.callbackQueue.length>0&&console.iatWarn("Open requests...")},n.incomingMessage=function(e){var t,n,i;if(!(null===e||""===e||this.componentActive&&void 0===e.parameter))return this.componentActive?(e.parameter.widgetId===this.widget.elem.id&&(t=e.methodID,e.error&&this.widget._onErrorHandler(e.error.code),e.response?(n=this._getIndexInQueue(t),n>-1?(i=this.callbackQueue[n],i.subscription||this.callbackQueue.splice(n,1),i.callback.call(this.widget,e.response,e)):console.iatWarn("Response without callback to handle it",e)):console.iatWarn("Unexpected message recieved",this.widget.elem.id,e)),void 0):(this._updateComponentActiveState(e),void 0)},n.sendMessage=function(e){return this.componentActive?void 0===e?(this.widget.sendValueChange({mpLink:{}}),void 0):(void 0===e.parameter||null===e.parameter?e.parameter={widgetId:this.widget.elem.id}:e.parameter.widgetId=this.widget.elem.id,this.widget.sendValueChange({mpLink:e}),void 0):(this._handleInactiveComponent(e),void 0)},n.sendRequestAndProvideCallback=function(e,t,n,i){var s={request:"Get",methodID:e};void 0!==n&&(s.data=n),void 0!==i&&(s.parameter=i),this.callbackQueue.push({method:e,callback:t}),this.sendMessage(s)},n.sendDataAndProvideCallback=function(e,t,n,i){var s={request:"Set",methodID:e};void 0!==n&&(s.data=n),void 0!==i&&(s.parameter=i),this.callbackQueue.push({method:e,callback:t}),this.sendMessage(s)},n.subscribeWithCallback=function(e,t,n,i){var s={request:"Subscribe",methodID:e};void 0!==n&&(s.data=n),void 0!==i&&(s.parameter=i),this.callbackQueue.push({method:e,callback:t,subscription:!0}),this.sendMessage(s)},n.unSubscribe=function(e){var t={request:"Unsubscribe",methodID:e},n=this._getIndexInQueue(e);n>-1&&this.callbackQueue.splice(n,1),this.sendMessage(t)},n._getIndexInQueue=function(e){return _.findIndex(this.callbackQueue,function(t){return t.method===e})},n._handleInactiveComponent=function(e){this.queueUntilComponentIsActive.push(e)},n._handleComponentSwitchedToActive=function(){var e=this;$.each(this.queueUntilComponentIsActive,function(){e.sendMessage(this)}),this.queueUntilComponentIsActive=[]},n._handleComponentNotYetActive=function(e){this.widget._onErrorHandler(e.error.code)},n._updateComponentActiveState=function(e){"GetActiveState"===e.methodID&&("OK"===e.response?(this.componentActive=!0,this._handleComponentSwitchedToActive()):this._handleComponentNotYetActive(e))},t}),define("text!widgets/brease/DateTimePicker/DateTimePicker.html",[],function(){return'<div id="breaseDateTimePicker" data-brease-widget="widgets/brease/DateTimePicker">\r\n    <header></header>\r\n    <div class="dateTimePickerBody">\r\n        <section class="dateTimePickerHeadings">\r\n            <span class="actDate"></span>\r\n        </section>\r\n        <section class="dateTimePickerButtons">\r\n            <div class="dtfragment year"></div>\r\n            <div class="dtfragment month"></div>\r\n            <div class="dtfragment day"></div>\r\n            <div class="dtfragment hour"></div>\r\n            <div class="dtfragment minute"></div>\r\n            <div class="dtfragment second"></div>\r\n        </section>\r\n        <section class="dateTimePickerControl">\r\n            <button class="dateTimePickerReset"></button>\r\n            <button class="dateTimePickerEnter"></button>\r\n        </section>\r\n    </div>\r\n</div>\r\n'}),define("widgets/brease/Window/libs/Config",["brease/enum/Enum"],function(Enum){"use strict";return{html:"widgets/brease/Window/Window.html",modal:!0,arrow:{show:!1,width:12,position:Enum.Position.left},forceInteraction:!1,showCloseButton:!0,position:{horizontal:"center",vertical:"middle"},pointOfOrigin:Enum.PointOfOrigin.APP,headerHeight:42}}),define("widgets/brease/Window/libs/DragHandler",["brease/events/BreaseEvent","brease/core/Utils"],function(BreaseEvent,Utils){"use strict";var DragHandler=function(s){this.start=e.bind(this,s),this.headerMoveHandler=t.bind(this,s),this.headerUpHandler=i.bind(this,s),this.updatePosition=n.bind(this,s);var r=window.devicePixelRatio>1?window.devicePixelRatio:1;this.tolerance=40*r};function e(e,t){brease.bodyEl.on(BreaseEvent.MOUSE_MOVE,this.headerMoveHandler),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this.headerUpHandler),this.startPointer={left:t.pageX,top:t.pageY};var n=e.el.css(["left","top"]);this.startWidget=this.actPos={left:parseInt(n.left,10),top:parseInt(n.top,10)},this.boundary={top:0,right:window.innerWidth-this.tolerance,bottom:window.innerHeight-e.header.height()*e.dimensions.scale,left:this.tolerance-e.dimensions.width*e.dimensions.scale}}function t(e,t){var n={left:this.startWidget.left+(t.pageX-this.startPointer.left),top:this.startWidget.top+(t.pageY-this.startPointer.top)};n.left<this.boundary.left||n.left>this.boundary.right||n.top<this.boundary.top||n.top>this.boundary.bottom||(this.newPos=n,this.active||(this.active=!0,Utils.requestAnimationFrame(this.updatePosition)))}function n(e){this.actPos.left===this.newPos.left&&this.actPos.top===this.newPos.top||(e.el.css(this.newPos),this.actPos={left:this.newPos.left,top:this.newPos.top}),this.active&&(this.animationFrame=requestAnimationFrame(this.updatePosition))}function i(e){brease.bodyEl.off(BreaseEvent.MOUSE_MOVE,this.headerMoveHandler),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this.headerUpHandler),Utils.cancelAnimationFrame(this.animationFrame),this.active=!1}return DragHandler}),define("widgets/brease/Window/Window",["brease/core/BaseWidget","widgets/brease/Window/libs/Config","widgets/brease/Window/libs/DragHandler","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/decorators/LanguageDependency","brease/controller/PopUpManager"],function(e,t,DragHandler,BreaseEvent,Enum,Utils,n,i){"use strict";var s=t,r=e.extend(function Window(t,n,i,s){e.call(this,t,n,void 0===i||i,!0),!0!==s&&A(this),this.readyDeferred=$.Deferred()},s),o=r.prototype;o.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseWindow"),this.settings.stylePrefix=this.settings.stylePrefix||this.el.attr("data-brease-widget"),this.settings.className=this.settings.className||this.el.attr("data-brease-widget"),e.prototype.init.apply(this,arguments),this.arrow=this.el.find(".breaseWindowArrow"),this.closeButton=this.el.find(".breaseWindowClose"),this.header=this.el.find("> header"),this.dimensions={scale:1},this.settings.parentContentId=brease.settings.globalContent,this.instanceSettings=Utils.deepCopy(this.settings),this.debouncedHide=_.debounce(this._bind("hide"),10),this.dragHandler=new DragHandler(this)},o.langChangeHandler=function(){this._setContent()},o.show=function(e,t){var n=this;this.closeDeferred=$.Deferred(),i.addWindow(n.elem.id,n.settings.windowType),this.refElement=t?t.jquery?t:$(t):void 0,this.settings=$.extend(!0,{},this.instanceSettings,e),void 0!==this.settings.header&&brease.language.isKey(this.settings.header.text)&&(this.settings.header.textkey=brease.language.parseKey(this.settings.header.text)),void 0!==this.settings.content&&brease.language.isKey(this.settings.content.text)&&(this.settings.content.textkey=brease.language.parseKey(this.settings.content.text));var s=i.getHighestZindex();this.el.css({display:"block","z-index":s+2}),this._setModal(s),void 0!==this.settings.cssClass&&this.el.addClass(this.settings.cssClass),this._setDimensions(),this._setCloseButton(),this._setContent(),this._setPosition(),this.setStyle(this.settings.style),I(),brease.bodyEl.on(BreaseEvent.CLICK,n._bind("_documentClickHandler")),this.dispatchEvent(new CustomEvent(BreaseEvent.WINDOW_SHOW,{detail:{id:this.elem.id},bubbles:!0})),this.header.on(BreaseEvent.MOUSE_DOWN,this._bind("_headerDownHandler")),this.el.on(BreaseEvent.MOUSE_DOWN,this._bind("_windowInFrontHandler"))},o.closeOnLostContentListener=function(){this.hide()},o.closeOnLostContent=function(e){this.opener=brease.pageController.getLoaderForElement(e),this.opener&&this.opener.addEventListener(BreaseEvent.FRAGMENT_HIDE,this._bind("closeOnLostContentListener"))},o.removeCloseOnLostContent=function(){this.opener&&(this.opener.removeEventListener(BreaseEvent.FRAGMENT_HIDE,this._bind("closeOnLostContentListener")),this.opener=void 0)},o.hide=function(){var e=this;this.el.css({display:"none"}),void 0!==this.settings.cssClass&&this.el.removeClass(this.settings.cssClass),brease.bodyEl.off(BreaseEvent.CLICK,e._bind("_documentClickHandler")),this.removeCloseOnLostContent(),this._removeModal(),i.removeWindow(e.elem.id),this.refElement=null,this.dispatchEvent(new CustomEvent(BreaseEvent.CLOSED,{detail:{id:this.elem.id},bubbles:!0})),this.closeDeferred&&this.closeDeferred.resolve(),this.header.off(BreaseEvent.MOUSE_DOWN,this._bind("_headerDownHandler")),this.el.off(BreaseEvent.MOUSE_DOWN,this._bind("_windowInFrontHandler")),this.closeButton.off(BreaseEvent.CLICK,this._bind("_closeButtonClickhandler")),T.call(this),d=void 0},o._removeModal=function(){this.dimmer&&(this.dimmer.removeClass("active"),this.dimmer.hide(),I(),a(this))};function a(e){var t=e._bind(c);e.dimmer[0].removeEventListener("pointerdown",t,!0),e.dimmer[0].removeEventListener("pointerup",t,!0),e.dimmer[0].removeEventListener("touchstart",t,!BreaseEvent.support.options||{capture:!0,passive:!0}),e.dimmer[0].removeEventListener("touchend",t,!0),e.dimmer[0].removeEventListener("mousedown",t,!0),e.dimmer[0].removeEventListener("mouseup",t,!0),e.dimmer.off(BreaseEvent.CLICK,e._bind("_dimmerClickHandler"))}function l(e){var t=e._bind(c);e.dimmer[0].addEventListener("pointerdown",t,!0),e.dimmer[0].addEventListener("pointerup",t,!0),e.dimmer[0].addEventListener("touchstart",t,!BreaseEvent.support.options||{capture:!0,passive:!0}),e.dimmer[0].addEventListener("touchend",t,!0),e.dimmer[0].addEventListener("mousedown",t,!0),e.dimmer[0].addEventListener("mouseup",t,!0),e.dimmer.on(BreaseEvent.CLICK,e._bind("_dimmerClickHandler"))}var d;function c(e){var t=!0;"mouseup"===e.type&&d&&$.containsOrEquals(this.elem,d)&&(t=!1,d=void 0),!0===t&&(e.stopPropagation(),e.stopImmediatePropagation())}o._setArrow=function(e,t,n,i,s,r,o,a){var l=brease.pageController.getRootZoom();switch(this.arrow.length>0?this.arrow.show():this._addArrow(),this.el.removeClass("arrowRight arrowLeft arrowTop arrowBottom"),this.settings.arrow.position){case Enum.Position.right:this.el.addClass("arrowRight");break;case Enum.Position.left:this.el.addClass("arrowLeft");break;case Enum.Position.top:this.el.addClass("arrowTop");break;case Enum.Position.bottom:this.el.addClass("arrowBottom");break}if(void 0!==this.arrow&&!0===e)if("middle"===this.settings.position.vertical){var d=Math.abs(r-t.top)-this.settings.arrow.width+i/2*l;d<0&&(d=0),d+2*this.settings.arrow.width>a&&(d=a-2*this.settings.arrow.width),this.arrow.css({top:d/this.dimensions.scale+"px",left:""})}else{var c=Math.abs(s-t.left)-this.settings.arrow.width+n/2;c<0&&(c=0),c+2*this.settings.arrow.width>o&&(c=o-2*this.settings.arrow.width),this.arrow.css({top:"",left:c+"px"})}},o._setDimensions=function(){if(void 0!==this.settings.width?(this.el.css("width",this.settings.width+"px"),this.dimensions.width=this.settings.width):(this.el.css("width","auto"),this.dimensions.width=this.el.outerWidth()),void 0!==this.settings.height){this.el.css("height",this.settings.height+"px");var e=parseInt(this.el.css("border-bottom"),10);this.el.find(".contentBox").css("height",this.settings.height-this.el.find("header").height()-(isNaN(e)?0:e)),this.dimensions.height=this.settings.height}else this.el.css("height","auto"),this.dimensions.height=this.el.outerHeight();this.settings.scale2fit&&u.call(this)};function u(){var e=i.getDimensions();if(this.dimensions.width>e.winWidth||this.dimensions.height>e.winHeight){var t=Math.min(e.winWidth/this.dimensions.width,e.winHeight/this.dimensions.height);this.el.css({transform:"scale("+t+","+t+")","transform-origin":"0 0"}),this.dimensions.scale=t}else this.el.css({transform:"none"}),this.dimensions.scale=1}o._setCloseButton=function(){!0===this.settings.showCloseButton?this.closeButton.length>0?(this.closeButton.show(),h.call(this)):this._addCloseButton():this.closeButton.hide()},o._setContent=function(){var e=this.settings.header?this.settings.header.textkey?brease.language.getTextByKey(this.settings.header.textkey):this.settings.header.text:"";void 0===this.headerEl&&(this.headerEl=this.el.find("header > div")),this.headerEl.text(e);var t=this.settings.content?this.settings.content.textkey?brease.language.getTextByKey(this.settings.content.textkey):this.settings.content.text:"";this.el.find(".content").text(t)},o._setPosition=function(){var e=0,t,n=this.elem.getBoundingClientRect(),s=n.width,r=n.height,o=i.getDimensions(),a=y(this.settings.pointOfOrigin,this.refElement,o.appWidth),l=E(this.settings.pointOfOrigin,this.refElement,o.appHeight),d=this.settings.pointOfOrigin===Enum.PointOfOrigin.ELEMENT&&void 0!==this.refElement,c,u,h;if(this.settings.position.hasOwnProperty("horizontalDialog")?(h=b(this.settings.pointOfOrigin,this.refElement),t=f(this.settings,s,r,h,a,l)):(h=v(this.settings.pointOfOrigin,this.refElement),t=g(this.settings,s,r,h,a,l,d)),t=m(t,s,r),e=this._getOffset(),c=t.x+e,u=t.y+e,this.settings.position.hasOwnProperty("horizontalDialog")){var p=brease.pageController.getRootZoom();this.el.css({display:"block",position:"fixed",left:0,top:0,transform:"translate("+c+"px,"+u+"px) scale("+p+", "+p+")",margin:0,"margin-left":"0","margin-top":"0"})}else c=Math.round(c),u=Math.round(u),this.el.css({display:"block",position:"fixed",left:c+"px",top:u+"px",margin:0,"margin-left":"0","margin-top":"0"});!1===this.settings.arrow.show?this.arrow.hide():this._setArrow(d,h,a,l,t.x+e,t.y+e,s,r)},o._getOffset=function(){return 0},o._addArrow=function(){this.arrow=$("<i/>").addClass("breaseWindowArrow"),this.el.append(this.arrow)},o._addCloseButton=function(){this.closeButton=$("<a/>").addClass("breaseWindowClose"),this.el.find("header").append(this.closeButton),h.call(this)};function h(){var e=this;e._addCloseListenerTimeout=window.setTimeout(function(){e.isDisposed()||e.closeButton.on(BreaseEvent.CLICK,e._bind("_closeButtonClickhandler"))},0)}o._closeButtonClickhandler=function(e){this._handleEvent(e,!0),this.debouncedHide()},o._setModal=function(e){!0===this.settings.modal&&(void 0===this.dimmer&&(this.dimmer=$("<div/>").attr("id",Utils.uniqueID("dimmer")).addClass("breaseModalDimmer").appendTo(document.body)),this.dimmer.css({"z-index":e+1,display:"block"}),l(this),w.call(this))},o._documentClickHandler=function(e){if(!0!==this.settings.forceInteraction){for(var t=Utils.isNumeric(e.clientX)&&Utils.isNumeric(e.clientY)?document.elementFromPoint(e.clientX,e.clientY):e.target,n=i.overlays(this.elem.id),s=!1,r=0,o=n.length;r<o;r+=1)if(!1!==$.containsOrEquals(document.getElementById(n[r]),t)){s=!0;break}if(!0!==s){var a=parseFloat(this.el.css("z-index")),l=parseFloat($(e.target).css("z-index"));if(l=isNaN(l)?0:l,!(l>a)){if(this.refElement){if(!0===$.containsOrEquals(this.refElement[0],e.target))return}$.containsOrEquals(this.elem,t)||this.debouncedHide()}}}},o._clickHandler=function(e){e.stopPropagation()},o._dimmerClickHandler=function(e){!0!==this.settings.forceInteraction&&"none"!==this.el.css("display")&&this.debouncedHide(),e.stopPropagation()},o._windowInFrontHandler=function(e){-1!==e.type.indexOf("mousedown")&&(d=e.target);var t=i.getHighestZindex();t>parseInt(this.el.css("z-index"),10)+1&&(this.dimmer?(this.dimmer.css({"z-index":t+1}),this.el.css({display:"block","z-index":t+2}),i.updateIndex(this.elem.id,t+2)):(this.el.css({display:"block","z-index":t+1}),i.updateIndex(this.elem.id,t+1)))},o._headerDownHandler=function(e){e.target!==this.closeButton[0]&&this.dragHandler.start(e)},o.dispose=function(){this.header.off(),this.closeButton.off(),brease.bodyEl.off(BreaseEvent.CLICK,this._bind("_documentClickHandler")),this.closeButton.off(BreaseEvent.CLICK,this._bind("_closeButtonClickhandler")),this.dimmer&&this.dimmer.remove(),this.closeDeferred=null,window.clearTimeout(this._addCloseListenerTimeout),e.prototype.dispose.apply(this,arguments)},o.isReady=function(){return this.readyDeferred.promise()},o.onClose=function(){return this.closeDeferred.promise()},o.readyHandler=function(){brease.uiController.addWidget(this),this.readyDeferred.resolve(this),this._dispatchReady()};function g(e,t,n,i,s,r,o){var a={x:0,y:0},l=brease.pageController.getRootZoom();if(!0===o){switch(e.position.horizontal){case Enum.Position.left:a.x=i.left-t;break;case Enum.Position.right:a.x=i.left+s;break;default:a.x=i.left+s/2-t/2;break}switch(e.position.vertical){case Enum.Position.top:a.y=i.top-n;break;case Enum.Position.bottom:a.y=i.top+r;break;default:a.y=i.top+r/2-40;break}a=p(a,e)}else{if(_.isNumber(e.position.horizontal))a.x=i.left+l*e.position.horizontal;else switch(e.position.horizontal){case Enum.Position.left:a.x=i.left;break;case Enum.Position.right:a.x=i.left+s-t;break;default:a.x=i.left+(s-t)/2;break}if(_.isNumber(e.position.vertical))a.y=i.top+l*e.position.vertical;else switch(e.position.vertical){case Enum.Position.top:a.y=i.top;break;case Enum.Position.bottom:a.y=i.top+r-n;break;default:a.y=i.top+(r-n)/2;break}}return a}function f(e,t,n,i,s,r){var o={x:0,y:0};if(e.position.horizontal===Enum.Position.left)switch(e.position.horizontalDialog){case Enum.Position.left:o.x=i.left;break;case Enum.Position.right:o.x=i.left-t;break;default:o.x=i.left-t/2;break}else if(e.position.horizontal===Enum.Position.right)switch(e.position.horizontalDialog){case Enum.Position.left:o.x=i.left+s;break;case Enum.Position.right:o.x=i.left+s-t;break;default:o.x=i.left+s-t/2;break}else switch(e.position.horizontalDialog){case Enum.Position.left:o.x=i.left+s/2;break;case Enum.Position.right:o.x=i.left+s/2-t;break;default:o.x=i.left+s/2-t/2;break}if(e.position.vertical===Enum.Position.top)switch(e.position.verticalDialog){case Enum.Position.top:o.y=i.top;break;case Enum.Position.bottom:o.y=i.top-n;break;default:o.y=i.top-n/2;break}else if(e.position.vertical===Enum.Position.bottom)switch(e.position.verticalDialog){case Enum.Position.top:o.y=i.top+r;break;case Enum.Position.bottom:o.y=i.top+r-n;break;default:o.y=i.top+r-n/2;break}else switch(e.position.verticalDialog){case Enum.Position.top:o.y=i.top+r/2;break;case Enum.Position.bottom:o.y=i.top+r/2-n;break;default:o.y=i.top+r/2-n/2;break}return o}function p(e,t){switch(t.arrow.position){case Enum.Position.top:e.y+=t.arrow.width,e.y+=void 0!==t.position.offset?t.position.offset:0;break;case Enum.Position.bottom:e.y-=t.arrow.width,e.y-=void 0!==t.position.offset?t.position.offset:0;break;case Enum.Position.right:e.x-=t.arrow.width,e.x-=void 0!==t.position.offset?t.position.offset:0;break;default:e.x+=t.arrow.width,e.x+=void 0!==t.position.offset?t.position.offset:0;break}return e}function m(e,t,n){var s=i.getDimensions(),r=brease.appElem.getBoundingClientRect(),o=Math.min(y(Enum.PointOfOrigin.APP,void 0,r.width),s.winWidth),a=Math.min(E(Enum.PointOfOrigin.APP,void 0,r.height),s.winHeight);return e.x+t>o&&(e.x=o-t),e.x<0&&(e.x=0),e.y+n>a&&(e.y=a-n),e.y<0&&(e.y=0),e}function v(e,t){if(void 0!==t&&e!==Enum.PointOfOrigin.APP){var n=t[0].getBoundingClientRect();return{top:n.top,left:n.left}}return{top:0,left:0}}function b(e,t){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t.offset():{top:0,left:0}}function y(e,t,n){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t[0].getBoundingClientRect().width:n>100?n:window.innerWidth}function E(e,t,n){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t[0].getBoundingClientRect().height:n>100?n:window.innerHeight}function A(e){require(["text!"+e.settings.html],function(t){var n=e.settings.id||Utils.uniqueID("window");t=t.replace("WIDGETID",n),e.deferredInit(document.body,t),e.headerEl=e.el.find("header > div"),e.readyHandler(),brease.uiController.parse(e.elem)})}function I(){for(var e,t=0,n,i,s=$(".breaseModalDimmer:visible"),r=0;r<s.length;r+=1)n=$(s[r]),n.removeClass("active"),e=n.css("z-index"),e>t&&(t=e,i=n);i&&i.addClass("active")}var C;function w(){this.dimmer.on("mousewheel DOMMouseScroll",x),C||(C={x:brease.bodyEl.css("overflow-x"),y:brease.bodyEl.css("overflow-y")}),document.body.style.overflow="hidden"}function T(){0===$(".breaseModalDimmer:visible").length&&this.dimmer&&(this.dimmer.off("mousewheel DOMMouseScroll",x),brease.bodyEl.css("overflow-x",C.x),brease.bodyEl.css("overflow-y",C.y))}function x(e){e.preventDefault()}return n.decorate(r,!0)}),define("widgets/brease/DateTimePicker/libs/SliderWheel",["brease/core/Class","brease/events/BreaseEvent"],function(e,BreaseEvent){"use strict";var SliderWheel=e.extend(function SliderWheel(t,n,i){e.call(this),this.widget=t,this.elem=n,this.settings=i,this.initialize()},null),t=SliderWheel.prototype;t.initialize=function(){var e=$('<div class="marker">'),t=$('<div class="marker">');this.fragment=$("<div>").addClass("fragment"),this.data=[],this.drawSlider(),this.elem.append([e,t,this.fragment]),this.fragment.on(BreaseEvent.MOUSE_DOWN,this._bind("_onMouseDown")),this._setIndex(0)},t.drawSlider=function(){var e=0,t,i="";if(void 0!==this.settings.range){for(var s=this.settings.range.start;s<=this.settings.range.end;s+=this.settings.range.offset)t=void 0!==this.settings.format?n(s,this.settings.format):s,i+='<button data-index="'+e+'" data-value="'+s+'">'+t+"</button>",this.data[e]={value:s,text:t},e+=1;this.offset=0,this.max=80,this.min=-40*(e-3)}else if(void 0!==this.settings.data){for(var r in this.settings.data)i+='<button data-index="'+e+'" data-value="'+this.settings.data[r].value+'">'+this.settings.data[r].text+"</button>",this.data[e]={value:this.settings.data[r].value,text:this.settings.data[r].text},e+=1;this.offset=0,this.max=80,this.min=-40*(e-3)}this.fragment.append(i)},t.update=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];this.fragment.find("[data-value="+n.value+"]").html(n.text)}},t._onClick=function(e){e.originalEvent.preventDefault();var t=$(e.target).attr("data-index");void 0!==t&&this._setIndex(t)},t._onMouseDown=function(e){this.oldOffset=this.offset,e.originalEvent.preventDefault(),e.originalEvent.touches?this.pageY=e.originalEvent.touches[0].pageY-this.offset:this.pageY=e.pageY-this.offset,this.fragment.removeClass("transition"),brease.docEl.on(BreaseEvent.MOUSE_MOVE,this._bind("_onMouseMove")),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind("_onMouseUp"))},t._onMouseMove=function(e){var t,n;t=e.originalEvent.touches?e.originalEvent.touches[0].pageY:e.pageY,n=t-this.pageY,n>=this.min&&n<=this.max&&(this.offset=t-this.pageY),this.fragment.css("top",this.offset)},t._onMouseUp=function(e){if(brease.docEl.off(BreaseEvent.MOUSE_MOVE,this._bind("_onMouseMove")),brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind("_onMouseUp")),this.offset!==this.oldOffset){var t=Math.round(this.offset/-40+2);this._setIndex(t)}else this._onClick(e)},t._setIndex=function(e){this.index=e;var t=-40*e+80,n=this.data[e].value;this.fragment.addClass("transition"),this.fragment.css("top",t),this.offset=t,this.widget[this.settings.onChange].call(this.widget,n)},t.getValue=function(){return this.data[this.index].value},t.setValue=function(e){var t=this.fragment.find("button[data-value='"+e+"']"),n;t&&(n=t.attr("data-index")),this._setIndex(n)},t.show=function(){this.elem.show()},t.hide=function(){this.elem.hide()};function n(e,t){var n=e+"";return n.length<t?(n="000000000"+n,n.substr(n.length-t)):n}return SliderWheel}),define("widgets/brease/DateTimePicker/DateTimePicker",["widgets/brease/Window/Window","widgets/brease/DateTimePicker/libs/SliderWheel","brease/events/BreaseEvent","brease/helper/DateFormatter","brease/decorators/CultureDependency"],function(e,SliderWheel,BreaseEvent,t,n){"use strict";var i={html:"widgets/brease/DateTimePicker/DateTimePicker.html",stylePrefix:"widgets_brease_DateTimePicker",dateTimeFormat:"S",modal:!0,scale2fit:!0},s=e.extend(function DateTimePicker(t,n,i,s){if(!0===s)e.call(this,null,null,!0,!0);else{if(void 0!==E)return E;e.call(this,null,null,!0,!0),o(this)}},i),r=s.prototype;function o(e){require(["text!"+e.settings.html],function(t){e.deferredInit(document.body,t),e.readyHandler()})}r.init=function(){var t=this;this.el.prependTo(document.body),!0!==this.settings.omitClass&&this.addInitialClass("breaseDateTimePicker"),this.settings.windowType="DateTimePicker",e.prototype.init.call(this,!0),this.value=new Date(1970,0,1,0,0,0,0),this.error=!1,this.DateTimePickerYear=new SliderWheel(this,this.el.find(".dtfragment.year"),{range:{start:1900,end:2100,offset:1},onChange:"_setYear"}),this.DateTimePickerMonth=new SliderWheel(t,t.el.find(".dtfragment.month"),{data:f(),onChange:"_setMonth"}),
this.DateTimePickerDay=new SliderWheel(this,this.el.find(".dtfragment.day"),{range:{start:1,end:31,offset:1},format:2,onChange:"_setDay"}),this.DateTimePickerHour=new SliderWheel(this,this.el.find(".dtfragment.hour"),{range:{start:0,end:23,offset:1},format:2,onChange:"_setHour"}),this.DateTimePickerMinute=new SliderWheel(this,this.el.find(".dtfragment.minute"),{range:{start:0,end:59,offset:1},format:2,onChange:"_setMinute"}),this.DateTimePickerSecond=new SliderWheel(this,this.el.find(".dtfragment.second"),{range:{start:0,end:59,offset:1},format:2,onChange:"_setSecond"}),this.DateTimePickerString=this.el.find(".actDate"),this.btnEnter=this.el.find(".dateTimePickerEnter").on(BreaseEvent.CLICK,this._bind("_submitValue")).on(BreaseEvent.MOUSE_DOWN,this._bind(a)),this.btnReset=this.el.find(".dateTimePickerReset").on(BreaseEvent.CLICK,this._bind("_resetValue")).on(BreaseEvent.MOUSE_DOWN,this._bind(d)),u(this)};function a(){this.btnEnter.addClass("active"),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind(l))}function l(){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),this.btnEnter.removeClass("active")}function d(){this.btnReset.addClass("active"),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind(c))}function c(){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(c)),this.btnReset.removeClass("active")}function u(e){e.btnReset.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.reset")),e.btnEnter.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.enter"))}r.langChangeHandler=function(){u(this),e.prototype.langChangeHandler.apply(this,arguments)},r.cultureChangeHandler=function(){this.DateTimePickerMonth.update(f()),b.call(this,this.value)},r.setValue=function(e){void 0!==e&&""!==e&&(this.value=new Date(e.valueOf()),this.oldValue=new Date(e.valueOf()),b.call(this,this.value))},r.getValue=function(){return this.value},r.show=function(t,n){t=y(t),e.prototype.show.apply(this,arguments),this.closeOnLostContent(n),this._setTimeComponents(),this.setValue(this.settings.time)},r.dispose=function(){this.el.find("#breaseDateTimePickerButtons").off(),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(c)),e.prototype.dispose.apply(this,arguments)},r._submitValue=function(e){this._handleEvent(e,!0),this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:{value:this.getValue()}})),this.hide()},r._setTimeComponents=function(){var e;1===this.settings.dateTimeFormat.length?(e=t.getFormat4Pattern(this.settings.dateTimeFormat),void 0===e&&(console.iatWarn('invalid pattern "'+this.settings.dateTimeFormat+'" in dateTimeFormat -> take default pattern "'+i.dateTimeFormat+'"'),this.settings.dateTimeFormat=i.dateTimeFormat,e=t.getFormat4Pattern(this.settings.dateTimeFormat))):e=this.settings.dateTimeFormat,-1!==e.indexOf("y")?this.DateTimePickerYear.show():this.DateTimePickerYear.hide(),-1!==e.indexOf("M")?this.DateTimePickerMonth.show():this.DateTimePickerMonth.hide(),-1!==e.indexOf("d")?this.DateTimePickerDay.show():this.DateTimePickerDay.hide(),-1!==e.indexOf("H")||-1!==e.indexOf("h")?this.DateTimePickerHour.show():this.DateTimePickerHour.hide(),-1!==e.indexOf("m")?this.DateTimePickerMinute.show():this.DateTimePickerMinute.hide(),-1!==e.indexOf("s")?this.DateTimePickerSecond.show():this.DateTimePickerSecond.hide(),this._setPosition()},r._resetValue=function(){this.setValue(this.oldValue)},r._setHour=function(e){this.value.setHours(e)},r._setMinute=function(e){this.value.setMinutes(e)},r._setSecond=function(e){this.value.setSeconds(e)},r._setYear=function(e){this.value.setYear(e),p.call(this)},r._setMonth=function(e){this.value.setMonth(e),p.call(this)},r._setDay=function(e){this.value.setDate(e),p.call(this)};var h=[31,28,31,30,31,30,31,31,30,31,30,31],g=[{value:0,text:"January"},{value:1,text:"February"},{value:2,text:"March"},{value:3,text:"April"},{value:4,text:"May"},{value:5,text:"June"},{value:6,text:"July"},{value:7,text:"August"},{value:8,text:"September"},{value:9,text:"October"},{value:10,text:"November"},{value:11,text:"December"}];function f(){for(var e=g,t=brease.culture.getCurrentCulture().culture,n=t.calendar.months.names,i=0;i<e.length;i+=1)e[i].text=n[i];return e}function p(){if(this.DateTimePickerDay&&this.check){if(this.value.getDate()!==this.DateTimePickerDay.getValue()){var e=m(this.DateTimePickerMonth.getValue(),this.DateTimePickerYear.getValue());this.DateTimePickerDay.setValue(e),this.value.setDate(e),this.value.setMonth(this.DateTimePickerMonth.getValue())}}}function m(e,t){return 1!==e?h[e]:v(t)?29:28}function v(e){return e%4==0&&e%100!=0||e%400==0}function b(e){var n=this;this.check=!1,this.DateTimePickerYear.setValue(e.getFullYear()),this.DateTimePickerMonth.setValue(e.getMonth()),this.DateTimePickerDay.setValue(e.getDate()),this.DateTimePickerHour.setValue(e.getHours()),this.DateTimePickerMinute.setValue(e.getMinutes()),this.DateTimePickerSecond.setValue(e.getSeconds()),t.format(this.value,this.settings.dateTimeFormat,function(e){n.DateTimePickerString.text(e)}),this.check=!0}function y(e){if(e.position){var t=e.position;e.arrow=e.arrow||{},"left"===t.horizontal?(t.vertical="middle",e.arrow.position="right",e.arrow.show=!0):"right"===t.horizontal?(t.vertical="middle",e.arrow.position="left",e.arrow.show=!0):"top"===t.vertical?(t.horizontal="center",e.arrow.position="bottom",e.arrow.show=!0):"bottom"===t.vertical?(t.horizontal="center",e.arrow.position="top",e.arrow.show=!0):(t.vertical="middle",t.horizontal="center",e.arrow.show=!1)}return e}var E=new s;return n.decorate(s,!0)}),define("widgets/brease/Window/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.Window",parents:["*"],children:[],inheritance:["widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("widgets/brease/DateTimePicker/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.DateTimePicker",parents:["*"],children:[],inheritance:["widgets.brease.DateTimePicker","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("widgets/brease/DialogWindow/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.DialogWindow",parents:["*"],children:[],inheritance:["widgets.brease.DialogWindow","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("text!widgets/brease/DialogWindow/DialogWindow.html",[],function(){return'<div id="{{ID}}" data-brease-widget="widgets/brease/DialogWindow">\r\n    <header class="breaseDialogWindowHeader">\r\n        <div class="innerHeader">\r\n            <div class="imageDiv"><img src="" class="dummyImage" alt="" /></div>\r\n            <div class="textDiv"></div>\r\n        </div>\r\n        <a class="breaseWindowClose"></a>\r\n    </header>\r\n    <div id="{{ID}}_breaseDialogContent" class="breaseDialogWindowContentBox contentBox"></div>\r\n</div>'}),define("widgets/brease/DialogWindow/DialogWindow",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils"],function(e,BreaseEvent,Enum,Utils){"use strict";var t={modal:!0,arrow:{show:!1},forceInteraction:!0,showCloseButton:!0,position:{horizontal:"center",vertical:"middle"},pointOfOrigin:Enum.PointOfOrigin.CONTAINER,html:"widgets/brease/DialogWindow/DialogWindow.html",stylePrefix:"system_brease_Dialog",width:400,height:200},n=e.extend(function DialogWindow(t,n,i,s){!0===s?e.call(this,null,null,!0,!0):(e.call(this,null,n,!0,!0),r(this))},t),i=n.prototype,s=0;function r(e){require(["text!"+e.settings.html],function t(n){var i="DialogWindow"+(s+=1);n=n.replace(/\{\{ID\}\}/g,i),e.deferredInit(document.body,n),e.headerEl=e.el.find("header .textDiv"),e.imgEl=e.el.find("header img.dummyImage"),e.$imageDiv=e.el.find("header .imageDiv"),e.innerHeader=e.el.find(".innerHeader"),e.readyHandler()})}i.init=function(){this.addInitialClass("breaseDialogWindow"),this.contentBox=this.el.find(".contentBox"),this.settings.windowType="DialogWindow",e.prototype.init.call(this,!0)},i._setDimensions=function(){if(this.contentBox.children().length>0){var t=d(this.contentBox);this.contentBox.css({height:t.height,width:t.width}),this.settings.width=void 0,this.settings.height=void 0}else this.settings.height=this.defaultSettings.height,this.settings.width=this.defaultSettings.width;var n=brease.pageController.getDialogById(this.settings.id);if(n){var i=brease.pageController.getLayoutById(n.layout);this.innerHeader.css("max-width",i.width+"px")}e.prototype._setDimensions.call(this)},i.show=function(t,n){var i=brease.pageController.loadDialog(t.id,this.contentBox[0]);void 0!==t.headerText&&(t.header={text:t.headerText}),void 0===t.headerText&&void 0!==i&&void 0!==i.displayName&&(t.header={text:i.displayName});var s=1;if(void 0===i){this.el.find(".contentBox").css("width","auto");var r=brease.language.getSystemTextByKey("BR/IAT/brease.error.DIALOG_NOT_FOUND");brease.textFormatter.format(r,[t.id]).then(this._bind(a))}else s=l(this.el,i.visuId);return t.zoomFactor=s,this.el.attr("data-brease-dialogId",t.id),i&&i.style&&(t.style=i.style),e.prototype.show.call(this,t,n),this._setDimensions(),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),void 0!==i};function o(e){var t=e.css("background-image");return void 0!==t&&null!==t&&"none"!==t?t.match(/url\([^\)]+\)/gi)[0].split(/[()'"]+/)[1]:void 0}i._themeChangeHandler=function(){this._setImage()},i._setImage=function(){var e=o(this.$imageDiv);void 0!==e?(this.imgEl.attr("src",e),this.$imageDiv.css("display","inline-block")):this.$imageDiv.css("display","none");var t=Math.floor(this.el.find("header").outerWidth()-this.headerEl.outerWidth()-this.closeButton.outerWidth()-20);this.$imageDiv.css("max-width",t+"px")},i._setContent=function(){e.prototype._setContent.apply(this,arguments),this._setImage()};function a(e){this.contentBox.append($('<div class="errorText" >'+e+"</div>"))}function l(e,t){var n=brease.pageController.getVisuById(t),i=1;if(n&&n.containerId){var s=brease.pageController.getPageById(brease.pageController.getCurrentPage(n.containerId));if(s){var r=document.querySelector('[data-brease-layoutid="'+s.layout+'"][data-brease-pageId="'+s.id+'"]');i=Utils.getScaleFactor(r)}}return e.css({transform:"scale("+i+","+i+")","transform-origin":"0 0"}),i}i.hide=function(){brease.pageController.emptyContainer(this.contentBox[0]),document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),e.prototype.hide.call(this)},i.dispose=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),e.prototype.dispose.apply(this,arguments)};function d(e){var t={width:0,height:0},n=e.find("> div");if(n.length>0)for(var i,s,r=0;r<n.length;r+=1)s=$(n[r]),i=s.position(),t.width=Math.max(t.width,i.left+s.width()),t.height=Math.max(t.height,i.top+s.height());return t}return n}),define("widgets/brease/FragmentLoader/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.FragmentLoader",parents:["*"],children:[],inheritance:["widgets.brease.FragmentLoader","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("text!widgets/brease/FragmentLoader/FragmentLoader.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/FragmentLoader"></div>\r\n'}),define("widgets/brease/FragmentLoader/FragmentLoader",["require","brease/core/BaseWidget","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/BindingController"],function(e){"use strict";var t=e("brease/core/BaseWidget"),Enum=e("brease/enum/Enum"),BreaseEvent=e("brease/events/BreaseEvent"),n=brease.uiController,i=e("brease/controller/BindingController"),s={loadPolicy:Enum.LoadPolicy.ONDEMAND,cachePolicy:Enum.CachePolicy.NO_CACHE,omitClass:!0,initialHide:!1},r=t.extend(function FragmentLoader(){t.apply(this,arguments)},s),o=r.prototype;o.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseFragmentLoader"),this.isLoaded=!1,this.loadQueue=[],this.timer=null,this.settings.url&&this.settings.loadPolicy===Enum.LoadPolicy.IMMEDIATE&&this.load(this.settings.url,this.settings.contentId),t.prototype.init.call(this)},o.load=function(e,t,n){if(0===this.loadQueue.length||e!==this.loadQueue[0]){this.loadQueue.unshift(e);var i=this.settings.url,s=this.settings.contentId;this.settings.url=e,this.settings.contentId=t,this.loadFlag=!0,!0===n&&(this.settings.initialHide=!1),window.performanceMonitor.profile("loadContent - "+this.settings.contentId,0),!0===this.isLoaded?(brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_UNLOAD,{detail:{id:this.elem.id,contentId:s}})),l(this,i,s)):d.call(this),this.el.attr("data-brease-contentId",t)}},o.show=function(){!1===this.isLoaded?(this.settings.initialHide=!1,this.load(this.settings.url,this.settings.contentId)):(this.setVisible(!0),n.loadValuesForContent(this.settings.contentId||this.settings.url),this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:this.settings.url}})))},o.hide=function(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id}}));var e=this;this.loadFlag=!1,this.settings.cachePolicy===Enum.CachePolicy.CACHE?i.deactivateContent(this.settings.contentId||this.settings.url):(n.dispose(e.elem,!1,e._bind("contentDisposedHandler")),this.isLoaded&&i.deactivateContent(this.settings.contentId||this.settings.url),this.isLoaded=!1),this.setVisible(!1),this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_HIDE,{detail:{url:this.settings.url}}))},o.getIsLoaded=function(){return this.isLoaded},o.getContentId=function(){return this.settings.contentId||this.settings.url},o.getUrl=function(){return this.settings.url},o.dispose=function(){this.loadFlag=!1,n.dispose(this.elem,!1),!0===this.isLoaded&&i.deactivateContent(this.settings.contentId||this.settings.url),t.prototype.dispose.apply(this,arguments)},o.contentDisposedHandler=function(e){this.el.empty(),e&&e.call(this)},o.busyHandler=function(){this.el.html(brease.language.getTextByKey("BR/IAT/brease.common.pageloading"))},o._contentReadyHandler=function(){var e=this;window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,0),i.sendInitialValues(e.settings.contentId||e.settings.url,function(){e.elem&&(!0!==e.settings.initialHide&&!0===e.loadFlag?e.setVisible(!0):e.setVisible(!1),e.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:e.settings.url},bubbles:!0}))),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,1),window.performanceMonitor.profile("loadContent - "+e.settings.contentId,1)})},o._clickHandler=function(){};function a(e){var t=$.Deferred(),i=this,s=function(){e.removeEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+i.settings.contentId,1),t.resolve()};return e.addEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+this.settings.contentId,0),n.parse(e),t.promise()}function l(e,t,s){e.isLoaded=!1,i.deactivateContent(s||t),n.dispose(e.elem,!1,function(){e.contentDisposedHandler(d)}),e.setVisible(!1)}function d(){var t=this;t.timer&&window.clearTimeout(t.timer),t.timer=window.setTimeout(t._bind("busyHandler"),1e3),window.performanceMonitor.profile("loadContentHTML - "+t.settings.contentId,0),e(["text!"+t.settings.url],t._bind("_loadSuccess"),t._bind("_loadFail"))}return o._loadSuccess=function(e){var t=this;t.settings.url===t.loadQueue[0]&&(t.timer&&window.clearTimeout(t.timer),t.loadQueue.length=0,t.el.html(e),t.el.find("script").remove(),t.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_LOADED,{detail:{url:t.settings.url}})),window.performanceMonitor.profile("loadContentHTML - "+t.settings.contentId,1),t.isLoaded=!0,$.when(i.activateContent(t.settings.contentId||t.settings.url),a.call(t,t.elem)).then(t._bind("_contentReadyHandler")))},o._loadFail=function(e){var t=this;t.timer&&window.clearTimeout(t.timer),t.isLoaded=!1,t.elem&&(t.dispatchEvent(new CustomEvent(BreaseEvent.LOAD_ERROR,{detail:{url:t.settings.url}})),t.el.html("ERROR: could not load fragment with url="+t.settings.url),t.setVisible(!0)),console.iatWarn("WARNING: could not load fragment in FragmentLoader["+(t.elem?t.elem.id:"")+"]:"+e.message)},r}),define("widgets/brease/KeyBoard/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.KeyBoard",parents:["*"],children:[],inheritance:["widgets.brease.KeyBoard","widgets.brease.Window","brease.core.BaseWidget"],actions:{setAlternativeLayouts:{method:"setAlternativeLayouts",parameter:{alternativeLayouts:{name:"alternativeLayouts",index:0,type:"Object"}}},setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("text!widgets/brease/KeyBoard/KeyBoard.html",[],function(){return'<div id="breaseKeyBoard" data-brease-widget="widgets/brease/KeyBoard">\r\n    layouts in assets folder\r\n</div>\r\n'}),define("widgets/brease/KeyBoard/libs/LayoutSelector",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var LayoutSelector=function(){this.currentLayout=""},e=LayoutSelector.prototype;e.init=function(e){this.el=$('<div class="dropdown"></div>'),this.btn=$('<div class="button"></div>'),this.list=$('<div class="dropdownlist"></div>'),this.callback=e,this.btn.on(BreaseEvent.CLICK,{self:this},t),this.list.on(BreaseEvent.CLICK,"[data-value]",{self:this},n),this.el.append([this.btn,this.list])},e.setItems=function(e){var t;this.list.empty();for(var n in e)t=$('<div data-value="'+n+'" data-name="'+e[n].description+'" data-index="'+e[n].index+'">'+e[n].description+"</div>"),n===this.currentLayout&&(t.addClass("selected"),this.setButtonText(n)),this.list.append(t)},e.getItems=function(e){return e?this.list.children(e):this.list.children()},e.setCurrentLayout=function(e){this.currentLayout=e,this.list||(this.list=$('<div class="dropdownlist"></div>')),this.list.find(".selected").removeClass("selected"),this.list.find("[data-value="+e+"]").addClass("selected")},e.setButtonText=function(e){this.btn.text(e)},e.dispose=function(){this.callback=null,this.btn.off(BreaseEvent.CLICK,{self:this},t),this.list.off(BreaseEvent.CLICK,"[data-value]",{self:this},n)};function t(e){var t=e.data.self;t.getItems().length>2&&!t.list.hasClass("open")?t.list.addClass("open"):t.list.hasClass("open")?t.list.removeClass("open"):t.list.removeClass("open").find(":not(.selected),:only-child()").trigger(BreaseEvent.CLICK)}function n(e){var t=e.data.self,n=$(this),i=n.attr("data-value");t.list.find(".selected").removeClass("selected"),n.addClass("selected"),t.setButtonText(i),"function"==typeof t.callback&&t.callback(i),t.list.removeClass("open")}return LayoutSelector}),define("widgets/brease/KeyBoard/libs/AboutDisplay",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var AboutDisplay=function(){},e=AboutDisplay.prototype;return e.init=function(e){this.parentEl=e,this.frameEl=e.find(".keyBoardAbout"),this.frameEl&&(this.frameEl.find("button").on(BreaseEvent.CLICK,{self:this},this.onButtonCLick),this.parentEl.on(BreaseEvent.CLICK,"[data-href]",{self:this},this.onSpanCLick))},e.onSpanCLick=function(e){var t=e.data.self;t.frameEl.find("iframe").attr("src",$(this).attr("data-href").replace("http://www.edrdg.org/","widgets/brease/KeyBoard/assets/doc/KanjiDic/")),t.frameEl.find("span").text($(this).attr("data-href")),t.frameEl.show()},e.onButtonCLick=function(e){e.data.self.frameEl.hide()},e.dispose=function(){this.frameEl&&(this.frameEl.find("button").off(BreaseEvent.CLICK,{self:this},this.onButtonCLick),this.parentEl.off(BreaseEvent.CLICK,"[data-href]",{self:this},this.onSpanCLick)),this.frameEl=null,this.parentEl=null},AboutDisplay}),define("widgets/brease/KeyBoard/KeyBoard",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/core/Utils","brease/controller/PopUpManager","widgets/brease/KeyBoard/libs/LayoutSelector","widgets/brease/KeyBoard/libs/AboutDisplay"],function(e,BreaseEvent,Utils,t,LayoutSelector,AboutDisplay){"use strict";var n={layout:{default:"widgets/brease/KeyBoard/assets/KeyBoardEn.html",en:"widgets/brease/KeyBoard/assets/KeyBoardEn.html",de:"widgets/brease/KeyBoard/assets/KeyBoardDe.html",es:"widgets/brease/KeyBoard/assets/KeyBoardEs.html",fr:"widgets/brease/KeyBoard/assets/KeyBoardFr.html",it:"widgets/brease/KeyBoard/assets/KeyBoardIt.html",nl:"widgets/brease/KeyBoard/assets/KeyBoardNl.html",ar:"widgets/brease/KeyBoard/assets/KeyBoardAr.html",ar_en:"widgets/brease/KeyBoard/assets/KeyBoardArEn.html",bg:"widgets/brease/KeyBoard/assets/KeyBoardBg.html",bg_en:"widgets/brease/KeyBoard/assets/KeyBoardBgEn.html",cs:"widgets/brease/KeyBoard/assets/KeyBoardCs.html",da:"widgets/brease/KeyBoard/assets/KeyBoardDa.html",fi:"widgets/brease/KeyBoard/assets/KeyBoardFi.html",hu:"widgets/brease/KeyBoard/assets/KeyBoardHu.html",ja:"widgets/brease/KeyBoard/assets/KeyBoardJa.html",ja_en:"widgets/brease/KeyBoard/assets/KeyBoardJaEn.html",ko:"widgets/brease/KeyBoard/assets/KeyBoardKo.html",ko_en:"widgets/brease/KeyBoard/assets/KeyBoardKoEn.html",no:"widgets/brease/KeyBoard/assets/KeyBoardNo.html",pl:"widgets/brease/KeyBoard/assets/KeyBoardPl.html",pt:"widgets/brease/KeyBoard/assets/KeyBoardPt.html",ru:"widgets/brease/KeyBoard/assets/KeyBoardRu.html",ru_en:"widgets/brease/KeyBoard/assets/KeyBoardRuEn.html",sk:"widgets/brease/KeyBoard/assets/KeyBoardSk.html",sl:"widgets/brease/KeyBoard/assets/KeyBoardSl.html",sv:"widgets/brease/KeyBoard/assets/KeyBoardSv.html",tr:"widgets/brease/KeyBoard/assets/KeyBoardEn.html",zh:"widgets/brease/KeyBoard/assets/KeyBoardZh.html",zh_en:"widgets/brease/KeyBoard/assets/KeyBoardZhEn.html",ro:"widgets/brease/KeyBoard/assets/KeyBoardRo.html",lv:"widgets/brease/KeyBoard/assets/KeyBoardLv.html",sr:"widgets/brease/KeyBoard/assets/KeyBoardSr.html",he:"widgets/brease/KeyBoard/assets/KeyBoardHe.html",he_en:"widgets/brease/KeyBoard/assets/KeyBoardHeEn.html",hr:"widgets/brease/KeyBoard/assets/KeyBoardHr.html",ca:"widgets/brease/KeyBoard/assets/KeyBoardCa.html",is:"widgets/brease/KeyBoard/assets/KeyBoardIs.html"},modal:!0,showCloseButton:!0,showShiftValues:!0,forceInteraction:!1,capsLock:!1,alternativeLayouts:{ar:{ar:{index:0,description:""},ar_en:{index:1,description:"English"}},ar_en:{ar:{index:0,description:""},ar_en:{index:1,description:"English"}},bg:{bg:{index:0,description:""},bg_en:{index:1,description:"English"}},bg_en:{bg:{index:0,description:""},bg_en:{index:1,description:"English"}},he:{he:{index:0,description:""},he_en:{index:1,description:"English"}},he_en:{he:{index:0,description:""},he_en:{index:1,description:"English"}},ja:{ja:{index:0,description:""},ja_en:{index:1,description:"English"}},ja_en:{ja:{index:0,description:""},ja_en:{index:1,description:"English"}},ko:{ko:{index:0,description:""},ko_en:{index:1,description:"English"}},ko_en:{ko:{index:0,description:""},ko_en:{index:1,description:"English"}},ru:{ru:{index:0,description:""},ru_en:{index:1,description:"English"}},ru_en:{ru:{index:0,description:""},ru_en:{index:1,description:"English"}},zh:{zh:{index:0,description:""},zh_en:{index:1,description:"English"}},zh_en:{zh:{index:0,description:""},zh_en:{index:1,description:"English"}}},plugin:{zh:"widgets/brease/KeyBoard/libs/external/PluginPinyin",ko:"widgets/brease/KeyBoard/libs/external/PluginHangul",ja:"widgets/brease/KeyBoard/libs/external/PluginWanaKana"},stylePrefix:"widgets_brease_KeyBoard",scale2fit:!0},i=1,s,r=e.extend(function KeyBoard(t,n,i,r){if(!0===r)e.call(this,null,n||null,!0,!0),h(this);else{if(void 0!==s)return this.output&&s.setValue(""),s.settings=$.extend(!0,{},s.settings,n),s;e.call(this,null,n||null,!0,!0),h(this),s=this}},n),o=r.prototype;o.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseKeyBoard"),this.settings.windowType="KeyBoard",e.prototype.init.call(this,!0),this.value="",this.getElements(),this.aboutDisplay=new AboutDisplay,this.aboutDisplay.init(this.el),!1===brease.config.detection.mobile&&this.output[0].removeAttribute("readonly"),this.loadPlugin()},o.getElements=function(){this.output=this.el.find("input"),this.clear=this.el.find(".keyBoardBtnClear"),this.valueButtons=this.el.find("button[data-value]"),this.actionButtons=this.el.find("button[data-action]"),this.shift=this.el.find("[data-action=shift]"),this.special=this.el.find("[data-action=special]")},o.getCursor=function(){return w.call(this)},o.setCursor=function(e){C.call(this,e)},o.setValue=function(e,t){this.value=e||"",""!==this.value?this.clear.show():this.clear.hide(),!0!==t&&(this.output.val(this.value),this.output[0].setSelectionRange(this.value.length,this.value.length),this.output.focus())},o.showPlugin=function(e){void 0!==this.plugin&&(!0===e?this.plugin.onDelete(this.value,w.call(this)):this.plugin.onInput(this.value,w.call(this)))},o.getPluginItems=function(){return this.plugin&&"function"==typeof this.plugin.getItems?this.plugin.getItems():[]},o.getValue=function(){return this.value},o.show=function(t,n){!0!==this.eventsAttached&&d.call(this),this._setLayout(),this.options=$.extend(!0,{},t),e.prototype.show.call(this,t,n),this.setAlternativeLayouts(this.settings.alternativeLayouts),this.closeOnLostContent(n),void 0!==t.type&&this.output.attr("type",t.type),void 0!==t.maxLength?this.output.attr("maxlength",parseInt(t.maxLength,10)):this.output.removeAttr("maxlength"),this.setValue(this.settings.text),void 0!==this.plugin&&this.plugin.show(),void 0!==this.settings.restrict?this.settings.regexp=new RegExp(this.settings.restrict):this.settings.regexp=void 0},o.hide=function(){!0===this.eventsAttached&&c.call(this),1!==i&&E.call(this,1),e.prototype.hide.call(this),void 0!==this.plugin&&this.plugin.hide(),this.el.removeClass("keyBoardSm keyBoardMd keyBoardFull")},o.langChangeHandler=function(){var e=brease.language.getCurrentLanguage();this.settings.language=e,this.selector&&this.selector.setCurrentLayout(this.settings.language),this.loadLayout()},o.loadPlugin=function(){var e=this.settings.plugin[this.settings.language],t=this;void 0!==e?(void 0!==this.plugin&&this.plugin.dispose(),require([e],function(e){t.plugin=e,t.pluginReady()})):(this.plugin=void 0,this.pluginReady())},o.pluginReady=function(){this.plugin&&(this.plugin.init(this),this.dispatchEvent(new CustomEvent(BreaseEvent.PLUGIN_LOADED,{bubbles:!0})))},o.loadLayout=function(){var e=this.settings.language,t=this.settings.layout[e];if(void 0===t&&(t=this.settings.layout.default),void 0!==t&&t!==this.settings.html)this.settings.html=t,g(this),this.hide();else{var n=this;window.setTimeout(function(){n.loadPlugin(),n._dispatchReady()},0)}},o.setAlternativeLayouts=function(e){this.settings.alternativeLayouts=e,this.selector||(this.selector=new LayoutSelector,this.selector.setCurrentLayout(this.settings.language),this.selector.init(this._bind(u),this.settings.alternativeLayouts[this.settings.language])),this.selector.setItems(this.settings.alternativeLayouts[this.settings.language]),this.selector.getItems().length>0&&(this.el.find(".alt-lt-Wrapper").length>0?this.selector.el.appendTo(this.el.find(".alt-lt-Wrapper")):this.el.append(this.selector.el))},o.dispose=function(){this.plugin&&this.plugin.dispose(),e.prototype.dispose.apply(this,arguments)},o._onValueButtonClick=function(e){var t=$(e.currentTarget),n;switch(i){case 1:n=t.attr("data-value");break;case 2:n=t.attr("data-shift-value");break;case 3:n=t.attr("data-special-value");break}if(!(void 0!==this.settings.maxLength&&this.getValue().length>=this.settings.maxLength)){if(void 0!==this.settings.regexp)for(var s=this.getValue()+n,r=s.length-1;r>=0;r-=1)if(!0!==this.settings.regexp.test(s[r]))return;f.call(this,n,w.call(this))}};function a(e){this.activeButton&&Utils.removeClass(this.activeButton,"active"),this.activeButton=e.currentTarget,Utils.addClass(this.activeButton,"active"),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind(l))}function l(){brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),Utils.removeClass(this.activeButton,"active"),this.activeButton=void 0}o._setLayout=function(){var e=t.getDimensions(),n=Math.min(e.appWidth,e.winWidth);n>=1e3?this.el.addClass("keyBoardFull"):n<=640?this.el.addClass("keyBoardSm"):this.el.addClass("keyBoardMd")},o._onActionButtonClick=function(e){switch(this._handleEvent(e,!0),$(e.currentTarget).attr("data-action")){case"delete":p.call(this,w.call(this)-1);break;case"enter":v.call(this);break;case"left":A.call(this);break;case"right":I.call(this);break;case"shift":b.call(this);break;case"close":this.hide();break;case"special":y.call(this);break;default:console.iatWarn(r.name+" action not supported!");break}},o._keyUpHandler=function(e){if(13===e.which)v.call(this);else{var t=this.output.val(),n=this.getValue();if(t!==n){var i="",s=w.call(this);if(t.length-n.length>0){for(var r=0,o=t.length;r<o;r+=1)!0===this.settings.regexp.test(t[r])&&(i+=t[r]);this.setValue(i),C.call(this,s-(t.length-i.length))}else this.setValue(t,!0);this.showPlugin(8===e.which)}}},o._onClear=function(e){this._handleEvent(e,!0),this.setValue(""),this.plugin&&this.plugin.onClear&&this.plugin.onClear(this.value,w.call(this))},o.postProcessHTML=function(e){return e=e.replace('<i class="icon-left"></i>','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="20px" viewBox="0 0 12 20" enable-background="new 0 0 12 20" xml:space="preserve"><path d="M0,8.569L12,0v3.931L3.336,10L12,16.069V20L0,11.431V8.569z"/></svg>'),
e=e.replace('<i class="icon-right"></i>','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="20px" viewBox="0 0 12 20" enable-background="new 0 0 12 20" xml:space="preserve"><path d="M12,11.431L0,20v-3.931L8.664,10L0,3.931V0l12,8.569V11.431z"/></svg>'),e=e.replace('<i class="icon-down"></i>','<svg version="1.1" class="icon-down" viewBox="0 0 38 31" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="m21.132 28.871-1.8234 2.3711-4.4449-6.2422h8.1362l1.0719-0.052352-1.1164 1.5524-1.8234 2.3711zm-2.1321-5.8711h-19v-23h38v23zm-0.5-2h12.5v-5h-25v5zm-6-7h2.5v-5h-5v5zm7 0h2.5v-5h-5v5zm7 0h2.5v-5h-5v5zm-18-7h2.5v-5h-5v5zm7 0h2.5v-5h-5v5zm7 0h2.5v-5h-5v5zm7 0h2.5v-5h-5v5z"/></svg>'),e=e.replace('<i class="icon-delete">&times;</i>','<svg class="icon-delete" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M44 6h-30c-1.38 0-2.47.7-3.19 1.76l-10.81 16.23 10.81 16.23c.72 1.06 1.81 1.78 3.19 1.78h30c2.21 0 4-1.79 4-4v-28c0-2.21-1.79-4-4-4zm-6 25.17l-2.83 2.83-7.17-7.17-7.17 7.17-2.83-2.83 7.17-7.17-7.17-7.17 2.83-2.83 7.17 7.17 7.17-7.17 2.83 2.83-7.17 7.17 7.17 7.17z"/></svg>'),e};function d(){var e=T(brease.config.virtualKeyboards);this.clear.on(e,this._bind("_onClear")),this.el.on(BreaseEvent.MOUSE_DOWN,"button",this._bind(a)),this.el.on(e,"button[data-value]",this._bind("_onValueButtonClick")),this.el.on(e,"button[data-action]",this._bind("_onActionButtonClick")),this.output.on("keyup",this._bind("_keyUpHandler")),this.eventsAttached=!0}function c(){this.selector&&this.selector.el.detach(),this.clear.off(),this.el.off(BreaseEvent.MOUSE_DOWN,"button",this._bind(a)),this.el.off(BreaseEvent.MOUSE_DOWN,"button[data-value]",this._bind("_onValueButtonClick")),this.el.off(BreaseEvent.MOUSE_DOWN,"button[data-action]",this._bind("_onActionButtonClick")),this.el.off(BreaseEvent.CLICK,"button[data-value]",this._bind("_onValueButtonClick")),this.el.off(BreaseEvent.CLICK,"button[data-action]",this._bind("_onActionButtonClick")),this.output.off(),this.eventsAttached=!1}function u(e){var t=this.settings.layout[e],n=this;this.settings.language=e,void 0===t?t=this.settings.layout.default:n.selector&&n.selector.setCurrentLayout(e),void 0!==t&&t!==this.settings.html&&(this.settings.html=t,this.instanceSettings.html=t,n.options.value=n.value,n.options.text=n.value,this.instanceSettings.value=n.value,this.instanceSettings.text=n.value,c.call(n),n.el.children(":not(.keyBoardHeader)").remove(),void 0!==this.plugin&&this.plugin.dispose(),require(["text!"+n.settings.html],function(e){e=n.postProcessHTML(e),n.el.append($(e).children(":not(.keyBoardHeader)")),n.el.attr("data-lang",$(e).attr("data-lang")),n.getElements(),n.aboutDisplay=new AboutDisplay,n.aboutDisplay.init(n.el),!0!==n.eventsAttached&&d.call(n),!1===brease.config.detection.mobile&&n.output[0].removeAttribute("readonly"),n.setValue(n.value),n.loadPlugin(),n.setAlternativeLayouts(n.settings.alternativeLayouts),E.call(n,1)}))}function h(e){var t=brease.language.getCurrentLanguage(),n=e.settings.layout[t];e.settings.language=t,void 0===n&&(n=e.settings.layout.default),e.settings.html=n,require(["text!"+e.settings.html],function(t){t=e.postProcessHTML(t),e.deferredInit.call(e,document.body,t),E.call(e,1),e.readyHandler()})}function g(e){c.call(e),e.aboutDisplay.dispose(),e.el.remove(),require(["text!"+e.settings.html],function(t){t=e.postProcessHTML(t),e.el=$(t).prependTo(document.body),e.elem=e.el[0],window.setTimeout(function(){e._dispatchReady()},0),e.init.call(e),E.call(e,1)})}function f(e,t){this.value=this.value.slice(0,t)+e+this.value.slice(t),this.cursor=t+1,this.setValue(this.value),C.call(this,t+=1),this.showPlugin(),2!==i||this.settings.capsLock||E.call(this,1)}function p(e){var t=this.value.substr(0,e)+this.value.substr(e+1);this.cursor=e,this.setValue(t),C.call(this,e),this.plugin&&this.plugin.onDelete(this.value,w.call(this))}function m(e){return e.replace(/[\u00A0]/g," ")}function v(){this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:m(this.getValue())})),this.output.trigger("blur"),this.hide()}function b(){2!==i?E.call(this,2):1===i||this.settings.capsLock?this.settings.capsLock&&E.call(this,1):(this.settings.capsLock=!0,E.call(this,2))}function y(){3!==i?E.call(this,3):this.settings.capsLock?E.call(this,2):E.call(this,1)}function E(e){var t,n,s,r,o,a;switch(e){case 1:t="value",s="shift-value",this.shift.removeClass("selected"),this.special.removeClass("selected"),this.settings.capsLock=!1;break;case 2:t="shift-value",s="special-value",this.shift.addClass("selected"),this.special.removeClass("selected");break;case 3:t="special-value",s="shift-value",this.special.addClass("selected"),this.shift.removeClass("selected");break}for(var l=0;l<this.valueButtons.length;l+=1)a=this.valueButtons.eq(l),n=a.data(t),r=a.data(s),o=(void 0!==n?n:"")+(!0===this.settings.showShiftValues&&"value"===t?"<sub>"+(void 0!==r?r:"")+"</sub>":""),a.html(o);i=e}function A(){this.cursor=this.output.get(0).selectionStart=this.output.get(0).selectionEnd-=1,this.output.focus()}function I(){this.cursor=this.output[0].selectionStart=this.output[0].selectionEnd+=1,this.output.focus()}function C(e){this.cursor=this.output.get(0).selectionStart=this.output.get(0).selectionEnd=e}function w(){return this.output.get(0).selectionStart}function T(e){return e&&e.InputProcessing&&!0===e.InputProcessing.onKeyDown?BreaseEvent.MOUSE_DOWN:BreaseEvent.CLICK}return r}),define("widgets/brease/KeyBoard/libs/composer/RomajiToKana",["widgets/brease/KeyBoard/libs/external/wanakana"],function(wanakana){"use strict";var RomajiToKana=function(){this.value="",this.startIndex=-1},e=RomajiToKana.prototype;return e.init=function(){this.value="",this.startIndex=-1},e.parseInput=function(e){var t=[],n=wanakana.toKana(e,{IMEMode:!0,passRomaji:!0}),i=wanakana.toKatakana(n,{IMEMode:!0,passRomaji:!0});return n.length>0&&t.push(n),i.length>0&&i!==n&&t.push(i),t},e.setValue=function(e){this.value=e,this.len=e.length},e.getValue=function(){return this.value},e.clearValue=function(){this.value=""},e.setStartIndex=function(e){e<0&&(e=0),this.startIndex=e},e.resetStartIndex=function(){this.startIndex=-1},e.getStartIndex=function(){return this.startIndex},e.addChar=function(e,t){var n=t-this.startIndex,i=this.value.slice(0,n),s=this.value.slice(n,this.value.length);n>=0&&n<=this.value.length+1&&(this.value=i+e+s)},e.getLen=function(){return"string"==typeof this.value?this.value.length:null},e.removeChar=function(e,t){var n=t-this.startIndex,i=this.value.slice(0,n),s=this.value.slice(n+1,this.value.length);n===this.value.length&&(i=this.value.slice(0,n-1)),n>=0&&n<=this.value.length&&(this.value=i+s)},e.dispose=function(){this.value=null,this.startIndex=null},new RomajiToKana}),define("widgets/brease/KeyBoard/libs/converter/KanaToKanji",["widgets/brease/KeyBoard/libs/external/wanakana","widgets/brease/KeyBoard/libs/external/dictionaries/KanjiDic"],function(wanakana,e){"use strict";var KanaToKanji=function(){this.pathDict="widgets/brease/KeyBoard/libs/external/dictionaries/KanjiDic"},t=KanaToKanji.prototype;t.getCandidates=function(e){switch(this.candidateList=[],a(e)){case 0:this.lookup(e).map(o,this);break;case 1:this.lookup(wanakana.toRomaji(e)).map(o,this);break;default:}return this.candidateList},t.lookup=function(e){return r(e).filter(this.testEntry,e).map(this.extractData)},t.testEntry=function(e){if(e)return n(this,e.onyomi)||i(this,e.kunyomi)},t.extractData=function(e){return e.kanji};function n(e,t){return!!t&&t.some(s,e)}function i(e,t){return!!t&&t.some(s,e)}function s(e){var t=wanakana.toRomaji(e);return 0===t.search(this)&&t.length<=this.length+2}function r(){return e.dump}function o(e){this.candidateList.push(e)}function a(e){return wanakana.isRomaji(e)?0:wanakana.isKatakana(e)||wanakana.isHiragana(e)?1:void 0}return new KanaToKanji}),define("widgets/brease/KeyBoard/libs/PluginProto",["require","brease/core/Class"],function(e){"use strict";var t=e("brease/core/Class"),n=t.extend(function e(){t.call(this)}),i=n.prototype;return i.init=function(e){this.keyboard=e},i.show=function(){},i.hide=function(){},i.onInput=function(){},i.onDelete=function(){},i.dispose=function(){},new n}),define("widgets/brease/Label/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.Label",parents:["*"],children:[],inheritance:["widgets.brease.Label","brease.core.BaseWidget"],actions:{setAutoScroll:{method:"setAutoScroll",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("text!widgets/brease/Label/Label.html",[],function(){return'<label id="WIDGETID" data-brease-widget="widgets/brease/Label">CONTENT</label>\r\n'}),define("widgets/brease/Label/Label",["brease/core/BaseWidget","brease/decorators/LanguageDependency","brease/decorators/VisibilityDependency","brease/enum/Enum","brease/core/Types","brease/helper/Scroller","brease/events/BreaseEvent"],function(e,t,n,Enum,Types,Scroller,BreaseEvent){"use strict";var i={ellipsis:!1,wordWrap:!1,multiLine:!1,breakWord:!1,text:"",autoScroll:!1},s=e.extend(function Label(){e.apply(this,arguments)},i),r=s.prototype;r.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseLabel"),this.settings.arrow===Enum.Position.left&&this.addInitialClass("arrow-left"),a(this),this.scroller=null,this.settings.ellipsis=Types.parseValue(this.settings.ellipsis,"Boolean"),this.settings.multiLine=Types.parseValue(this.settings.multiLine,"Boolean"),this.settings.wordWrap=Types.parseValue(this.settings.wordWrap,"Boolean"),l(this),e.prototype.init.call(this),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler"))},r.wake=function(){e.prototype.wake.apply(this,arguments),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler"))},r.suspend=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler")),e.prototype.suspend.apply(this,arguments)},r._dispatchReady=function(){e.prototype._dispatchReady.call(this),this.setText(this.settings.text),this.addScroller()},r.themeChangeHandler=function(){this.refreshScroller()},r.langChangeHandler=function(e){void 0!==e&&void 0!==e.detail&&void 0!==e.detail.textkey&&e.detail.textkey!==this.settings.textkey||null!==this.settings.textkey&&(this.updateText(brease.language.getTextByKey(this.settings.textkey)),this.refreshScroller())},r.addScroller=function(){!this.scroller&&!1===this.settings.ellipsis&&this.settings.autoScroll&&(this.scroller=o(this),brease.config.editMode&&(this.scroller.subsequentlyDisableTouch(),this.scroller.subsequentlyDisableMouse()),this.setVisibilityDependency(!0)),this.refreshScroller()},r.destroyScroller=function(){d(this),this.scroller&&(this.scroller.destroy(),this.scroller=null)},r.refreshScroller=function(){this.scroller&&this.scroller.refresh(),d(this)},r.setText=function(e){void 0!==e&&(!1===brease.language.isKey(e)?(this.updateText(e),this.removeTextKey()):this.setTextKey(brease.language.parseKey(e))),this.refreshScroller()},r.getText=function(){return this.settings.text},r.updateText=function(e){if(null!==e){this.settings.text=Types.parseValue(e,"String");var t=_.escape(e),n=t;this.settings.multiLine&&(n=t.replace(/\\n/g,"<br />")),this.textEl.html(n)}},r.setTextKey=function(e){if(void 0!==e)return this.settings.textkey=e,this.updateText(brease.language.getTextByKey(this.settings.textkey)),this.setLangDependency(!0),this.getText()},r.removeTextKey=function(){this.settings.textkey=null,this.setLangDependency(!1)},r.getTextKey=function(){return this.settings.textkey},r.setEllipsis=function(e){this.settings.ellipsis=Types.parseValue(e,"Boolean"),l(this),this.settings.ellipsis?this.destroyScroller():this.addScroller()},r.getEllipsis=function(){return this.settings.ellipsis},r.setWordWrap=function(e){this.settings.wordWrap=Types.parseValue(this.settings.wordWrap,"Boolean"),this.settings.wordWrap=e,l(this),this.refreshScroller()},r.getWordWrap=function(){return this.settings.wordWrap},r.setBreakWord=function(e){this.settings.breakWord=e,l(this),this.refreshScroller()},r.getBreakWord=function(){return this.settings.breakWord},r.setMultiLine=function(e){this.settings.multiLine=Types.parseValue(this.settings.multiLine,"Boolean"),this.settings.multiLine=e,l(this),this.updateText(this.settings.text),this.refreshScroller()},r.getMultiLine=function(){return this.settings.multiLine},r.setAutoScroll=function(e){this.settings.autoScroll=e,e?this.addScroller():this.destroyScroller()},r.getAutoScroll=function(){return this.settings.autoScroll},r.dispose=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler")),this.destroyScroller(),e.prototype.dispose.apply(this,arguments)};function o(e){var t={mouseWheel:!0,scrollX:!0,scrollY:!0};return Scroller.addScrollbars(e.elem,t)}function a(e){e.textEl=$("<span></span>"),e.elem.textContent?(e.settings.text=e.elem.textContent,e.el.contents().wrap(e.textEl)):e.el.html(e.textEl)}function l(e){!0===e.settings.ellipsis?e.el.addClass("ellipsis"):e.el.removeClass("ellipsis"),!0===e.settings.multiLine?(e.el.addClass("multiLine"),!0===e.settings.wordWrap?(e.el.addClass("wordWrap"),e.el.removeClass("multiLine")):e.el.removeClass("wordWrap"),!0===e.settings.breakWord?(e.el.addClass("breakWord"),e.el.removeClass("multiLine")):e.el.removeClass("breakWord")):(e.el.removeClass("breakWord"),e.el.removeClass("wordWrap"),e.el.removeClass("multiLine"))}function d(e){!1===e.settings.ellipsis&&e.settings.autoScroll&&e.scroller&&e.scroller.hasVerticalScroll?e.el.addClass("scrollable"):e.el.removeClass("scrollable")}return n.decorate(t.decorate(s,!1),!1)}),define("widgets/brease/MessageBox/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.MessageBox",parents:["*"],children:[],inheritance:["widgets.brease.MessageBox","widgets.brease.Window","brease.core.BaseWidget"],actions:{setContent:{method:"setContent"},setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setIcon:{method:"setIcon"},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("widgets/brease/MessageBox/libs/Buttons",["brease/core/Utils"],function(Utils){"use strict";var e={};return Utils.defineProperty(e,"btnOk",{state:"OK",textkey:"BR/IAT/brease.common.ok"}),Utils.defineProperty(e,"btnYes",{state:"YES",textkey:"BR/IAT/brease.common.yes"}),Utils.defineProperty(e,"btnNo",{state:"NO",textkey:"BR/IAT/brease.common.no"}),Utils.defineProperty(e,"btnAbort",{state:"ABORT",textkey:"BR/IAT/brease.common.abort"}),Utils.defineProperty(e,"btnRetry",{state:"RETRY",textkey:"BR/IAT/brease.common.retry"}),Utils.defineProperty(e,"btnIgnore",{state:"IGNORE",textkey:"BR/IAT/brease.common.ignore"}),Utils.defineProperty(e,"btnCancel",{state:"CANCEL",textkey:"BR/IAT/brease.common.cancel"}),e}),define("widgets/brease/MessageBox/libs/ButtonManager",["brease/core/Class","brease/events/BreaseEvent","brease/enum/Enum","widgets/brease/MessageBox/libs/Buttons"],function(e,BreaseEvent,Enum,t){"use strict";var ButtonManager=e.extend(function(t,n){e.call(this),this.init(t,n)},null),n=ButtonManager.prototype;n.init=function(e,n){this.widget=e,this.footer=e.el.find(".messageBoxFooter"),this.btnCallback=n,this.arElem={};for(var i in t)this.arElem[i]={el:$("#"+e.elem.id+"_messageBox_"+i)},this.arElem[i].textEl=this.arElem[i].el.find("span");this.setTexts()},n.addEventListeners=function(){this.footer.on(BreaseEvent.CLICK,".messageBoxButton",this._bind("btnClickHandler")),this.footer.on(BreaseEvent.MOUSE_DOWN,".messageBoxButton",this._bind("btnDownHandler"))},n.removeEventListeners=function(){this.footer.off(BreaseEvent.CLICK,".messageBoxButton",this._bind("btnClickHandler")),this.footer.off(BreaseEvent.MOUSE_DOWN,".messageBoxButton",this._bind("btnDownHandler"))},n.setTexts=function(){for(var e in t)this.arElem[e].textEl.text(brease.language.getTextByKey(t[e].textkey))},n.setButtons=function(e){var n;switch(e){case Enum.MessageBoxType.AbortRetryIgnore:n=Enum.MessageBoxState.ABORT|Enum.MessageBoxState.RETRY|Enum.MessageBoxState.IGNORE;break;case Enum.MessageBoxType.OK:n=Enum.MessageBoxState.OK;break;case Enum.MessageBoxType.OKCancel:n=Enum.MessageBoxState.OK|Enum.MessageBoxState.CANCEL;break;case Enum.MessageBoxType.RetryCancel:n=Enum.MessageBoxState.RETRY|Enum.MessageBoxState.CANCEL;break;case Enum.MessageBoxType.YesNo:n=Enum.MessageBoxState.YES|Enum.MessageBoxState.NO;break;case Enum.MessageBoxType.YesNoCancel:n=Enum.MessageBoxState.YES|Enum.MessageBoxState.NO|Enum.MessageBoxState.CANCEL;break}for(var i in t)this.arElem[i].el.showByFlag(n&Enum.MessageBoxState[t[i].state])},n.btnDownHandler=function(e){var t=e.currentTarget.getAttribute("data-key");t&&(this.arElem[t].el.addClass("active"),this.activeButton=t),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind("btnUpHandler"))},n.btnUpHandler=function(e){i(e),brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind("btnUpHandler")),this.arElem[this.activeButton].el.removeClass("active"),this.activeButton=""},n.btnClickHandler=function(e){var n=e.currentTarget.getAttribute("data-key");n&&this.btnCallback.call(this.widget,Enum.MessageBoxState[t[n].state])};function i(e){e.originalEvent.preventDefault(),e.stopImmediatePropagation()}return ButtonManager}),define("text!widgets/brease/MessageBox/MessageBox.html",[],function(){return'<div id="{{ID}}" data-brease-widget="widgets/brease/MessageBox">\r\n\r\n    <header class="breaseMessageBoxHeader"><div></div></header>\r\n    <div class="contentBox breaseMessageBoxContentBox">\r\n        <div class="icon"></div>\r\n        <div class="content"></div>\r\n    </div>\r\n    <div class="messageBoxQuestion"></div>\r\n    <div class="messageBoxFooter">\r\n        <div id="{{ID}}_messageBox_btnOk" data-key="btnOk" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnYes" data-key="btnYes" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnNo" data-key="btnNo" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnAbort" data-key="btnAbort" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnRetry" data-key="btnRetry" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnIgnore" data-key="btnIgnore" class="messageBoxButton"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnCancel" data-key="btnCancel" class="messageBoxButton"><span class="up"></span></div>\r\n    </div>\r\n</div>\r\n'}),define("widgets/brease/MessageBox/MessageBox",["widgets/brease/Window/Window","widgets/brease/MessageBox/libs/ButtonManager","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/PopUpManager"],function(e,ButtonManager,BreaseEvent,Enum,Utils,t){"use strict";var n={modal:!0,arrow:{show:!1},forceInteraction:!0,showCloseButton:!1,position:{horizontal:"center",vertical:"middle"},html:"widgets/brease/MessageBox/MessageBox.html",icon:Enum.MessageBoxIcon.NONE,stylePrefix:"system_brease_MessageBox",width:500},i=e.extend(function MessageBox(t,n,i,s){!0===s?e.call(this,null,null,!0,!0):(e.call(this,null,null,!0,!0),o(this))},n),s=i.prototype,r=0;function o(e){require(["text!"+e.settings.html],function(t){var n="MessageBox"+(r+=1);t=t.replace(/\{\{ID\}\}/g,n),e.deferredInit(document.body,t),e.readyHandler(),brease.uiController.parse(e.elem,!1,brease.settings.globalContent)})}s.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseMessageBox"),this.settings.windowType="MessageBox",e.prototype.init.call(this,!0),this.buttonManager=new ButtonManager(this,a)},s._setDimensions=function(){e.prototype._setDimensions.call(this),void 0!==this.settings.height&&this.el.find(".contentBox").css("height",this.settings.height-42-this.el.find(".messageBoxFooter").outerHeight())},s._getOffset=function(){return 20*(t.getNumberOfWindowsOfType(this.settings.windowType)-1)},s.show=function(t){return this.deferred=$.Deferred(),void 0!==this.settings.question&&brease.language.isKey(this.settings.question.text)&&(this.settings.question.textkey=brease.language.parseKey(this.settings.question.text)),e.prototype.show.call(this,t),this.buttonManager.setButtons(this.settings.type),this.buttonManager.addEventListeners(),this.setIcon(),this._setDimensions(),this.deferred.promise()},s.hide=function(){this.buttonManager.removeEventListeners(),e.prototype.hide.call(this)},s._setContent=function(){e.prototype._setContent.call(this),void 0!==this.settings.question?this.el.find(".messageBoxQuestion").html(this.settings.question.textkey?brease.language.getTextByKey(this.settings.question.textkey):this.settings.question.text).show():this.el.find(".messageBoxQuestion").html("").hide()},s.langChangeHandler=function(){e.prototype.langChangeHandler.apply(this,arguments),this.buttonManager.setTexts()},s.setIcon=function(){var e=this.settings.icon,t=this.el.find(".icon");switch(t.removeClass("asterisk error exclamation information question stop warning hand none"),e){case Enum.MessageBoxIcon.ASTERISK:t.addClass("asterisk");break;case Enum.MessageBoxIcon.ERROR:t.addClass("error");break;case Enum.MessageBoxIcon.EXCLAMATION:t.addClass("exclamation");break;case Enum.MessageBoxIcon.INFORMATION:t.addClass("information");break;case Enum.MessageBoxIcon.QUESTION:t.addClass("question");break;case Enum.MessageBoxIcon.STOP:t.addClass("stop");break;case Enum.MessageBoxIcon.WARNING:t.addClass("warning");break;case Enum.MessageBoxIcon.HAND:t.addClass("hand");break;default:t.addClass("none");break}};function a(e){this.deferred.resolve(e),this.hide()}return i}),define("widgets/brease/NumPad/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.NumPad",parents:["*"],children:[],inheritance:["widgets.brease.NumPad","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},ShowTooltip:{method:"showTooltip"}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("widgets/brease/NumPad/libs/NumPadNumericValue",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils"],function(BreaseEvent,Enum,Utils){"use strict";var e={init:function(e){return this.numericValueVal=e.el.find(".breaseNumpadNumericValue"),this.settings={error:!1},this},setSettings:function(e,t,n,i,s,r,o){this.settings.minValue=e,this.settings.maxValue=t,this.settings.smallChange=n,this.settings.largeChange=i,this.settings.numberFormat=s,this.settings.useDigitGrouping=r,this.settings.separators=o},setValue:function(e,n){if(void 0!==e&&(this.value=e,null!==this.value)){var i=Math.round(e/this.settings.smallChange)*this.settings.smallChange,s;i=t(i,this.settings.minValue,this.settings.maxValue),i>=this.settings.minValue&&i<=this.settings.maxValue&&(this.value=i,null===this.value?this.numericValueVal.text(brease.settings.noValueString):this.numericValueVal.text(brease.formatter.formatNumber(this.value,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators)))}},setValueAsString:function(e){this.numericValueVal.text(brease.formatter.formatNumber(Number(e),this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators))},setError:function(e){this.settings.error=e,this.numericValueVal.toggleClass("error",e)},getLimit:function(e,n,i){return t(e,n,i)}};function t(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}return e}),define("widgets/brease/NumPad/libs/NumPadSlider",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils"],function(BreaseEvent,Enum,Utils){"use strict";var e={init:function(e){return this.thumb=e.el.find(".numpadSlider_thumb"),this.track=e.el.find(".numpadSlider_track"),this.outputVal=e.el.find(".numpadSlider_output span"),this.settings={error:!1,width:this.track.outerWidth(),thumbWidth:this.thumb.outerWidth(),zoomFactor:this.getZoomFactor()},this.changeHandler=e._onSliderChanged.bind(e),this.thumb.on(BreaseEvent.MOUSE_DOWN,this.onMouseDown.bind(this)),this.track.on(BreaseEvent.CLICK,this.trackClickHandler.bind(this)),this.bound_onMouseMove=this.onMouseMove.bind(this),this.bound_onMouseUp=this.onMouseUp.bind(this),this},update:function(){this.settings.zoomFactor=this.getZoomFactor()},setSettings:function(e,t,n,i,s,r,o){this.settings.minValue=e,this.settings.maxValue=t,this.settings.smallChange=n,this.settings.largeChange=i,this.settings.numberFormat=s,this.settings.useDigitGrouping=r,this.settings.separators=o},setValue:function(e,n){if(void 0!==e&&(this.value=e,null!==this.value)){var i=Math.round(e/this.settings.smallChange)*this.settings.smallChange,s;i=t(i,this.settings.minValue,this.settings.maxValue),s=this.valToPos(i),i>=this.settings.minValue&&i<=this.settings.maxValue&&(this.value=i,this.setPosition(s),this.setOutput(),!0!==n&&this.changeHandler({detail:{value:this.value}}))}},setValueAsString:function(e){this.outputVal.text(e)},setOutput:function(){null===this.value?this.outputVal.text(brease.settings.noValueString):this.outputVal.text(brease.formatter.formatNumber(this.value,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators))},setError:function(e){var t=e!==this.settings.error;this.settings.error=e,t&&(e?this.outputVal.addClass("error"):this.outputVal.removeClass("error"))},onMouseDown:function(e){this.mouseMove=!0,i.call(this,e),brease.bodyEl.on(BreaseEvent.MOUSE_MOVE,this.bound_onMouseMove),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this.bound_onMouseUp)},onMouseMove:function(e){n.call(this,e)},onMouseUp:function(e){this.mouseMove=!1,brease.bodyEl.off(BreaseEvent.MOUSE_MOVE),brease.bodyEl.off(BreaseEvent.MOUSE_UP),n.call(this,e)},getZoomFactor:function(){var e=brease.bodyEl.css("zoom");return void 0===e||"normal"===e||"auto"===e?1:parseFloat(e)},trackClickHandler:function(e){var n=this.value;if(!this.mouseMove){var i=this.calcOffset(e),s=this.calcStep(i,n);s=t(s,this.settings.minValue,this.settings.maxValue),this.setValue(s)}this.mouseMove=!1},calcOffset:function(e){var t=this.thumb.offset().left;return Utils.getOffsetOfEvent(e).x/this.settings.zoomFactor-t-this.settings.thumbWidth/2},calcStep:function(e,t){var n;return e>0?n=t+this.settings.largeChange:e<0&&(n=t-this.settings.largeChange),n},posToVal:function(e){var n=this.settings.width*this.settings.zoomFactor;return t(e*(this.settings.maxValue/n-this.settings.minValue/n)+this.settings.minValue,this.settings.minValue,this.settings.maxValue)},valToPos:function(e){var n;return e=t(e,this.settings.minValue,this.settings.maxValue),n=this.settings.maxValue===-this.settings.minValue?this.settings.width/this.settings.maxValue/2*e-this.rangeToPixels(this.settings.minValue):this.settings.width*e/(this.settings.maxValue-this.settings.minValue)-this.rangeToPixels(this.settings.minValue),n},rangeToPixels:function(e){var t;return t=this.settings.maxValue===-this.settings.minValue?e/2/this.settings.maxValue*this.settings.width:e*this.settings.width/(this.settings.maxValue-this.settings.minValue),t},setPosition:function(e){this.thumb.css("left",e-this.settings.thumbWidth/2)}};function t(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function n(e){var t=Utils.getOffsetOfEvent(e).x,n=t-this.thumbOffset*this.settings.zoomFactor,i=this.posToVal(n);this.setValue(i)}function i(e){this.thumbOffset=this.track.offset().left}return e}),define("text!widgets/brease/NumPad/NumPad.html",[],function(){
return'<div id="breaseNumPad" data-brease-widget="widgets/brease/NumPad">\r\n    <header class="numpadHeader">\r\n        <div></div>\r\n    </header>\r\n    <div class="numpadWrapper">\r\n        <div class="numpad">\r\n            <section class="breaseNumPadTop">\r\n\r\n                <div class="breaseNumpadSliderWrapper">\r\n                    <div class="minValueBox">\r\n                        <label>min</label>\r\n                        <div class="minValue">0</div>\r\n                    </div>\r\n                    <div class="breaseNumpadSlider">\r\n                        <div class="numpadSlider_track"><div class="numpadSlider_track_inner">&nbsp;</div></div>\r\n                        <div class="numpadSlider_thumb">\r\n                            <div class="numpadSlider_knob"></div>\r\n                            <div class="numpadSlider_output"><span></span></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="maxValueBox">\r\n                        <label>max</label>\r\n                        <div class="maxValue">0</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="breaseNumpadNumericValueOutterWrapper">\r\n                    <div class="breaseNumpadNumericValueInnerWrapper">\r\n                        <div class="breaseNumpadNumericValue"></div>\r\n                    </div>\r\n                    <div class="minValueBox">\r\n                        <label>min</label>\r\n                        <div class="minValue">0</div>\r\n                    </div>\r\n                    <div class="maxValueBox">\r\n                        <label>max</label>\r\n                        <div class="maxValue">0</div>\r\n                    </div>\r\n                </div>\r\n\r\n            </section>\r\n            <section class="breaseNumPadButtons">\r\n                <button data-action="value" data-value="7">7</button>\r\n                <button data-action="value" data-value="8">8</button>\r\n                <button data-action="value" data-value="9">9</button>\r\n                <button class="breaseNumPadDelete" data-action="delete"><div class="breaseNumPadDeleteIcon"></div></button>\r\n                <button data-action="value" data-value="4">4</button>\r\n                <button data-action="value" data-value="5">5</button>\r\n                <button data-action="value" data-value="6">6</button>\r\n                <button data-action="sign">+/-</button>\r\n                <button data-action="value" data-value="1">1</button>\r\n                <button data-action="value" data-value="2">2</button>\r\n                <button data-action="value" data-value="3">3</button>\r\n                <button class="breaseNumPadEnter" data-action="enter"><div class="breaseNumPadEnterIcon"></div></button>\r\n                <button data-action="value" data-value="0">0</button>\r\n                <button data-action="comma">.</button>\r\n\r\n                <div class="clearfix"></div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("widgets/brease/NumPad/NumPad",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/config/NumberFormat","widgets/brease/NumPad/libs/NumPadSlider","widgets/brease/NumPad/libs/NumPadNumericValue","brease/decorators/MeasurementSystemDependency"],function(e,BreaseEvent,Enum,Utils,NumberFormat,t,n,i){"use strict";var s={html:"widgets/brease/NumPad/NumPad.html",stylePrefix:"widgets_brease_NumPad",limitViolationPolicy:Enum.LimitViolationPolicy.NO_SUBMIT,format:{default:{decimalPlaces:1,minimumIntegerDigits:1}},width:354,arrow:{show:!0,position:"left",width:12},positionOffset:5,modal:!0,showCloseButton:!0,scale2fit:!0,precision:6,maxBtnMargin:20},r,o=e.extend(function NumPad(t,n,i,s){if(!0===s)e.call(this,null,null,!0,!0),l(this);else{if(void 0!==r)return r;e.call(this,null,null,!0,!0),l(this),r=this}},s),a=o.prototype;a.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseNumPad"),this.settings.windowType="NumPad",e.prototype.init.call(this,!0),this.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),this.settings.numberFormat=NumberFormat.getFormat(this.settings.format,this.settings.mms),this.settings.separators=brease.user.getSeparators(),this.minEl=this.el.find(".minValue"),this.maxEl=this.el.find(".maxValue"),this.buttons={sign:this.el.find('button[data-action="sign"]'),comma:this.el.find('button[data-action="comma"]'),delete:this.el.find('button[data-action="delete"]'),enter:this.el.find('button[data-action="enter"]')},this.error=!1,this.numRegExp=new RegExp("[0-9]"),this.btnsInARow=4},a.show=function(t,n){t=C(t),e.prototype.show.call(this,t,n),this.closeOnLostContent(n),this.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),this.settings.numberFormat=NumberFormat.getFormat(this.settings.format,this.settings.mms),this.settings.separators=brease.user.getSeparators(),this.settings.smallChange=this.settings.numberFormat.decimalPlaces>0?1/Math.pow(10,this.settings.numberFormat.decimalPlaces):1,void 0!==this.settings.minValue&&void 0!==this.settings.maxValue?(this.settings.largeChange=Math.pow(10,Math.round(Math.log10(this.settings.maxValue/10-this.settings.minValue/10))),p.call(this)):this.settings.largeChange=10*this.settings.smallChange;var i=m.call(this,this.settings.minValue);this.minEl.html(g.call(this,i));var s=v.call(this,this.settings.maxValue);this.maxEl.html(g.call(this,s)),this.slider.setSettings(i,s,this.settings.smallChange,this.settings.largeChange,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators),this.slider.update(),this.numericValue.setSettings(i,s,this.settings.smallChange,this.settings.largeChange,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators),this.setValue(this.settings.value),this.outputIsInitialized=!1,this.buttons.comma.html(this.settings.separators.dsp),!0!==this.eventsAttached&&d.call(this)},a.setStyle=function(t){var n=this;this.el.removeClass(function(e,t){var i=new RegExp("\\b"+n.settings.stylePrefix+"\\S+","g");return(t.match(i)||[]).join(" ")}),"default"!==t&&Utils.addClass(this.el,this.settings.stylePrefix+"_style_default"),e.prototype.setStyle.call(this,t),A(this)},a.hide=function(){!0===this.eventsAttached&&c.call(this),e.prototype.hide.call(this)},a.setValue=function(e){y.call(this,e),this.slider.setValue(this.getValue(),!0),this.numericValue.setValue(this.getValue(),!0)},a.setValueAsString=function(e,t,n){e=0===e.indexOf("0")&&1!==e.indexOf(this.settings.separators.dsp)?e.substring(1):e,e=""!==e&&"-"!==e?e:"-"===e?"-0":"0";var i=brease.formatter.parseFloat(e,this.settings.separators);isNaN(i)?(this.strValue=t||this.strValue,this.value=brease.formatter.parseFloat(this.strValue,this.settings.separators)):(this.strValue=e,this.value=""!==this.strValue?brease.formatter.parseFloat(this.strValue,this.settings.separators):0,this.slider.setValue(this.value,!0),this.slider.setValueAsString(this.strValue),this.numericValue.setValue(this.value,!0),this.numericValue.setValueAsString(this.value),"-"===this.strValue.substring(0,1)?E(this,!0):E(this,!1),f.call(this,this.value)),!0!==n&&(this.outputIsInitialized=!0)},a.getValue=function(){return this.value},a._buttonClickHandler=function(e){this._handleEvent(e,!0);var t=$(e.currentTarget),n=""+t.attr("data-action"),i=t.attr("data-value"),s=this.strValue,r;switch(n){case"delete":this.setValueAsString(s.substring(0,s.length-1),s),this.outputIsInitialized=!0;break;case"comma":!1===this.outputIsInitialized&&(s="0"),-1===s.indexOf(this.settings.separators.dsp)&&(this.setValueAsString(s+this.settings.separators.dsp,s),this.outputIsInitialized=!0);break;case"sign":var o=!0;this.negativeSign?(r=s.replace("-",""),o=!1):(r="-"+s,o=!0),E(this,o),this.setValueAsString(r,s,!0);break;case"enter":I.call(this),this.outputIsInitialized=!0;break;case"value":if(!1===this.outputIsInitialized)this.setValueAsString(("-"===s.substring(0,1)?"-":"")+i,s),this.outputIsInitialized=!0;else{r=s+i;var a=r.indexOf(this.settings.separators.dsp);(-1!==a?r.substring(a+1):"").length<=this.settings.numberFormat.decimalPlaces&&(this.setValueAsString(s+i,s),this.outputIsInitialized=!0)}break}},a._keyDownHandler=function(e){8===e.keyCode&&(e.preventDefault(),this._keyUpHandler(e))},a._keyUpHandler=function(e){var t=String.fromCharCode(e.keyCode||e.charCode);this.numRegExp.test(t)?this.el.find('button[data-value="'+t+'"]').triggerHandler({type:this.eventName}):","===t?this.buttons.comma.triggerHandler({type:this.eventName}):"-"===t||"+"===t?this.buttons.sign.triggerHandler({type:this.eventName}):8===e.keyCode?this.buttons.delete.triggerHandler({type:this.eventName}):13===e.keyCode&&this.buttons.enter.triggerHandler({type:this.eventName})},a._onSliderChanged=function(e){this.getValue()!==e.detail.value&&(this.outputIsInitialized=!1,y.call(this,e.detail.value))},a.measurementSystemChangeHandler=function(){this.hide()};function l(e){require(["text!"+e.settings.html],function(i){e.deferredInit.call(e,document.body,i,!0),e.slider=t.init(e),e.numericValue=n.init(e),e.readyHandler()})}function d(){this.eventName=w(brease.config.virtualKeyboards),this.el.find(".breaseNumPadButtons button").on(BreaseEvent.MOUSE_DOWN,this._bind(u)).on(this.eventName,this._bind("_buttonClickHandler")),brease.bodyEl.on("keydown",this._bind("_keyDownHandler")),brease.bodyEl.on("keypress",this._bind("_keyUpHandler")),this.eventsAttached=!0}function c(){this.el.find(".breaseNumPadButtons button").off(),brease.bodyEl.off("keydown",this._bind("_keyDownHandler")),brease.bodyEl.off("keypress",this._bind("_keyUpHandler")),this.eventsAttached=!1}function u(e){this.activeButton&&Utils.removeClass(this.activeButton,"active"),this.activeButton=e.target,Utils.addClass(this.activeButton,"active"),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind(h))}function h(){brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind(h)),Utils.removeClass(this.activeButton,"active"),this.activeButton=void 0}function g(e){return isNaN(e)?brease.settings.noValueString:brease.formatter.formatNumber(e,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators)}function f(e){return e<this.settings.minValue?this.error=!0:e>this.settings.maxValue?this.error=!0:this.error=!1,this.slider.setError(this.error),this.numericValue.setError(this.error),e}function p(){this.settings.minValue=brease.formatter.roundToSignificant(this.settings.minValue,this.settings.precision),this.settings.maxValue=brease.formatter.roundToSignificant(this.settings.maxValue,this.settings.precision)}function m(e){return b.call(this,e,"min")}function v(e){return b.call(this,e,"max")}function b(e,t){var n=Math.abs(e),i=Math.max(1,Math.pow(10,this.settings.numberFormat.decimalPlaces)),s=brease.formatter.roundToFormat(e,this.settings.numberFormat.decimalPlaces);return"max"===t&&s>e&&n>1/i&&(s-=1/i),"min"===t&&s<e&&n>1/i&&(s+=1/i),s}function y(e){this.value=f.call(this,e),this.strValue=g.call(this,this.value),this.numericValue.setValue(this.getValue()),this.numericValue.setValueAsString(this.getValue()),this.value>=0?E(this,!1):E(this,!0)}function E(e,t){t!==e.negativeSign&&(e.negativeSign=t,!0===t?e.buttons.sign.addClass("active"):e.buttons.sign.removeClass("active"))}function A(e){var t=parseInt(e.buttons.sign.css("margin-left"),10),n=parseInt(e.buttons.sign.css("margin-right"),10),i=parseInt(e.buttons.sign.css("margin-top"),10),s=parseInt(e.buttons.sign.css("margin-bottom"),10),r=$("button",".numpad .breaseNumPadButtons"),o=r.outerWidth(),a=$('button[data-value="0"]',".numpad .breaseNumPadButtons"),l=$(".breaseNumPadEnter",".numpad .breaseNumPadButtons");if(0!==t||0!==n){t>=e.maxBtnMargin&&(r.css("margin-left",e.maxBtnMargin+"px"),t=e.maxBtnMargin),n>=e.maxBtnMargin&&(r.css("margin-right",e.maxBtnMargin+"px"),n=e.maxBtnMargin);var d=0!==t?t*e.btnsInARow:0,c=0!==n?n*e.btnsInARow:0;e.el.width(e.el.width()+d+c),a.outerWidth(2*o+t+n),l.outerHeight(2*a.outerHeight()+i+s),$(".numpad",e.el).addClass("solidBtnBorder")}else $(".numpad",e.el).removeClass("solidBtnBorder"),a.outerWidth(2*o),l.outerHeight(2*a.outerHeight());var u=$(".breaseNumpadNumericValueOutterWrapper",".numpad").eq(0).is(":visible");e.el.toggleClass(e.settings.stylePrefix+"_style_slider_invisible",u);var h=parseInt(e.el.css("border-radius"),10);h>12&&($(".numpadHeader").css("border-top-left-radius",h+"px"),$(".numpadHeader").css("border-top-right-radius",h+"px"),$(".numpadWrapper").css("border-bottom-left-radius",.7*h+"px"),$(".numpadWrapper").css("border-bottom-right-radius",.7*h+"px"),h>24&&e.closeButton.css("right","-4px")),e.settings.width=e.el.outerWidth(),e._setDimensions(),e._setPosition(),(e.el.outerHeight()-2*e.settings.arrow.width)%parseInt(e.arrow.css("top"),10)<=1&&h>0&&e.arrow.css("top",parseInt(e.arrow.css("top"),10)-h+"px")}function I(){var e=!1,t=!1,n=this.getValue();if(n>=this.settings.minValue&&n<=this.settings.maxValue)e=!0,t=!0;else switch(this.settings.limitViolationPolicy){case Enum.LimitViolationPolicy.NO_SUBMIT:e=!1,t=!1;break;case Enum.LimitViolationPolicy.NO_SUBMIT_AND_CLOSE:e=!1,t=!0;break;case Enum.LimitViolationPolicy.SUBMIT_ALL:e=!0,t=!0;break;case Enum.LimitViolationPolicy.SET_TO_LIMIT:Math.abs(n-this.settings.maxValue)<Math.abs(n-this.settings.minValue)?this.setValue(this.settings.maxValue):this.setValue(this.settings.minValue),e=!1,t=!1;break;case Enum.LimitViolationPolicy.SET_TO_LIMIT_AND_SUBMIT:Math.abs(n-this.settings.maxValue)<Math.abs(n-this.settings.minValue)?this.setValue(this.settings.maxValue):this.setValue(this.settings.minValue),e=!0,t=!0;break}!0===e&&this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:{value:this.getValue()}})),!0===t&&this.hide()}function C(e){if(e.arrow=e.arrow||{},e.position){var t=e.position;"left"===t.horizontal?(e.position.vertical="middle",e.arrow.position="right",e.arrow.show=!0):"right"===t.horizontal?(e.position.vertical="middle",e.arrow.position="left",e.arrow.show=!0):"top"===t.vertical?(e.position.horizontal="center",e.arrow.position="bottom",e.arrow.show=!0):"bottom"===t.vertical?(e.position.horizontal="center",e.arrow.position="top",e.arrow.show=!0):(e.position.vertical="middle",e.position.horizontal="center",e.arrow.show=!1)}else e.position={vertical:"middle",horizontal:"center"},e.arrow.show=!1;return e}function w(e){return e&&e.InputProcessing&&!0===e.InputProcessing.onKeyDown?BreaseEvent.MOUSE_DOWN:BreaseEvent.CLICK}return i.decorate(o,!0)}),define("widgets/brease/Rectangle/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var n={meta:{className:"widgets.brease.Rectangle",parents:["*"],children:[],inheritance:["widgets.brease.Rectangle","brease.core.BaseWidget"],actions:{SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}},properties:{}}};return e.classExtension&&(n.classExtension=e.classExtension),t&&(n.classExtension=t),n}),define("text!widgets/brease/Rectangle/Rectangle.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/Rectangle"></div>\r\n'}),define("widgets/brease/Rectangle/Rectangle",["brease/core/BaseWidget","brease/enum/Enum","brease/core/Types"],function(e,Enum,Types){"use strict";var t={},n=e.extend(function Rectangle(){e.apply(this,arguments)},t);return n.prototype.init=function(){!0!==this.settings.omitClass&&this.addInitialClass("breaseRectangle"),this._invalidate(),e.prototype.init.call(this)},n}),define("text!widgets/brease/Window/Window.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/Window">\r\n    <header>\r\n        <div></div>\r\n    </header>\r\n    <div class="contentBox">\r\n        <div class="content"></div>\r\n    </div>\r\n</div>\r\n'}),require.config({waitSeconds:30,paths:{text:"libs/require_plugins/text",css:"libs/require_plugins/css","css-build":"libs/require_plugins/css-build",requireLib:"libs/require",globalize:"libs/globalize",hammer:"libs/hammer.min",mappView:"../mappView",ace:"libs/ace"},shim:{jquery:{exports:"jquery"},"libs/lodash":{exports:"_"},"libs/pdfobject":{exports:"PDFObject"},"libs/jquery/jquery.extensions":["jquery"],"libs/jquery/jquery.mobile.virtualMouse":["jquery"],"libs/jquery/jquery-ui-1.10.3.custom":["jquery"],"libs/jquery/jquery-ui-1.10.4.custom":["jquery"]}}),void 0===window.performanceMonitor&&(window.performanceMonitor={profile:function(){}}),define("require_config",function(){});